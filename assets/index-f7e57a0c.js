var e,t,n,r,s,a,i,o,l,c,d,u,h,p,f,m,g,v,y,x,b,w,k,S,j,_,A,E,T,N,C,P,R,M,I,O,z,D,L,F,B,U,W,V,H,q,G,K,X,Y,J,Z,Q,ee,te,ne,re,se,ae,ie,oe,le,ce,de,ue,he,pe,fe,me,ge,ve,ye,xe,be,we,ke,Se,je,_e,Ae,Ee,Te,Ne,Ce,Pe,Re,Me,Ie,Oe,ze,De,Le,Fe,Be,Ue,We,$e,Ve,He,qe,Ge,Ke,Xe,Ye,Je,Ze,Qe,et,tt,nt,rt,st,at,it,ot,lt,ct,dt,ut,ht,pt,ft,mt,gt,vt,yt,xt,bt,wt,kt,St,jt,_t,At,Et,Tt,Nt,Ct,Pt,Rt,Mt,It,Ot,zt,Dt,Lt,Ft,Bt,Ut,Wt,$t,Vt,Ht,qt,Gt,Kt,Xt,Yt,Jt,Zt,Qt,en,tn,nn,rn,sn,an,on,ln,cn,dn,un,hn,pn,fn,mn,gn,vn,yn,xn,bn,wn,kn,Sn,jn,_n,An,En,Tn,Nn,Cn,Pn,Rn,Mn,In,On,zn,Dn,Ln,Fn,Bn,Un,Wn,$n,Vn,Hn,qn,Gn,Kn,Xn,Yn,Jn,Zn,Qn,er,tr,nr,rr,sr,ar,ir,or,lr,cr,dr,ur,hr,pr,fr,mr,gr,vr,yr,xr,br,wr,kr,Sr,jr,_r,Ar,Er,Tr,Nr,Cr,Pr,Rr,Mr,Ir,Or,zr,Dr,Lr,Fr,Br,Ur,Wr,$r,Vr,Hr,qr,Gr,Kr,Xr,Yr,Jr,Zr,Qr,es,ts,ns,rs,ss,as,is,os,ls,cs,ds,us,hs,ps,fs,ms,gs,vs,ys,xs,bs,ws,ks,Ss,js,_s,As,Es,Ts,Ns,Cs,Ps,Rs,Ms,Is,Os,zs,Ds,Ls,Fs,Bs,Us,Ws,$s,Vs,Hs,qs,Gs,Ks,Xs,Ys,Js,Zs,Qs,ea,ta,na,ra,sa,aa,ia,oa,la,ca,da,ua,ha,pa,fa,ma,ga,va,ya,xa,ba,wa,ka,Sa,ja,_a,Aa,Ea,Ta,Na,Ca,Pa,Ra,Ma,Ia,Oa,za,Da,La,Fa,Ba,Ua,Wa,$a,Va,Ha,qa,Ga,Ka,Xa,Ya,Ja,Za,Qa,ei,ti,ni,ri,si,ai,ii,oi,li,ci,di,ui,hi,pi,fi,mi,gi,vi,yi,xi,bi,wi,ki,Si,ji,_i,Ai,Ei,Ti,Ni,Ci,Pi,Ri,Mi,Ii,Oi,zi,Di,Li,Fi,Bi,Ui,Wi,$i,Vi,Hi,qi,Gi,Ki,Xi,Yi,Ji,Zi,Qi,eo,to,no,ro,so,ao,io,oo,lo,co,uo,ho,po,fo,mo,go,vo,yo,xo,bo,wo,ko,So,jo,_o,Ao,Eo,To,No,Co,Po,Ro,Mo,Io,Oo,zo,Do,Lo,Fo,Bo,Uo,Wo,$o,Vo,Ho,qo,Go,Ko,Xo,Yo,Jo,Zo,Qo,el,tl,nl,rl,sl,al,il,ol,ll,cl,dl,ul,hl,pl,fl,ml,gl,vl,yl,xl,bl,wl,kl,Sl,jl,_l,Al,El,Tl,Nl,Cl,Pl,Rl,Ml,Il,Ol,zl,Dl,Ll,Fl,Bl,Ul,Wl,$l,Vl,Hl,ql,Gl,Kl,Xl,Yl,Jl,Zl,Ql,ec,tc,nc,rc,sc,ac,ic,oc,lc,cc,dc,uc,hc,pc,fc,mc,gc,vc,yc,xc,bc,wc,kc,Sc,jc,_c,Ac,Ec,Tc,Nc,Cc,Pc,Rc,Mc,Ic,Oc,zc,Dc,Lc,Fc,Bc,Uc,Wc,$c,Vc,Hc,qc,Gc,Kc,Xc,Yc,Jc,Zc,Qc,ed,td,nd,rd,sd,ad,id,od,ld,cd,dd,ud,hd,pd,fd,md,gd,vd,yd,xd,bd,wd,kd,Sd,jd,_d,Ad,Ed,Td,Nd,Cd,Pd,Rd,Md,Id,Od,zd,Dd,Ld,Fd,Bd,Ud,Wd,$d,Vd,Hd,qd,Gd,Kd,Xd,Yd,Jd,Zd,Qd,eu,tu,nu,ru,su,au,iu,ou,lu,cu,du,uu,hu,pu,fu,mu,gu,vu,yu,xu,bu,wu,ku,Su,ju,_u,Au,Eu,Tu,Nu,Cu,Pu,Ru,Mu,Iu,Ou,zu,Du,Lu,Fu,Bu,Uu,Wu,$u,Vu,Hu,qu,Gu,Ku,Xu,Yu,Ju,Zu,Qu,eh,th,nh,rh,sh,ah,ih,oh,lh,ch,dh,uh,hh,ph,fh,mh,gh,vh,yh,xh,bh,wh,kh,Sh,jh,_h,Ah,Eh,Th,Nh,Ch,Ph,Rh,Mh,Ih,Oh,zh,Dh,Lh,Fh,Bh,Uh,Wh,$h,Vh,Hh,qh,Gh,Kh,Xh,Yh,Jh,Zh,Qh,ep,tp,np,rp,sp,ap,ip,op,lp,cp,dp,up,hp,pp,fp,mp,gp,vp,yp,xp,bp,wp,kp,Sp,jp,_p,Ap,Ep,Tp,Np,Cp,Pp,Rp,Mp,Ip,Op,zp,Dp,Lp,Fp,Bp,Up,Wp,$p,Vp,Hp,qp,Gp,Kp,Xp,Yp,Jp,Zp,Qp,ef,tf,nf,rf,sf,af,of,lf,cf,df,uf,hf,pf,ff,mf,gf,vf,yf,xf,bf,wf,kf,Sf,jf,_f,Af,Ef,Tf,Nf,Cf,Pf,Rf,Mf,If,Of,zf,Df=Object.defineProperty,Lf=(e,t,n)=>(((e,t,n)=>{t in e?Df(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ff=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Bf=(e,t,n)=>(Ff(e,t,"read from private field"),n?n.call(e):t.get(e)),Uf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Wf=(e,t,n,r)=>(Ff(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),$f=(e,t,n,r)=>({set _(r){Wf(e,t,r,n)},get _(){return Bf(e,t,r)}}),Vf=(e,t,n)=>(Ff(e,t,"access private method"),n);function Hf(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const qf={},Gf=function(e,t,n){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/paleta/"+e}(e))in qf)return;qf[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const s=r[n];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Kf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xf(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var Yf={exports:{}},Jf={},Zf={exports:{}},Qf={},em=Symbol.for("react.element"),tm=Symbol.for("react.portal"),nm=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),im=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),cm=Symbol.for("react.memo"),dm=Symbol.for("react.lazy"),um=Symbol.iterator;var hm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pm=Object.assign,fm={};function mm(e,t,n){this.props=e,this.context=t,this.refs=fm,this.updater=n||hm}function gm(){}function vm(e,t,n){this.props=e,this.context=t,this.refs=fm,this.updater=n||hm}mm.prototype.isReactComponent={},mm.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},mm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},gm.prototype=mm.prototype;var ym=vm.prototype=new gm;ym.constructor=vm,pm(ym,mm.prototype),ym.isPureReactComponent=!0;var xm=Array.isArray,bm=Object.prototype.hasOwnProperty,wm={current:null},km={key:!0,ref:!0,__self:!0,__source:!0};function Sm(e,t,n){var r,s={},a=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)bm.call(t,r)&&!km.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return{$$typeof:em,type:e,key:a,ref:i,props:s,_owner:wm.current}}function jm(e){return"object"==typeof e&&null!==e&&e.$$typeof===em}var _m=/\/+/g;function Am(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function Em(e,t,n,r,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case em:case tm:i=!0}}if(i)return s=s(i=e),e=""===r?"."+Am(i,0):r,xm(s)?(n="",null!=e&&(n=e.replace(_m,"$&/")+"/"),Em(s,t,n,"",function(e){return e})):null!=s&&(jm(s)&&(s=function(e,t){return{$$typeof:em,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(_m,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=""===r?".":r+":",xm(e))for(var o=0;o<e.length;o++){var l=r+Am(a=e[o],o);i+=Em(a,t,n,l,s)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=um&&e[um]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(a=e.next()).done;)i+=Em(a=a.value,t,n,l=r+Am(a,o++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Tm(e,t,n){if(null==e)return e;var r=[],s=0;return Em(e,r,"","",function(e){return t.call(n,e,s++)}),r}function Nm(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var Cm={current:null},Pm={transition:null},Rm={ReactCurrentDispatcher:Cm,ReactCurrentBatchConfig:Pm,ReactCurrentOwner:wm};function Mm(){throw Error("act(...) is not supported in production builds of React.")}Qf.Children={map:Tm,forEach:function(e,t,n){Tm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tm(e,function(){t++}),t},toArray:function(e){return Tm(e,function(e){return e})||[]},only:function(e){if(!jm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Qf.Component=mm,Qf.Fragment=nm,Qf.Profiler=sm,Qf.PureComponent=vm,Qf.StrictMode=rm,Qf.Suspense=lm,Qf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rm,Qf.act=Mm,Qf.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pm({},e.props),s=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=wm.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)bm.call(t,l)&&!km.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:em,type:e.type,key:s,ref:a,props:r,_owner:i}},Qf.createContext=function(e){return(e={$$typeof:im,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:am,_context:e},e.Consumer=e},Qf.createElement=Sm,Qf.createFactory=function(e){var t=Sm.bind(null,e);return t.type=e,t},Qf.createRef=function(){return{current:null}},Qf.forwardRef=function(e){return{$$typeof:om,render:e}},Qf.isValidElement=jm,Qf.lazy=function(e){return{$$typeof:dm,_payload:{_status:-1,_result:e},_init:Nm}},Qf.memo=function(e,t){return{$$typeof:cm,type:e,compare:void 0===t?null:t}},Qf.startTransition=function(e){var t=Pm.transition;Pm.transition={};try{e()}finally{Pm.transition=t}},Qf.unstable_act=Mm,Qf.useCallback=function(e,t){return Cm.current.useCallback(e,t)},Qf.useContext=function(e){return Cm.current.useContext(e)},Qf.useDebugValue=function(){},Qf.useDeferredValue=function(e){return Cm.current.useDeferredValue(e)},Qf.useEffect=function(e,t){return Cm.current.useEffect(e,t)},Qf.useId=function(){return Cm.current.useId()},Qf.useImperativeHandle=function(e,t,n){return Cm.current.useImperativeHandle(e,t,n)},Qf.useInsertionEffect=function(e,t){return Cm.current.useInsertionEffect(e,t)},Qf.useLayoutEffect=function(e,t){return Cm.current.useLayoutEffect(e,t)},Qf.useMemo=function(e,t){return Cm.current.useMemo(e,t)},Qf.useReducer=function(e,t,n){return Cm.current.useReducer(e,t,n)},Qf.useRef=function(e){return Cm.current.useRef(e)},Qf.useState=function(e){return Cm.current.useState(e)},Qf.useSyncExternalStore=function(e,t,n){return Cm.current.useSyncExternalStore(e,t,n)},Qf.useTransition=function(){return Cm.current.useTransition()},Qf.version="18.3.1",Zf.exports=Qf;var Im=Zf.exports;const Om=Kf(Im),zm=Hf({__proto__:null,default:Om},[Im]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Dm=Im,Lm=Symbol.for("react.element"),Fm=Symbol.for("react.fragment"),Bm=Object.prototype.hasOwnProperty,Um=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wm={key:!0,ref:!0,__self:!0,__source:!0};function $m(e,t,n){var r,s={},a=null,i=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)Bm.call(t,r)&&!Wm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:Lm,type:e,key:a,ref:i,props:s,_owner:Um.current}}Jf.Fragment=Fm,Jf.jsx=$m,Jf.jsxs=$m,Yf.exports=Jf;var Vm=Yf.exports,Hm={},qm={exports:{}},Gm={},Km={exports:{}},Xm={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<a&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function b(e){if(m=!1,x(e),!f)if(null!==n(l))f=!0,R(w);else{var t=n(c);null!==t&&M(b,t.startTime-e)}}function w(t,s){f=!1,m&&(m=!1,v(_),_=-1),p=!0;var a=h;try{for(x(s),u=n(l);null!==u&&(!(u.expirationTime>s)||t&&!T());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),x(s)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&M(b,g.startTime-s),d=!1}return d}finally{u=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,_=-1,A=5,E=-1;function T(){return!(e.unstable_now()-E<A)}function N(){if(null!==j){var t=e.unstable_now();E=t;var n=!0;try{n=j(!0,t)}finally{n?k():(S=!1,j=null)}}else S=!1}if("function"==typeof y)k=function(){y(N)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,P=C.port2;C.port1.onmessage=N,k=function(){P.postMessage(null)}}else k=function(){g(N,0)};function R(e){j=e,S||(S=!0,k())}function M(t,n){_=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,R(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?i+a:i:a=i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(m?(v(_),_=-1):m=!0,M(b,a-i))):(r.sortIndex=o,t(l,r),f||p||(f=!0,R(w))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Xm),Km.exports=Xm;var Ym=Km.exports,Jm=Im,Zm=Ym;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Qm(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eg=new Set,tg={};function ng(e,t){rg(e,t),rg(e+"Capture",t)}function rg(e,t){for(tg[e]=t,e=0;e<t.length;e++)eg.add(t[e])}var sg=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ag=Object.prototype.hasOwnProperty,ig=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},lg={};function cg(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var dg={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dg[e]=new cg(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dg[t]=new cg(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){dg[e]=new cg(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dg[e]=new cg(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dg[e]=new cg(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){dg[e]=new cg(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){dg[e]=new cg(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){dg[e]=new cg(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){dg[e]=new cg(e,5,!1,e.toLowerCase(),null,!1,!1)});var ug=/[\-:]([a-z])/g;function hg(e){return e[1].toUpperCase()}function pg(e,t,n,r){var s=dg.hasOwnProperty(t)?dg[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!ag.call(lg,e)||!ag.call(og,e)&&(ig.test(e)?lg[e]=!0:(og[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ug,hg);dg[t]=new cg(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ug,hg);dg[t]=new cg(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ug,hg);dg[t]=new cg(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){dg[e]=new cg(e,1,!1,e.toLowerCase(),null,!1,!1)}),dg.xlinkHref=new cg("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){dg[e]=new cg(e,1,!1,e.toLowerCase(),null,!0,!0)});var fg=Jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mg=Symbol.for("react.element"),gg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),yg=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),bg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),kg=Symbol.for("react.forward_ref"),Sg=Symbol.for("react.suspense"),jg=Symbol.for("react.suspense_list"),_g=Symbol.for("react.memo"),Ag=Symbol.for("react.lazy"),Eg=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Ng(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Tg&&e[Tg]||e["@@iterator"])?e:null}var Cg,Pg=Object.assign;function Rg(e){if(void 0===Cg)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cg=t&&t[1]||""}return"\n"+Cg+e}var Mg=!1;function Ig(e,t){if(!e||Mg)return"";Mg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{Mg=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rg(e):""}function Og(e){switch(e.tag){case 5:return Rg(e.type);case 16:return Rg("Lazy");case 13:return Rg("Suspense");case 19:return Rg("SuspenseList");case 0:case 2:case 15:return e=Ig(e.type,!1);case 11:return e=Ig(e.type.render,!1);case 1:return e=Ig(e.type,!0);default:return""}}function zg(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case vg:return"Fragment";case gg:return"Portal";case xg:return"Profiler";case yg:return"StrictMode";case Sg:return"Suspense";case jg:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case wg:return(e.displayName||"Context")+".Consumer";case bg:return(e._context.displayName||"Context")+".Provider";case kg:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _g:return null!==(t=e.displayName||null)?t:zg(e.type)||"Memo";case Ag:t=e._payload,e=e._init;try{return zg(e(t))}catch(n){}}return null}function Dg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(t);case 8:return t===yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Lg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Fg(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Bg(e){e._valueTracker||(e._valueTracker=function(e){var t=Fg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ug(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Fg(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Wg(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $g(e,t){var n=t.checked;return Pg({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Vg(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Lg(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Hg(e,t){null!=(t=t.checked)&&pg(e,"checked",t,!1)}function qg(e,t){Hg(e,t);var n=Lg(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Kg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Kg(e,t.type,Lg(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Gg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Kg(e,t,n){"number"===t&&Wg(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xg=Array.isArray;function Yg(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Lg(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Jg(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Qm(91));return Pg({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zg(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Qm(92));if(Xg(n)){if(1<n.length)throw Error(Qm(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Lg(n)}}function Qg(e,t){var n=Lg(t.value),r=Lg(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ev(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function tv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nv(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?tv(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var rv,sv,av=(sv=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((rv=rv||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return sv(e,t)})}:sv);function iv(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ov={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lv=["Webkit","ms","Moz","O"];function cv(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ov.hasOwnProperty(e)&&ov[e]?(""+t).trim():t+"px"}function dv(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=cv(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(ov).forEach(function(e){lv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ov[t]=ov[e]})});var uv=Pg({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(e,t){if(t){if(uv[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Qm(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Qm(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qm(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Qm(62))}}function pv(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fv=null;function mv(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var gv=null,vv=null,yv=null;function xv(e){if(e=hw(e)){if("function"!=typeof gv)throw Error(Qm(280));var t=e.stateNode;t&&(t=fw(t),gv(e.stateNode,e.type,t))}}function bv(e){vv?yv?yv.push(e):yv=[e]:vv=e}function wv(){if(vv){var e=vv,t=yv;if(yv=vv=null,xv(e),t)for(e=0;e<t.length;e++)xv(t[e])}}function kv(e,t){return e(t)}function Sv(){}var jv=!1;function _v(e,t,n){if(jv)return e(t,n);jv=!0;try{return kv(e,t,n)}finally{jv=!1,(null!==vv||null!==yv)&&(Sv(),wv())}}function Av(e,t){var n=e.stateNode;if(null===n)return null;var r=fw(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Qm(231,t,typeof n));return n}var Ev=!1;if(sg)try{var Tv={};Object.defineProperty(Tv,"passive",{get:function(){Ev=!0}}),window.addEventListener("test",Tv,Tv),window.removeEventListener("test",Tv,Tv)}catch(sv){Ev=!1}function Nv(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Cv=!1,Pv=null,Rv=!1,Mv=null,Iv={onError:function(e){Cv=!0,Pv=e}};function Ov(e,t,n,r,s,a,i,o,l){Cv=!1,Pv=null,Nv.apply(Iv,arguments)}function zv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Dv(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Lv(e){if(zv(e)!==e)throw Error(Qm(188))}function Fv(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=zv(e)))throw Error(Qm(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Lv(s),e;if(a===r)return Lv(s),t;a=a.sibling}throw Error(Qm(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=a;break}if(o===r){i=!0,r=s,n=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===n){i=!0,n=a,r=s;break}if(o===r){i=!0,r=a,n=s;break}o=o.sibling}if(!i)throw Error(Qm(189))}}if(n.alternate!==r)throw Error(Qm(190))}if(3!==n.tag)throw Error(Qm(188));return n.stateNode.current===n?e:t}(e))?Bv(e):null}function Bv(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Bv(e);if(null!==t)return t;e=e.sibling}return null}var Uv=Zm.unstable_scheduleCallback,Wv=Zm.unstable_cancelCallback,$v=Zm.unstable_shouldYield,Vv=Zm.unstable_requestPaint,Hv=Zm.unstable_now,qv=Zm.unstable_getCurrentPriorityLevel,Gv=Zm.unstable_ImmediatePriority,Kv=Zm.unstable_UserBlockingPriority,Xv=Zm.unstable_NormalPriority,Yv=Zm.unstable_LowPriority,Jv=Zm.unstable_IdlePriority,Zv=null,Qv=null;var ey=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ty(e)/ny|0)|0},ty=Math.log,ny=Math.LN2;var ry=64,sy=4194304;function ay(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function iy(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=ay(o):0!==(a&=i)&&(r=ay(a))}else 0!==(i=n&~s)?r=ay(i):0!==a&&(r=ay(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ey(t)),r|=e[n],t&=~s;return r}function oy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ly(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function cy(){var e=ry;return!(4194240&(ry<<=1))&&(ry=64),e}function dy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uy(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ey(t)]=n}function hy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ey(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var py=0;function fy(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var my,gy,vy,yy,xy,by=!1,wy=[],ky=null,Sy=null,jy=null,_y=new Map,Ay=new Map,Ey=[],Ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(e,t){switch(e){case"focusin":case"focusout":ky=null;break;case"dragenter":case"dragleave":Sy=null;break;case"mouseover":case"mouseout":jy=null;break;case"pointerover":case"pointerout":_y.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ay.delete(t.pointerId)}}function Cy(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=hw(t))&&gy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Py(e){var t=uw(e.target);if(null!==t){var n=zv(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Dv(n)))return e.blockedOn=t,void xy(e.priority,function(){vy(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ry(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$y(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=hw(n))&&gy(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);fv=r,n.target.dispatchEvent(r),fv=null,t.shift()}return!0}function My(e,t,n){Ry(e)&&n.delete(t)}function Iy(){by=!1,null!==ky&&Ry(ky)&&(ky=null),null!==Sy&&Ry(Sy)&&(Sy=null),null!==jy&&Ry(jy)&&(jy=null),_y.forEach(My),Ay.forEach(My)}function Oy(e,t){e.blockedOn===t&&(e.blockedOn=null,by||(by=!0,Zm.unstable_scheduleCallback(Zm.unstable_NormalPriority,Iy)))}function zy(e){function t(t){return Oy(t,e)}if(0<wy.length){Oy(wy[0],e);for(var n=1;n<wy.length;n++){var r=wy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ky&&Oy(ky,e),null!==Sy&&Oy(Sy,e),null!==jy&&Oy(jy,e),_y.forEach(t),Ay.forEach(t),n=0;n<Ey.length;n++)(r=Ey[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ey.length&&null===(n=Ey[0]).blockedOn;)Py(n),null===n.blockedOn&&Ey.shift()}var Dy=fg.ReactCurrentBatchConfig,Ly=!0;function Fy(e,t,n,r){var s=py,a=Dy.transition;Dy.transition=null;try{py=1,Uy(e,t,n,r)}finally{py=s,Dy.transition=a}}function By(e,t,n,r){var s=py,a=Dy.transition;Dy.transition=null;try{py=4,Uy(e,t,n,r)}finally{py=s,Dy.transition=a}}function Uy(e,t,n,r){if(Ly){var s=$y(e,t,n,r);if(null===s)Db(e,t,r,Wy,n),Ny(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return ky=Cy(ky,e,t,n,r,s),!0;case"dragenter":return Sy=Cy(Sy,e,t,n,r,s),!0;case"mouseover":return jy=Cy(jy,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return _y.set(a,Cy(_y.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Ay.set(a,Cy(Ay.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ny(e,r),4&t&&-1<Ty.indexOf(e)){for(;null!==s;){var a=hw(s);if(null!==a&&my(a),null===(a=$y(e,t,n,r))&&Db(e,t,r,Wy,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Db(e,t,r,null,n)}}var Wy=null;function $y(e,t,n,r){if(Wy=null,null!==(e=uw(e=mv(r))))if(null===(t=zv(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Dv(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wy=e,null}function Vy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qv()){case Gv:return 1;case Kv:return 4;case Xv:case Yv:return 16;case Jv:return 536870912;default:return 16}default:return 16}}var Hy=null,qy=null,Gy=null;function Ky(){if(Gy)return Gy;var e,t,n=qy,r=n.length,s="value"in Hy?Hy.value:Hy.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Gy=s.slice(e,1<t?1-t:void 0)}function Xy(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yy(){return!0}function Jy(){return!1}function Zy(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Yy:Jy,this.isPropagationStopped=Jy,this}return Pg(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yy)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yy)},persist:function(){},isPersistent:Yy}),t}var Qy,ex,tx,nx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rx=Zy(nx),sx=Pg({},nx,{view:0,detail:0}),ax=Zy(sx),ix=Pg({},sx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yx,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tx&&(tx&&"mousemove"===e.type?(Qy=e.screenX-tx.screenX,ex=e.screenY-tx.screenY):ex=Qy=0,tx=e),Qy)},movementY:function(e){return"movementY"in e?e.movementY:ex}}),ox=Zy(ix),lx=Zy(Pg({},ix,{dataTransfer:0})),cx=Zy(Pg({},sx,{relatedTarget:0})),dx=Zy(Pg({},nx,{animationName:0,elapsedTime:0,pseudoElement:0})),ux=Pg({},nx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hx=Zy(ux),px=Zy(Pg({},nx,{data:0})),fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gx[e])&&!!t[e]}function yx(){return vx}var xx=Pg({},sx,{key:function(e){if(e.key){var t=fx[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xy(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yx,charCode:function(e){return"keypress"===e.type?Xy(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xy(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),bx=Zy(xx),wx=Zy(Pg({},ix,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kx=Zy(Pg({},sx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yx})),Sx=Zy(Pg({},nx,{propertyName:0,elapsedTime:0,pseudoElement:0})),jx=Pg({},ix,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_x=Zy(jx),Ax=[9,13,27,32],Ex=sg&&"CompositionEvent"in window,Tx=null;sg&&"documentMode"in document&&(Tx=document.documentMode);var Nx=sg&&"TextEvent"in window&&!Tx,Cx=sg&&(!Ex||Tx&&8<Tx&&11>=Tx),Px=String.fromCharCode(32),Rx=!1;function Mx(e,t){switch(e){case"keyup":return-1!==Ax.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ix(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ox=!1;var zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zx[e.type]:"textarea"===t}function Lx(e,t,n,r){bv(r),0<(t=Fb(t,"onChange")).length&&(n=new rx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fx=null,Bx=null;function Ux(e){Pb(e,0)}function Wx(e){if(Ug(pw(e)))return e}function $x(e,t){if("change"===e)return t}var Vx=!1;if(sg){var Hx;if(sg){var qx="oninput"in document;if(!qx){var Gx=document.createElement("div");Gx.setAttribute("oninput","return;"),qx="function"==typeof Gx.oninput}Hx=qx}else Hx=!1;Vx=Hx&&(!document.documentMode||9<document.documentMode)}function Kx(){Fx&&(Fx.detachEvent("onpropertychange",Xx),Bx=Fx=null)}function Xx(e){if("value"===e.propertyName&&Wx(Bx)){var t=[];Lx(t,Bx,e,mv(e)),_v(Ux,t)}}function Yx(e,t,n){"focusin"===e?(Kx(),Bx=n,(Fx=t).attachEvent("onpropertychange",Xx)):"focusout"===e&&Kx()}function Jx(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wx(Bx)}function Zx(e,t){if("click"===e)return Wx(t)}function Qx(e,t){if("input"===e||"change"===e)return Wx(t)}var eb="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function tb(e,t){if(eb(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ag.call(t,s)||!eb(e[s],t[s]))return!1}return!0}function nb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rb(e,t){var n,r=nb(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nb(r)}}function sb(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sb(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ab(){for(var e=window,t=Wg();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Wg((e=t.contentWindow).document)}return t}function ib(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ob(e){var t=ab(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sb(n.ownerDocument.documentElement,n)){if(null!==r&&ib(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=rb(n,a);var i=rb(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lb=sg&&"documentMode"in document&&11>=document.documentMode,cb=null,db=null,ub=null,hb=!1;function pb(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;hb||null==cb||cb!==Wg(r)||("selectionStart"in(r=cb)&&ib(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ub&&tb(ub,r)||(ub=r,0<(r=Fb(db,"onSelect")).length&&(t=new rx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cb)))}function fb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mb={animationend:fb("Animation","AnimationEnd"),animationiteration:fb("Animation","AnimationIteration"),animationstart:fb("Animation","AnimationStart"),transitionend:fb("Transition","TransitionEnd")},gb={},vb={};function yb(e){if(gb[e])return gb[e];if(!mb[e])return e;var t,n=mb[e];for(t in n)if(n.hasOwnProperty(t)&&t in vb)return gb[e]=n[t];return e}sg&&(vb=document.createElement("div").style,"AnimationEvent"in window||(delete mb.animationend.animation,delete mb.animationiteration.animation,delete mb.animationstart.animation),"TransitionEvent"in window||delete mb.transitionend.transition);var xb=yb("animationend"),bb=yb("animationiteration"),wb=yb("animationstart"),kb=yb("transitionend"),Sb=new Map,jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _b(e,t){Sb.set(e,t),ng(t,[e])}for(var Ab=0;Ab<jb.length;Ab++){var Eb=jb[Ab];_b(Eb.toLowerCase(),"on"+(Eb[0].toUpperCase()+Eb.slice(1)))}_b(xb,"onAnimationEnd"),_b(bb,"onAnimationIteration"),_b(wb,"onAnimationStart"),_b("dblclick","onDoubleClick"),_b("focusin","onFocus"),_b("focusout","onBlur"),_b(kb,"onTransitionEnd"),rg("onMouseEnter",["mouseout","mouseover"]),rg("onMouseLeave",["mouseout","mouseover"]),rg("onPointerEnter",["pointerout","pointerover"]),rg("onPointerLeave",["pointerout","pointerover"]),ng("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ng("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ng("onBeforeInput",["compositionend","keypress","textInput","paste"]),ng("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ng("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ng("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tb));function Cb(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,i,o,l){if(Ov.apply(this,arguments),Cv){if(!Cv)throw Error(Qm(198));var c=Pv;Cv=!1,Pv=null,Rv||(Rv=!0,Mv=c)}}(r,t,void 0,e),e.currentTarget=null}function Pb(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Cb(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Cb(s,o,c),a=l}}}if(Rv)throw e=Mv,Rv=!1,Mv=null,e}function Rb(e,t){var n=t[lw];void 0===n&&(n=t[lw]=new Set);var r=e+"__bubble";n.has(r)||(zb(t,e,2,!1),n.add(r))}function Mb(e,t,n){var r=0;t&&(r|=4),zb(n,e,r,t)}var Ib="_reactListening"+Math.random().toString(36).slice(2);function Ob(e){if(!e[Ib]){e[Ib]=!0,eg.forEach(function(t){"selectionchange"!==t&&(Nb.has(t)||Mb(t,!1,e),Mb(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ib]||(t[Ib]=!0,Mb("selectionchange",!1,t))}}function zb(e,t,n,r){switch(Vy(t)){case 1:var s=Fy;break;case 4:s=By;break;default:s=Uy}n=s.bind(null,t,n,e),s=void 0,!Ev||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Db(e,t,n,r,s){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=uw(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}_v(function(){var r=a,s=mv(n),i=[];e:{var o=Sb.get(e);if(void 0!==o){var l=rx,c=e;switch(e){case"keypress":if(0===Xy(n))break e;case"keydown":case"keyup":l=bx;break;case"focusin":c="focus",l=cx;break;case"focusout":c="blur",l=cx;break;case"beforeblur":case"afterblur":l=cx;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ox;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kx;break;case xb:case bb:case wb:l=dx;break;case kb:l=Sx;break;case"scroll":l=ax;break;case"wheel":l=_x;break;case"copy":case"cut":case"paste":l=hx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=wx}var d=!!(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Av(f,h))&&d.push(Lb(f,m,p)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===fv||!(c=n.relatedTarget||n.fromElement)||!uw(c)&&!c[ow])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?uw(c):null)&&(c!==(u=zv(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=ox,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=wx,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:pw(l),p=null==c?o:pw(c),(o=new d(m,f+"leave",l,n,s)).target=u,o.relatedTarget=p,m=null,uw(s)===r&&((d=new d(h,f+"enter",c,n,s)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Bb(p))f++;for(p=0,m=h;m;m=Bb(m))p++;for(;0<f-p;)d=Bb(d),f--;for(;0<p-f;)h=Bb(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Bb(d),h=Bb(h)}d=null}else d=null;null!==l&&Ub(i,o,l,d,!1),null!==c&&null!==u&&Ub(i,u,c,d,!0)}if("select"===(l=(o=r?pw(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$x;else if(Dx(o))if(Vx)g=Qx;else{g=Jx;var v=Yx}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Zx);switch(g&&(g=g(e,r))?Lx(i,g,n,s):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&Kg(o,"number",o.value)),v=r?pw(r):window,e){case"focusin":(Dx(v)||"true"===v.contentEditable)&&(cb=v,db=r,ub=null);break;case"focusout":ub=db=cb=null;break;case"mousedown":hb=!0;break;case"contextmenu":case"mouseup":case"dragend":hb=!1,pb(i,n,s);break;case"selectionchange":if(lb)break;case"keydown":case"keyup":pb(i,n,s)}var y;if(Ex)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ox?Mx(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cx&&"ko"!==n.locale&&(Ox||"onCompositionStart"!==x?"onCompositionEnd"===x&&Ox&&(y=Ky()):(qy="value"in(Hy=s)?Hy.value:Hy.textContent,Ox=!0)),0<(v=Fb(r,x)).length&&(x=new px(x,e,null,n,s),i.push({event:x,listeners:v}),y?x.data=y:null!==(y=Ix(n))&&(x.data=y))),(y=Nx?function(e,t){switch(e){case"compositionend":return Ix(t);case"keypress":return 32!==t.which?null:(Rx=!0,Px);case"textInput":return(e=t.data)===Px&&Rx?null:e;default:return null}}(e,n):function(e,t){if(Ox)return"compositionend"===e||!Ex&&Mx(e,t)?(e=Ky(),Gy=qy=Hy=null,Ox=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cx&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fb(r,"onBeforeInput")).length&&(s=new px("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=y))}Pb(i,t)})}function Lb(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fb(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Av(e,n))&&r.unshift(Lb(e,a,s)),null!=(a=Av(e,t))&&r.push(Lb(e,a,s))),e=e.return}return r}function Bb(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ub(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Av(n,a))&&i.unshift(Lb(n,l,o)):s||null!=(l=Av(n,a))&&i.push(Lb(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Wb=/\r\n?/g,$b=/\u0000|\uFFFD/g;function Vb(e){return("string"==typeof e?e:""+e).replace(Wb,"\n").replace($b,"")}function Hb(e,t,n){if(t=Vb(t),Vb(e)!==t&&n)throw Error(Qm(425))}function qb(){}var Gb=null,Kb=null;function Xb(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Yb="function"==typeof setTimeout?setTimeout:void 0,Jb="function"==typeof clearTimeout?clearTimeout:void 0,Zb="function"==typeof Promise?Promise:void 0,Qb="function"==typeof queueMicrotask?queueMicrotask:void 0!==Zb?function(e){return Zb.resolve(null).then(e).catch(ew)}:Yb;function ew(e){setTimeout(function(){throw e})}function tw(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zy(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zy(t)}function nw(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function rw(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var sw=Math.random().toString(36).slice(2),aw="__reactFiber$"+sw,iw="__reactProps$"+sw,ow="__reactContainer$"+sw,lw="__reactEvents$"+sw,cw="__reactListeners$"+sw,dw="__reactHandles$"+sw;function uw(e){var t=e[aw];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ow]||n[aw]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rw(e);null!==e;){if(n=e[aw])return n;e=rw(e)}return t}n=(e=n).parentNode}return null}function hw(e){return!(e=e[aw]||e[ow])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pw(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Qm(33))}function fw(e){return e[iw]||null}var mw=[],gw=-1;function vw(e){return{current:e}}function yw(e){0>gw||(e.current=mw[gw],mw[gw]=null,gw--)}function xw(e,t){gw++,mw[gw]=e.current,e.current=t}var bw={},ww=vw(bw),kw=vw(!1),Sw=bw;function jw(e,t){var n=e.type.contextTypes;if(!n)return bw;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _w(e){return null!=(e=e.childContextTypes)}function Aw(){yw(kw),yw(ww)}function Ew(e,t,n){if(ww.current!==bw)throw Error(Qm(168));xw(ww,t),xw(kw,n)}function Tw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(Qm(108,Dg(e)||"Unknown",s));return Pg({},n,r)}function Nw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bw,Sw=ww.current,xw(ww,e),xw(kw,kw.current),!0}function Cw(e,t,n){var r=e.stateNode;if(!r)throw Error(Qm(169));n?(e=Tw(e,t,Sw),r.__reactInternalMemoizedMergedChildContext=e,yw(kw),yw(ww),xw(ww,e)):yw(kw),xw(kw,n)}var Pw=null,Rw=!1,Mw=!1;function Iw(e){null===Pw?Pw=[e]:Pw.push(e)}function Ow(){if(!Mw&&null!==Pw){Mw=!0;var e=0,t=py;try{var n=Pw;for(py=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Pw=null,Rw=!1}catch(s){throw null!==Pw&&(Pw=Pw.slice(e+1)),Uv(Gv,Ow),s}finally{py=t,Mw=!1}}return null}var zw=[],Dw=0,Lw=null,Fw=0,Bw=[],Uw=0,Ww=null,$w=1,Vw="";function Hw(e,t){zw[Dw++]=Fw,zw[Dw++]=Lw,Lw=e,Fw=t}function qw(e,t,n){Bw[Uw++]=$w,Bw[Uw++]=Vw,Bw[Uw++]=Ww,Ww=e;var r=$w;e=Vw;var s=32-ey(r)-1;r&=~(1<<s),n+=1;var a=32-ey(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,$w=1<<32-ey(t)+s|n<<s|r,Vw=a+e}else $w=1<<a|n<<s|r,Vw=e}function Gw(e){null!==e.return&&(Hw(e,1),qw(e,1,0))}function Kw(e){for(;e===Lw;)Lw=zw[--Dw],zw[Dw]=null,Fw=zw[--Dw],zw[Dw]=null;for(;e===Ww;)Ww=Bw[--Uw],Bw[Uw]=null,Vw=Bw[--Uw],Bw[Uw]=null,$w=Bw[--Uw],Bw[Uw]=null}var Xw=null,Yw=null,Jw=!1,Zw=null;function Qw(e,t){var n=SA(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ek(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Xw=e,Yw=nw(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Xw=e,Yw=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ww?{id:$w,overflow:Vw}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=SA(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Xw=e,Yw=null,!0);default:return!1}}function tk(e){return!(!(1&e.mode)||128&e.flags)}function nk(e){if(Jw){var t=Yw;if(t){var n=t;if(!ek(e,t)){if(tk(e))throw Error(Qm(418));t=nw(n.nextSibling);var r=Xw;t&&ek(e,t)?Qw(r,n):(e.flags=-4097&e.flags|2,Jw=!1,Xw=e)}}else{if(tk(e))throw Error(Qm(418));e.flags=-4097&e.flags|2,Jw=!1,Xw=e}}}function rk(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Xw=e}function sk(e){if(e!==Xw)return!1;if(!Jw)return rk(e),Jw=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Xb(e.type,e.memoizedProps)),t&&(t=Yw)){if(tk(e))throw ak(),Error(Qm(418));for(;t;)Qw(e,t),t=nw(t.nextSibling)}if(rk(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Qm(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Yw=nw(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Yw=null}}else Yw=Xw?nw(e.stateNode.nextSibling):null;return!0}function ak(){for(var e=Yw;e;)e=nw(e.nextSibling)}function ik(){Yw=Xw=null,Jw=!1}function ok(e){null===Zw?Zw=[e]:Zw.push(e)}var lk=fg.ReactCurrentBatchConfig;function ck(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Qm(309));var r=n.stateNode}if(!r)throw Error(Qm(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(Qm(284));if(!n._owner)throw Error(Qm(290,e))}return e}function dk(e,t){throw e=Object.prototype.toString.call(t),Error(Qm(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uk(e){return(0,e._init)(e._payload)}function hk(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=_A(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=NA(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===vg?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Ag&&uk(a)===t.type)?((r=s(t,n.props)).ref=ck(e,t,n),r.return=e,r):((r=AA(n.type,n.key,n.props,null,e.mode,r)).ref=ck(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=CA(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=EA(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=NA(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case mg:return(n=AA(t.type,t.key,t.props,null,e.mode,n)).ref=ck(e,null,t),n.return=e,n;case gg:return(t=CA(t,e.mode,n)).return=e,t;case Ag:return u(e,(0,t._init)(t._payload),n)}if(Xg(t)||Ng(t))return(t=EA(t,e.mode,n,null)).return=e,t;dk(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case mg:return n.key===s?l(e,t,n,r):null;case gg:return n.key===s?c(e,t,n,r):null;case Ag:return h(e,t,(s=n._init)(n._payload),r)}if(Xg(n)||Ng(n))return null!==s?null:d(e,t,n,r,null);dk(e,n)}return null}function p(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case mg:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case gg:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case Ag:return p(e,t,n,(0,r._init)(r._payload),s)}if(Xg(r)||Ng(r))return d(t,e=e.get(n)||null,r,s,null);dk(t,r)}return null}return function o(l,c,d,f){if("object"==typeof d&&null!==d&&d.type===vg&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case mg:e:{for(var m=d.key,g=c;null!==g;){if(g.key===m){if((m=d.type)===vg){if(7===g.tag){n(l,g.sibling),(c=s(g,d.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ag&&uk(m)===g.type){n(l,g.sibling),(c=s(g,d.props)).ref=ck(l,g,d),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}d.type===vg?((c=EA(d.props.children,l.mode,f,d.key)).return=l,l=c):((f=AA(d.type,d.key,d.props,null,l.mode,f)).ref=ck(l,c,d),f.return=l,l=f)}return i(l);case gg:e:{for(g=d.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(c=s(c,d.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=CA(d,l.mode,f)).return=l,l=c}return i(l);case Ag:return o(l,c,(g=d._init)(d._payload),f)}if(Xg(d))return function(s,i,o,l){for(var c=null,d=null,f=i,m=i=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(s,f,o[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(s,f),i=a(v,i,m),null===d?c=v:d.sibling=v,d=v,f=g}if(m===o.length)return n(s,f),Jw&&Hw(s,m),c;if(null===f){for(;m<o.length;m++)null!==(f=u(s,o[m],l))&&(i=a(f,i,m),null===d?c=f:d.sibling=f,d=f);return Jw&&Hw(s,m),c}for(f=r(s,f);m<o.length;m++)null!==(g=p(f,s,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),i=a(g,i,m),null===d?c=g:d.sibling=g,d=g);return e&&f.forEach(function(e){return t(s,e)}),Jw&&Hw(s,m),c}(l,c,d,f);if(Ng(d))return function(s,i,o,l){var c=Ng(o);if("function"!=typeof c)throw Error(Qm(150));if(null==(o=c.call(o)))throw Error(Qm(151));for(var d=c=null,f=i,m=i=0,g=null,v=o.next();null!==f&&!v.done;m++,v=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var y=h(s,f,v.value,l);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(s,f),i=a(y,i,m),null===d?c=y:d.sibling=y,d=y,f=g}if(v.done)return n(s,f),Jw&&Hw(s,m),c;if(null===f){for(;!v.done;m++,v=o.next())null!==(v=u(s,v.value,l))&&(i=a(v,i,m),null===d?c=v:d.sibling=v,d=v);return Jw&&Hw(s,m),c}for(f=r(s,f);!v.done;m++,v=o.next())null!==(v=p(f,s,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),i=a(v,i,m),null===d?c=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(s,e)}),Jw&&Hw(s,m),c}(l,c,d,f);dk(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(c=s(c,d)).return=l,l=c):(n(l,c),(c=NA(d,l.mode,f)).return=l,l=c),i(l)):n(l,c)}}var pk=hk(!0),fk=hk(!1),mk=vw(null),gk=null,vk=null,yk=null;function xk(){yk=vk=gk=null}function bk(e){var t=mk.current;yw(mk),e._currentValue=t}function wk(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kk(e,t){gk=e,yk=vk=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(uj=!0),e.firstContext=null)}function Sk(e){var t=e._currentValue;if(yk!==e)if(e={context:e,memoizedValue:t,next:null},null===vk){if(null===gk)throw Error(Qm(308));vk=e,gk.dependencies={lanes:0,firstContext:e}}else vk=vk.next=e;return t}var jk=null;function _k(e){null===jk?jk=[e]:jk.push(e)}function Ak(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,_k(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ek(e,r)}function Ek(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Tk=!1;function Nk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ck(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pk(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rk(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&b_){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ek(e,n)}return null===(s=r.interleaved)?(t.next=t,_k(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ek(e,n)}function Mk(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,hy(e,n)}}function Ik(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ok(e,t,n,r){var s=e.updateQueue;Tk=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,u,h):f))break e;u=Pg({},u,h);break e;case 2:Tk=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);T_|=i,e.lanes=i,e.memoizedState=u}}function zk(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!=typeof s)throw Error(Qm(191,s));s.call(r)}}}var Dk={},Lk=vw(Dk),Fk=vw(Dk),Bk=vw(Dk);function Uk(e){if(e===Dk)throw Error(Qm(174));return e}function Wk(e,t){switch(xw(Bk,t),xw(Fk,e),xw(Lk,Dk),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nv(null,"");break;default:t=nv(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}yw(Lk),xw(Lk,t)}function $k(){yw(Lk),yw(Fk),yw(Bk)}function Vk(e){Uk(Bk.current);var t=Uk(Lk.current),n=nv(t,e.type);t!==n&&(xw(Fk,e),xw(Lk,n))}function Hk(e){Fk.current===e&&(yw(Lk),yw(Fk))}var qk=vw(0);function Gk(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kk=[];function Xk(){for(var e=0;e<Kk.length;e++)Kk[e]._workInProgressVersionPrimary=null;Kk.length=0}var Yk=fg.ReactCurrentDispatcher,Jk=fg.ReactCurrentBatchConfig,Zk=0,Qk=null,eS=null,tS=null,nS=!1,rS=!1,sS=0,aS=0;function iS(){throw Error(Qm(321))}function oS(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!eb(e[n],t[n]))return!1;return!0}function lS(e,t,n,r,s,a){if(Zk=a,Qk=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yk.current=null===e||null===e.memoizedState?HS:qS,e=n(r,s),rS){a=0;do{if(rS=!1,sS=0,25<=a)throw Error(Qm(301));a+=1,tS=eS=null,t.updateQueue=null,Yk.current=GS,e=n(r,s)}while(rS)}if(Yk.current=VS,t=null!==eS&&null!==eS.next,Zk=0,tS=eS=Qk=null,nS=!1,t)throw Error(Qm(300));return e}function cS(){var e=0!==sS;return sS=0,e}function dS(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===tS?Qk.memoizedState=tS=e:tS=tS.next=e,tS}function uS(){if(null===eS){var e=Qk.alternate;e=null!==e?e.memoizedState:null}else e=eS.next;var t=null===tS?Qk.memoizedState:tS.next;if(null!==t)tS=t,eS=e;else{if(null===e)throw Error(Qm(310));e={memoizedState:(eS=e).memoizedState,baseState:eS.baseState,baseQueue:eS.baseQueue,queue:eS.queue,next:null},null===tS?Qk.memoizedState=tS=e:tS=tS.next=e}return tS}function hS(e,t){return"function"==typeof t?t(e):t}function pS(e){var t=uS(),n=t.queue;if(null===n)throw Error(Qm(311));n.lastRenderedReducer=e;var r=eS,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var o=i=null,l=null,c=a;do{var d=c.lane;if((Zk&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,i=r):l=l.next=u,Qk.lanes|=d,T_|=d}c=c.next}while(null!==c&&c!==a);null===l?i=r:l.next=o,eb(r,t.memoizedState)||(uj=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,Qk.lanes|=a,T_|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fS(e){var t=uS(),n=t.queue;if(null===n)throw Error(Qm(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var i=s=s.next;do{a=e(a,i.action),i=i.next}while(i!==s);eb(a,t.memoizedState)||(uj=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function mS(){}function gS(e,t){var n=Qk,r=uS(),s=t(),a=!eb(r.memoizedState,s);if(a&&(r.memoizedState=s,uj=!0),r=r.queue,TS(xS.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==tS&&1&tS.memoizedState.tag){if(n.flags|=2048,SS(9,yS.bind(null,n,r,s,t),void 0,null),null===w_)throw Error(Qm(349));30&Zk||vS(n,t,s)}return s}function vS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Qk.updateQueue)?(t={lastEffect:null,stores:null},Qk.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function yS(e,t,n,r){t.value=n,t.getSnapshot=r,bS(t)&&wS(e)}function xS(e,t,n){return n(function(){bS(t)&&wS(e)})}function bS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!eb(e,n)}catch(r){return!0}}function wS(e){var t=Ek(e,1);null!==t&&K_(t,e,1,-1)}function kS(e){var t=dS();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hS,lastRenderedState:e},t.queue=e,e=e.dispatch=BS.bind(null,Qk,e),[t.memoizedState,e]}function SS(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qk.updateQueue)?(t={lastEffect:null,stores:null},Qk.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jS(){return uS().memoizedState}function _S(e,t,n,r){var s=dS();Qk.flags|=e,s.memoizedState=SS(1|t,n,void 0,void 0===r?null:r)}function AS(e,t,n,r){var s=uS();r=void 0===r?null:r;var a=void 0;if(null!==eS){var i=eS.memoizedState;if(a=i.destroy,null!==r&&oS(r,i.deps))return void(s.memoizedState=SS(t,n,a,r))}Qk.flags|=e,s.memoizedState=SS(1|t,n,a,r)}function ES(e,t){return _S(8390656,8,e,t)}function TS(e,t){return AS(2048,8,e,t)}function NS(e,t){return AS(4,2,e,t)}function CS(e,t){return AS(4,4,e,t)}function PS(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function RS(e,t,n){return n=null!=n?n.concat([e]):null,AS(4,4,PS.bind(null,t,e),n)}function MS(){}function IS(e,t){var n=uS();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function OS(e,t){var n=uS();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zS(e,t,n){return 21&Zk?(eb(n,t)||(n=cy(),Qk.lanes|=n,T_|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,uj=!0),e.memoizedState=n)}function DS(e,t){var n=py;py=0!==n&&4>n?n:4,e(!0);var r=Jk.transition;Jk.transition={};try{e(!1),t()}finally{py=n,Jk.transition=r}}function LS(){return uS().memoizedState}function FS(e,t,n){var r=G_(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},US(e))WS(t,n);else if(null!==(n=Ak(e,t,n,r))){K_(n,e,r,q_()),$S(n,t,r)}}function BS(e,t,n){var r=G_(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(US(e))WS(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,eb(o,i)){var l=t.interleaved;return null===l?(s.next=s,_k(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ak(e,t,s,r))&&(K_(n,e,r,s=q_()),$S(n,t,r))}}function US(e){var t=e.alternate;return e===Qk||null!==t&&t===Qk}function WS(e,t){rS=nS=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $S(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,hy(e,n)}}var VS={readContext:Sk,useCallback:iS,useContext:iS,useEffect:iS,useImperativeHandle:iS,useInsertionEffect:iS,useLayoutEffect:iS,useMemo:iS,useReducer:iS,useRef:iS,useState:iS,useDebugValue:iS,useDeferredValue:iS,useTransition:iS,useMutableSource:iS,useSyncExternalStore:iS,useId:iS,unstable_isNewReconciler:!1},HS={readContext:Sk,useCallback:function(e,t){return dS().memoizedState=[e,void 0===t?null:t],e},useContext:Sk,useEffect:ES,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,_S(4194308,4,PS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _S(4194308,4,e,t)},useInsertionEffect:function(e,t){return _S(4,2,e,t)},useMemo:function(e,t){var n=dS();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dS();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=FS.bind(null,Qk,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},dS().memoizedState=e},useState:kS,useDebugValue:MS,useDeferredValue:function(e){return dS().memoizedState=e},useTransition:function(){var e=kS(!1),t=e[0];return e=DS.bind(null,e[1]),dS().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qk,s=dS();if(Jw){if(void 0===n)throw Error(Qm(407));n=n()}else{if(n=t(),null===w_)throw Error(Qm(349));30&Zk||vS(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,ES(xS.bind(null,r,a,e),[e]),r.flags|=2048,SS(9,yS.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=dS(),t=w_.identifierPrefix;if(Jw){var n=Vw;t=":"+t+"R"+(n=($w&~(1<<32-ey($w)-1)).toString(32)+n),0<(n=sS++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=aS++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qS={readContext:Sk,useCallback:IS,useContext:Sk,useEffect:TS,useImperativeHandle:RS,useInsertionEffect:NS,useLayoutEffect:CS,useMemo:OS,useReducer:pS,useRef:jS,useState:function(){return pS(hS)},useDebugValue:MS,useDeferredValue:function(e){return zS(uS(),eS.memoizedState,e)},useTransition:function(){return[pS(hS)[0],uS().memoizedState]},useMutableSource:mS,useSyncExternalStore:gS,useId:LS,unstable_isNewReconciler:!1},GS={readContext:Sk,useCallback:IS,useContext:Sk,useEffect:TS,useImperativeHandle:RS,useInsertionEffect:NS,useLayoutEffect:CS,useMemo:OS,useReducer:fS,useRef:jS,useState:function(){return fS(hS)},useDebugValue:MS,useDeferredValue:function(e){var t=uS();return null===eS?t.memoizedState=e:zS(t,eS.memoizedState,e)},useTransition:function(){return[fS(hS)[0],uS().memoizedState]},useMutableSource:mS,useSyncExternalStore:gS,useId:LS,unstable_isNewReconciler:!1};function KS(e,t){if(e&&e.defaultProps){for(var n in t=Pg({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function XS(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Pg({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var YS={isMounted:function(e){return!!(e=e._reactInternals)&&zv(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=q_(),s=G_(e),a=Pk(r,s);a.payload=t,null!=n&&(a.callback=n),null!==(t=Rk(e,a,s))&&(K_(t,e,s,r),Mk(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=q_(),s=G_(e),a=Pk(r,s);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Rk(e,a,s))&&(K_(t,e,s,r),Mk(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=q_(),r=G_(e),s=Pk(n,r);s.tag=2,null!=t&&(s.callback=t),null!==(t=Rk(e,s,r))&&(K_(t,e,r,n),Mk(t,e,r))}};function JS(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!tb(n,r)||!tb(s,a))}function ZS(e,t,n){var r=!1,s=bw,a=t.contextType;return"object"==typeof a&&null!==a?a=Sk(a):(s=_w(t)?Sw:ww.current,a=(r=null!=(r=t.contextTypes))?jw(e,s):bw),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=YS,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function QS(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&YS.enqueueReplaceState(t,t.state,null)}function ej(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Nk(e);var a=t.contextType;"object"==typeof a&&null!==a?s.context=Sk(a):(a=_w(t)?Sw:ww.current,s.context=jw(e,a)),s.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(XS(e,t,a,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&YS.enqueueReplaceState(s,s.state,null),Ok(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function tj(e,t){try{var n="",r=t;do{n+=Og(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function nj(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function rj(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sj="function"==typeof WeakMap?WeakMap:Map;function aj(e,t,n){(n=Pk(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){z_||(z_=!0,D_=r),rj(0,t)},n}function ij(e,t,n){(n=Pk(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){rj(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){rj(0,t),"function"!=typeof r&&(null===L_?L_=new Set([this]):L_.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function oj(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sj;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=vA.bind(null,e,t,n),t.then(e,e))}function lj(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function cj(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pk(-1,1)).tag=2,Rk(n,t,1))),n.lanes|=1),e)}var dj=fg.ReactCurrentOwner,uj=!1;function hj(e,t,n,r){t.child=null===e?fk(t,null,n,r):pk(t,e.child,n,r)}function pj(e,t,n,r,s){n=n.render;var a=t.ref;return kk(t,s),r=lS(e,t,n,r,a,s),n=cS(),null===e||uj?(Jw&&n&&Gw(t),t.flags|=1,hj(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zj(e,t,s))}function fj(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||jA(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=AA(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,mj(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:tb)(i,r)&&e.ref===t.ref)return zj(e,t,s)}return t.flags|=1,(e=_A(a,r)).ref=t.ref,e.return=t,t.child=e}function mj(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(tb(a,r)&&e.ref===t.ref){if(uj=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,zj(e,t,s);131072&e.flags&&(uj=!0)}}return yj(e,t,n,r,s)}function gj(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xw(__,j_),j_|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,xw(__,j_),j_|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xw(__,j_),j_|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xw(__,j_),j_|=r;return hj(e,t,s,n),t.child}function vj(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yj(e,t,n,r,s){var a=_w(n)?Sw:ww.current;return a=jw(t,a),kk(t,s),n=lS(e,t,n,r,a,s),r=cS(),null===e||uj?(Jw&&r&&Gw(t),t.flags|=1,hj(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zj(e,t,s))}function xj(e,t,n,r,s){if(_w(n)){var a=!0;Nw(t)}else a=!1;if(kk(t,s),null===t.stateNode)Oj(e,t),ZS(t,n,r),ej(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=Sk(c):c=jw(t,c=_w(n)?Sw:ww.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==r||l!==c)&&QS(t,i,r,c),Tk=!1;var h=t.memoizedState;i.state=h,Ok(t,r,i,s),l=t.memoizedState,o!==r||h!==l||kw.current||Tk?("function"==typeof d&&(XS(t,n,d,r),l=t.memoizedState),(o=Tk||JS(t,n,o,r,h,l,c))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ck(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:KS(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=Sk(l):l=jw(t,l=_w(n)?Sw:ww.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==u||h!==l)&&QS(t,i,r,l),Tk=!1,h=t.memoizedState,i.state=h,Ok(t,r,i,s);var f=t.memoizedState;o!==u||h!==f||kw.current||Tk?("function"==typeof p&&(XS(t,n,p,r),f=t.memoizedState),(c=Tk||JS(t,n,c,r,h,f,l)||!1)?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return bj(e,t,n,r,a,s)}function bj(e,t,n,r,s,a){vj(e,t);var i=!!(128&t.flags);if(!r&&!i)return s&&Cw(t,n,!1),zj(e,t,a);r=t.stateNode,dj.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=pk(t,e.child,null,a),t.child=pk(t,null,o,a)):hj(e,t,o,a),t.memoizedState=r.state,s&&Cw(t,n,!0),t.child}function wj(e){var t=e.stateNode;t.pendingContext?Ew(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ew(0,t.context,!1),Wk(e,t.containerInfo)}function kj(e,t,n,r,s){return ik(),ok(s),t.flags|=256,hj(e,t,n,r),t.child}var Sj,jj,_j,Aj,Ej={dehydrated:null,treeContext:null,retryLane:0};function Tj(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nj(e,t,n){var r,s=t.pendingProps,a=qk.current,i=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),xw(qk,1&a),null===e)return nk(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},1&s||null===i?i=TA(o,s,0,null):(i.childLanes=0,i.pendingProps=o),e=EA(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tj(n),t.memoizedState=Ej,e):Cj(t,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,i){if(n)return 256&t.flags?(t.flags&=-257,Pj(e,t,i,r=nj(Error(Qm(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=TA({mode:"visible",children:r.children},s,0,null),(a=EA(a,s,i,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&pk(t,e.child,null,i),t.child.memoizedState=Tj(i),t.memoizedState=Ej,a);if(!(1&t.mode))return Pj(e,t,i,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,Pj(e,t,i,r=nj(a=Error(Qm(419)),r,void 0))}if(o=0!==(i&e.childLanes),uj||o){if(null!==(r=w_)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|i))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ek(e,s),K_(r,e,s,-1))}return oA(),Pj(e,t,i,r=nj(Error(Qm(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=xA.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Yw=nw(s.nextSibling),Xw=t,Jw=!0,Zw=null,null!==e&&(Bw[Uw++]=$w,Bw[Uw++]=Vw,Bw[Uw++]=Ww,$w=e.id,Vw=e.overflow,Ww=t),t=Cj(t,r.children),t.flags|=4096,t)}(e,t,o,s,r,a,n);if(i){i=s.fallback,o=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:s.children};return 1&o||t.child===a?(s=_A(a,l)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null),null!==r?i=_A(r,i):(i=EA(i,o,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=null===(o=e.child.memoizedState)?Tj(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Ej,s}return e=(i=e.child).sibling,s=_A(i,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Cj(e,t){return(t=TA({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Pj(e,t,n,r){return null!==r&&ok(r),pk(t,e.child,null,n),(e=Cj(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Rj(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wk(e.return,t,n)}function Mj(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Ij(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(hj(e,t,r.children,n),2&(r=qk.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Rj(e,n,t);else if(19===e.tag)Rj(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xw(qk,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Gk(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Mj(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Gk(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Mj(t,!0,n,null,a);break;case"together":Mj(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Oj(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zj(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),T_|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Qm(153));if(null!==t.child){for(n=_A(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_A(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Dj(e,t){if(!Jw)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Lj(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fj(e,t,n){var r=t.pendingProps;switch(Kw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lj(t),null;case 1:case 17:return _w(t.type)&&Aw(),Lj(t),null;case 3:return r=t.stateNode,$k(),yw(kw),yw(ww),Xk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(sk(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Zw&&(Z_(Zw),Zw=null))),jj(e,t),Lj(t),null;case 5:Hk(t);var s=Uk(Bk.current);if(n=t.type,null!==e&&null!=t.stateNode)_j(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(Qm(166));return Lj(t),null}if(e=Uk(Lk.current),sk(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[aw]=t,r[iw]=a,e=!!(1&t.mode),n){case"dialog":Rb("cancel",r),Rb("close",r);break;case"iframe":case"object":case"embed":Rb("load",r);break;case"video":case"audio":for(s=0;s<Tb.length;s++)Rb(Tb[s],r);break;case"source":Rb("error",r);break;case"img":case"image":case"link":Rb("error",r),Rb("load",r);break;case"details":Rb("toggle",r);break;case"input":Vg(r,a),Rb("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Rb("invalid",r);break;case"textarea":Zg(r,a),Rb("invalid",r)}for(var i in hv(n,a),s=null,a)if(a.hasOwnProperty(i)){var o=a[i];"children"===i?"string"==typeof o?r.textContent!==o&&(!0!==a.suppressHydrationWarning&&Hb(r.textContent,o,e),s=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Hb(r.textContent,o,e),s=["children",""+o]):tg.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&Rb("scroll",r)}switch(n){case"input":Bg(r),Gg(r,a,!0);break;case"textarea":Bg(r),ev(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=qb)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{i=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=tv(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[aw]=t,e[iw]=r,Sj(e,t,!1,!1),t.stateNode=e;e:{switch(i=pv(n,r),n){case"dialog":Rb("cancel",e),Rb("close",e),s=r;break;case"iframe":case"object":case"embed":Rb("load",e),s=r;break;case"video":case"audio":for(s=0;s<Tb.length;s++)Rb(Tb[s],e);s=r;break;case"source":Rb("error",e),s=r;break;case"img":case"image":case"link":Rb("error",e),Rb("load",e),s=r;break;case"details":Rb("toggle",e),s=r;break;case"input":Vg(e,r),s=$g(e,r),Rb("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Pg({},r,{value:void 0}),Rb("invalid",e);break;case"textarea":Zg(e,r),s=Jg(e,r),Rb("invalid",e)}for(a in hv(n,s),o=s)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?dv(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&av(e,l):"children"===a?"string"==typeof l?("textarea"!==n||""!==l)&&iv(e,l):"number"==typeof l&&iv(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(tg.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Rb("scroll",e):null!=l&&pg(e,a,l,i))}switch(n){case"input":Bg(e),Gg(e,r,!1);break;case"textarea":Bg(e),ev(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Lg(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?Yg(e,!!r.multiple,a,!1):null!=r.defaultValue&&Yg(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=qb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Lj(t),null;case 6:if(e&&null!=t.stateNode)Aj(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Qm(166));if(n=Uk(Bk.current),Uk(Lk.current),sk(t)){if(r=t.stateNode,n=t.memoizedProps,r[aw]=t,(a=r.nodeValue!==n)&&null!==(e=Xw))switch(e.tag){case 3:Hb(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Hb(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[aw]=t,t.stateNode=r}return Lj(t),null;case 13:if(yw(qk),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Jw&&null!==Yw&&1&t.mode&&!(128&t.flags))ak(),ik(),t.flags|=98560,a=!1;else if(a=sk(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(Qm(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(Qm(317));a[aw]=t}else ik(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Lj(t),a=!1}else null!==Zw&&(Z_(Zw),Zw=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&qk.current?0===A_&&(A_=3):oA())),null!==t.updateQueue&&(t.flags|=4),Lj(t),null);case 4:return $k(),jj(e,t),null===e&&Ob(t.stateNode.containerInfo),Lj(t),null;case 10:return bk(t.type._context),Lj(t),null;case 19:if(yw(qk),null===(a=t.memoizedState))return Lj(t),null;if(r=!!(128&t.flags),null===(i=a.rendering))if(r)Dj(a,!1);else{if(0!==A_||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Gk(e))){for(t.flags|=128,Dj(a,!1),null!==(r=i.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(i=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xw(qk,1&qk.current|2),t.child}e=e.sibling}null!==a.tail&&Hv()>I_&&(t.flags|=128,r=!0,Dj(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Gk(i))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Dj(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!Jw)return Lj(t),null}else 2*Hv()-a.renderingStartTime>I_&&1073741824!==n&&(t.flags|=128,r=!0,Dj(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=a.last)?n.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Hv(),t.sibling=null,n=qk.current,xw(qk,r?1&n|2:1&n),t):(Lj(t),null);case 22:case 23:return rA(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&j_)&&(Lj(t),6&t.subtreeFlags&&(t.flags|=8192)):Lj(t),null;case 24:case 25:return null}throw Error(Qm(156,t.tag))}function Bj(e,t){switch(Kw(t),t.tag){case 1:return _w(t.type)&&Aw(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $k(),yw(kw),yw(ww),Xk(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Hk(t),null;case 13:if(yw(qk),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Qm(340));ik()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return yw(qk),null;case 4:return $k(),null;case 10:return bk(t.type._context),null;case 22:case 23:return rA(),null;default:return null}}Sj=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jj=function(){},_j=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Uk(Lk.current);var a,i=null;switch(n){case"input":s=$g(e,s),r=$g(e,r),i=[];break;case"select":s=Pg({},s,{value:void 0}),r=Pg({},r,{value:void 0}),i=[];break;case"textarea":s=Jg(e,s),r=Jg(e,r),i=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=qb)}for(c in hv(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(tg.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(tg.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Rb("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Aj=function(e,t,n,r){n!==r&&(t.flags|=4)};var Uj=!1,Wj=!1,$j="function"==typeof WeakSet?WeakSet:Set,Vj=null;function Hj(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){gA(e,t,r)}else n.current=null}function qj(e,t,n){try{n()}catch(r){gA(e,t,r)}}var Gj=!1;function Kj(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&qj(t,n,a)}s=s.next}while(s!==r)}}function Xj(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yj(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Jj(e){var t=e.alternate;null!==t&&(e.alternate=null,Jj(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[aw],delete t[iw],delete t[lw],delete t[cw],delete t[dw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zj(e){return 5===e.tag||3===e.tag||4===e.tag}function Qj(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function e_(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=qb));else if(4!==r&&null!==(e=e.child))for(e_(e,t,n),e=e.sibling;null!==e;)e_(e,t,n),e=e.sibling}function t_(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(t_(e,t,n),e=e.sibling;null!==e;)t_(e,t,n),e=e.sibling}var n_=null,r_=!1;function s_(e,t,n){for(n=n.child;null!==n;)a_(e,t,n),n=n.sibling}function a_(e,t,n){if(Qv&&"function"==typeof Qv.onCommitFiberUnmount)try{Qv.onCommitFiberUnmount(Zv,n)}catch(o){}switch(n.tag){case 5:Wj||Hj(n,t);case 6:var r=n_,s=r_;n_=null,s_(e,t,n),r_=s,null!==(n_=r)&&(r_?(e=n_,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):n_.removeChild(n.stateNode));break;case 18:null!==n_&&(r_?(e=n_,n=n.stateNode,8===e.nodeType?tw(e.parentNode,n):1===e.nodeType&&tw(e,n),zy(e)):tw(n_,n.stateNode));break;case 4:r=n_,s=r_,n_=n.stateNode.containerInfo,r_=!0,s_(e,t,n),n_=r,r_=s;break;case 0:case 11:case 14:case 15:if(!Wj&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&qj(n,t,i),s=s.next}while(s!==r)}s_(e,t,n);break;case 1:if(!Wj&&(Hj(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){gA(n,t,o)}s_(e,t,n);break;case 21:s_(e,t,n);break;case 22:1&n.mode?(Wj=(r=Wj)||null!==n.memoizedState,s_(e,t,n),Wj=r):s_(e,t,n);break;default:s_(e,t,n)}}function i_(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $j),t.forEach(function(t){var r=bA.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function o_(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:n_=o.stateNode,r_=!1;break e;case 3:case 4:n_=o.stateNode.containerInfo,r_=!0;break e}o=o.return}if(null===n_)throw Error(Qm(160));a_(a,i,s),n_=null,r_=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(c){gA(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)l_(t,e),t=t.sibling}function l_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(o_(t,e),c_(e),4&r){try{Kj(3,e,e.return),Xj(3,e)}catch(m){gA(e,e.return,m)}try{Kj(5,e,e.return)}catch(m){gA(e,e.return,m)}}break;case 1:o_(t,e),c_(e),512&r&&null!==n&&Hj(n,n.return);break;case 5:if(o_(t,e),c_(e),512&r&&null!==n&&Hj(n,n.return),32&e.flags){var s=e.stateNode;try{iv(s,"")}catch(m){gA(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,i=null!==n?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Hg(s,a),pv(o,i);var c=pv(o,a);for(i=0;i<l.length;i+=2){var d=l[i],u=l[i+1];"style"===d?dv(s,u):"dangerouslySetInnerHTML"===d?av(s,u):"children"===d?iv(s,u):pg(s,d,u,c)}switch(o){case"input":qg(s,a);break;case"textarea":Qg(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?Yg(s,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?Yg(s,!!a.multiple,a.defaultValue,!0):Yg(s,!!a.multiple,a.multiple?[]:"",!1))}s[iw]=a}catch(m){gA(e,e.return,m)}}break;case 6:if(o_(t,e),c_(e),4&r){if(null===e.stateNode)throw Error(Qm(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){gA(e,e.return,m)}}break;case 3:if(o_(t,e),c_(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zy(t.containerInfo)}catch(m){gA(e,e.return,m)}break;case 4:default:o_(t,e),c_(e);break;case 13:o_(t,e),c_(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(M_=Hv())),4&r&&i_(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Wj=(c=Wj)||d,o_(t,e),Wj=c):o_(t,e),c_(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(Vj=e,d=e.child;null!==d;){for(u=Vj=d;null!==Vj;){switch(p=(h=Vj).child,h.tag){case 0:case 11:case 14:case 15:Kj(4,h,h.return);break;case 1:Hj(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){gA(r,n,m)}}break;case 5:Hj(h,h.return);break;case 22:if(null!==h.memoizedState){p_(u);continue}}null!==p?(p.return=h,Vj=p):p_(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{s=u.stateNode,c?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=u.stateNode,i=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=cv("display",i))}catch(m){gA(e,e.return,m)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){gA(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:o_(t,e),c_(e),4&r&&i_(e);case 21:}}function c_(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Zj(n)){var r=n;break e}n=n.return}throw Error(Qm(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(iv(s,""),r.flags&=-33),t_(e,Qj(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;e_(e,Qj(e),a);break;default:throw Error(Qm(161))}}catch(i){gA(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function d_(e,t,n){Vj=e,u_(e)}function u_(e,t,n){for(var r=!!(1&e.mode);null!==Vj;){var s=Vj,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Uj;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Wj;o=Uj;var c=Wj;if(Uj=i,(Wj=l)&&!c)for(Vj=s;null!==Vj;)l=(i=Vj).child,22===i.tag&&null!==i.memoizedState?f_(s):null!==l?(l.return=i,Vj=l):f_(s);for(;null!==a;)Vj=a,u_(a),a=a.sibling;Vj=s,Uj=o,Wj=c}h_(e)}else 8772&s.subtreeFlags&&null!==a?(a.return=s,Vj=a):h_(e)}}function h_(e){for(;null!==Vj;){var t=Vj;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Wj||Xj(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Wj)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:KS(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zk(t,a,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zk(t,i,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&zy(u)}}}break;default:throw Error(Qm(163))}Wj||512&t.flags&&Yj(t)}catch(h){gA(t,t.return,h)}}if(t===e){Vj=null;break}if(null!==(n=t.sibling)){n.return=t.return,Vj=n;break}Vj=t.return}}function p_(e){for(;null!==Vj;){var t=Vj;if(t===e){Vj=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Vj=n;break}Vj=t.return}}function f_(e){for(;null!==Vj;){var t=Vj;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xj(4,t)}catch(l){gA(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){gA(t,s,l)}}var a=t.return;try{Yj(t)}catch(l){gA(t,a,l)}break;case 5:var i=t.return;try{Yj(t)}catch(l){gA(t,i,l)}}}catch(l){gA(t,t.return,l)}if(t===e){Vj=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Vj=o;break}Vj=t.return}}var m_,g_=Math.ceil,v_=fg.ReactCurrentDispatcher,y_=fg.ReactCurrentOwner,x_=fg.ReactCurrentBatchConfig,b_=0,w_=null,k_=null,S_=0,j_=0,__=vw(0),A_=0,E_=null,T_=0,N_=0,C_=0,P_=null,R_=null,M_=0,I_=1/0,O_=null,z_=!1,D_=null,L_=null,F_=!1,B_=null,U_=0,W_=0,$_=null,V_=-1,H_=0;function q_(){return 6&b_?Hv():-1!==V_?V_:V_=Hv()}function G_(e){return 1&e.mode?2&b_&&0!==S_?S_&-S_:null!==lk.transition?(0===H_&&(H_=cy()),H_):0!==(e=py)?e:e=void 0===(e=window.event)?16:Vy(e.type):1}function K_(e,t,n,r){if(50<W_)throw W_=0,$_=null,Error(Qm(185));uy(e,n,r),2&b_&&e===w_||(e===w_&&(!(2&b_)&&(N_|=n),4===A_&&Q_(e,S_)),X_(e,r),1===n&&0===b_&&!(1&t.mode)&&(I_=Hv()+500,Rw&&Ow()))}function X_(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ey(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=oy(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=iy(e,e===w_?S_:0);if(0===r)null!==n&&Wv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Wv(n),1===t)0===e.tag?function(e){Rw=!0,Iw(e)}(eA.bind(null,e)):Iw(eA.bind(null,e)),Qb(function(){!(6&b_)&&Ow()}),n=null;else{switch(fy(r)){case 1:n=Gv;break;case 4:n=Kv;break;case 16:default:n=Xv;break;case 536870912:n=Jv}n=wA(n,Y_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Y_(e,t){if(V_=-1,H_=0,6&b_)throw Error(Qm(327));var n=e.callbackNode;if(fA()&&e.callbackNode!==n)return null;var r=iy(e,e===w_?S_:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=lA(e,r);else{t=r;var s=b_;b_|=2;var a=iA();for(w_===e&&S_===t||(O_=null,I_=Hv()+500,sA(e,t));;)try{dA();break}catch(o){aA(e,o)}xk(),v_.current=a,b_=s,null!==k_?t=0:(w_=null,S_=0,t=A_)}if(0!==t){if(2===t&&(0!==(s=ly(e))&&(r=s,t=J_(e,s))),1===t)throw n=E_,sA(e,0),Q_(e,r),X_(e,Hv()),n;if(6===t)Q_(e,r);else{if(s=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!eb(a(),s))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=lA(e,r),2===t&&(a=ly(e),0!==a&&(r=a,t=J_(e,a))),1!==t)))throw n=E_,sA(e,0),Q_(e,r),X_(e,Hv()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Qm(345));case 2:case 5:pA(e,R_,O_);break;case 3:if(Q_(e,r),(130023424&r)===r&&10<(t=M_+500-Hv())){if(0!==iy(e,0))break;if(((s=e.suspendedLanes)&r)!==r){q_(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yb(pA.bind(null,e,R_,O_),t);break}pA(e,R_,O_);break;case 4:if(Q_(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-ey(r);a=1<<i,(i=t[i])>s&&(s=i),r&=~a}if(r=s,10<(r=(120>(r=Hv()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g_(r/1960))-r)){e.timeoutHandle=Yb(pA.bind(null,e,R_,O_),r);break}pA(e,R_,O_);break;default:throw Error(Qm(329))}}}return X_(e,Hv()),e.callbackNode===n?Y_.bind(null,e):null}function J_(e,t){var n=P_;return e.current.memoizedState.isDehydrated&&(sA(e,t).flags|=256),2!==(e=lA(e,t))&&(t=R_,R_=n,null!==t&&Z_(t)),e}function Z_(e){null===R_?R_=e:R_.push.apply(R_,e)}function Q_(e,t){for(t&=~C_,t&=~N_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ey(t),r=1<<n;e[n]=-1,t&=~r}}function eA(e){if(6&b_)throw Error(Qm(327));fA();var t=iy(e,0);if(!(1&t))return X_(e,Hv()),null;var n=lA(e,t);if(0!==e.tag&&2===n){var r=ly(e);0!==r&&(t=r,n=J_(e,r))}if(1===n)throw n=E_,sA(e,0),Q_(e,t),X_(e,Hv()),n;if(6===n)throw Error(Qm(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pA(e,R_,O_),X_(e,Hv()),null}function tA(e,t){var n=b_;b_|=1;try{return e(t)}finally{0===(b_=n)&&(I_=Hv()+500,Rw&&Ow())}}function nA(e){null!==B_&&0===B_.tag&&!(6&b_)&&fA();var t=b_;b_|=1;var n=x_.transition,r=py;try{if(x_.transition=null,py=1,e)return e()}finally{py=r,x_.transition=n,!(6&(b_=t))&&Ow()}}function rA(){j_=__.current,yw(__)}function sA(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Jb(n)),null!==k_)for(n=k_.return;null!==n;){var r=n;switch(Kw(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Aw();break;case 3:$k(),yw(kw),yw(ww),Xk();break;case 5:Hk(r);break;case 4:$k();break;case 13:case 19:yw(qk);break;case 10:bk(r.type._context);break;case 22:case 23:rA()}n=n.return}if(w_=e,k_=e=_A(e.current,null),S_=j_=t,A_=0,E_=null,C_=N_=T_=0,R_=P_=null,null!==jk){for(t=0;t<jk.length;t++)if(null!==(r=(n=jk[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}jk=null}return e}function aA(e,t){for(;;){var n=k_;try{if(xk(),Yk.current=VS,nS){for(var r=Qk.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}nS=!1}if(Zk=0,tS=eS=Qk=null,rS=!1,sS=0,y_.current=null,null===n||null===n.return){A_=1,E_=t,k_=null;break}e:{var a=e,i=n.return,o=n,l=t;if(t=S_,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,d=o,u=d.tag;if(!(1&d.mode||0!==u&&11!==u&&15!==u)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=lj(i);if(null!==p){p.flags&=-257,cj(p,i,o,0,t),1&p.mode&&oj(a,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){oj(a,c,t),oA();break e}l=Error(Qm(426))}else if(Jw&&1&o.mode){var g=lj(i);if(null!==g){!(65536&g.flags)&&(g.flags|=256),cj(g,i,o,0,t),ok(tj(l,o));break e}}a=l=tj(l,o),4!==A_&&(A_=2),null===P_?P_=[a]:P_.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ik(a,aj(0,l,t));break e;case 1:o=l;var v=a.type,y=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==L_&&L_.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Ik(a,ij(a,o,t));break e}}a=a.return}while(null!==a)}hA(n)}catch(x){t=x,k_===n&&null!==n&&(k_=n=n.return);continue}break}}function iA(){var e=v_.current;return v_.current=VS,null===e?VS:e}function oA(){0!==A_&&3!==A_&&2!==A_||(A_=4),null===w_||!(268435455&T_)&&!(268435455&N_)||Q_(w_,S_)}function lA(e,t){var n=b_;b_|=2;var r=iA();for(w_===e&&S_===t||(O_=null,sA(e,t));;)try{cA();break}catch(s){aA(e,s)}if(xk(),b_=n,v_.current=r,null!==k_)throw Error(Qm(261));return w_=null,S_=0,A_}function cA(){for(;null!==k_;)uA(k_)}function dA(){for(;null!==k_&&!$v();)uA(k_)}function uA(e){var t=m_(e.alternate,e,j_);e.memoizedProps=e.pendingProps,null===t?hA(e):k_=t,y_.current=null}function hA(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Bj(n,t)))return n.flags&=32767,void(k_=n);if(null===e)return A_=6,void(k_=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Fj(n,t,j_)))return void(k_=n);if(null!==(t=t.sibling))return void(k_=t);k_=t=e}while(null!==t);0===A_&&(A_=5)}function pA(e,t,n){var r=py,s=x_.transition;try{x_.transition=null,py=1,function(e,t,n,r){do{fA()}while(null!==B_);if(6&b_)throw Error(Qm(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Qm(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ey(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,a),e===w_&&(k_=w_=null,S_=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||F_||(F_=!0,wA(Xv,function(){return fA(),null})),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=x_.transition,x_.transition=null;var i=py;py=1;var o=b_;b_|=4,y_.current=null,function(e,t){if(Gb=Ly,ib(e=ab())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var i=0,o=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var p;u!==n||0!==s&&3!==u.nodeType||(o=i+s),u!==a||0!==r&&3!==u.nodeType||(l=i+r),3===u.nodeType&&(i+=u.nodeValue.length),null!==(p=u.firstChild);)h=u,u=p;for(;;){if(u===e)break t;if(h===n&&++c===s&&(o=i),h===a&&++d===r&&(l=i),null!==(p=u.nextSibling))break;h=(u=h).parentNode}u=p}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kb={focusedElem:e,selectionRange:n},Ly=!1,Vj=t;null!==Vj;)if(e=(t=Vj).child,1028&t.subtreeFlags&&null!==e)e.return=t,Vj=e;else for(;null!==Vj;){t=Vj;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:KS(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(Qm(163))}}catch(b){gA(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Vj=e;break}Vj=t.return}f=Gj,Gj=!1}(e,n),l_(n,e),ob(Kb),Ly=!!Gb,Kb=Gb=null,e.current=n,d_(n),Vv(),b_=o,py=i,x_.transition=a}else e.current=n;if(F_&&(F_=!1,B_=e,U_=s),a=e.pendingLanes,0===a&&(L_=null),function(e){if(Qv&&"function"==typeof Qv.onCommitFiberRoot)try{Qv.onCommitFiberRoot(Zv,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),X_(e,Hv()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(z_)throw z_=!1,e=D_,D_=null,e;!!(1&U_)&&0!==e.tag&&fA(),a=e.pendingLanes,1&a?e===$_?W_++:(W_=0,$_=e):W_=0,Ow()}(e,t,n,r)}finally{x_.transition=s,py=r}return null}function fA(){if(null!==B_){var e=fy(U_),t=x_.transition,n=py;try{if(x_.transition=null,py=16>e?16:e,null===B_)var r=!1;else{if(e=B_,B_=null,U_=0,6&b_)throw Error(Qm(331));var s=b_;for(b_|=4,Vj=e.current;null!==Vj;){var a=Vj,i=a.child;if(16&Vj.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Vj=c;null!==Vj;){var d=Vj;switch(d.tag){case 0:case 11:case 15:Kj(8,d,a)}var u=d.child;if(null!==u)u.return=d,Vj=u;else for(;null!==Vj;){var h=(d=Vj).sibling,p=d.return;if(Jj(d),d===c){Vj=null;break}if(null!==h){h.return=p,Vj=h;break}Vj=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Vj=a}}if(2064&a.subtreeFlags&&null!==i)i.return=a,Vj=i;else e:for(;null!==Vj;){if(2048&(a=Vj).flags)switch(a.tag){case 0:case 11:case 15:Kj(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Vj=v;break e}Vj=a.return}}var y=e.current;for(Vj=y;null!==Vj;){var x=(i=Vj).child;if(2064&i.subtreeFlags&&null!==x)x.return=i,Vj=x;else e:for(i=y;null!==Vj;){if(2048&(o=Vj).flags)try{switch(o.tag){case 0:case 11:case 15:Xj(9,o)}}catch(w){gA(o,o.return,w)}if(o===i){Vj=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,Vj=b;break e}Vj=o.return}}if(b_=s,Ow(),Qv&&"function"==typeof Qv.onPostCommitFiberRoot)try{Qv.onPostCommitFiberRoot(Zv,e)}catch(w){}r=!0}return r}finally{py=n,x_.transition=t}}return!1}function mA(e,t,n){e=Rk(e,t=aj(0,t=tj(n,t),1),1),t=q_(),null!==e&&(uy(e,1,t),X_(e,t))}function gA(e,t,n){if(3===e.tag)mA(e,e,n);else for(;null!==t;){if(3===t.tag){mA(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===L_||!L_.has(r))){t=Rk(t,e=ij(t,e=tj(n,e),1),1),e=q_(),null!==t&&(uy(t,1,e),X_(t,e));break}}t=t.return}}function vA(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=q_(),e.pingedLanes|=e.suspendedLanes&n,w_===e&&(S_&n)===n&&(4===A_||3===A_&&(130023424&S_)===S_&&500>Hv()-M_?sA(e,0):C_|=n),X_(e,t)}function yA(e,t){0===t&&(1&e.mode?(t=sy,!(130023424&(sy<<=1))&&(sy=4194304)):t=1);var n=q_();null!==(e=Ek(e,t))&&(uy(e,t,n),X_(e,n))}function xA(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),yA(e,n)}function bA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Qm(314))}null!==r&&r.delete(t),yA(e,n)}function wA(e,t){return Uv(e,t)}function kA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function SA(e,t,n,r){return new kA(e,t,n,r)}function jA(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _A(e,t){var n=e.alternate;return null===n?((n=SA(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function AA(e,t,n,r,s,a){var i=2;if(r=e,"function"==typeof e)jA(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case vg:return EA(n.children,s,a,t);case yg:i=8,s|=8;break;case xg:return(e=SA(12,n,t,2|s)).elementType=xg,e.lanes=a,e;case Sg:return(e=SA(13,n,t,s)).elementType=Sg,e.lanes=a,e;case jg:return(e=SA(19,n,t,s)).elementType=jg,e.lanes=a,e;case Eg:return TA(n,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case bg:i=10;break e;case wg:i=9;break e;case kg:i=11;break e;case _g:i=14;break e;case Ag:i=16,r=null;break e}throw Error(Qm(130,null==e?e:typeof e,""))}return(t=SA(i,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function EA(e,t,n,r){return(e=SA(7,e,r,t)).lanes=n,e}function TA(e,t,n,r){return(e=SA(22,e,r,t)).elementType=Eg,e.lanes=n,e.stateNode={isHidden:!1},e}function NA(e,t,n){return(e=SA(6,e,null,t)).lanes=n,e}function CA(e,t,n){return(t=SA(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PA(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dy(0),this.expirationTimes=dy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dy(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function RA(e,t,n,r,s,a,i,o,l){return e=new PA(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=SA(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nk(a),e}function MA(e){if(!e)return bw;e:{if(zv(e=e._reactInternals)!==e||1!==e.tag)throw Error(Qm(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_w(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Qm(171))}if(1===e.tag){var n=e.type;if(_w(n))return Tw(e,n,t)}return t}function IA(e,t,n,r,s,a,i,o,l){return(e=RA(n,r,!0,e,0,a,0,o,l)).context=MA(null),n=e.current,(a=Pk(r=q_(),s=G_(n))).callback=null!=t?t:null,Rk(n,a,s),e.current.lanes=s,uy(e,s,r),X_(e,r),e}function OA(e,t,n,r){var s=t.current,a=q_(),i=G_(s);return n=MA(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pk(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rk(s,t,i))&&(K_(e,s,i,a),Mk(e,s,i)),i}function zA(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function DA(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function LA(e,t){DA(e,t),(e=e.alternate)&&DA(e,t)}m_=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||kw.current)uj=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return uj=!1,function(e,t,n){switch(t.tag){case 3:wj(t),ik();break;case 5:Vk(t);break;case 1:_w(t.type)&&Nw(t);break;case 4:Wk(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;xw(mk,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xw(qk,1&qk.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Nj(e,t,n):(xw(qk,1&qk.current),null!==(e=zj(e,t,n))?e.sibling:null);xw(qk,1&qk.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Ij(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),xw(qk,qk.current),r)break;return null;case 22:case 23:return t.lanes=0,gj(e,t,n)}return zj(e,t,n)}(e,t,n);uj=!!(131072&e.flags)}else uj=!1,Jw&&1048576&t.flags&&qw(t,Fw,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oj(e,t),e=t.pendingProps;var s=jw(t,ww.current);kk(t,n),s=lS(null,t,r,e,s,n);var a=cS();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_w(r)?(a=!0,Nw(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Nk(t),s.updater=YS,t.stateNode=s,s._reactInternals=t,ej(t,r,e,n),t=bj(null,t,r,!0,a,n)):(t.tag=0,Jw&&a&&Gw(t),hj(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oj(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"==typeof e)return jA(e)?1:0;if(null!=e){if((e=e.$$typeof)===kg)return 11;if(e===_g)return 14}return 2}(r),e=KS(r,e),s){case 0:t=yj(null,t,r,e,n);break e;case 1:t=xj(null,t,r,e,n);break e;case 11:t=pj(null,t,r,e,n);break e;case 14:t=fj(null,t,r,KS(r.type,e),n);break e}throw Error(Qm(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,yj(e,t,r,s=t.elementType===r?s:KS(r,s),n);case 1:return r=t.type,s=t.pendingProps,xj(e,t,r,s=t.elementType===r?s:KS(r,s),n);case 3:e:{if(wj(t),null===e)throw Error(Qm(387));r=t.pendingProps,s=(a=t.memoizedState).element,Ck(e,t),Ok(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=kj(e,t,r,n,s=tj(Error(Qm(423)),t));break e}if(r!==s){t=kj(e,t,r,n,s=tj(Error(Qm(424)),t));break e}for(Yw=nw(t.stateNode.containerInfo.firstChild),Xw=t,Jw=!0,Zw=null,n=fk(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ik(),r===s){t=zj(e,t,n);break e}hj(e,t,r,n)}t=t.child}return t;case 5:return Vk(t),null===e&&nk(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,i=s.children,Xb(r,s)?i=null:null!==a&&Xb(r,a)&&(t.flags|=32),vj(e,t),hj(e,t,i,n),t.child;case 6:return null===e&&nk(t),null;case 13:return Nj(e,t,n);case 4:return Wk(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pk(t,null,r,n):hj(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,pj(e,t,r,s=t.elementType===r?s:KS(r,s),n);case 7:return hj(e,t,t.pendingProps,n),t.child;case 8:case 12:return hj(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,xw(mk,r._currentValue),r._currentValue=i,null!==a)if(eb(a.value,i)){if(a.children===s.children&&!kw.current){t=zj(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){i=a.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Pk(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),wk(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===a.tag)i=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(i=a.return))throw Error(Qm(341));i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),wk(i,n,t),i=a.sibling}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===t){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}hj(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,kk(t,n),r=r(s=Sk(s)),t.flags|=1,hj(e,t,r,n),t.child;case 14:return s=KS(r=t.type,t.pendingProps),fj(e,t,r,s=KS(r.type,s),n);case 15:return mj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:KS(r,s),Oj(e,t),t.tag=1,_w(r)?(e=!0,Nw(t)):e=!1,kk(t,n),ZS(t,r,s),ej(t,r,s,n),bj(null,t,r,!0,e,n);case 19:return Ij(e,t,n);case 22:return gj(e,t,n)}throw Error(Qm(156,t.tag))};var FA="function"==typeof reportError?reportError:function(e){console.error(e)};function BA(e){this._internalRoot=e}function UA(e){this._internalRoot=e}function WA(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $A(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function VA(){}function HA(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"==typeof s){var o=s;s=function(){var e=zA(i);o.call(e)}}OA(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"==typeof r){var a=r;r=function(){var e=zA(i);a.call(e)}}var i=IA(t,r,e,0,null,!1,0,"",VA);return e._reactRootContainer=i,e[ow]=i.current,Ob(8===e.nodeType?e.parentNode:e),nA(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var o=r;r=function(){var e=zA(l);o.call(e)}}var l=RA(e,0,!1,null,0,!1,0,"",VA);return e._reactRootContainer=l,e[ow]=l.current,Ob(8===e.nodeType?e.parentNode:e),nA(function(){OA(t,l,n,r)}),l}(n,t,e,s,r);return zA(i)}UA.prototype.render=BA.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Qm(409));OA(e,t,null,null)},UA.prototype.unmount=BA.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;nA(function(){OA(null,e,null,null)}),t[ow]=null}},UA.prototype.unstable_scheduleHydration=function(e){if(e){var t=yy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ey.length&&0!==t&&t<Ey[n].priority;n++);Ey.splice(n,0,e),0===n&&Py(e)}},my=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ay(t.pendingLanes);0!==n&&(hy(t,1|n),X_(t,Hv()),!(6&b_)&&(I_=Hv()+500,Ow()))}break;case 13:nA(function(){var t=Ek(e,1);if(null!==t){var n=q_();K_(t,e,1,n)}}),LA(e,1)}},gy=function(e){if(13===e.tag){var t=Ek(e,134217728);if(null!==t)K_(t,e,134217728,q_());LA(e,134217728)}},vy=function(e){if(13===e.tag){var t=G_(e),n=Ek(e,t);if(null!==n)K_(n,e,t,q_());LA(e,t)}},yy=function(){return py},xy=function(e,t){var n=py;try{return py=e,t()}finally{py=n}},gv=function(e,t,n){switch(t){case"input":if(qg(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=fw(r);if(!s)throw Error(Qm(90));Ug(r),qg(r,s)}}}break;case"textarea":Qg(e,n);break;case"select":null!=(t=n.value)&&Yg(e,!!n.multiple,t,!1)}},kv=tA,Sv=nA;var qA={usingClientEntryPoint:!1,Events:[hw,pw,fw,bv,wv,tA]},GA={findFiberByHostInstance:uw,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:GA.bundleType,version:GA.version,rendererPackageName:GA.rendererPackageName,rendererConfig:GA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Fv(e))?null:e.stateNode},findFiberByHostInstance:GA.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var XA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!XA.isDisabled&&XA.supportsFiber)try{Zv=XA.inject(KA),Qv=XA}catch(sv){}}Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA,Gm.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!WA(t))throw Error(Qm(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gg,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Gm.createRoot=function(e,t){if(!WA(e))throw Error(Qm(299));var n=!1,r="",s=FA;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=RA(e,1,!1,null,0,n,0,r,s),e[ow]=t.current,Ob(8===e.nodeType?e.parentNode:e),new BA(t)},Gm.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Qm(188));throw e=Object.keys(e).join(","),Error(Qm(268,e))}return e=null===(e=Fv(t))?null:e.stateNode},Gm.flushSync=function(e){return nA(e)},Gm.hydrate=function(e,t,n){if(!$A(t))throw Error(Qm(200));return HA(null,e,t,!0,n)},Gm.hydrateRoot=function(e,t,n){if(!WA(e))throw Error(Qm(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",i=FA;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=IA(t,null,e,1,null!=n?n:null,s,0,a,i),e[ow]=t.current,Ob(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new UA(t)},Gm.render=function(e,t,n){if(!$A(t))throw Error(Qm(200));return HA(null,e,t,!1,n)},Gm.unmountComponentAtNode=function(e){if(!$A(e))throw Error(Qm(40));return!!e._reactRootContainer&&(nA(function(){HA(null,null,e,!1,function(){e._reactRootContainer=null,e[ow]=null})}),!0)},Gm.unstable_batchedUpdates=tA,Gm.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$A(n))throw Error(Qm(200));if(null==e||void 0===e._reactInternals)throw Error(Qm(38));return HA(e,t,n,!1,r)},Gm.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),qm.exports=Gm;var YA,JA,ZA=qm.exports,QA=ZA;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eE.apply(this,arguments)}Hm.createRoot=QA.createRoot,Hm.hydrateRoot=QA.hydrateRoot,(JA=YA||(YA={})).Pop="POP",JA.Push="PUSH",JA.Replace="REPLACE";const tE="popstate";function nE(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o=YA.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(eE({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=YA.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o=YA.Push;let r=iE(m.location,e,t);n&&n(r,e),c=d()+1;let u=aE(r,c),h=m.createHref(r);try{i.pushState(u,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;s.location.assign(h)}a&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o=YA.Replace;let r=iE(m.location,e,t);n&&n(r,e),c=d();let s=aE(r,c),u=m.createHref(r);i.replaceState(s,"",u),a&&l&&l({action:o,location:m.location,delta:0})}function f(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"==typeof e?e:oE(e);return n=n.replace(/ $/,"%20"),rE(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let m={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(tE,u),l=e,()=>{s.removeEventListener(tE,u),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>i.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return iE("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:oE(t)},null,e)}function rE(e,t){if(!1===e||null==e)throw new Error(t)}function sE(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function aE(e,t){return{usr:e.state,key:e.key,idx:t}}function iE(e,t,n,r){return void 0===n&&(n=null),eE({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?lE(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function oE(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function lE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var cE,dE;function uE(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let s="string"==typeof t?lE(t):t,a=_E(s.pathname||"/",n);if(null==a)return null;let i=hE(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=jE(a);o=kE(i[l],e,r)}return o}(e,t,n,!1)}function hE(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(rE(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=NE([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(rE(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),hE(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:wE(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of pE(e.path))s(e,t,r);else s(e,t)}),t}function pE(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=pE(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(dE=cE||(cE={})).data="data",dE.deferred="deferred",dE.redirect="redirect",dE.error="error";const fE=/^:[\w-]+$/,mE=3,gE=2,vE=1,yE=10,xE=-2,bE=e=>"*"===e;function wE(e,t){let n=e.split("/"),r=n.length;return n.some(bE)&&(r+=xE),t&&(r+=gE),n.filter(e=>!bE(e)).reduce((e,t)=>e+(fE.test(t)?mE:""===t?vE:yE),r)}function kE(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=SE({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=SE({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:NE([a,d.pathname]),pathnameBase:CE(NE([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=NE([a,d.pathnameBase]))}return i}function SE(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);sE("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function jE(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return sE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function _E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function AE(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function EE(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function TE(e,t,n,r){let s;void 0===r&&(r=!1),"string"==typeof e?s=lE(e):(s=eE({},e),rE(!s.pathname||!s.pathname.includes("?"),AE("?","pathname","search",s)),rE(!s.pathname||!s.pathname.includes("#"),AE("#","pathname","hash",s)),rE(!s.search||!s.search.includes("#"),AE("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"==typeof e?lE(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:PE(r),hash:RE(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const NE=e=>e.join("/").replace(/\/\/+/g,"/"),CE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PE=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",RE=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const ME=["post","put","patch","delete"];new Set(ME);const IE=["get",...ME];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}new Set(IE);const zE=Im.createContext(null),DE=Im.createContext(null),LE=Im.createContext(null),FE=Im.createContext(null),BE=Im.createContext({outlet:null,matches:[],isDataRoute:!1}),UE=Im.createContext(null);function WE(){return null!=Im.useContext(FE)}function $E(){return WE()||rE(!1),Im.useContext(FE).location}function VE(e){Im.useContext(LE).static||Im.useLayoutEffect(e)}function HE(){let{isDataRoute:e}=Im.useContext(BE);return e?function(){let{router:e}=function(){let e=Im.useContext(zE);return e||rE(!1),e}(QE.UseNavigateStable),t=tT(eT.UseNavigateStable),n=Im.useRef(!1);return VE(()=>{n.current=!0}),Im.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,OE({fromRouteId:t},s)))},[e,t])}():function(){WE()||rE(!1);let e=Im.useContext(zE),{basename:t,future:n,navigator:r}=Im.useContext(LE),{matches:s}=Im.useContext(BE),{pathname:a}=$E(),i=JSON.stringify(EE(s,n.v7_relativeSplatPath)),o=Im.useRef(!1);return VE(()=>{o.current=!0}),Im.useCallback(function(n,s){if(void 0===s&&(s={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=TE(n,JSON.parse(i),a,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:NE([t,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)},[t,r,i,a,e])}()}function qE(){let{matches:e}=Im.useContext(BE),t=e[e.length-1];return t?t.params:{}}function GE(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=Im.useContext(LE),{matches:s}=Im.useContext(BE),{pathname:a}=$E(),i=JSON.stringify(EE(s,r.v7_relativeSplatPath));return Im.useMemo(()=>TE(e,JSON.parse(i),a,"path"===n),[e,i,a,n])}function KE(e,t){return function(e,t,n,r){WE()||rE(!1);let{navigator:s}=Im.useContext(LE),{matches:a}=Im.useContext(BE),i=a[a.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=$E();if(t){var u;let e="string"==typeof t?lE(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||rE(!1),c=e}else c=d;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=uE(e,{pathname:p}),m=function(e,t,n,r){var s;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===r&&(r=null);if(null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,o=null==(s=n)?void 0:s.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||rE(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,r,s)=>{let a,d=!1,u=null,h=null;var p;n&&(a=o&&r.route.id?o[r.route.id]:void 0,u=r.route.errorElement||YE,l&&(c<0&&0===s?(p="route-fallback",!1||nT[p]||(nT[p]=!0),d=!0,h=null):c===s&&(d=!0,h=r.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,s+1)),m=()=>{let t;return t=a?u:d?h:r.route.Component?Im.createElement(r.route.Component,null):r.route.element?r.route.element:e,Im.createElement(ZE,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?Im.createElement(JE,{location:n.location,revalidation:n.revalidation,component:u,error:a,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}(f&&f.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:NE([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:NE([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);if(t&&m)return Im.createElement(FE.Provider,{value:{location:OE({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:YA.Pop}},m);return m}(e,t)}function XE(){let e=function(){var e;let t=Im.useContext(UE),n=function(){let e=Im.useContext(DE);return e||rE(!1),e}(eT.UseRouteError),r=tT(eT.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Im.createElement(Im.Fragment,null,Im.createElement("h2",null,"Unexpected Application Error!"),Im.createElement("h3",{style:{fontStyle:"italic"}},t),n?Im.createElement("pre",{style:r},n):null,null)}const YE=Im.createElement(XE,null);class JE extends Im.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?Im.createElement(BE.Provider,{value:this.props.routeContext},Im.createElement(UE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZE(e){let{routeContext:t,match:n,children:r}=e,s=Im.useContext(zE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),Im.createElement(BE.Provider,{value:t},r)}var QE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QE||{}),eT=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eT||{});function tT(e){let t=function(){let e=Im.useContext(BE);return e||rE(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||rE(!1),n.route.id}const nT={};function rT(e){let{to:t,replace:n,state:r,relative:s}=e;WE()||rE(!1);let{future:a,static:i}=Im.useContext(LE),{matches:o}=Im.useContext(BE),{pathname:l}=$E(),c=HE(),d=TE(t,EE(o,a.v7_relativeSplatPath),l,"path"===s),u=JSON.stringify(d);return Im.useEffect(()=>c(JSON.parse(u),{replace:n,state:r,relative:s}),[c,u,s,n,r]),null}function sT(e){rE(!1)}function aT(e){let{basename:t="/",children:n=null,location:r,navigationType:s=YA.Pop,navigator:a,static:i=!1,future:o}=e;WE()&&rE(!1);let l=t.replace(/^\/*/,"/"),c=Im.useMemo(()=>({basename:l,navigator:a,static:i,future:OE({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);"string"==typeof r&&(r=lE(r));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:f="default"}=r,m=Im.useMemo(()=>{let e=_E(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:p,key:f},navigationType:s}},[l,d,u,h,p,f,s]);return null==m?null:Im.createElement(LE.Provider,{value:c},Im.createElement(FE.Provider,{children:n,value:m}))}function iT(e){let{children:t,location:n}=e;return KE(oT(t),n)}function oT(e,t){void 0===t&&(t=[]);let n=[];return Im.Children.forEach(e,(e,r)=>{if(!Im.isValidElement(e))return;let s=[...t,r];if(e.type===Im.Fragment)return void n.push.apply(n,oT(e.props.children,s));e.type!==sT&&rE(!1),e.props.index&&e.props.children&&rE(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=oT(e.props.children,s)),n.push(a)}),n}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lT(){return lT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lT.apply(this,arguments)}new Promise(()=>{});const cT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Vne){}const dT=zm.startTransition;function uT(e){let{basename:t,children:n,future:r,window:s}=e,a=Im.useRef();null==a.current&&(a.current=nE({window:s,v5Compat:!0}));let i=a.current,[o,l]=Im.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=Im.useCallback(e=>{c&&dT?dT(()=>l(e)):l(e)},[l,c]);return Im.useLayoutEffect(()=>i.listen(d),[i,d]),Im.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[r]),Im.createElement(aT,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const hT="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,pT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fT=Im.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u}=e,h=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,cT),{basename:p}=Im.useContext(LE),f=!1;if("string"==typeof c&&pT.test(c)&&(n=c,hT))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=_E(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:f=!0}catch(Vne){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;WE()||rE(!1);let{basename:r,navigator:s}=Im.useContext(LE),{hash:a,pathname:i,search:o}=GE(e,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:NE([r,i])),s.createHref({pathname:l,search:o,hash:a})}(c,{relative:s}),g=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o}=void 0===t?{}:t,l=HE(),c=$E(),d=GE(e,{relative:i});return Im.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:oE(c)===oE(d);l(e,{replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,r,s,n,e,a,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:u});return Im.createElement("a",lT({},h,{href:n||m,onClick:f||a?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))});var mT,gT,vT,yT;(gT=mT||(mT={})).UseScrollRestoration="useScrollRestoration",gT.UseSubmit="useSubmit",gT.UseSubmitFetcher="useSubmitFetcher",gT.UseFetcher="useFetcher",gT.useViewTransitionState="useViewTransitionState",(yT=vT||(vT={})).UseFetcher="useFetcher",yT.UseFetchers="useFetchers",yT.UseScrollRestoration="useScrollRestoration";var xT=(e=class extends Error{constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Lf(this,"clerkError",!0),Lf(this,"code"),Lf(this,"longMessage"),Lf(this,"docsUrl"),Lf(this,"cause"),Object.setPrototypeOf(this,e.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}get name(){return this.constructor.name}toString(){return`[${this.name}]\nMessage:${this.message}`}static formatMessage(e,t,n,r){const s="Clerk:",a=new RegExp(s.replace(" ","\\s*"),"i");return t=`${s} ${(t=t.replace(a,"")).trim()}\n\n(code="${n}")\n\n`,r&&(t+=`\n\nDocs: ${r}`),t}},Lf(e,"kind","ClerkError"),e),bT=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function wT({packageName:e,customMessages:t}){let n=e;function r(e,t){if(!t)return`${n}: ${e}`;let r=e;const s=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const n of s){const e=(t[n[1]]||"").toString();r=r.replace(`{{${n[1]}}}`,e)}return`${n}: ${r}`}const s={...bT,...t};return{setPackageName({packageName:e}){return"string"==typeof e&&(n=e),this},setMessages({customMessages:e}){return Object.assign(s,e||{}),this},throwInvalidPublishableKeyError(e){throw new Error(r(s.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(r(s.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(r(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(r(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw new Error(r(s.MissingClerkProvider,e))},throw(e){throw new Error(r(e))}}}var kT=(t=class extends xT{constructor(e,n){super({...n,message:e}),Lf(this,"clerkRuntimeError",!0),Object.setPrototypeOf(this,t.prototype)}},Lf(t,"kind","ClerkRuntimeError"),t),ST=Object.defineProperty,jT=Object.getOwnPropertyDescriptor,_T=Object.getOwnPropertyNames,AT=Object.prototype.hasOwnProperty,ET=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of _T(t))AT.call(e,s)||s===n||ST(e,s,{get:()=>t[s],enumerable:!(r=jT(t,s))||r.enumerable});return e},TT={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},NT=new Set(["first_factor","second_factor","multi_factor"]),CT=new Set(["strict_mfa","strict","moderate","lax"]),PT=e=>e.replace(/^(org:)*/,"org:"),RT=(e,t)=>{const{org:n,user:r}=MT(e),[s,a]=t.split(":"),i=a||s;return"org"===s?n.includes(i):"user"===s?r.includes(i):[...n,...r].includes(i)},MT=e=>{const t=e?e.split(",").map(e=>e.trim()):[];return{org:t.filter(e=>e.split(":")[0].includes("o")).map(e=>e.split(":")[1]),user:t.filter(e=>e.split(":")[0].includes("u")).map(e=>e.split(":")[1])}},IT=e=>{if(!e)return!1;const t=e=>"string"==typeof e?TT[e]:e,n="string"==typeof e&&(r=e,CT.has(r));var r;const s="object"==typeof e&&(i=e.level,NT.has(i))&&("number"==typeof(a=e.afterMinutes)&&a>0);var a,i;return!(!n&&!s)&&t.bind(null,e)},OT=e=>t=>{if(!e.userId)return!1;const n=((e,t)=>{const{features:n,plans:r}=t;return e.feature&&n?RT(n,e.feature):e.plan&&r?RT(r,e.plan):null})(t,e),r=((e,t)=>{const{orgId:n,orgRole:r,orgPermissions:s}=t;return(e.role||e.permission)&&n&&r&&s?e.permission?s.includes(PT(e.permission)):e.role?PT(r)===PT(e.role):null:null})(t,e),s=((e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;const n=IT(e.reverification);if(!n)return null;const{level:r,afterMinutes:s}=n(),[a,i]=t,o=-1!==a?s>a:null,l=-1!==i?s>i:null;switch(r){case"first_factor":return o;case"second_factor":return-1!==i?l:o;case"multi_factor":return-1===i?o:o&&l}})(t,e);return[n||r,s].some(e=>null===e)?[n||r,s].some(e=>!0===e):[n||r,s].every(e=>!0===e)},zT=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,DT=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],LT="pk_live_";function FT(e){if(!e.endsWith("$"))return!1;const t=e.slice(0,-1);return!t.includes("$")&&t.includes(".")}function BT(e,t={}){if(!(e=e||"")||!UT(e)){if(t.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!UT(e))throw new Error("Publishable key not valid.");return null}const n=e.startsWith(LT)?"production":"development";let r;try{r=zT(e.split("_")[2])}catch{if(t.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!FT(r)){if(t.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=r.slice(0,-1);return t.proxyUrl?s=t.proxyUrl:"development"!==n&&t.domain&&t.isSatellite&&(s=`clerk.${t.domain}`),{instanceType:n,frontendApi:s}}function UT(e=""){try{if(!(e.startsWith(LT)||e.startsWith("pk_test_")))return!1;const t=e.split("_");if(3!==t.length)return!1;const n=t[2];if(!n)return!1;return FT(zT(n))}catch{return!1}}function WT(e,t){return{event:"METHOD_CALLED",eventSamplingRate:.1,payload:{method:e,...t}}}var $T={exports:{}},VT={},HT=Im;var qT="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},GT=HT.useState,KT=HT.useEffect,XT=HT.useLayoutEffect,YT=HT.useDebugValue;function JT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qT(e,n)}catch(r){return!0}}var ZT="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=GT({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return XT(function(){s.value=n,s.getSnapshot=t,JT(s)&&a({inst:s})},[e,n,t]),KT(function(){return JT(s)&&a({inst:s}),e(function(){JT(s)&&a({inst:s})})},[e]),YT(n),n};VT.useSyncExternalStore=void 0!==HT.useSyncExternalStore?HT.useSyncExternalStore:ZT,$T.exports=VT;var QT=$T.exports;var eN=Object.prototype.hasOwnProperty;const tN=new WeakMap,nN=()=>{},rN=nN(),sN=Object,aN=e=>e===rN,iN=e=>"function"==typeof e,oN=(e,t)=>({...e,...t}),lN=e=>iN(e.then),cN={},dN={},uN="undefined",hN=typeof window!=uN,pN=typeof document!=uN,fN=hN&&"Deno"in window,mN=(e,t)=>{const n=tN.get(e);return[()=>!aN(t)&&e.get(t)||cN,r=>{if(!aN(t)){const s=e.get(t);t in dN||(dN[t]=s),n[5](t,oN(s,r),s||cN)}},n[6],()=>!aN(t)&&t in dN?dN[t]:!aN(t)&&e.get(t)||cN]};let gN=!0;const[vN,yN]=hN&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[nN,nN],xN={isOnline:()=>gN,isVisible:()=>{const e=pN&&document.visibilityState;return aN(e)||"hidden"!==e}},bN={initFocus:e=>(pN&&document.addEventListener("visibilitychange",e),vN("focus",e),()=>{pN&&document.removeEventListener("visibilitychange",e),yN("focus",e)}),initReconnect:e=>{const t=()=>{gN=!0,e()},n=()=>{gN=!1};return vN("online",t),vN("offline",n),()=>{yN("online",t),yN("offline",n)}}},wN=!Om.useId,kN=!hN||fN,SN=e=>hN&&typeof window.requestAnimationFrame!=uN?window.requestAnimationFrame(e):setTimeout(e,1),jN=kN?Im.useEffect:Im.useLayoutEffect,_N="undefined"!=typeof navigator&&navigator.connection,AN=!kN&&_N&&(["slow-2g","2g"].includes(_N.effectiveType)||_N.saveData),EN=new WeakMap,TN=(e,t)=>e===`[object ${t}]`;let NN=0;const CN=e=>{const t=typeof e,n=(r=e,sN.prototype.toString.call(r));var r;const s=TN(n,"Date"),a=TN(n,"RegExp"),i=TN(n,"Object");let o,l;if(sN(e)!==e||s||a)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=EN.get(e),o)return o;if(o=++NN+"~",EN.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=CN(e[l])+",";EN.set(e,o)}if(i){o="#";const t=sN.keys(e).sort();for(;!aN(l=t.pop());)aN(e[l])||(o+=l+":"+CN(e[l])+",");EN.set(e,o)}}return o},PN=e=>{if(iN(e))try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?CN(e):"",t]};let RN=0;const MN=()=>++RN;async function IN(...e){const[t,n,r,s]=e,a=oN({populateCache:!0,throwOnError:!0},"boolean"==typeof s?{revalidate:s}:s||{});let i=a.populateCache;const o=a.rollbackOnError;let l=a.optimisticData;const c=a.throwOnError;if(iN(n)){const e=n,r=[],s=t.keys();for(const n of s)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(d))}return d(n);async function d(n){const[s]=PN(n);if(!s)return;const[d,u]=mN(t,s),[h,p,f,m]=tN.get(t),g=()=>{const e=h[s];return(iN(a.revalidate)?a.revalidate(d().data,n):!1!==a.revalidate)&&(delete f[s],delete m[s],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return g();let v,y=r,x=!1;const b=MN();p[s]=[b,0];const w=!aN(l),k=d(),S=k.data,j=k._c,_=aN(j)?S:j;if(w&&(l=iN(l)?l(_,S):l,u({data:l,_c:_})),iN(y))try{y=y(_)}catch(A){v=A,x=!0}if(y&&lN(y)){if(y=await y.catch(e=>{v=e,x=!0}),b!==p[s][0]){if(x)throw v;return y}x&&w&&(e=>"function"==typeof o?o(e):!1!==o)(v)&&(i=!0,u({data:_,_c:rN}))}if(i&&!x)if(iN(i)){const e=i(y,_);u({data:e,error:rN,_c:rN})}else u({data:y,error:rN,_c:rN});if(p[s][1]=MN(),Promise.resolve(g()).then(()=>{u({_c:rN})}),!x)return y;if(c)throw v}}const ON=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},zN=(e,t)=>{if(!tN.has(e)){const n=oN(bN,t),r=Object.create(null),s=IN.bind(rN,e);let a=nN;const i=Object.create(null),o=(e,t)=>{const n=i[e]||[];return i[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},l=(t,n,r)=>{e.set(t,n);const s=i[t];if(s)for(const e of s)e(n,r)},c=()=>{if(!tN.has(e)&&(tN.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,l,o]),!kN)){const t=n.initFocus(setTimeout.bind(rN,ON.bind(rN,r,0))),s=n.initReconnect(setTimeout.bind(rN,ON.bind(rN,r,1)));a=()=>{t&&t(),s&&s(),tN.delete(e)}}};return c(),[e,s,c,a]}return[e,tN.get(e)[4]]},DN=function e(t,n){var r,s;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((s=t.length)===n.length)for(;s--&&e(t[s],n[s]););return-1===s}if(!r||"object"==typeof t){for(r in s=0,t){if(eN.call(t,r)&&++s&&!eN.call(n,r))return!1;if(!(r in n)||!e(t[r],n[r]))return!1}return Object.keys(n).length===s}}return t!=t&&n!=n},[LN,FN]=zN(new Map),BN=oN({onLoadingSlow:nN,onSuccess:nN,onError:nN,onErrorRetry:(e,t,n,r,s)=>{const a=n.errorRetryCount,i=s.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!aN(a)&&i>a||setTimeout(r,o,s)},onDiscarded:nN,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:AN?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:AN?5e3:3e3,compare:DN,isPaused:()=>!1,cache:LN,mutate:FN,fallback:{}},xN),UN=(e,t)=>{const n=oN(e,t);if(t){const{use:r,fallback:s}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),s&&i&&(n.fallback=oN(s,i))}return n},WN=Im.createContext({}),$N="$inf$",VN=hN&&window.__SWR_DEVTOOLS_USE__,HN=VN?window.__SWR_DEVTOOLS_USE__:[],qN=e=>iN(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],GN=()=>oN(BN,Im.useContext(WN)),KN=HN.concat(e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=PN(t),[,,,s]=tN.get(LN);if(r.startsWith($N))return n(...e);const a=s[r];return aN(a)?n(...e):(delete s[r],a)}),r));VN&&(window.__SWR_DEVTOOLS_REACT__=Om);const XN=()=>{},YN=XN(),JN=Object,ZN=e=>e===YN,QN=new WeakMap,eC=(e,t)=>e===`[object ${t}]`;let tC=0;const nC=e=>{const t=typeof e,n=(r=e,JN.prototype.toString.call(r));var r;const s=eC(n,"Date"),a=eC(n,"RegExp"),i=eC(n,"Object");let o,l;if(JN(e)!==e||s||a)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=QN.get(e),o)return o;if(o=++tC+"~",QN.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=nC(e[l])+",";QN.set(e,o)}if(i){o="#";const t=JN.keys(e).sort();for(;!ZN(l=t.pop());)ZN(e[l])||(o+=l+":"+nC(e[l])+",");QN.set(e,o)}}return o},rC=Om.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),sC={dedupe:!0},aC=sN.defineProperty(e=>{const{value:t}=e,n=Im.useContext(WN),r=iN(t),s=Im.useMemo(()=>r?t(n):t,[r,n,t]),a=Im.useMemo(()=>r?s:UN(n,s),[r,n,s]),i=s&&s.provider,o=Im.useRef(rN);i&&!o.current&&(o.current=zN(i(a.cache||LN),s));const l=o.current;return l&&(a.cache=l[0],a.mutate=l[1]),jN(()=>{if(l)return l[2]&&l[2](),l[3]},[]),Im.createElement(WN.Provider,oN(e,{value:a}))},"defaultValue",{value:BN}),iC=(oC=(e,t,n)=>{const{cache:r,compare:s,suspense:a,fallbackData:i,revalidateOnMount:o,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:d,refreshWhenOffline:u,keepPreviousData:h}=n,[p,f,m,g]=tN.get(r),[v,y]=PN(e),x=Im.useRef(!1),b=Im.useRef(!1),w=Im.useRef(v),k=Im.useRef(t),S=Im.useRef(n),j=()=>S.current,_=()=>j().isVisible()&&j().isOnline(),[A,E,T,N]=mN(r,v),C=Im.useRef({}).current,P=aN(i)?aN(n.fallback)?rN:n.fallback[v]:i,R=(e,t)=>{for(const n in C){const r=n;if("data"===r){if(!s(e[r],t[r])){if(!aN(e[r]))return!1;if(!s(U,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},M=Im.useMemo(()=>{const e=!!v&&!!t&&(aN(o)?!j().isPaused()&&!a&&!1!==l:o),n=t=>{const n=oN(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=A(),s=N(),i=n(r),c=r===s?i:n(s);let d=i;return[()=>{const e=n(A());return R(e,d)?(d.data=e.data,d.isLoading=e.isLoading,d.isValidating=e.isValidating,d.error=e.error,d):(d=e,e)},()=>c]},[r,v]),I=QT.useSyncExternalStore(Im.useCallback(e=>T(v,(t,n)=>{R(n,t)||e()}),[r,v]),M[0],M[1]),O=!x.current,z=p[v]&&p[v].length>0,D=I.data,L=aN(D)?P&&lN(P)?rC(P):P:D,F=I.error,B=Im.useRef(L),U=h?aN(D)?aN(B.current)?L:B.current:D:L,W=!(z&&!aN(F))&&(O&&!aN(o)?o:!j().isPaused()&&(a?!aN(L)&&l:aN(L)||l)),$=!!(v&&t&&O&&W),V=aN(I.isValidating)?$:I.isValidating,H=aN(I.isLoading)?$:I.isLoading,q=Im.useCallback(async e=>{const t=k.current;if(!v||!t||b.current||j().isPaused())return!1;let r,a,i=!0;const o=e||{},l=!m[v]||!o.dedupe,c=()=>wN?!b.current&&v===w.current&&x.current:v===w.current,d={isValidating:!1,isLoading:!1},u=()=>{E(d)},h=()=>{const e=m[v];e&&e[1]===a&&delete m[v]},g={isValidating:!0};aN(A().data)&&(g.isLoading=!0);try{if(l&&(E(g),n.loadingTimeout&&aN(A().data)&&setTimeout(()=>{i&&c()&&j().onLoadingSlow(v,n)},n.loadingTimeout),m[v]=[t(y),MN()]),[r,a]=m[v],r=await r,l&&setTimeout(h,n.dedupingInterval),!m[v]||m[v][1]!==a)return l&&c()&&j().onDiscarded(v),!1;d.error=rN;const e=f[v];if(!aN(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return u(),l&&c()&&j().onDiscarded(v),!1;const o=A().data;d.data=s(o,r)?o:r,l&&c()&&j().onSuccess(r,v,n)}catch(S){h();const e=j(),{shouldRetryOnError:t}=e;e.isPaused()||(d.error=S,l&&c()&&(e.onError(S,v,e),(!0===t||iN(t)&&t(S))&&(j().revalidateOnFocus&&j().revalidateOnReconnect&&!_()||e.onErrorRetry(S,v,e,e=>{const t=p[v];t&&t[0]&&t[0](3,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0}))))}return i=!1,u(),!0},[v,r]),G=Im.useCallback((...e)=>IN(r,w.current,...e),[]);if(jN(()=>{k.current=t,S.current=n,aN(D)||(B.current=D)}),jN(()=>{if(!v)return;const e=q.bind(rN,sC);let t=0;if(j().revalidateOnFocus){const e=Date.now();t=e+j().focusThrottleInterval}const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(v,p,(n,r={})=>{if(0==n){const n=Date.now();j().revalidateOnFocus&&n>t&&_()&&(t=n+j().focusThrottleInterval,e())}else if(1==n)j().revalidateOnReconnect&&_()&&e();else{if(2==n)return q();if(3==n)return q(r)}});return b.current=!1,w.current=v,x.current=!0,E({_k:y}),W&&(m[v]||(aN(L)||kN?e():SN(e))),()=>{b.current=!0,n()}},[v]),jN(()=>{let e;function t(){const t=iN(c)?c(A().data):c;t&&-1!==e&&(e=setTimeout(n,t))}function n(){A().error||!d&&!j().isVisible()||!u&&!j().isOnline()?t():q(sC).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,d,u,v]),Im.useDebugValue(U),a&&aN(L)&&v){if(!wN&&kN)throw new Error("Fallback data is required when using Suspense in SSR.");k.current=t,S.current=n,b.current=!1;const e=g[v];if(!aN(e)){const t=G(e);rC(t)}if(!aN(F))throw F;{const e=q(sC);aN(U)||(e.status="fulfilled",e.value=!0),rC(e)}}return{mutate:G,get data(){return C.data=!0,U},get error(){return C.error=!0,F},get isValidating(){return C.isValidating=!0,V},get isLoading(){return C.isLoading=!0,H}}},function(...e){const t=GN(),[n,r,s]=qN(e),a=UN(t,s);let i=oC;const{use:o}=a,l=(o||[]).concat(KN);for(let c=l.length;c--;)i=l[c](i);return i(n,r||a.fetcher||null,a)});var oC;const lC=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:aC,default:iC,mutate:FN,preload:(e,t)=>{const[n,r]=PN(e),[,,,s]=tN.get(LN);if(s[n])return s[n];const a=t(r);return s[n]=a,a},unstable_serialize:e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?nC(e):"",t]})(e)[0],useSWRConfig:GN},Symbol.toStringTag,{value:"Module"})),cC=()=>{},dC=cC(),uC=Object,hC=e=>e===dC,pC=new WeakMap,fC=(e,t)=>e===`[object ${t}]`;let mC=0;const gC=e=>{const t=typeof e,n=(r=e,uC.prototype.toString.call(r));var r;const s=fC(n,"Date"),a=fC(n,"RegExp"),i=fC(n,"Object");let o,l;if(uC(e)!==e||s||a)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=pC.get(e),o)return o;if(o=++mC+"~",pC.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=gC(e[l])+",";pC.set(e,o)}if(i){o="#";const t=uC.keys(e).sort();for(;!hC(l=t.pop());)hC(e[l])||(o+=l+":"+gC(e[l])+",");pC.set(e,o)}}return o},vC=e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?gC(e):"",t]})(e?e(0,null):null)[0],yC=Promise.resolve(),xC=(bC=iC,wC=e=>(t,n,r)=>{const s=Im.useRef(!1),{cache:a,initialSize:i=1,revalidateAll:o=!1,persistSize:l=!1,revalidateFirstPage:c=!0,revalidateOnMount:d=!1,parallel:u=!1}=r,[,,,h]=tN.get(LN);let p;try{p=vC(t),p&&(p=$N+p)}catch(j){}const[f,m,g]=mN(a,p),v=Im.useCallback(()=>aN(f()._l)?i:f()._l,[a,p,i]);QT.useSyncExternalStore(Im.useCallback(e=>p?g(p,()=>{e()}):()=>{},[a,p]),v,v);const y=Im.useCallback(()=>{const e=f()._l;return aN(e)?i:e},[p,i]),x=Im.useRef(y());jN(()=>{s.current?p&&m({_l:l?x.current:y()}):s.current=!0},[p,a]);const b=d&&!s.current,w=e(p,async e=>{const s=f()._i,i=f()._r;m({_r:rN});const l=[],d=y(),[p]=mN(a,e),g=p().data,v=[];let x=null;for(let f=0;f<d;++f){const[e,d]=PN(t(f,u?null:x));if(!e)break;const[p,m]=mN(a,e);let y=p().data;const w=o||s||aN(y)||c&&!f&&!aN(g)||b||g&&!aN(g[f])&&!r.compare(g[f],y);if(n&&("function"==typeof i?i(y,d):w)){const t=async()=>{if(e in h){const t=h[e];delete h[e],y=await t}else y=await n(d);m({data:y,_k:d}),l[f]=y};u?v.push(t):await t()}else l[f]=y;u||(x=y)}return u&&await Promise.all(v.map(e=>e())),m({_i:rN}),l},r),k=Im.useCallback(function(e,t){const n="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return p?(r&&(aN(e)?m({_i:!0,_r:n.revalidate}):m({_i:!1,_r:n.revalidate})),arguments.length?w.mutate(e,{...n,revalidate:r}):w.mutate()):yC},[p,a]),S=Im.useCallback(e=>{if(!p)return yC;const[,n]=mN(a,p);let r;if(iN(e)?r=e(y()):"number"==typeof e&&(r=e),"number"!=typeof r)return yC;n({_l:r}),x.current=r;const s=[],[i]=mN(a,p);let o=null;for(let l=0;l<r;++l){const[e]=PN(t(l,o)),[n]=mN(a,e),r=e?n().data:rN;if(aN(r))return k(i().data);s.push(r),o=r}return k(s)},[p,a,k,y]);return{size:y(),setSize:S,mutate:k,get data(){return w.data},get error(){return w.error},get isValidating(){return w.isValidating},get isLoading(){return w.isLoading}}},(...e)=>{const[t,n,r]=qN(e),s=(r.use||[]).concat(wC);return bC(t,n,{...r,use:s})});var bC,wC,kC=Object.prototype.hasOwnProperty;function SC(e,t,n){for(n of e.keys())if(jC(n,t))return n}function jC(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&jC(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"==typeof s&&!(s=SC(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"==typeof s&&!(s=SC(t,s)))return!1;if(!jC(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(kC.call(e,n)&&++r&&!kC.call(t,n))return!1;if(!(n in t)||!jC(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}function _C(e,t){if(!e)throw"string"==typeof t?new Error(t):new Error(`${t.displayName} not found`)}var AC,EC,TC=(e,t)=>{const{assertCtxFn:n=_C}=t||{},r=Om.createContext(void 0);r.displayName=e;return[r,()=>{const t=Om.useContext(r);return n(t,`${e} not found`),t.value},()=>{const e=Om.useContext(r);return e?e.value:{}}]},NC={};((e,t)=>{for(var n in t)ST(e,n,{get:t[n],enumerable:!0})})(NC,{useSWR:()=>iC,useSWRInfinite:()=>xC}),ET(NC,AC=lC,"default"),EC&&ET(EC,AC,"default");var[CC,PC]=TC("ClerkInstanceContext"),[RC,MC]=TC("UserContext"),[IC,OC]=TC("ClientContext"),[zC,DC]=TC("SessionContext");Om.createContext({});var[LC,FC]=TC("CheckoutContext"),BC=({children:e,...t})=>Om.createElement(LC.Provider,{value:{value:t}},e),[UC,WC]=TC("OrganizationContext"),$C=({children:e,organization:t,swrConfig:n})=>Om.createElement(NC.SWRConfig,{value:n},Om.createElement(UC.Provider,{value:{value:{organization:t}}},e));function VC(e){if(!Om.useContext(CC)){if("function"==typeof e)return void e();throw new Error(`${e} can only be used within the <ClerkProvider /> component.\n\nPossible fixes:\n1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.\n2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.\n\nLearn more: https://clerk.com/docs/components/clerk-provider`.trim())}}"undefined"!=typeof window?Om.useLayoutEffect:Om.useEffect;var HC="useUser";var qC=jC,GC=(e,t,n)=>{const r=!!n,s=Im.useRef(n);Im.useEffect(()=>{s.current=n},[n]),Im.useEffect(()=>{if(!r||!e)return()=>{};const n=(...e)=>{s.current&&s.current(...e)};return e.on(t,n),()=>{e.off(t,n)}},[r,t,e,s])},KC=Om.createContext(null);KC.displayName="ElementsContext";var XC=e=>null!==e&&"object"==typeof e,YC="[object Object]",JC=(e,t)=>{if(!XC(e)||!XC(t))return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;const r=Object.prototype.toString.call(e)===YC;if(r!==(Object.prototype.toString.call(t)===YC))return!1;if(!r&&!n)return e===t;const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;const i={};for(let d=0;d<s.length;d+=1)i[s[d]]=!0;for(let d=0;d<a.length;d+=1)i[a[d]]=!0;const o=Object.keys(i);if(o.length!==s.length)return!1;const l=e,c=t;return o.every(e=>JC(l[e],c[e]))},ZC=e=>((e,t)=>{if(!e)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${t} in an <Elements> provider.`);return e})(Om.useContext(KC),e);((e,t)=>{const n=`${r=e,r.charAt(0).toUpperCase()+r.slice(1)}Element`;var r;const s=t?e=>{ZC(`mounts <${n}>`);const{id:t,className:r}=e;return Om.createElement("div",{id:t,className:r})}:({id:t,className:r,fallback:s,options:a={},onBlur:i,onFocus:o,onReady:l,onChange:c,onEscape:d,onClick:u,onLoadError:h,onLoaderStart:p,onNetworksChange:f,onConfirm:m,onCancel:g,onShippingAddressChange:v,onShippingRateChange:y})=>{const x=ZC(`mounts <${n}>`),b="elements"in x?x.elements:null,[w,k]=Om.useState(null),S=Om.useRef(null),j=Om.useRef(null),[_,A]=Im.useState(!1);let E;GC(w,"blur",i),GC(w,"focus",o),GC(w,"escape",d),GC(w,"click",u),GC(w,"loaderror",h),GC(w,"loaderstart",p),GC(w,"networkschange",f),GC(w,"confirm",m),GC(w,"cancel",g),GC(w,"shippingaddresschange",v),GC(w,"shippingratechange",y),GC(w,"change",c),l&&(E=()=>{A(!0),l(w)}),GC(w,"ready",E),Om.useLayoutEffect(()=>{if(null===S.current&&null!==j.current&&b){let t=null;b&&(t=b.create(e,a)),S.current=t,k(t),t&&t.mount(j.current)}},[b,a]);const T=(e=>{const t=Im.useRef(e);return Im.useEffect(()=>{t.current=e},[e]),t.current})(a);return Om.useEffect(()=>{if(!S.current)return;const e=((e,t,n)=>XC(e)?Object.keys(e).reduce((r,s)=>{const a=!XC(t)||!JC(e[s],t[s]);return n.includes(s)?(a&&console.warn(`Unsupported prop change: options.${s} is not a mutable property.`),r):a?{...r||{},[s]:e[s]}:r},null):null)(a,T,["paymentRequest"]);e&&"update"in S.current&&S.current.update(e)},[a,T]),Om.useLayoutEffect(()=>()=>{if(S.current&&"function"==typeof S.current.destroy)try{S.current.destroy(),S.current=null}catch{}},[]),Om.createElement(Om.Fragment,null,!_&&s,Om.createElement("div",{id:t,style:{height:_?"unset":"0px",visibility:_?"visible":"hidden"},className:r,ref:j}))};s.displayName=n,s.__elementType=e})("payment","undefined"==typeof window),TC("StripeLibsContext"),TC("PaymentElementContext"),TC("StripeUtilsContext");var QC=wT({packageName:"@clerk/clerk-react"});var[eP,tP]=TC("AuthContext"),nP=CC,rP=PC,sP="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",aP="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",iP=e=>{VC(()=>{QC.throwMissingClerkProviderError({source:e})})},oP=e=>new Promise(t=>{const n=r=>{["ready","degraded"].includes(r)&&(t(),e.off("status",n))};e.on("status",n,{notify:!0})}),lP=(e={})=>{var t;iP("useAuth");const{treatPendingAsSignedOut:n,...r}=null!=e?e:{},s=r;let a=tP();void 0===a.sessionId&&void 0===a.userId&&(a=null!=s?s:{});const i=rP(),o=Im.useCallback((e=>async t=>(await oP(e),e.session?e.session.getToken(t):null))(i),[i]),l=Im.useCallback((e=>async(...t)=>(await oP(e),e.signOut(...t)))(i),[i]);return null==(t=i.telemetry)||t.record(WT("useAuth",{treatPendingAsSignedOut:n})),function(e,{treatPendingAsSignedOut:t=!0}={}){const{userId:n,orgId:r,orgRole:s,has:a,signOut:i,getToken:o,orgPermissions:l,factorVerificationAge:c,sessionClaims:d}=null!=e?e:{},u=Im.useCallback(e=>a?a(e):OT({userId:n,orgId:r,orgRole:s,orgPermissions:l,factorVerificationAge:c,features:(null==d?void 0:d.fea)||"",plans:(null==d?void 0:d.pla)||""})(e),[a,n,r,s,l,c]),h=(({authObject:{sessionId:e,sessionStatus:t,userId:n,actor:r,orgId:s,orgRole:a,orgSlug:i,signOut:o,getToken:l,has:c,sessionClaims:d},options:{treatPendingAsSignedOut:u=!0}})=>void 0===e&&void 0===n?{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:n,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:o,getToken:l}:null===e&&null===n?{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:n,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:o,getToken:l}:u&&"pending"===t?{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:o,getToken:l}:e&&d&&n&&s&&a?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:d,userId:n,actor:r||null,orgId:s,orgRole:a,orgSlug:i||null,has:c,signOut:o,getToken:l}:e&&d&&n&&!s?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:d,userId:n,actor:r||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:o,getToken:l}:void 0)({authObject:{...e,getToken:o,signOut:i,has:u},options:{treatPendingAsSignedOut:t}});if(!h)return QC.throw(sP);return h}({...a,getToken:o,signOut:l},{treatPendingAsSignedOut:n})};var cP=(e,t)=>{const n=("string"==typeof t?t:null==t?void 0:t.component)||e.displayName||e.name||"Component";e.displayName=n;const r="string"==typeof t?void 0:t,s=t=>{iP(n||"withClerk");const s=rP();return s.loaded||(null==r?void 0:r.renderWhileLoading)?Om.createElement(e,{...t,component:n,clerk:s}):null};return s.displayName=`withClerk(${n})`,s},dP=new Set,uP=(e,t,n)=>{const r=(()=>{try{return!1}catch{}return!1})()||(()=>{try{return!0}catch{}return!1})(),s=n??e;dP.has(s)||r||(dP.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.\n${t}`))},hP=({children:e,treatPendingAsSignedOut:t})=>{iP("SignedIn");const{userId:n}=lP({treatPendingAsSignedOut:t});return n?e:null},pP=({children:e,treatPendingAsSignedOut:t})=>{iP("SignedOut");const{userId:n}=lP({treatPendingAsSignedOut:t});return null===n?e:null};cP(({clerk:e,...t})=>{const{client:n,session:r}=e,s=n.signedInSessions?n.signedInSessions.length>0:n.activeSessions&&n.activeSessions.length>0;return Om.useEffect(()=>{null===r&&s?e.redirectToAfterSignOut():e.redirectToSignIn(t)},[]),null},"RedirectToSignIn"),cP(({clerk:e,...t})=>(Om.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp"),cP(({clerk:e,...t})=>(Om.useEffect(()=>{e.redirectToTasks(t)},[]),null),"RedirectToTasks"),cP(({clerk:e})=>(Om.useEffect(()=>{uP("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),e.redirectToUserProfile()},[]),null),"RedirectToUserProfile"),cP(({clerk:e})=>(Om.useEffect(()=>{uP("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile"),cP(({clerk:e})=>(Om.useEffect(()=>{uP("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization"),cP(({clerk:e,...t})=>(Om.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");var fP=e=>{(()=>{try{return!1}catch{}return!1})()&&console.error(`Clerk: ${e}`)};function mP(e,t,n){return"function"==typeof e?e(t):void 0!==e?e:void 0!==n?n:void 0}var gP=(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n},vP=e=>t=>{try{return Om.Children.only(e)}catch{return QC.throw((e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`)(t))}},yP=(e,t)=>(e||(e=t),"string"==typeof e&&(e=Om.createElement("button",null,e)),e),xP=e=>(...t)=>{if(e&&"function"==typeof e)return e(...t)};var bP=new Map;var wP=e=>{const[t,n]=Im.useState(new Map);return e.map(e=>({id:e.id,mount:t=>n(n=>new Map(n).set(String(e.id),t)),unmount:()=>n(t=>{const n=new Map(t);return n.set(String(e.id),null),n}),portal:()=>{const n=t.get(String(e.id));return n?ZA.createPortal(e.component,n):null}}))},kP=(e,t)=>!!e&&Om.isValidElement(e)&&(null==e?void 0:e.type)===t,SP=(e,t)=>AP({children:e,reorderItemsLabels:["account","security"],LinkComponent:VP,PageComponent:$P,MenuItemsComponent:KP,componentName:"UserProfile"},t),jP=(e,t)=>AP({children:e,reorderItemsLabels:["general","members"],LinkComponent:QP,PageComponent:ZP,componentName:"OrganizationProfile"},t),_P=e=>{const t=[],n=[QP,ZP,KP,$P,VP];return Om.Children.forEach(e,e=>{n.some(t=>kP(e,t))||t.push(e)}),t},AP=(e,t)=>{const{children:n,LinkComponent:r,PageComponent:s,MenuItemsComponent:a,reorderItemsLabels:i,componentName:o}=e,{allowForAnyChildren:l=!1}=t||{},c=[];Om.Children.forEach(n,e=>{if(!kP(e,s)&&!kP(e,r)&&!kP(e,a))return void(e&&!l&&fP((e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`)(o)));const{props:t}=e,{children:n,label:d,url:u,labelIcon:h}=t;if(kP(e,s))if(EP(t,i))c.push({label:d});else{if(!TP(t))return void fP((e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`)(o));c.push({label:d,labelIcon:h,children:n,url:u})}if(kP(e,r)){if(!NP(t))return void fP((e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`)(o));c.push({label:d,labelIcon:h,url:u})}});const d=[],u=[],h=[];c.forEach((e,t)=>{if(TP(e))return d.push({component:e.children,id:t}),void u.push({component:e.labelIcon,id:t});NP(e)&&h.push({component:e.labelIcon,id:t})});const p=wP(d),f=wP(u),m=wP(h),g=[],v=[];return c.forEach((e,t)=>{if(EP(e,i))g.push({label:e.label});else{if(TP(e)){const{portal:n,mount:r,unmount:s}=p.find(e=>e.id===t),{portal:a,mount:i,unmount:o}=f.find(e=>e.id===t);return g.push({label:e.label,url:e.url,mount:r,unmount:s,mountIcon:i,unmountIcon:o}),v.push(n),void v.push(a)}if(NP(e)){const{portal:n,mount:r,unmount:s}=m.find(e=>e.id===t);return g.push({label:e.label,url:e.url,mountIcon:r,unmountIcon:s}),void v.push(n)}}}),{customPages:g,customPagesPortals:v}},EP=(e,t)=>{const{children:n,label:r,url:s,labelIcon:a}=e;return!n&&!s&&!a&&t.some(e=>e===r)},TP=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!!(t&&r&&s&&n)},NP=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!(t||!r||!s||!n)},CP=({children:e,MenuItemsComponent:t,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:s,UserProfilePageComponent:a,reorderItemsLabels:i,allowForAnyChildren:o=!1})=>{const l=[],c=[],d=[];Om.Children.forEach(e,e=>{if(!kP(e,t)&&!kP(e,s)&&!kP(e,a))return void(e&&!o&&fP("<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));if(kP(e,s)||kP(e,a))return;const{props:c}=e;Om.Children.forEach(c.children,e=>{if(!kP(e,n)&&!kP(e,r))return void(e&&fP("<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));const{props:t}=e,{label:s,labelIcon:a,href:o,onClick:c,open:d}=t;if(kP(e,n))if(PP(t,i))l.push({label:s});else{if(!RP(t))return void fP("Missing props. <UserButton.Action /> component requires the following props: label.");{const e={label:s,labelIcon:a};if(void 0!==c)l.push({...e,onClick:c});else{if(void 0===d)return void fP("Custom menu item must have either onClick or open property");l.push({...e,open:d.startsWith("/")?d:`/${d}`})}}}if(kP(e,r)){if(!MP(t))return void fP("Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.");l.push({label:s,labelIcon:a,href:o})}})});const u=[],h=[];l.forEach((e,t)=>{RP(e)&&u.push({component:e.labelIcon,id:t}),MP(e)&&h.push({component:e.labelIcon,id:t})});const p=wP(u),f=wP(h);return l.forEach((e,t)=>{if(PP(e,i)&&c.push({label:e.label}),RP(e)){const{portal:n,mount:r,unmount:s}=p.find(e=>e.id===t),a={label:e.label,mountIcon:r,unmountIcon:s};"onClick"in e?a.onClick=e.onClick:"open"in e&&(a.open=e.open),c.push(a),d.push(n)}if(MP(e)){const{portal:n,mount:r,unmount:s}=f.find(e=>e.id===t);c.push({label:e.label,href:e.href,mountIcon:r,unmountIcon:s}),d.push(n)}}),{customMenuItems:c,customMenuItemsPortals:d}},PP=(e,t)=>{const{children:n,label:r,onClick:s,labelIcon:a}=e;return!n&&!s&&!a&&t.some(e=>e===r)},RP=e=>{const{label:t,labelIcon:n,onClick:r,open:s}=e;return!(!n||!t||"function"!=typeof r&&"string"!=typeof s)},MP=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},IP=(e=>{const t=null==e?void 0:e.isReady;return n=>new Promise((r,s)=>{const{root:a=(null==document?void 0:document.body),selector:i,timeout:o=0}=n;if(!a)return void s(new Error("No root element provided"));let l=a;if(i&&(l=null==a?void 0:a.querySelector(i)),t(l,i))return void r();const c=new MutationObserver(n=>{for(const s of n)if(!l&&i&&(l=null==a?void 0:a.querySelector(i)),(e.childList&&"childList"===s.type||e.attributes&&"attributes"===s.type)&&t(l,i))return c.disconnect(),void r()});c.observe(a,e),o>0&&setTimeout(()=>{c.disconnect(),s(new Error(`Timeout waiting for ${i}`))},o)})})({childList:!0,subtree:!0,isReady:(e,t)=>{var n;return!!(null==e?void 0:e.childElementCount)&&(null==(n=null==e?void 0:e.matches)?void 0:n.call(e,t))&&e.childElementCount>0}});function OP(e,t){const n=Im.useRef(),[r,s]=Im.useState("rendering");return Im.useEffect(()=>{if(!e)throw new Error("Clerk: no component name provided, unable to detect mount.");if("undefined"!=typeof window&&!n.current){const r=`[data-clerk-component="${e}"]`,a=null==t?void 0:t.selector;n.current=IP({selector:a?r+a:r}).then(()=>{s("rendered")}).catch(()=>{s("error")})}},[e,null==t?void 0:t.selector]),r}var zP=e=>"mount"in e,DP=e=>"open"in e,LP=e=>null==e?void 0:e.map(({mountIcon:e,unmountIcon:t,...n})=>n),FP=class extends Om.PureComponent{constructor(){super(...arguments),this.rootRef=Om.createRef()}componentDidUpdate(e){var t,n,r,s;if(!zP(e)||!zP(this.props))return;const a=gP(e.props,"customPages","customMenuItems","children"),i=gP(this.props.props,"customPages","customMenuItems","children"),o=(null==(t=a.customPages)?void 0:t.length)!==(null==(n=i.customPages)?void 0:n.length),l=(null==(r=a.customMenuItems)?void 0:r.length)!==(null==(s=i.customMenuItems)?void 0:s.length),c=LP(e.props.customMenuItems),d=LP(this.props.props.customMenuItems);qC(a,i)&&qC(c,d)&&!o&&!l||this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(zP(this.props)&&this.props.mount(this.rootRef.current,this.props.props),DP(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(zP(this.props)&&this.props.unmount(this.rootRef.current),DP(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:e=!1}=this.props,t={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return Om.createElement(Om.Fragment,null,!e&&Om.createElement("div",{...t}),this.props.children)}},BP=e=>{var t,n;return Om.createElement(Om.Fragment,null,null==(t=null==e?void 0:e.customPagesPortals)?void 0:t.map((e,t)=>Im.createElement(e,{key:t})),null==(n=null==e?void 0:e.customMenuItemsPortals)?void 0:n.map((e,t)=>Im.createElement(e,{key:t})))},UP=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"SignIn",renderWhileLoading:!0}),WP=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"SignUp",renderWhileLoading:!0});function $P({children:e}){return fP("<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),Om.createElement(Om.Fragment,null,e)}function VP({children:e}){return fP("<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),Om.createElement(Om.Fragment,null,e)}var HP=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=SP(r.children);return Om.createElement(Om.Fragment,null,s&&n,Om.createElement(FP,{component:t,mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:i},rootProps:a},Om.createElement(BP,{customPagesPortals:o})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(HP,{Page:$P,Link:VP});var qP=Im.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),GP=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=SP(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),l=Object.assign(r.userProfileProps||{},{customPages:i}),{customMenuItems:c,customMenuItemsPortals:d}=(u=r.children,h={allowForAnyChildren:!!r.__experimental_asProvider},CP({children:u,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:KP,MenuActionComponent:XP,MenuLinkComponent:YP,UserProfileLinkComponent:VP,UserProfilePageComponent:$P,allowForAnyChildren:null!=(p=null==h?void 0:h.allowForAnyChildren)&&p}));var u,h,p;const f=_P(r.children),m={mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...r,userProfileProps:l,customMenuItems:c}},g={customPagesPortals:o,customMenuItemsPortals:d};return Om.createElement(qP.Provider,{value:m},s&&n,e.loaded&&Om.createElement(FP,{component:t,...m,hideRootHtmlElement:!!r.__experimental_asProvider,rootProps:a},r.__experimental_asProvider?f:null,Om.createElement(BP,{...g})))},{component:"UserButton",renderWhileLoading:!0});function KP({children:e}){return fP("<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`."),Om.createElement(Om.Fragment,null,e)}function XP({children:e}){return fP("<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`."),Om.createElement(Om.Fragment,null,e)}function YP({children:e}){return fP("<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`."),Om.createElement(Om.Fragment,null,e)}var JP=Object.assign(GP,{UserProfilePage:$P,UserProfileLink:VP,MenuItems:KP,Action:XP,Link:YP,__experimental_Outlet:function(e){const t=Im.useContext(qP),n={...t,props:{...t.props,...e}};return Om.createElement(FP,{...n})}});function ZP({children:e}){return fP("<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),Om.createElement(Om.Fragment,null,e)}function QP({children:e}){return fP("<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),Om.createElement(Om.Fragment,null,e)}var eR=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=jP(r.children);return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:i},rootProps:a},Om.createElement(BP,{customPagesPortals:o})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(eR,{Page:ZP,Link:QP}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"CreateOrganization",renderWhileLoading:!0});var tR=Im.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),nR=cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=jP(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),l=Object.assign(r.organizationProfileProps||{},{customPages:i}),c=_P(r.children),d={mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...r,organizationProfileProps:l},rootProps:a,component:t};return e.__experimental_prefetchOrganizationSwitcher(),Om.createElement(tR.Provider,{value:d},Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{...d,hideRootHtmlElement:!!r.__experimental_asProvider},r.__experimental_asProvider?c:null,Om.createElement(BP,{customPagesPortals:o}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});Object.assign(nR,{OrganizationProfilePage:ZP,OrganizationProfileLink:QP,__experimental_Outlet:function(e){const t=Im.useContext(tR),n={...t,props:{...t.props,...e}};return Om.createElement(FP,{...n})}}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"OrganizationList",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,open:e.openGoogleOneTap,close:e.closeGoogleOneTap,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"GoogleOneTap",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountWaitlist,unmount:e.unmountWaitlist,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"Waitlist",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t,{selector:'[data-component-status="ready"]'})||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountPricingTable,unmount:e.unmountPricingTable,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"PricingTable",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountApiKeys,unmount:e.unmountApiKeys,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"ApiKeys",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountUserAvatar,unmount:e.unmountUserAvatar,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"UserAvatar",renderWhileLoading:!0}),cP(({clerk:e,component:t,fallback:n,...r})=>{const s="rendering"===OP(t)||!e.loaded,a={...s&&n&&{style:{display:"none"}}};return Om.createElement(Om.Fragment,null,s&&n,e.loaded&&Om.createElement(FP,{component:t,mount:e.mountTaskChooseOrganization,unmount:e.unmountTaskChooseOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:a}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var rR=e=>{throw TypeError(e)},sR=(e,t,n)=>t.has(e)||rR("Cannot "+n),aR=(e,t,n)=>(sR(e,t,"read from private field"),n?n.call(e):t.get(e)),iR=(e,t,n)=>t.has(e)?rR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),oR=(e,t,n,r)=>(sR(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),lR=(e,t,n)=>(sR(e,t,"access private method"),n),cR=e=>{var t;return null==(t=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))?void 0:t[1]},dR=e=>e.trim().replace(/^v/,"").split(".")[0];function uR(e){return e.startsWith("/")}var hR={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},pR=async e=>new Promise(t=>setTimeout(t,e)),fR=(e,t)=>t?e*(1+Math.random()):e,mR=e=>{let t=0;return async()=>{await pR((()=>{const n=e.initialDelay,r=e.factor;let s=n*Math.pow(r,t);return s=fR(s,e.jitter),Math.min(e.maxDelayBetweenRetries||s,s)})()),t++}};async function gR(e="",t){const{async:n,defer:r,beforeLoad:s,crossOrigin:a,nonce:i}=t||{};return(async(e,t={})=>{let n=0;const{shouldRetry:r,initialDelay:s,maxDelayBetweenRetries:a,factor:i,retryImmediately:o,jitter:l,onBeforeRetry:c}={...hR,...t},d=mR({initialDelay:s,maxDelayBetweenRetries:a,factor:i,jitter:l});for(;;)try{return await e()}catch(Vne){if(n++,!r(Vne,n))throw Vne;c&&await c(n),o&&1===n?await pR(fR(100,l)):await d()}})(()=>new Promise((t,o)=>{e||o(new Error("loadScript cannot be called without a src")),document&&document.body||o(new Error("loadScript cannot be called when document does not exist"));const l=document.createElement("script");a&&l.setAttribute("crossorigin",a),l.async=n||!1,l.defer=r||!1,l.addEventListener("load",()=>{l.remove(),t(l)}),l.addEventListener("error",t=>{l.remove(),o(t.error??new Error(`failed to load script: ${e}`))}),l.src=e,l.nonce=i,null==s||s(l),document.body.appendChild(l)}),{shouldRetry:(e,t)=>t<=5})}var vR="Failed to load Clerk",{isDevOrStagingUrl:yR}=function(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n="string"==typeof t?t:t.hostname;let r=e.get(n);return void 0===r&&(r=DT.some(e=>n.endsWith(e)),e.set(n,r)),r}}}(),xR=wT({packageName:"@clerk/shared"});function bR(){if("undefined"==typeof window||!window.Clerk)return!1;const e=window.Clerk;return"object"==typeof e&&"function"==typeof e.load}function wR(e){return new Promise((t,n)=>{let r=!1;const s=(e,t)=>{clearTimeout(e),clearInterval(t)},a=()=>{r||bR()&&(r=!0,s(i,o),t(null))},i=setTimeout(()=>{r||(r=!0,s(i,o),bR()?t(null):n(new kT(vR,{code:"failed_to_load_clerk_js_timeout"})))},e);a();const o=setInterval(()=>{r?clearInterval(o):a()},100)})}var kR=e=>{var t,n;const{clerkJSUrl:r,clerkJSVariant:s,clerkJSVersion:a,proxyUrl:i,domain:o,publishableKey:l}=e;if(r)return r;let c="";var d,u;c=i&&(!(u=i)||function(e){return/^http(s)?:\/\//.test(e||"")}(u)||uR(u))?(d=i,d?uR(d)?new URL(d,window.location.origin).toString():d:"").replace(/http(s)?:\/\//,""):o&&!yR((null==(t=BT(l))?void 0:t.frontendApi)||"")?function(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}(o):(null==(n=BT(l))?void 0:n.frontendApi)||"";const h=s?`${s.replace(/\.+$/,"")}.`:"",p=((e,t="5.102.1")=>{if(e)return e;const n=cR(t);return n?"snapshot"===n?"5.102.1":n:dR(t)})(a);return`https://${c}/npm/@clerk/clerk-js@${p}/dist/clerk.${h}browser.js`},SR=e=>t=>{const n=(e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t})(e);for(const e in n)t.setAttribute(e,n[e])},jR=e=>{const t=e.userId,n=e.user,r=e.sessionId,s=e.sessionStatus,a=e.sessionClaims;return{userId:t,user:n,sessionId:r,session:e.session,sessionStatus:s,sessionClaims:a,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgPermissions:e.orgPermissions,orgSlug:e.orgSlug,actor:e.actor,factorVerificationAge:e.factorVerificationAge}},_R=e=>{var t,n,r,s;const a=e.user?e.user.id:e.user,i=e.user,o=e.session?e.session.id:e.session,l=e.session,c=null==(t=e.session)?void 0:t.status,d=e.session?null==(r=null==(n=e.session.lastActiveToken)?void 0:n.jwt)?void 0:r.claims:null,u=e.session?e.session.factorVerificationAge:null,h=null==l?void 0:l.actor,p=e.organization,f=e.organization?e.organization.id:e.organization,m=null==p?void 0:p.slug,g=p?null==(s=null==i?void 0:i.organizationMemberships)?void 0:s.find(e=>e.organization.id===f):p,v=g?g.permissions:g,y=g?g.role:g;return{userId:a,user:i,sessionId:o,session:l,sessionStatus:c,sessionClaims:d,organization:p,orgId:f,orgRole:y,orgSlug:m,orgPermissions:v,actor:h,factorVerificationAge:u}};function AR(){return"undefined"!=typeof window}var ER=(e,t,n,r,s)=>{const{notify:a}=s||{};let i=e.get(n);i||(i=[],e.set(n,i)),i.push(r),a&&t.has(n)&&r(t.get(n))},TR=(e,t,n)=>(e.get(t)||[]).map(e=>e(n)),NR=(e,t,n)=>{const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},CR="status",PR=()=>(()=>{const e=new Map,t=new Map,n=new Map;return{on:(...n)=>ER(e,t,...n),prioritizedOn:(...e)=>ER(n,t,...e),emit:(r,s)=>{t.set(r,s),TR(n,r,s),TR(e,r,s)},off:(...t)=>NR(e,...t),prioritizedOff:(...e)=>NR(n,...e),internal:{retrieveListeners:t=>e.get(t)||[]}}})();"undefined"==typeof window||window.global||(window.global="undefined"==typeof global?window:global);var RR=cP(({clerk:e,children:t,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:s,fallbackRedirectUrl:a,signUpForceRedirectUrl:i,mode:o,initialValues:l,withSignUp:c,oauthFlow:d,...u}=n;t=yP(t,"Sign in");const h=vP(t)("SignInButton"),p={...u,onClick:async t=>(h&&"object"==typeof h&&"props"in h&&await xP(h.props.onClick)(t),(()=>{const t={forceRedirectUrl:s,fallbackRedirectUrl:a,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:i,initialValues:l,withSignUp:c,oauthFlow:d};return"modal"===o?e.openSignIn({...t,appearance:n.appearance}):e.redirectToSignIn({...t,signInFallbackRedirectUrl:a,signInForceRedirectUrl:s})})())};return Om.cloneElement(h,p)},{component:"SignInButton",renderWhileLoading:!0});cP(({clerk:e,children:t,...n})=>{const{redirectUrl:r,...s}=n;t=yP(t,"Sign in with Metamask");const a=vP(t)("SignInWithMetamaskButton"),i={...s,onClick:async t=>(await xP(a.props.onClick)(t),(async()=>{!async function(){await e.authenticateWithMetamask({redirectUrl:r||void 0})}()})())};return Om.cloneElement(a,i)},{component:"SignInWithMetamask",renderWhileLoading:!0}),cP(({clerk:e,children:t,...n})=>{const{redirectUrl:r="/",signOutOptions:s,...a}=n;t=yP(t,"Sign out");const i=vP(t)("SignOutButton"),o={...a,onClick:async t=>(await xP(i.props.onClick)(t),e.signOut({redirectUrl:r,...s}))};return Om.cloneElement(i,o)},{component:"SignOutButton",renderWhileLoading:!0});var MR=cP(({clerk:e,children:t,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:a,signInForceRedirectUrl:i,mode:o,initialValues:l,oauthFlow:c,...d}=n;t=yP(t,"Sign up");const u=vP(t)("SignUpButton"),h={...d,onClick:async t=>(u&&"object"==typeof u&&"props"in u&&await xP(u.props.onClick)(t),(()=>{const t={fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:a,signInForceRedirectUrl:i,initialValues:l,oauthFlow:c};return"modal"===o?e.openSignUp({...t,appearance:n.appearance,unsafeMetadata:n.unsafeMetadata}):e.redirectToSignUp({...t,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:s})})())};return Om.cloneElement(u,h)},{component:"SignUpButton",renderWhileLoading:!0}),IR=class{constructor(e){this.isomorphicClerk=e,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const e=this.gateProperty.bind(this),t=()=>this.client.signIn.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get id(){return e(t,"id",void 0)},get supportedFirstFactors(){return e(t,"supportedFirstFactors",[])},get supportedSecondFactors(){return e(t,"supportedSecondFactors",[])},get secondFactorVerification(){return e(t,"secondFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},get identifier(){return e(t,"identifier",null)},get createdSessionId(){return e(t,"createdSessionId",null)},get userData(){return e(t,"userData",{})},get firstFactorVerification(){return e(t,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(t,"create"),password:this.gateMethod(t,"password"),sso:this.gateMethod(t,"sso"),finalize:this.gateMethod(t,"finalize"),emailCode:this.wrapMethods(()=>t().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>t().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>t().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>t().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>t().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(t,"ticket"),passkey:this.gateMethod(t,"passkey"),web3:this.gateMethod(t,"web3")}}}buildSignUpProxy(){const e=this.gateProperty.bind(this),t=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),r=()=>this.client.signUp.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signUp:{get id(){return e(r,"id",void 0)},get requiredFields(){return e(r,"requiredFields",[])},get optionalFields(){return e(r,"optionalFields",[])},get missingFields(){return e(r,"missingFields",[])},get username(){return e(r,"username",null)},get firstName(){return e(r,"firstName",null)},get lastName(){return e(r,"lastName",null)},get emailAddress(){return e(r,"emailAddress",null)},get phoneNumber(){return e(r,"phoneNumber",null)},get web3Wallet(){return e(r,"web3Wallet",null)},get hasPassword(){return e(r,"hasPassword",!1)},get unsafeMetadata(){return e(r,"unsafeMetadata",{})},get createdSessionId(){return e(r,"createdSessionId",null)},get createdUserId(){return e(r,"createdUserId",null)},get abandonAt(){return e(r,"abandonAt",null)},get legalAcceptedAt(){return e(r,"legalAcceptedAt",null)},get locale(){return e(r,"locale",null)},get status(){return e(r,"status","missing_requirements")},get unverifiedFields(){return e(r,"unverifiedFields",[])},get isTransferable(){return e(r,"isTransferable",!1)},create:t(r,"create"),update:t(r,"update"),sso:t(r,"sso"),password:t(r,"password"),ticket:t(r,"ticket"),web3:t(r,"web3"),finalize:t(r,"finalize"),verifications:n(()=>r().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(e){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(e){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const e=this.isomorphicClerk.client;if(!e)throw new Error("Clerk client not ready");return e}gateProperty(e,t,n){return(()=>{if(!AR()||!this.isomorphicClerk.loaded)return n;return e()[t]})()}gateMethod(e,t){return async(...n)=>{if(!AR())return QC.throw(`Attempted to call a method (${t}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(e=>this.isomorphicClerk.addOnLoaded(e));const r=e();return r[t].apply(r,n)}}wrapMethods(e,t){return Object.fromEntries(t.map(t=>[t,this.gateMethod(e,t)]))}wrapStruct(e,t,n,r){const s={};for(const a of t)s[a]=this.gateMethod(e,a);for(const a of n)Object.defineProperty(s,a,{get:()=>this.gateProperty(e,a,r[a]),enumerable:!0});return s}};void 0===globalThis.__BUILD_DISABLE_RHC__&&(globalThis.__BUILD_DISABLE_RHC__=!1);var OR,zR,DR,LR,FR,BR,UR,WR,$R,VR={name:"@clerk/clerk-react",version:"5.53.3",environment:"production"},HR=class e{constructor(e){iR(this,WR),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserAvatarNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],iR(this,OR,"loading"),iR(this,zR),iR(this,DR),iR(this,LR),iR(this,FR,PR()),iR(this,BR),this.buildSignInUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignInUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignInUrl",t)},this.buildSignUpUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignUpUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignUpUrl",t)},this.buildAfterSignInUrl=(...e)=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildAfterSignInUrl(...e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildAfterSignInUrl",t)},this.buildAfterSignUpUrl=(...e)=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildAfterSignUpUrl(...e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildAfterSignUpUrl",t)},this.buildAfterSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterSignOutUrl",e)},this.buildNewSubscriptionRedirectUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",e)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",e)},this.buildUserProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildUserProfileUrl",e)},this.buildCreateOrganizationUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildCreateOrganizationUrl",e)},this.buildOrganizationProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildOrganizationProfileUrl",e)},this.buildWaitlistUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildWaitlistUrl",e)},this.buildTasksUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildTasksUrl",e)},this.buildUrlWithAuth=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildUrlWithAuth(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildUrlWithAuth",t)},this.handleUnauthenticated=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.handleUnauthenticated()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("handleUnauthenticated",e)},this.on=(...e)=>{var t;if(null==(t=this.clerkjs)?void 0:t.on)return this.clerkjs.on(...e);aR(this,FR).on(...e)},this.off=(...e)=>{var t;if(null==(t=this.clerkjs)?void 0:t.off)return this.clerkjs.off(...e);aR(this,FR).off(...e)},this.addOnLoaded=e=>{this.loadedListeners.push(e),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(e=>e()),this.loadedListeners=[]},this.beforeLoad=e=>{if(!e)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=e=>{var t;if(!e)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=e,this.premountMethodCalls.forEach(e=>e()),this.premountAddListenerCalls.forEach((t,n)=>{t.nativeUnsubscribe=e.addListener(n)}),null==(t=aR(this,FR).internal.retrieveListeners("status"))||t.forEach(e=>{this.on("status",e,{notify:!0})}),null!==this.preopenSignIn&&e.openSignIn(this.preopenSignIn),null!==this.preopenCheckout&&e.__internal_openCheckout(this.preopenCheckout),null!==this.preopenPlanDetails&&e.__internal_openPlanDetails(this.preopenPlanDetails),null!==this.preopenSubscriptionDetails&&e.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),null!==this.preopenSignUp&&e.openSignUp(this.preopenSignUp),null!==this.preopenUserProfile&&e.openUserProfile(this.preopenUserProfile),null!==this.preopenUserVerification&&e.__internal_openReverification(this.preopenUserVerification),null!==this.preopenOneTap&&e.openGoogleOneTap(this.preopenOneTap),null!==this.preopenOrganizationProfile&&e.openOrganizationProfile(this.preopenOrganizationProfile),null!==this.preopenCreateOrganization&&e.openCreateOrganization(this.preopenCreateOrganization),null!==this.preOpenWaitlist&&e.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((t,n)=>{e.mountSignIn(n,t)}),this.premountSignUpNodes.forEach((t,n)=>{e.mountSignUp(n,t)}),this.premountUserProfileNodes.forEach((t,n)=>{e.mountUserProfile(n,t)}),this.premountUserAvatarNodes.forEach((t,n)=>{e.mountUserAvatar(n,t)}),this.premountUserButtonNodes.forEach((t,n)=>{e.mountUserButton(n,t)}),this.premountOrganizationListNodes.forEach((t,n)=>{e.mountOrganizationList(n,t)}),this.premountWaitlistNodes.forEach((t,n)=>{e.mountWaitlist(n,t)}),this.premountPricingTableNodes.forEach((t,n)=>{e.mountPricingTable(n,t)}),this.premountApiKeysNodes.forEach((t,n)=>{e.mountApiKeys(n,t)}),this.premountOAuthConsentNodes.forEach((t,n)=>{e.__internal_mountOAuthConsent(n,t)}),this.premountTaskChooseOrganizationNodes.forEach((t,n)=>{e.mountTaskChooseOrganization(n,t)}),void 0===this.clerkjs.status&&aR(this,FR).emit(CR,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...e)=>{var t;return null==(t=this.clerkjs)?void 0:t.__experimental_checkout(...e)},this.__unstable__updateProps=async e=>{const t=await lR(this,WR,$R).call(this);if(t&&"__unstable__updateProps"in t)return t.__unstable__updateProps(e)},this.setActive=e=>this.clerkjs?this.clerkjs.setActive(e):Promise.reject(),this.openSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(e):this.preopenSignIn=e},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(e):this.preopenCheckout=e},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(e):this.preopenPlanDetails=e},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(e):this.preopenSubscriptionDetails=null!=e?e:null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(e):this.preopenUserVerification=e},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=e=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(e):this.preopenOneTap=e},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(e):this.preopenUserProfile=e},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(e):this.preopenOrganizationProfile=e},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(e):this.preopenCreateOrganization=e},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(e):this.preOpenWaitlist=e},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(e):this.preopenSignUp=e},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(e,t):this.premountSignInNodes.set(e,t)},this.unmountSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(e):this.premountSignInNodes.delete(e)},this.mountSignUp=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(e,t):this.premountSignUpNodes.set(e,t)},this.unmountSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(e):this.premountSignUpNodes.delete(e)},this.mountUserAvatar=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserAvatar(e,t):this.premountUserAvatarNodes.set(e,t)},this.unmountUserAvatar=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserAvatar(e):this.premountUserAvatarNodes.delete(e)},this.mountUserProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(e,t):this.premountUserProfileNodes.set(e,t)},this.unmountUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(e):this.premountUserProfileNodes.delete(e)},this.mountOrganizationProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(e,t):this.premountOrganizationProfileNodes.set(e,t)},this.unmountOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(e):this.premountOrganizationProfileNodes.delete(e)},this.mountCreateOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(e,t):this.premountCreateOrganizationNodes.set(e,t)},this.unmountCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(e):this.premountCreateOrganizationNodes.delete(e)},this.mountOrganizationSwitcher=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(e,t):this.premountOrganizationSwitcherNodes.set(e,t)},this.unmountOrganizationSwitcher=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(e):this.premountOrganizationSwitcherNodes.delete(e)},this.__experimental_prefetchOrganizationSwitcher=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",e)},this.mountOrganizationList=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(e,t):this.premountOrganizationListNodes.set(e,t)},this.unmountOrganizationList=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(e):this.premountOrganizationListNodes.delete(e)},this.mountUserButton=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(e,t):this.premountUserButtonNodes.set(e,t)},this.unmountUserButton=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(e):this.premountUserButtonNodes.delete(e)},this.mountWaitlist=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(e,t):this.premountWaitlistNodes.set(e,t)},this.unmountWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(e):this.premountWaitlistNodes.delete(e)},this.mountPricingTable=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(e,t):this.premountPricingTableNodes.set(e,t)},this.unmountPricingTable=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(e):this.premountPricingTableNodes.delete(e)},this.mountApiKeys=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(e,t):this.premountApiKeysNodes.set(e,t)},this.unmountApiKeys=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(e):this.premountApiKeysNodes.delete(e)},this.__internal_mountOAuthConsent=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(e,t):this.premountOAuthConsentNodes.set(e,t)},this.__internal_unmountOAuthConsent=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(e):this.premountOAuthConsentNodes.delete(e)},this.mountTaskChooseOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(e,t):this.premountTaskChooseOrganizationNodes.set(e,t)},this.unmountTaskChooseOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(e):this.premountTaskChooseOrganizationNodes.delete(e)},this.addListener=e=>{if(this.clerkjs)return this.clerkjs.addListener(e);{const t=()=>{var t;const n=this.premountAddListenerCalls.get(e);n&&(null==(t=n.nativeUnsubscribe)||t.call(n),this.premountAddListenerCalls.delete(e))};return this.premountAddListenerCalls.set(e,{unsubscribe:t,nativeUnsubscribe:void 0}),t}},this.navigate=e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.navigate(e)};this.clerkjs&&this.loaded?t():this.premountMethodCalls.set("navigate",t)},this.redirectWithAuth=async(...e)=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectWithAuth(...e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectWithAuth",t)},this.redirectToSignIn=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignIn(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignIn",t)},this.redirectToSignUp=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignUp(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignUp",t)},this.redirectToUserProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToUserProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToUserProfile",e)},this.redirectToAfterSignUp=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("redirectToAfterSignUp",e)},this.redirectToAfterSignIn=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignIn()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignIn",e)},this.redirectToAfterSignOut=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignOut()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignOut",e)},this.redirectToOrganizationProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToOrganizationProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToOrganizationProfile",e)},this.redirectToCreateOrganization=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToCreateOrganization()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToCreateOrganization",e)},this.redirectToWaitlist=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToWaitlist()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToWaitlist",e)},this.redirectToTasks=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToTasks(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToTasks",t)},this.handleRedirectCallback=async e=>{var t;const n=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleRedirectCallback(e)};this.clerkjs&&this.loaded?null==(t=n())||t.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",n)},this.handleGoogleOneTapCallback=async(e,t)=>{var n;const r=()=>{var n;return null==(n=this.clerkjs)?void 0:n.handleGoogleOneTapCallback(e,t)};this.clerkjs&&this.loaded?null==(n=r())||n.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",r)},this.handleEmailLinkVerification=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleEmailLinkVerification(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("handleEmailLinkVerification",t)},this.authenticateWithMetamask=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithMetamask(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithMetamask",t)},this.authenticateWithCoinbaseWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithCoinbaseWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",t)},this.authenticateWithBase=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithBase(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithBase",t)},this.authenticateWithOKXWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithOKXWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithOKXWallet",t)},this.authenticateWithWeb3=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithWeb3(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithWeb3",t)},this.authenticateWithGoogleOneTap=async e=>(await lR(this,WR,$R).call(this)).authenticateWithGoogleOneTap(e),this.__internal_loadStripeJs=async()=>(await lR(this,WR,$R).call(this)).__internal_loadStripeJs(),this.createOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.createOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("createOrganization",t)},this.getOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.getOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("getOrganization",t)},this.joinWaitlist=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.joinWaitlist(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("joinWaitlist",t)},this.signOut=async(...e)=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.signOut(...e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("signOut",t)};const{Clerk:t=null,publishableKey:n}=e||{};oR(this,LR,n),oR(this,DR,null==e?void 0:e.proxyUrl),oR(this,zR,null==e?void 0:e.domain),this.options=e,this.Clerk=t,this.mode=AR()?"browser":"server",oR(this,BR,new IR(this)),this.options.sdkMetadata||(this.options.sdkMetadata=VR),aR(this,FR).emit(CR,"loading"),aR(this,FR).prioritizedOn(CR,e=>oR(this,OR,e)),aR(this,LR)&&this.loadClerkJS()}get publishableKey(){return aR(this,LR)}get loaded(){var e;return(null==(e=this.clerkjs)?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?(null==(e=this.clerkjs)?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):aR(this,OR)}static getOrCreateInstance(t){return(!AR()||!aR(this,UR)||t.Clerk&&aR(this,UR).Clerk!==t.Clerk||aR(this,UR).publishableKey!==t.publishableKey)&&oR(this,UR,new e(t)),aR(this,UR)}static clearInstance(){oR(this,UR,null)}get domain(){return"undefined"!=typeof window&&window.location?mP(aR(this,zR),new URL(window.location.href),""):"function"==typeof aR(this,zR)?QC.throw(aP):aR(this,zR)||""}get proxyUrl(){return"undefined"!=typeof window&&window.location?mP(aR(this,DR),new URL(window.location.href),""):"function"==typeof aR(this,DR)?QC.throw(aP):aR(this,DR)||""}__internal_getOption(e){var t,n;return(null==(t=this.clerkjs)?void 0:t.__internal_getOption)?null==(n=this.clerkjs)?void 0:n.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return(null==(e=this.clerkjs)?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return null==(e=this.clerkjs)?void 0:e.instanceType}get frontendApi(){var e;return(null==(e=this.clerkjs)?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return(null==(e=this.clerkjs)?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return"undefined"!=typeof window&&window.location?mP(this.options.isSatellite,new URL(window.location.href),!1):"function"==typeof this.options.isSatellite&&QC.throw(aP)}async loadClerkJS(){var e;if("browser"===this.mode&&!this.loaded){"undefined"!=typeof window&&(window.__clerk_publishable_key=aR(this,LR),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let e;"function"==typeof this.Clerk?(e=new this.Clerk(aR(this,LR),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(e),await e.load(this.options)):(e=this.Clerk,e.loaded||(this.beforeLoad(e),await e.load(this.options))),global.Clerk=e}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await(async e=>{const t=(null==e?void 0:e.scriptLoadTimeout)??15e3;if(bR())return null;if(document.querySelector("script[data-clerk-js-script]"))return wR(t);if(!(null==e?void 0:e.publishableKey))return xR.throwMissingPublishableKeyError(),null;const n=wR(t);return gR(kR(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:SR(e)}).catch(e=>{throw new kT(vR+(e.message?`, ${e.message}`:""),{code:"failed_to_load_clerk_js",cause:e})}),n})({...this.options,publishableKey:aR(this,LR),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(null==(e=global.Clerk)?void 0:e.loaded)?this.hydrateClerkJS(global.Clerk):void 0}catch(t){const e=t;return aR(this,FR).emit(CR,"error"),void console.error(e.stack||e.message||e)}}}get version(){var e;return null==(e=this.clerkjs)?void 0:e.version}get client(){return this.clerkjs?this.clerkjs.client:void 0}get session(){return this.clerkjs?this.clerkjs.session:void 0}get user(){return this.clerkjs?this.clerkjs.user:void 0}get organization(){return this.clerkjs?this.clerkjs.organization:void 0}get telemetry(){return this.clerkjs?this.clerkjs.telemetry:void 0}get __unstable__environment(){return this.clerkjs?this.clerkjs.__unstable__environment:void 0}get isSignedIn(){return!!this.clerkjs&&this.clerkjs.isSignedIn}get billing(){var e;return null==(e=this.clerkjs)?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:aR(this,BR)}get apiKeys(){var e;return null==(e=this.clerkjs)?void 0:e.apiKeys}__unstable__setEnvironment(...e){this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs&&this.clerkjs.__unstable__setEnvironment(e)}};OR=new WeakMap,zR=new WeakMap,DR=new WeakMap,LR=new WeakMap,FR=new WeakMap,BR=new WeakMap,UR=new WeakMap,WR=new WeakSet,$R=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})},iR(HR,UR);var qR=HR;function GR(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:s,clerkStatus:a}=KR(t),[i,o]=Om.useState({client:s.client,session:s.session,user:s.user,organization:s.organization});Om.useEffect(()=>s.addListener(e=>o({...e})),[]);const l=((e,t,n)=>!e&&n?jR(n):_R(t))(s.loaded,i,n),c=Om.useMemo(()=>({value:s}),[a]),d=Om.useMemo(()=>({value:i.client}),[i.client]),{sessionId:u,sessionStatus:h,sessionClaims:p,session:f,userId:m,user:g,orgId:v,actor:y,organization:x,orgRole:b,orgSlug:w,orgPermissions:k,factorVerificationAge:S}=l,j=Om.useMemo(()=>({value:{sessionId:u,sessionStatus:h,sessionClaims:p,userId:m,actor:y,orgId:v,orgRole:b,orgSlug:w,orgPermissions:k,factorVerificationAge:S}}),[u,h,m,y,v,b,w,S,null==p?void 0:p.__raw]),_=Om.useMemo(()=>({value:f}),[u,f]),A=Om.useMemo(()=>({value:g}),[m,g]),E=Om.useMemo(()=>({value:{organization:x}}),[v,x]);return Om.createElement(nP.Provider,{value:c},Om.createElement(IC.Provider,{value:d},Om.createElement(zC.Provider,{value:_},Om.createElement($C,{...E.value},Om.createElement(eP.Provider,{value:j},Om.createElement(RC.Provider,{value:A},Om.createElement(BC,{value:void 0},r)))))))}var KR=e=>{const t=Om.useRef(qR.getOrCreateInstance(e)),[n,r]=Om.useState(t.current.status);return Om.useEffect(()=>{t.current.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),Om.useEffect(()=>{t.current.__unstable__updateProps({options:e})},[e.localization]),Om.useEffect(()=>(t.current.on("status",r),()=>{t.current&&t.current.off("status",r),qR.clearInstance()}),[]),{isomorphicClerk:t.current,clerkStatus:n}};var XR,YR,JR=function(e,t,n){const r=e.displayName||e.name||t||"Component",s=r=>(function(e,t,n=1){Om.useEffect(()=>{const r=bP.get(e)||0;return r==n?QC.throw(t):(bP.set(e,r+1),()=>{bP.set(e,(bP.get(e)||1)-1)})},[])}(t,n),Om.createElement(e,{...r}));return s.displayName=`withMaxAllowedInstancesGuard(${r})`,s}(function(e){const{initialState:t,children:n,__internal_bypassMissingPublishableKey:r,...s}=e,{publishableKey:a="",Clerk:i}=s;return i||r||(a?a&&!UT(a)&&QC.throwInvalidPublishableKeyError({key:a}):QC.throwMissingPublishableKeyError()),Om.createElement(GR,{initialState:t,isomorphicClerkOptions:s},n)},"ClerkProvider","You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.");JR.displayName="ClerkProvider",XR={packageName:"@clerk/clerk-react"},QC.setMessages(XR).setPackageName(XR),YR="@clerk/clerk-react",xR.setPackageName({packageName:YR});var ZR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var QR=(e,t)=>{const n=Im.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:i,...o},l)=>{return Im.createElement("svg",{ref:l,...ZR,width:r,height:r,stroke:n,strokeWidth:a?24*Number(s)/Number(r):s,className:`lucide lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...o},[...t.map(([e,t])=>Im.createElement(e,t)),...(Array.isArray(i)?i:[i])||[]]);var c});return n.displayName=`${e}`,n};const eM=QR("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),tM=QR("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),nM=QR("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),rM=QR("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),sM=QR("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),aM=QR("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),iM=QR("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),oM=QR("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),lM=QR("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),cM=QR("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),dM=QR("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),uM=QR("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),hM=QR("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),pM=QR("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),fM=QR("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),mM=QR("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),gM=QR("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]),vM=QR("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),yM=QR("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),xM=QR("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),bM=QR("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wM=QR("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),kM=QR("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),SM=QR("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),jM=QR("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),_M=QR("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),AM=QR("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),EM=QR("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),TM=QR("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),NM=QR("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),CM=QR("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),PM=QR("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),RM=QR("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),MM=QR("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),IM=QR("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),OM=QR("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),zM=QR("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),DM=QR("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),LM=QR("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),FM=QR("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),BM=QR("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),UM=QR("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),WM=QR("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),$M=QR("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),VM=QR("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),HM=QR("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qM=QR("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),GM=QR("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),KM=QR("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),XM=QR("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),YM=QR("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),JM=QR("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ZM=QR("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),QM=QR("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),eI=QR("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),tI=QR("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),nI=QR("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),rI=QR("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),sI=QR("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),aI=QR("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),iI=QR("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),oI=QR("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),lI=({children:e})=>{const t=$E(),{isSignedIn:n}=lP(),r=HE(),s=[{path:"/about",label:"O aplikacji",icon:RM}],a=[{path:t.pathname.startsWith("/paleta")?"/paleta/dashboard":"/dashboard",label:"Dashboard",icon:rM},{path:t.pathname.startsWith("/paleta")?"/paleta/analysis":"/analysis",label:"Analizator palet",icon:SM},{path:t.pathname.startsWith("/paleta")?"/paleta/settings":"/settings",label:"Ustawienia",icon:HM}];return Vm.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Vm.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:Vm.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Vm.jsxs("div",{className:"flex justify-between items-center h-16",children:[Vm.jsxs("button",{onClick:()=>r(t.pathname.startsWith("/paleta")?"/paleta":"/"),className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[Vm.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center shadow-md",children:Vm.jsx("span",{className:"text-white font-semibold text-sm",children:"P"})}),Vm.jsx("h1",{className:"text-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PalletAI"})]}),Vm.jsxs("nav",{className:"flex items-center space-x-4",children:[n&&Vm.jsx(Vm.Fragment,{children:a.map(({path:e,label:n,icon:r})=>Vm.jsxs(fT,{to:e,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(t.pathname===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[Vm.jsx(r,{className:"h-4 w-4"}),Vm.jsx("span",{children:n})]},e))}),s.map(({path:e,label:n,icon:r})=>Vm.jsxs(fT,{to:e,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+(t.pathname===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[Vm.jsx(r,{className:"h-4 w-4"}),Vm.jsx("span",{children:n})]},e)),Vm.jsxs("div",{className:"flex items-center space-x-3 ml-4 pl-4 border-l border-gray-300",children:[Vm.jsxs(pP,{children:[Vm.jsx(RR,{mode:"modal",children:Vm.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors",children:[Vm.jsx(zM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Zaloguj się"})]})}),Vm.jsx(MR,{mode:"modal",children:Vm.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:[Vm.jsx(rI,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Zarejestruj się"})]})})]}),Vm.jsx(hP,{children:Vm.jsx(JP,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-10 h-10"}}})})]})]})]})})}),Vm.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})},cI=Im.createContext({});function dI(e){const t=Im.useRef(null);return null===t.current&&(t.current=e()),t.current}const uI="undefined"!=typeof window,hI=uI?Im.useLayoutEffect:Im.useEffect,pI=Im.createContext(null);function fI(e,t){-1===e.indexOf(t)&&e.push(t)}function mI(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const gI=(e,t,n)=>n>t?t:n<e?e:n;const vI={},yI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function xI(e){return"object"==typeof e&&null!==e}const bI=e=>/^0[^.\s]+$/u.test(e);function wI(e){let t;return()=>(void 0===t&&(t=e()),t)}const kI=e=>e,SI=(e,t)=>n=>t(e(n)),jI=(...e)=>e.reduce(SI),_I=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class AI{constructor(){this.subscriptions=[]}add(e){return fI(this.subscriptions,e),()=>mI(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const EI=e=>1e3*e,TI=e=>e/1e3;function NI(e,t){return t?e*(1e3/t):0}const CI=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function PI(e,t,n,r){if(e===t&&n===r)return kI;const s=t=>function(e,t,n,r,s){let a,i,o=0;do{i=t+(n-t)/2,a=CI(i,r,s)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:CI(s(e),t,r)}const RI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MI=e=>t=>1-e(1-t),II=PI(.33,1.53,.69,.99),OI=MI(II),zI=RI(OI),DI=e=>(e*=2)<1?.5*OI(e):.5*(2-Math.pow(2,-10*(e-1))),LI=e=>1-Math.sin(Math.acos(e)),FI=MI(LI),BI=RI(LI),UI=PI(.42,0,1,1),WI=PI(0,0,.58,1),$I=PI(.42,0,.58,1),VI=e=>Array.isArray(e)&&"number"==typeof e[0],HI={linear:kI,easeIn:UI,easeInOut:$I,easeOut:WI,circIn:LI,circInOut:BI,circOut:FI,backIn:OI,backInOut:zI,backOut:II,anticipate:DI},qI=e=>{if(VI(e)){e.length;const[t,n,r,s]=e;return PI(t,n,r,s)}return"string"==typeof e?HI[e]:e},GI=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],KI={value:null,addProjectionMetrics:null};function XI(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=GI.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:(e,t=!1,a=!1)=>{const o=a&&s?n:r;return t&&i.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{o=e,s?a=!0:(s=!0,[n,r]=[r,n],n.forEach(c),t&&KI.value&&KI.value.frameloop[t].push(l),l=0,n.clear(),s=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?n:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:p,postRender:f}=i,m=()=>{const a=vI.useManualTiming?s.timestamp:performance.now();n=!1,vI.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(a-s.timestamp,40),1)),s.timestamp=a,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),p.process(s),f.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(m))};return{schedule:GI.reduce((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(m)),o.schedule(t,a,i)),t},{}),cancel:e=>{for(let t=0;t<GI.length;t++)i[GI[t]].cancel(e)},state:s,steps:i}}const{schedule:YI,cancel:JI,state:ZI,steps:QI}=XI("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:kI,!0);let eO;function tO(){eO=void 0}const nO={now:()=>(void 0===eO&&nO.set(ZI.isProcessing||vI.useManualTiming?ZI.timestamp:performance.now()),eO),set:e=>{eO=e,queueMicrotask(tO)}},rO=e=>t=>"string"==typeof t&&t.startsWith(e),sO=rO("--"),aO=rO("var(--"),iO=e=>!!aO(e)&&oO.test(e.split("/*")[0].trim()),oO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lO={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},cO={...lO,transform:e=>gI(0,1,e)},dO={...lO,default:1},uO=e=>Math.round(1e5*e)/1e5,hO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const pO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fO=(e,t)=>n=>Boolean("string"==typeof n&&pO.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),mO=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,a,i,o]=r.match(hO);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},gO={...lO,transform:e=>Math.round((e=>gI(0,255,e))(e))},vO={test:fO("rgb","red"),parse:mO("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+gO.transform(e)+", "+gO.transform(t)+", "+gO.transform(n)+", "+uO(cO.transform(r))+")"};const yO={test:fO("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:vO.transform},xO=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),bO=xO("deg"),wO=xO("%"),kO=xO("px"),SO=xO("vh"),jO=xO("vw"),_O=(()=>({...wO,parse:e=>wO.parse(e)/100,transform:e=>wO.transform(100*e)}))(),AO={test:fO("hsl","hue"),parse:mO("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+wO.transform(uO(t))+", "+wO.transform(uO(n))+", "+uO(cO.transform(r))+")"},EO={test:e=>vO.test(e)||yO.test(e)||AO.test(e),parse:e=>vO.test(e)?vO.parse(e):AO.test(e)?AO.parse(e):yO.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?vO.transform(e):AO.transform(e),getAnimatableNone:e=>{const t=EO.parse(e);return t.alpha=0,EO.transform(t)}},TO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const NO="number",CO="color",PO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function RO(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(PO,e=>(EO.test(e)?(r.color.push(a),s.push(CO),n.push(EO.parse(e))):e.startsWith("var(")?(r.var.push(a),s.push("var"),n.push(e)):(r.number.push(a),s.push(NO),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:i,indexes:r,types:s}}function MO(e){return RO(e).values}function IO(e){const{split:t,types:n}=RO(e),r=t.length;return e=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],void 0!==e[a]){const t=n[a];s+=t===NO?uO(e[a]):t===CO?EO.transform(e[a]):e[a]}return s}}const OO=e=>"number"==typeof e?0:EO.test(e)?EO.getAnimatableNone(e):e;const zO={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(hO))?void 0:t.length)||0)+((null==(n=e.match(TO))?void 0:n.length)||0)>0},parse:MO,createTransformer:IO,getAnimatableNone:function(e){const t=MO(e);return IO(e)(t.map(OO))}};function DO(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function LO(e,t){return n=>n>0?t:e}const FO=(e,t,n)=>e+(t-e)*n,BO=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},UO=[yO,vO,AO];function WO(e){const t=(n=e,UO.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===AO&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,a=0,i=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;s=DO(o,r,e+1/3),a=DO(o,r,e),i=DO(o,r,e-1/3)}else s=a=i=n;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*i),alpha:r}}(r)),r}const $O=(e,t)=>{const n=WO(e),r=WO(t);if(!n||!r)return LO(e,t);const s={...n};return e=>(s.red=BO(n.red,r.red,e),s.green=BO(n.green,r.green,e),s.blue=BO(n.blue,r.blue,e),s.alpha=FO(n.alpha,r.alpha,e),vO.transform(s))},VO=new Set(["none","hidden"]);function HO(e,t){return n=>FO(e,t,n)}function qO(e){return"number"==typeof e?HO:"string"==typeof e?iO(e)?LO:EO.test(e)?$O:XO:Array.isArray(e)?GO:"object"==typeof e?EO.test(e)?$O:KO:LO}function GO(e,t){const n=[...e],r=n.length,s=e.map((e,n)=>qO(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function KO(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=qO(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const XO=(e,t)=>{const n=zO.createTransformer(t),r=RO(e),s=RO(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?VO.has(e)&&!s.values.length||VO.has(t)&&!r.values.length?function(e,t){return VO.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):jI(GO(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],o=e.values[i]??0;n[s]=o,r[a]++}return n}(r,s),s.values),n):LO(e,t)};function YO(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return FO(e,t,n);return qO(e)(e,t)}const JO=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>YI.update(t,e),stop:()=>JI(t),now:()=>ZI.isProcessing?ZI.timestamp:nO.now()}},ZO=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(1e4*e(a/(s-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},QO=2e4;function ez(e){let t=0;let n=e.next(t);for(;!n.done&&t<QO;)t+=50,n=e.next(t);return t>=QO?1/0:t}function tz(e,t,n){const r=Math.max(t-5,0);return NI(n-e(r),t-r)}const nz=100,rz=10,sz=1,az=0,iz=800,oz=.3,lz=.3,cz={granular:.01,default:2},dz={granular:.005,default:.5},uz=.01,hz=10,pz=.05,fz=1,mz=.001;function gz({duration:e=iz,bounce:t=oz,velocity:n=az,mass:r=sz}){let s,a,i=1-t;i=gI(pz,fz,i),e=gI(uz,hz,TI(e)),i<1?(s=t=>{const r=t*i,s=r*e,a=r-n,o=yz(t,i),l=Math.exp(-s);return mz-a/o*l},a=t=>{const r=t*i*e,a=r*n+n,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=yz(Math.pow(t,2),i);return(-s(t)+mz>0?-1:1)*((a-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let s=1;s<vz;s++)r-=e(r)/t(r);return r}(s,a,5/e);if(e=EI(e),isNaN(o))return{stiffness:nz,damping:rz,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*i*Math.sqrt(r*t),duration:e}}}const vz=12;function yz(e,t){return e*Math.sqrt(1-t*t)}const xz=["duration","bounce"],bz=["stiffness","damping","mass"];function wz(e,t){return t.some(t=>void 0!==e[t])}function kz(e=lz,t=oz){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:az,stiffness:nz,damping:rz,mass:sz,isResolvedFromDuration:!1,...e};if(!wz(e,bz)&&wz(e,xz))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,a=2*gI(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:sz,stiffness:s,damping:a}}else{const n=gz(e);t={...t,...n,mass:sz},t.isResolvedFromDuration=!0}return t}({...n,velocity:-TI(n.velocity||0)}),f=h||0,m=c/(2*Math.sqrt(l*d)),g=i-a,v=TI(Math.sqrt(l/d)),y=Math.abs(g)<5;let x;if(r||(r=y?cz.granular:cz.default),s||(s=y?dz.granular:dz.default),m<1){const e=yz(v,m);x=t=>{const n=Math.exp(-m*v*t);return i-n*((f+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)x=e=>i-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(m*m-1);x=t=>{const n=Math.exp(-m*v*t),r=Math.min(e*t,300);return i-n*((f+m*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:p&&u||null,next:e=>{const t=x(e);if(p)o.done=e>=u;else{let n=0===e?f:0;m<1&&(n=0===e?EI(f):tz(x,e,t));const a=Math.abs(n)<=r,l=Math.abs(i-t)<=s;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(ez(b),QO),t=ZO(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function Sz({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},p=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let f=n*t;const m=u+f,g=void 0===i?m:i(m);g!==m&&(f=g-u);const v=e=>-f*Math.exp(-e/r),y=e=>g+v(e),x=e=>{const t=v(e),n=y(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const k=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,w=kz({keyframes:[h.value,p(h.value)],velocity:tz(y,e,h.value),damping:s,stiffness:a,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,x(e),k(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&x(e),h)}}}function jz(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||vI.mix||YO,a=e.length-1;for(let i=0;i<a;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||kI:t;n=jI(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=_I(e[r],e[r+1],n);return o[r](s)};return n?t=>c(gI(e[0],e[a-1],t)):c}function _z(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=_I(0,t,r);e.push(FO(n,1,s))}}(t,e.length-1),t}function Az({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(qI):qI(r),a={done:!1,value:t[0]},i=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:_z(t),e),o=jz(i,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map(()=>c||$I).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}kz.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ez(r),QO);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:TI(s)}}(e,100,kz);return e.ease=t.ease,e.duration=EI(t.duration),e.type="keyframes",e};const Ez=e=>null!==e;function Tz(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(Ez),i=s<0||t&&"loop"!==n&&t%2==1?0:a.length-1;return i&&void 0!==r?r:a[i]}const Nz={decay:Sz,inertia:Sz,tween:Az,keyframes:Az,spring:kz};function Cz(e){"string"==typeof e.type&&(e.type=Nz[e.type])}class Pz{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Rz=e=>e/100;class Mz extends Pz{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==nO.now()&&this.tick(nO.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Cz(e);const{type:t=Az,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Az;o!==Az&&"number"!=typeof i[0]&&(this.mixKeyframes=jI(Rz,YO(i[0],i[1])),i=[0,100]);const l=o({...e,keyframes:i});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...i].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=ez(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,x=n;if(d){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/i)):"mirror"===u&&(x=a)),y=gI(0,1,n)*i}const b=v?{done:!1,value:c[0]}:x.next(y);s&&(b.value=s(b.value));let{done:w}=b;v||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&p!==Sz&&(b.value=Tz(c,this.options,m,this.speed)),f&&f(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return TI(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+TI(e)}get time(){return TI(this.currentTime)}set time(e){var t;e=EI(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(nO.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=TI(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=JO,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nO.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const Iz=e=>180*e/Math.PI,Oz=e=>{const t=Iz(Math.atan2(e[1],e[0]));return Dz(t)},zz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Oz,rotateZ:Oz,skewX:e=>Iz(Math.atan(e[1])),skewY:e=>Iz(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Dz=e=>((e%=360)<0&&(e+=360),e),Lz=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Fz=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Bz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Lz,scaleY:Fz,scale:e=>(Lz(e)+Fz(e))/2,rotateX:e=>Dz(Iz(Math.atan2(e[6],e[5]))),rotateY:e=>Dz(Iz(Math.atan2(-e[2],e[0]))),rotateZ:Oz,rotate:Oz,skewX:e=>Iz(Math.atan(e[4])),skewY:e=>Iz(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Uz(e){return e.includes("scale")?1:0}function Wz(e,t){if(!e||"none"===e)return Uz(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Bz,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=zz,s=t}if(!s)return Uz(t);const a=r[t],i=s[1].split(",").map($z);return"function"==typeof a?a(i):i[a]}function $z(e){return parseFloat(e.trim())}const Vz=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hz=(()=>new Set(Vz))(),qz=e=>e===lO||e===kO,Gz=new Set(["x","y","z"]),Kz=Vz.filter(e=>!Gz.has(e));const Xz={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Wz(t,"x"),y:(e,{transform:t})=>Wz(t,"y")};Xz.translateX=Xz.x,Xz.translateY=Xz.y;const Yz=new Set;let Jz=!1,Zz=!1,Qz=!1;function eD(){if(Zz){const e=Array.from(Yz).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return Kz.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Zz=!1,Jz=!1,Yz.forEach(e=>e.complete(Qz)),Yz.clear()}function tD(){Yz.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Zz=!0)})}class nD{constructor(e,t,n,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Yz.add(this),Jz||(Jz=!0,YI.read(tD),YI.resolveKeyframes(eD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Yz.delete(this)}cancel(){"scheduled"===this.state&&(Yz.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const rD=wI(()=>void 0!==window.ScrollTimeline),sD={};function aD(e,t){const n=wI(e);return()=>sD[t]??n()}const iD=aD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Vne){return!1}return!0},"linearEasing"),oD=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,lD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oD([0,.65,.55,1]),circOut:oD([.55,0,1,.45]),backIn:oD([.31,.01,.66,-.59]),backOut:oD([.33,1.53,.69,.99])};function cD(e,t){return e?"function"==typeof e?iD()?ZO(e,t):"ease-out":VI(e)?oD(e):Array.isArray(e)?e.map(e=>cD(e,t)||lD.easeOut):lD[e]:void 0}function dD(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=cD(o,s);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function uD(e){return"function"==typeof e&&"applyToOptions"in e}class hD extends Pz{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return uD(e)&&iD()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=dD(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Tz(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(Vne){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return TI(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+TI(e)}get time(){return TI(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=EI(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&rD()?(this.animation.timeline=e,kI):t(this)}}const pD={anticipate:DI,backInOut:zI,circInOut:BI};function fD(e){"string"==typeof e.ease&&e.ease in pD&&(e.ease=pD[e.ease])}class mD extends hD{constructor(e){fD(e),Cz(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const i=new Mz({...a,autoplay:!1}),o=EI(this.finishedTime??this.time);t.setWithVelocity(i.sample(o-10).value,i.sample(o).value,10),i.stop()}}const gD=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!zO.test(e)&&"0"!==e||e.startsWith("url(")));function vD(e){e.duration=0,e.type="keyframes"}const yD=new Set(["opacity","clipPath","filter","transform"]),xD=wI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class bD extends Pz{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:i,name:o,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=nO.now();const h={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:a,name:o,motionValue:l,element:c,...d},p=(null==c?void 0:c.KeyframeResolver)||nD;this.keyframeResolver=new p(i,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),o,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=nO.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=gD(s,t),o=gD(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||uD(n))&&r)}(e,s,a,i)||(!vI.instantAnimations&&o||null==c||c(Tz(e,n,t)),e[0]=e[e.length-1],vD(n),n.repeat=0);const d={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:i,type:o}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return xD()&&r&&yD.has(r)&&("transform"!==r||!c)&&!l&&!s&&"mirror"!==a&&0!==i&&"inertia"!==o}(d)?new mD({...d,element:d.motionValue.owner.current}):new Mz(d);u.finished.then(()=>this.notifyFinished()).catch(kI),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),Qz=!0,tD(),eD(),Qz=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const wD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kD(e,t,n=1){const[r,s]=function(e){const t=wD.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return yI(e)?parseFloat(e):e}return iO(s)?kD(s,t,n+1):s}function SD(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const jD=new Set(["width","height","top","left","right","bottom",...Vz]),_D=e=>t=>t.test(e),AD=[lO,kO,wO,bO,jO,SO,{test:e=>"auto"===e,parse:e=>e}],ED=e=>AD.find(_D(e));function TD(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||bI(e))}const ND=new Set(["brightness","contrast","saturate","opacity"]);function CD(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(hO)||[];if(!r)return e;const s=n.replace(r,"");let a=ND.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const PD=/\b([a-z-]*)\(.*?\)/gu,RD={...zO,getAnimatableNone:e=>{const t=e.match(PD);return t?t.map(CD).join(" "):e}},MD={...lO,transform:Math.round},ID={borderWidth:kO,borderTopWidth:kO,borderRightWidth:kO,borderBottomWidth:kO,borderLeftWidth:kO,borderRadius:kO,radius:kO,borderTopLeftRadius:kO,borderTopRightRadius:kO,borderBottomRightRadius:kO,borderBottomLeftRadius:kO,width:kO,maxWidth:kO,height:kO,maxHeight:kO,top:kO,right:kO,bottom:kO,left:kO,padding:kO,paddingTop:kO,paddingRight:kO,paddingBottom:kO,paddingLeft:kO,margin:kO,marginTop:kO,marginRight:kO,marginBottom:kO,marginLeft:kO,backgroundPositionX:kO,backgroundPositionY:kO,...{rotate:bO,rotateX:bO,rotateY:bO,rotateZ:bO,scale:dO,scaleX:dO,scaleY:dO,scaleZ:dO,skew:bO,skewX:bO,skewY:bO,distance:kO,translateX:kO,translateY:kO,translateZ:kO,x:kO,y:kO,z:kO,perspective:kO,transformPerspective:kO,opacity:cO,originX:_O,originY:_O,originZ:kO},zIndex:MD,fillOpacity:cO,strokeOpacity:cO,numOctaves:MD},OD={...ID,color:EO,backgroundColor:EO,outlineColor:EO,fill:EO,stroke:EO,borderColor:EO,borderTopColor:EO,borderRightColor:EO,borderBottomColor:EO,borderLeftColor:EO,filter:RD,WebkitFilter:RD},zD=e=>OD[e];function DD(e,t){let n=zD(e);return n!==RD&&(n=zO),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const LD=new Set(["auto","none","0"]);class FD extends nD{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),iO(n))){const r=kD(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!jD.has(n)||2!==e.length)return;const[r,s]=e,a=ED(r),i=ED(s);if(a!==i)if(qz(a)&&qz(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else Xz[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||TD(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!LD.has(t)&&RO(t).values.length&&(r=e[s]),s++}if(r&&n)for(const a of t)e[a]=DD(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xz[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=Xz[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}function BD(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let r=document;t&&(r=t.current);const s=(null==n?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const UD=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function WD(e){return xI(e)&&"offsetHeight"in e}class $D{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=nO.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=nO.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new AI);const n=this.events[e].add(t);return"change"===e?()=>{n(),YI.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nO.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return NI(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function VD(e,t){return new $D(e,t)}const{schedule:HD,cancel:qD}=XI(queueMicrotask,!1),GD={x:!1,y:!1};function KD(){return GD.x||GD.y}function XD(e,t){const n=BD(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function YD(e){return!("touch"===e.pointerType||KD())}const JD=(e,t)=>!!t&&(e===t||JD(e,t.parentElement)),ZD=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,QD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const eL=new WeakSet;function tL(e){return t=>{"Enter"===t.key&&e(t)}}function nL(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function rL(e){return ZD(e)&&!KD()}function sL(e,t,n={}){const[r,s,a]=XD(e,n),i=e=>{const r=e.currentTarget;if(!rL(e))return;eL.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),eL.has(r)&&eL.delete(r),rL(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{i(e,r===window||r===document||n.useGlobalTarget||JD(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),WD(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=tL(()=>{if(eL.has(n))return;nL(n,"down");const e=tL(()=>{nL(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>nL(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,s)),t=e,QD.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function aL(e){return xI(e)&&"ownerSVGElement"in e}const iL=e=>Boolean(e&&e.getVelocity),oL=[...AD,EO,zO],lL=Im.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function cL(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function dL(...e){return Im.useCallback(function(...e){return t=>{let n=!1;const r=e.map(e=>{const r=cL(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():cL(e[t],null)}}}}(...e),e)}class uL extends Im.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=WD(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hL({children:e,isPresent:t,anchorX:n,root:r}){const s=Im.useId(),a=Im.useRef(null),i=Im.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=Im.useContext(lL),l=dL(a,null==e?void 0:e.ref);return Im.useInsertionEffect(()=>{const{width:e,height:l,top:c,left:d,right:u}=i.current;if(t||!a.current||!e||!l)return;const h="left"===n?`left: ${d}`:`right: ${u}`;a.current.dataset.motionPopId=s;const p=document.createElement("style");o&&(p.nonce=o);const f=r??document.head;return f.appendChild(p),p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${l}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{f.contains(p)&&f.removeChild(p)}},[t]),Vm.jsx(uL,{isPresent:t,childRef:a,sizeRef:i,children:Im.cloneElement(e,{ref:l})})}const pL=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const c=dI(fL),d=Im.useId();let u=!0,h=Im.useMemo(()=>(u=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;r&&r()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[n,c,r]);return a&&u&&(h={...h}),Im.useMemo(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),Im.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),"popLayout"===i&&(e=Vm.jsx(hL,{isPresent:n,anchorX:o,root:l,children:e})),Vm.jsx(pI.Provider,{value:h,children:e})};function fL(){return new Map}function mL(e=!0){const t=Im.useContext(pI);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=Im.useId();Im.useEffect(()=>{if(e)return s(a)},[e]);const i=Im.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const gL=e=>e.key||"";function vL(e){const t=[];return Im.Children.forEach(e,e=>{Im.isValidElement(e)&&t.push(e)}),t}const yL=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[c,d]=mL(i),u=Im.useMemo(()=>vL(e),[e]),h=i&&!c?[]:u.map(gL),p=Im.useRef(!0),f=Im.useRef(u),m=dI(()=>new Map),[g,v]=Im.useState(u),[y,x]=Im.useState(u);hI(()=>{p.current=!1,f.current=u;for(let e=0;e<y.length;e++){const t=gL(y[e]);h.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[y,h.length,h.join("-")]);const b=[];if(u!==g){let e=[...u];for(let t=0;t<y.length;t++){const n=y[t],r=gL(n);h.includes(r)||(e.splice(t,0,n),b.push(n))}return"wait"===a&&b.length&&(e=b),x(vL(e)),v(u),null}const{forceRender:w}=Im.useContext(cI);return Vm.jsx(Vm.Fragment,{children:y.map(e=>{const g=gL(e),v=!(i&&!c)&&(u===y||h.includes(g));return Vm.jsx(pL,{isPresent:v,initial:!(p.current&&!n)&&void 0,custom:t,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:v?void 0:()=>{if(!m.has(g))return;m.set(g,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(null==w||w(),x(f.current),i&&(null==d||d()),r&&r())},anchorX:o,children:e},g)})})},xL=Im.createContext({strict:!1}),bL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wL={};for(const $ in bL)wL[$]={isEnabled:e=>bL[$].some(t=>!!e[t])};const kL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function SL(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||kL.has(e)}let jL=e=>!SL(e);try{"function"==typeof(_L=require("@emotion/is-prop-valid").default)&&(jL=e=>e.startsWith("on")?!SL(e):_L(e))}catch{}var _L;const AL=Im.createContext({});function EL(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function TL(e){return"string"==typeof e||Array.isArray(e)}const NL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CL=["initial",...NL];function PL(e){return EL(e.animate)||CL.some(t=>TL(e[t]))}function RL(e){return Boolean(PL(e)||e.variants)}function ML(e){const{initial:t,animate:n}=function(e,t){if(PL(e)){const{initial:t,animate:n}=e;return{initial:!1===t||TL(t)?t:void 0,animate:TL(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,Im.useContext(AL));return Im.useMemo(()=>({initial:t,animate:n}),[IL(t),IL(n)])}function IL(e){return Array.isArray(e)?e.join(" "):e}const OL={};function zL(e,{layout:t,layoutId:n}){return Hz.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!OL[e]||"opacity"===e)}const DL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LL=Vz.length;function FL(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(Hz.has(l))i=!0;else if(sO(l))s[l]=e;else{const t=UD(e,ID[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",s=!0;for(let a=0;a<LL;a++){const i=Vz[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=UD(o,ID[i]);l||(s=!1,r+=`${DL[i]||i}(${e}) `),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}const BL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UL(e,t,n){for(const r in t)iL(t[r])||zL(r,n)||(e[r]=t[r])}function WL(e,t){const n={};return UL(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return Im.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return FL(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function $L(e,t){const n={},r=WL(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const VL={offset:"stroke-dashoffset",array:"stroke-dasharray"},HL={offset:"strokeDashoffset",array:"strokeDasharray"};function qL(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,c,d){if(FL(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==s&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?VL:HL;e[a.offset]=kO.transform(-r);const i=kO.transform(t),o=kO.transform(n);e[a.array]=`${i} ${o}`}(u,s,a,i,!1)}const GL=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),KL=e=>"string"==typeof e&&"svg"===e.toLowerCase();function XL(e,t,n,r){const s=Im.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return qL(n,t,KL(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};UL(t,e.style,e),s.style={...t,...s.style}}return s}const YL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JL(e){return"string"==typeof e&&!e.includes("-")&&!!(YL.indexOf(e)>-1||/[A-Z]/u.test(e))}function ZL(e,t,n,{latestValues:r},s,a=!1){const i=(JL(e)?XL:$L)(t,r,s,e),o=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(jL(s)||!0===n&&SL(s)||!t&&!SL(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(t,"string"==typeof e,a),l=e!==Im.Fragment?{...o,...i,ref:n}:{},{children:c}=t,d=Im.useMemo(()=>iL(c)?c.get():c,[c]);return Im.createElement(e,{...l,children:d})}function QL(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function eF(e,t,n,r){if("function"==typeof t){const[s,a]=QL(r);t=t(void 0!==n?n:e.custom,s,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,a]=QL(r);t=t(void 0!==n?n:e.custom,s,a)}return t}function tF(e){return iL(e)?e.get():e}function nF(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=tF(a[h]);let{initial:i,animate:o}=e;const l=PL(e),c=RL(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!=typeof u&&!EL(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=eF(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}const rF=e=>(t,n)=>{const r=Im.useContext(AL),s=Im.useContext(pI),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:nF(n,r,s,e),renderState:t()}}(e,t,r,s);return n?a():dI(a)};function sF(e,t,n){var r;const{style:s}=e,a={};for(const i in s)(iL(s[i])||t.style&&iL(t.style[i])||zL(i,e)||void 0!==(null==(r=null==n?void 0:n.getValue(i))?void 0:r.liveStyle))&&(a[i]=s[i]);return a}const aF=rF({scrapeMotionValuesFromProps:sF,createRenderState:BL});function iF(e,t,n){const r=sF(e,t,n);for(const s in e)if(iL(e[s])||iL(t[s])){r[-1!==Vz.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const oF=rF({scrapeMotionValuesFromProps:iF,createRenderState:GL}),lF=Symbol.for("motionComponentSymbol");function cF(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function dF(e,t,n){return Im.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):cF(n)&&(n.current=r))},[t])}const uF=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hF="data-"+uF("framerAppearId"),pF=Im.createContext({});function fF(e,t,n,r,s){var a,i;const{visualElement:o}=Im.useContext(AL),l=Im.useContext(xL),c=Im.useContext(pI),d=Im.useContext(lL).reducedMotion,u=Im.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:d}));const h=u.current,p=Im.useContext(pF);!h||h.projection||!s||"html"!==h.type&&"svg"!==h.type||function(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mF(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(i)||o&&cF(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(u.current,n,s,p);const f=Im.useRef(!1);Im.useInsertionEffect(()=>{h&&f.current&&h.update(n,c)});const m=n[hF],g=Im.useRef(Boolean(m)&&!(null==(a=window.MotionHandoffIsComplete)?void 0:a.call(window,m))&&(null==(i=window.MotionHasOptimisedAnimation)?void 0:i.call(window,m)));return hI(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),g.current&&h.animationState&&h.animationState.animateChanges())}),Im.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,m)}),g.current=!1),h.enteringChildren=void 0)}),h}function mF(e){if(e)return!1!==e.options.allowProjection?e.projection:mF(e.parent)}function gF(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)wL[t]={...wL[t],...e[t]}}(n);const s=JL(e)?oF:aF;function a(n,a){let i;const o={...Im.useContext(lL),...n,layoutId:vF(n)},{isStatic:l}=o,c=ML(n),d=s(n,l);if(!l&&uI){Im.useContext(xL).strict;const t=function(e){const{drag:t,layout:n}=wL;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);i=t.MeasureLayout,c.visualElement=fF(e,d,o,r,t.ProjectionNode)}return Vm.jsxs(AL.Provider,{value:c,children:[i&&c.visualElement?Vm.jsx(i,{visualElement:c.visualElement,...o}):null,ZL(e,n,dF(d,c.visualElement,a),d,l,t)]})}a.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const i=Im.forwardRef(a);return i[lF]=e,i}function vF({layoutId:e}){const t=Im.useContext(cI).id;return t&&void 0!==e?t+"-"+e:e}function yF(e,t){if("undefined"==typeof Proxy)return gF;const n=new Map,r=(n,r)=>gF(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(s,a)=>"create"===a?r:(n.has(a)||n.set(a,gF(a,void 0,e,t)),n.get(a))})}function xF({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function bF(e){return void 0===e||1===e}function wF({scale:e,scaleX:t,scaleY:n}){return!bF(e)||!bF(t)||!bF(n)}function kF(e){return wF(e)||SF(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function SF(e){return jF(e.x)||jF(e.y)}function jF(e){return e&&"0%"!==e}function _F(e,t,n){return n+t*(e-n)}function AF(e,t,n,r,s){return void 0!==s&&(e=_F(e,s,r)),_F(e,n,r)+t}function EF(e,t=0,n=1,r,s){e.min=AF(e.min,t,n,r,s),e.max=AF(e.max,t,n,r,s)}function TF(e,{x:t,y:n}){EF(e.x,t.translate,t.scale,t.originPoint),EF(e.y,n.translate,n.scale,n.originPoint)}const NF=.999999999999,CF=1.0000000000001;function PF(e,t){e.min=e.min+t,e.max=e.max+t}function RF(e,t,n,r,s=.5){EF(e,t,n,FO(e.min,e.max,s),r)}function MF(e,t){RF(e.x,t.x,t.scaleX,t.scale,t.originX),RF(e.y,t.y,t.scaleY,t.scale,t.originY)}function IF(e,t){return xF(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const OF=()=>({x:{min:0,max:0},y:{min:0,max:0}}),zF={current:null},DF={current:!1};const LF=new WeakMap;const FF=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BF{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=nO.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,YI.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=PL(t),this.isVariantNode=RL(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==o[u]&&iL(e)&&e.set(o[u])}}mount(e){var t;this.current=e,LF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),DF.current||function(){if(DF.current=!0,uI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zF.current=e.matches;e.addEventListener("change",t),t()}else zF.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||zF.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),JI(this.notifyUpdate),JI(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Hz.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&YI.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in wL){const t=wL[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<FF.length;n++){const t=FF[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],a=n[r];if(iL(s))e.addValue(r,s);else if(iL(a))e.addValue(r,VD(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,VD(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=VD(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(yI(n)||bI(n))?n=parseFloat(n):(r=n,!oL.find(_D(r))&&zO.test(t)&&(n=DD(e,t))),this.setBaseTarget(e,iL(n)?n.get():n)),iL(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const s=eF(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);s&&(r=s[e])}if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||iL(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new AI),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){HD.render(this.render)}}class UF extends BF{constructor(){super(...arguments),this.KeyframeResolver=FD}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;iL(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function WF(e,{style:t,vars:n},r,s){const a=e.style;let i;for(i in t)a[i]=t[i];for(i in null==s||s.applyProjectionStyles(a,r),n)a.setProperty(i,n[i])}class $F extends UF{constructor(){super(...arguments),this.type="html",this.renderInstance=WF}readValueFromInstance(e,t){var n,r;if(Hz.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?Uz(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Wz(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),s=(sO(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof s?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return IF(e,t)}build(e,t,n){FL(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return sF(e,t,n)}}const VF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class HF extends UF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=OF}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Hz.has(t)){const e=zD(t);return e&&e.default||0}return t=VF.has(t)?t:uF(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return iF(e,t,n)}build(e,t,n){qL(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){WF(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(VF.has(s)?s:uF(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=KL(e.tagName),super.mount(e)}}const qF=(e,t)=>JL(e)?new HF(t):new $F(t,{allowProjection:e!==Im.Fragment});function GF(e,t,n){const r=e.getProps();return eF(r,t,void 0!==n?n:r.custom,e)}const KF=e=>Array.isArray(e);function XF(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,VD(n))}function YF(e){return KF(e)?e[e.length-1]||0:e}function JF(e,t){const n=e.getValue("willChange");if(r=n,Boolean(iL(r)&&r.add))return n.add(t);if(!n&&vI.WillChange){const n=new vI.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function ZF(e){return e.props[hF]}const QF=e=>null!==e;const eB={type:"spring",stiffness:500,damping:25,restSpeed:10},tB={type:"keyframes",duration:.8},nB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rB=(e,{keyframes:t})=>t.length>2?tB:Hz.has(e)?e.startsWith("scale")?(e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}))(t[1]):eB:nB;const sB=(e,t,n,r={},s,a)=>i=>{const o=SD(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=EI(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,rB(e,d)),d.duration&&(d.duration=EI(d.duration)),d.repeatDelay&&(d.repeatDelay=EI(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(vD(d),0===d.delay&&(u=!0)),(vI.instantAnimations||vI.skipAnimations)&&(u=!0,vD(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(QF),a=t&&"loop"!==n&&t%2==1?0:s.length-1;return a&&void 0!==r?r:s[a]}(d.keyframes,o);if(void 0!==e)return void YI.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new Mz(d):new bD(d)};function aB({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function iB(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;r&&(a=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),r=o[d];if(void 0===r||c&&aB(c,d))continue;const s={delay:n,...SD(a||{},d)},i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!s.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=ZF(e);if(t){const e=window.MotionHandoffAnimation(t,d,YI);null!==e&&(s.startTime=e,u=!0)}}JF(e,d),t.start(sB(d,t,r,e.shouldReduceMotion&&jD.has(d)?{type:!1}:s,e,u));const h=t.animation;h&&l.push(h)}return i&&Promise.all(l).then(()=>{YI.update(()=>{i&&function(e,t){const n=GF(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a)XF(e,i,YF(a[i]))}(e,i)})}),l}function oB(e,t,n,r=0,s=1){const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*r;return"function"==typeof n?n(a,i):1===s?a*r:o-a*r}function lB(e,t,n={}){var r;const s=GF(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(iB(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:s=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t,n=0,r=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(lB(l,t,{...i,delay:n+("function"==typeof r?0:r)+oB(e.variantChildren,l,r,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,s,i,o,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(n.delay)])}function cB(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const dB=CL.length;function uB(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&uB(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<dB;n++){const r=CL[n],s=e.props[r];(TL(s)||!1===s)&&(t[r]=s)}return t}const hB=[...NL].reverse(),pB=NL.length;function fB(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>lB(e,t,n));r=Promise.all(s)}else if("string"==typeof t)r=lB(e,t,n);else{const s="function"==typeof t?GF(e,t,n.custom):t;r=Promise.all(iB(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function mB(e){let t=fB(e),n=yB(),r=!0;const s=t=>(n,r)=>{var s;const a=GF(e,r,"exit"===t?null==(s=e.presenceContext)?void 0:s.custom:void 0);if(a){const{transition:e,transitionEnd:t,...r}=a;n={...n,...r,...t}}return n};function a(a){const{props:i}=e,o=uB(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<pB;t++){const h=hB[t],p=n[h],f=void 0!==i[h]?i[h]:o[h],m=TL(f),g=h===a?p.isActive:null;!1===g&&(u=t);let v=f===o[h]&&f!==i[h]&&m;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...d},!p.isActive&&null===g||!f&&!p.prevProp||EL(f)||"boolean"==typeof f)continue;const y=gB(p.prevProp,f);let x=y||h===a&&p.isActive&&!v&&m||t>u&&m,b=!1;const w=Array.isArray(f)?f:[f];let k=w.reduce(s(h),{});!1===g&&(k={});const{prevResolvedValues:S={}}=p,j={...S,...k},_=t=>{x=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in j){const t=k[e],n=S[e];if(d.hasOwnProperty(e))continue;let r=!1;r=KF(t)&&KF(n)?!cB(t,n):t!==n,r?null!=t?_(e):c.add(e):void 0!==t&&c.has(e)?_(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=k,p.isActive&&(d={...d,...k}),r&&e.blockInitialAnimation&&(x=!1);const A=v&&y;x&&(!A||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,s=GF(r,t);if(r.enteringChildren&&s){const{delayChildren:t}=s.transition||{};n.delay=oB(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof i.initial){const n=GF(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var s;if(n[t].isActive===r)return Promise.resolve();null==(s=e.variantChildren)||s.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const i=a(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=yB()}}}function gB(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!cB(t,e)}function vB(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yB(){return{animate:vB(!0),whileInView:vB(),whileHover:vB(),whileTap:vB(),whileDrag:vB(),whileFocus:vB(),exit:vB()}}class xB{constructor(e){this.isMounted=!1,this.node=e}update(){}}let bB=0;const wB={animation:{Feature:class extends xB{constructor(e){super(e),e.animationState||(e.animationState=mB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();EL(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends xB{constructor(){super(...arguments),this.id=bB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function kB(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function SB(e){return{point:{x:e.pageX,y:e.pageY}}}function jB(e,t,n,r){return kB(e,t,(e=>t=>ZD(t)&&e(t,SB(t)))(n),r)}function _B(e){return e.max-e.min}function AB(e,t,n,r=.5){e.origin=r,e.originPoint=FO(t.min,t.max,e.origin),e.scale=_B(n)/_B(t),e.translate=FO(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function EB(e,t,n,r){AB(e.x,t.x,n.x,r?r.originX:void 0),AB(e.y,t.y,n.y,r?r.originY:void 0)}function TB(e,t,n){e.min=n.min+t.min,e.max=e.min+_B(t)}function NB(e,t,n){e.min=t.min-n.min,e.max=e.min+_B(t)}function CB(e,t,n){NB(e.x,t.x,n.x),NB(e.y,t.y,n.y)}function PB(e){return[e("x"),e("y")]}const RB=({current:e})=>e?e.ownerDocument.defaultView:null,MB=(e,t)=>Math.abs(e-t);class IB{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=DB(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=MB(e.x,t.x),r=MB(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=ZI;this.history.push({...r,timestamp:s});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=OB(t,this.transformPagePoint),YI.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=DB("pointercancel"===e.type?this.lastMoveEventInfo:OB(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!ZD(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;const i=OB(SB(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=ZI;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,DB(i,this.history)),this.removeListeners=jI(jB(this.contextWindow,"pointermove",this.handlePointerMove),jB(this.contextWindow,"pointerup",this.handlePointerUp),jB(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),JI(this.updatePoint)}}function OB(e,t){return t?{point:t(e.point)}:e}function zB(e,t){return{x:e.x-t.x,y:e.y-t.y}}function DB({point:e},t){return{point:e,delta:zB(e,FB(t)),offset:zB(e,LB(t)),velocity:BB(t,.1)}}function LB(e){return e[0]}function FB(e){return e[e.length-1]}function BB(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=FB(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>EI(t)));)n--;if(!r)return{x:0,y:0};const a=TI(s.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function UB(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function WB(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const $B=.35;function VB(e,t,n){return{min:HB(e,t),max:HB(e,n)}}function HB(e,t){return"number"==typeof e?e:e[t]||0}const qB=new WeakMap;class GB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new IB(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(SB(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?GD[a]?null:(GD[a]=!0,()=>{GD[a]=!1}):GD.x||GD.y?null:(GD.x=GD.y=!0,()=>{GD.x=GD.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),PB(e=>{let t=this.getAxisMotionValue(e).get()||0;if(wO.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=_B(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&YI.postRender(()=>s(e,t)),JF(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>PB(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:RB(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&YI.postRender(()=>i(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!KB(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?FO(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?FO(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,s=this.constraints;t&&cF(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:UB(e.x,n,s),y:UB(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=$B){return!1===e?e=0:!0===e&&(e=$B),{x:VB(e,"left","right"),y:VB(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&PB(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cF(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=IF(e,n),{scroll:s}=t;return s&&(PF(r.x,s.offset.x),PF(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:WB(e.x,t.x),y:WB(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=xF(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=PB(i=>{if(!KB(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u={type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return JF(this.visualElement,e),n.start(sB(e,n,0,t,this.visualElement,!1))}stopAnimation(){PB(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){PB(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){PB(t=>{const{drag:n}=this.getProps();if(!KB(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];s.set(e[t]-FO(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!cF(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};PB(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=_B(e),s=_B(t);return s>r?n=_I(t.min,t.max-r,e.min):r>s&&(n=_I(e.min,e.max-s,t.min)),gI(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),PB(t=>{if(!KB(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];n.set(FO(s,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;qB.set(this.visualElement,this);const e=jB(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();cF(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),YI.read(t);const s=kB(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(PB(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=$B,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:i}}}function KB(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const XB=e=>(t,n)=>{e&&YI.postRender(()=>e(t,n))};const YB={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JB(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ZB={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!kO.test(e))return e;e=parseFloat(e)}return`${JB(e,t.target.x)}% ${JB(e,t.target.y)}%`}},QB={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=zO.parse(e);if(s.length>5)return r;const a=zO.createTransformer(e),i="number"!=typeof s[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const c=FO(o,l,.5);return"number"==typeof s[2+i]&&(s[2+i]/=c),"number"==typeof s[3+i]&&(s[3+i]/=c),a(s)}};let eU=!1;class tU extends Im.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)OL[t]=e[t],sO(t)&&(OL[t].isCSSVariable=!0)}(rU),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),eU&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),YB.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:a}=n;return a?(a.isPresent=s,eU=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||YI.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),HD.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;eU=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nU(e){const[t,n]=mL(),r=Im.useContext(cI);return Vm.jsx(tU,{...e,layoutGroup:r,switchLayoutGroup:Im.useContext(pF),isPresent:t,safeToRemove:n})}const rU={borderRadius:{...ZB,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ZB,borderTopRightRadius:ZB,borderBottomLeftRadius:ZB,borderBottomRightRadius:ZB,boxShadow:QB};const sU=(e,t)=>e.depth-t.depth;class aU{constructor(){this.children=[],this.isDirty=!1}add(e){fI(this.children,e),this.isDirty=!0}remove(e){mI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sU),this.isDirty=!1,this.children.forEach(e)}}const iU=["TopLeft","TopRight","BottomLeft","BottomRight"],oU=iU.length,lU=e=>"string"==typeof e?parseFloat(e):e,cU=e=>"number"==typeof e||kO.test(e);function dU(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const uU=pU(0,.5,FI),hU=pU(.5,.95,kI);function pU(e,t,n){return r=>r<e?0:r>t?1:n(_I(e,t,r))}function fU(e,t){e.min=t.min,e.max=t.max}function mU(e,t){fU(e.x,t.x),fU(e.y,t.y)}function gU(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function vU(e,t,n,r,s){return e=_F(e-=t,1/n,r),void 0!==s&&(e=_F(e,1/s,r)),e}function yU(e,t,[n,r,s],a,i){!function(e,t=0,n=1,r=.5,s,a=e,i=e){wO.test(t)&&(t=parseFloat(t),t=FO(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=FO(a.min,a.max,r);e===a&&(o-=t),e.min=vU(e.min,t,n,o,s),e.max=vU(e.max,t,n,o,s)}(e,t[n],t[r],t[s],t.scale,a,i)}const xU=["x","scaleX","originX"],bU=["y","scaleY","originY"];function wU(e,t,n,r){yU(e.x,t,xU,n?n.x:void 0,r?r.x:void 0),yU(e.y,t,bU,n?n.y:void 0,r?r.y:void 0)}function kU(e){return 0===e.translate&&1===e.scale}function SU(e){return kU(e.x)&&kU(e.y)}function jU(e,t){return e.min===t.min&&e.max===t.max}function _U(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function AU(e,t){return _U(e.x,t.x)&&_U(e.y,t.y)}function EU(e){return _B(e.x)/_B(e.y)}function TU(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NU{constructor(){this.members=[]}add(e){fI(this.members,e),e.scheduleRender()}remove(e){if(mI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const CU=["","X","Y","Z"];let PU=0;function RU(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function MU(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ZF(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",YI,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&MU(r)}function IU({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=PU++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DU),this.nodes.forEach(VU),this.nodes.forEach(HU),this.nodes.forEach(LU)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new aU)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new AI),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=aL(t)&&!(aL(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;YI.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=nO.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(JI(r),e(a-t))};return YI.setup(r,!0),()=>JI(r)}(s,250),YB.hasAnimatedSinceResize&&(YB.hasAnimatedSinceResize=!1,this.nodes.forEach($U)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||JU,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!AU(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...SD(s,"layout"),onPlay:i,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||$U(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),JI(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qU),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(BU);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(UU);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WU),this.nodes.forEach(OU),this.nodes.forEach(zU)):this.nodes.forEach(UU),this.clearAllSnapshots();const e=nO.now();ZI.delta=gI(0,1e3/60,e-ZI.timestamp),ZI.timestamp=e,ZI.isProcessing=!0,QI.update.process(ZI),QI.preRender.process(ZI),QI.render.process(ZI),ZI.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,HD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(FU),this.sharedNodes.forEach(GU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,YI.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){YI.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||_B(this.snapshot.measuredBox.x)||_B(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!SU(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||kF(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),eW((r=n).x),eW(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(nW))){const{scroll:e}=this.root;e&&(PF(n.x,e.offset.x),PF(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(mU(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:s,options:a}=t;t!==this.root&&s&&a.layoutScroll&&(s.wasRoot&&mU(n,e),PF(n.x,s.offset.x),PF(n.y,s.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};mU(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&MF(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),kF(e.latestValues)&&MF(n,e.latestValues)}return kF(this.latestValues)&&MF(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};mU(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!kF(e.latestValues))continue;wF(e.latestValues)&&e.updateSnapshot();const r=OF();mU(r,e.measurePageBox()),wU(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return kF(this.latestValues)&&wU(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ZI.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:a}=this.options;if(this.layout&&(s||a)){if(this.resolvedRelativeTargetAt=ZI.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},CB(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),mU(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if((this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),function(e,t,n){TB(e.x,t.x,n.x),TB(e.y,t.y,n.y)}(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):mU(this.target,this.layout.layoutBox),TF(this.target,this.targetDelta)):mU(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},CB(this.relativeTargetOrigin,this.target,e.target),mU(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!wF(this.parent.latestValues)&&!SF(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===ZI.timestamp&&(r=!1),r)return;const{layout:s,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!a)return;mU(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:s}=a.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&MF(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,TF(e,i)),r&&kF(a.latestValues)&&MF(e,a.latestValues))}t.x<CF&&t.x>NF&&(t.x=1),t.y<CF&&t.y>NF&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(gU(this.prevProjectionDelta.x,this.projectionDelta.x),gU(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),EB(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&TU(this.projectionDelta.x,this.prevProjectionDelta.x)&&TU(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(YU));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,f;KU(a.x,e.x,n),KU(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(CB(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l=this.relativeTarget,h=this.relativeTargetOrigin,p=i,f=n,XU(l.x,h.x,p.x,f),XU(l.y,h.y,p.y,f),u&&function(e,t){return jU(e.x,t.x)&&jU(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),mU(u,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,a){s?(e.opacity=FO(0,n.opacity??1,uU(r)),e.opacityExit=FO(t.opacity??1,0,hU(r))):a&&(e.opacity=FO(t.opacity??1,n.opacity??1,r));for(let i=0;i<oU;i++){const s=`border${iU[i]}Radius`;let a=dU(t,s),o=dU(n,s);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||cU(a)===cU(o)?(e[s]=Math.max(FO(lU(a),lU(o),r),0),(wO.test(o)||wO.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=FO(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(JI(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=YI.update(()=>{YB.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=VD(0)),this.currentAnimation=function(e,t,n){const r=iL(e)?e:VD(e);return r.start(sB("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&tW(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=_B(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=_B(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}mU(t,n),MF(t,s),EB(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new NU);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&RU("z",e,r,this.animationValues);for(let s=0;s<CU.length;s++)RU(`rotate${CU[s]}`,e,r,this.animationValues),RU(`skew${CU[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=tF(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=tF(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!kF(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=function(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=(null==n?void 0:n.z)||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:a,skewX:i,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),a&&(r+=`rotateY(${a}deg) `),i&&(r+=`skewX(${i}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(a=n(s,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;e.transformOrigin=`${100*i.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in OL){if(void 0===s[l])continue;const{correct:t,applyTo:n,isCSSVariable:i}=OL[l],o="none"===a?s[l]:t(s[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else i?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=r===this?tF(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(BU),this.root.sharedNodes.clear()}}}function OU(e){e.updateLayout()}function zU(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;"size"===s?PB(e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],s=_B(r);r.min=t[e].min,r.max=r.min+s}):tW(s,n.layoutBox,t)&&PB(r=>{const s=a?n.measuredBox[r]:n.layoutBox[r],i=_B(t[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};EB(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?EB(o,e.applyTransform(r,!0),n.measuredBox):EB(o,t,n.layoutBox);const l=!SU(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:a}=r;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};CB(i,n.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};CB(o,t,a.layoutBox),AU(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function DU(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function LU(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FU(e){e.clearSnapshot()}function BU(e){e.clearMeasurements()}function UU(e){e.isLayoutDirty=!1}function WU(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function $U(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function VU(e){e.resolveTargetDelta()}function HU(e){e.calcProjection()}function qU(e){e.resetSkewAndRotation()}function GU(e){e.removeLeadSnapshot()}function KU(e,t,n){e.translate=FO(t.translate,0,n),e.scale=FO(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function XU(e,t,n,r){e.min=FO(t.min,n.min,r),e.max=FO(t.max,n.max,r)}function YU(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const JU={duration:.45,ease:[.4,0,.1,1]},ZU=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QU=ZU("applewebkit/")&&!ZU("chrome/")?Math.round:kI;function eW(e){e.min=QU(e.min),e.max=QU(e.max)}function tW(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(EU(t),EU(n),.2)}function nW(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const rW=IU({attachResizeListener:(e,t)=>kB(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sW={current:void 0},aW=IU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sW.current){const e=new rW({});e.mount(window),e.setOptions({layoutScroll:!0}),sW.current=e}return sW.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),iW={pan:{Feature:class extends xB{constructor(){super(...arguments),this.removePointerDownListener=kI}onPointerDown(e){this.session=new IB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:XB(e),onStart:XB(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&YI.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=jB(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends xB{constructor(e){super(e),this.removeGroupControls=kI,this.removeListeners=kI,this.controls=new GB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kI}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:aW,MeasureLayout:nU}};function oW(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&YI.postRender(()=>s(t,SB(t)))}function lW(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&YI.postRender(()=>s(t,SB(t)))}const cW=new WeakMap,dW=new WeakMap,uW=e=>{const t=cW.get(e.target);t&&t(e)},hW=e=>{e.forEach(uW)};function pW(e,t,n){const r=function({root:e,...t}){const n=e||document;dW.has(n)||dW.set(n,{});const r=dW.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(hW,{root:e,...t})),r[s]}(t);return cW.set(e,n),r.observe(e),()=>{cW.delete(e),r.unobserve(e)}}const fW={some:0,all:1};const mW={inView:{Feature:class extends xB{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:fW[r]};return pW(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends xB{mount(){const{current:e}=this.node;e&&(this.unmount=sL(e,(e,t)=>(lW(this.node,t,"Start"),(e,{success:t})=>lW(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends xB{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Vne){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jI(kB(this.node.current,"focus",()=>this.onFocus()),kB(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends xB{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,a]=XD(e,n),i=e=>{if(!YD(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const a=e=>{YD(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,s)};return r.forEach(e=>{e.addEventListener("pointerenter",i,s)}),a}(e,(e,t)=>(oW(this.node,t,"Start"),e=>oW(this.node,e,"End"))))}unmount(){}}}},gW=yF({...wB,...mW,...iW,...{layout:{ProjectionNode:aW,MeasureLayout:nU}}},qF),vW={some:0,all:1};function yW(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[i,o]=Im.useState(a);return Im.useEffect(()=>{if(!e.current||s&&i)return;const a={root:t&&t.current||void 0,margin:n,amount:r};return function(e,t,{root:n,margin:r,amount:s="some"}={}){const a=BD(e),i=new WeakMap,o=new IntersectionObserver(e=>{e.forEach(e=>{const n=i.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e.target,e);"function"==typeof n?i.set(e.target,n):o.unobserve(e.target)}else"function"==typeof n&&(n(e),i.delete(e.target))})},{root:n,rootMargin:r,threshold:"number"==typeof s?s:vW[s]});return a.forEach(e=>o.observe(e)),()=>o.disconnect()}(e.current,()=>(o(!0),s?void 0:()=>o(!1)),a)},[t,e,n,s,r]),i}function xW({onNavigate:e}){const t=t=>{const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth"}),null==e||e(t)};return Vm.jsx(gW.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},className:"fixed top-0 left-0 right-0 z-50 bg-white/60 backdrop-blur-md border-b border-white/20",children:Vm.jsx("div",{className:"container mx-auto px-8 py-4",children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs(fT,{to:"/",className:"flex items-center gap-2",children:[Vm.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/50",children:Vm.jsx("span",{className:"text-white font-semibold text-sm",children:"P"})}),Vm.jsx("span",{className:"text-xl font-normal bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PalletAI"})]}),Vm.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[Vm.jsx("button",{onClick:()=>t("features"),className:"text-slate-500 hover:text-slate-900 transition-colors font-medium",children:"Funkcje"}),Vm.jsx("button",{onClick:()=>t("how-it-works"),className:"text-slate-500 hover:text-slate-900 transition-colors font-medium",children:"Jak to działa"}),Vm.jsx("button",{onClick:()=>t("pricing"),className:"text-slate-500 hover:text-slate-900 transition-colors font-medium",children:"Cennik"}),Vm.jsx("button",{onClick:()=>t("footer"),className:"text-slate-500 hover:text-slate-900 transition-colors font-medium",children:"Kontakt"})]}),Vm.jsxs("div",{className:"flex items-center gap-3",children:[Vm.jsx(RR,{mode:"modal",children:Vm.jsx("button",{className:"px-4 py-2 rounded-xl text-slate-900 hover:bg-slate-50 transition-colors font-medium text-sm",children:"Zaloguj się"})}),Vm.jsx(RR,{mode:"modal",children:Vm.jsxs("button",{className:"px-6 py-2 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-lg hover:shadow-purple-500/30 transition-all font-medium text-sm flex items-center gap-2",children:[Vm.jsx(KM,{className:"w-4 h-4"}),"Wypróbuj za darmo"]})})]})]})})})}function bW(){return Vm.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-8 py-32 pt-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/40 via-purple-50/30 to-pink-50/20"}),Vm.jsx("div",{className:"absolute top-0 left-[15%] w-[800px] h-[400px] bg-gradient-to-br from-blue-300/20 to-purple-200/15 rounded-[50%] blur-3xl opacity-60"}),Vm.jsx("div",{className:"absolute top-[400px] right-[10%] w-[700px] h-[400px] bg-gradient-to-br from-purple-300/20 to-pink-200/15 rounded-[50%] blur-3xl opacity-50"})]}),Vm.jsx("div",{className:"container mx-auto max-w-7xl",children:Vm.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[Vm.jsxs("div",{className:"space-y-8",children:[Vm.jsx(gW.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/60 backdrop-blur-sm border border-white/20",children:[Vm.jsx(KM,{className:"w-4 h-4 text-purple-600"}),Vm.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Powered by Advanced AI"})]})}),Vm.jsx(gW.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-5xl md:text-6xl font-normal leading-tight",children:Vm.jsx("span",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Analizuj zestawy produktów w minutę – z pomocą AI"})}),Vm.jsx(gW.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"text-xl text-slate-500 leading-relaxed",children:"Zyskaj pełną analizę palety, poznaj opłacalność i unikaj nietrafionych zakupów."}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"flex flex-wrap gap-4",children:[Vm.jsx(RR,{mode:"modal",children:Vm.jsx("button",{className:"px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transition-all",children:"Wypróbuj za darmo"})}),Vm.jsxs("button",{className:"px-6 py-3 rounded-xl bg-white/60 backdrop-blur-sm border border-white/20 text-slate-900 font-medium hover:bg-white/80 transition-all flex items-center gap-2",children:[Vm.jsx(BM,{className:"w-4 h-4"}),"Zobacz jak to działa"]})]}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"flex items-center gap-6 pt-4",children:[Vm.jsx("div",{className:"flex -space-x-3",children:["from-blue-400 to-blue-600","from-purple-400 to-purple-600","from-pink-400 to-pink-600","from-cyan-400 to-cyan-600","from-indigo-400 to-indigo-600"].map((e,t)=>Vm.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-br ${e} border-2 border-white shadow-md flex items-center justify-center`,children:Vm.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[Vm.jsx("circle",{cx:"10",cy:"8",r:"3",fill:"white",opacity:"0.9"}),Vm.jsx("path",{d:"M4 17C4 14 6 12 10 12C14 12 16 14 16 17",fill:"white",opacity:"0.9"})]})},t))}),Vm.jsxs("div",{className:"text-sm",children:[Vm.jsxs("div",{className:"flex items-center gap-1",children:[Vm.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"500+"}),Vm.jsx("span",{className:"text-slate-900",children:"profesjonalistów"})]}),Vm.jsx("p",{className:"text-xs text-slate-500",children:"już korzysta z PalletAI"})]})]})]}),Vm.jsxs(gW.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.5},className:"relative",children:[Vm.jsx("div",{className:"absolute -top-10 -right-10 w-64 h-64 bg-purple-300/30 rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-blue-300/30 rounded-full blur-3xl"}),Vm.jsxs("div",{className:"relative bg-white/40 backdrop-blur-sm border border-white/20 rounded-3xl p-6 shadow-2xl",children:[Vm.jsxs("div",{className:"aspect-video bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 rounded-2xl overflow-hidden border border-white/40 relative",children:[Vm.jsxs("div",{className:"absolute inset-0 p-6",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsx("div",{className:"h-6 w-48 bg-gradient-to-r from-slate-200 to-slate-100 rounded"}),Vm.jsx("div",{className:"h-3 w-32 bg-slate-100 rounded"})]}),Vm.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-400 flex items-center justify-center shadow-md",children:Vm.jsx(KM,{className:"w-5 h-5 text-white"})})]}),Vm.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[{label:"Produkty",value:"156",color:"from-blue-400 to-blue-500"},{label:"Wartość",value:"94%",color:"from-purple-400 to-purple-500"},{label:"Zysk",value:"+23%",color:"from-green-400 to-green-500"}].map((e,t)=>Vm.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-3 border border-white/50",children:[Vm.jsx("div",{className:"text-xs text-slate-500 mb-1",children:e.label}),Vm.jsx("div",{className:`text-xl font-bold bg-gradient-to-r ${e.color} bg-clip-text text-transparent`,children:e.value})]},t))}),Vm.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50",children:Vm.jsx("div",{className:"flex items-end gap-2 h-24",children:[45,62,48,75,58,82,67,71].map((e,t)=>Vm.jsx("div",{className:"flex-1 flex flex-col justify-end",children:Vm.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500 to-purple-500 rounded-t transition-all duration-500",style:{height:`${e}%`}})},t))})})]}),Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-600/10 via-transparent to-transparent pointer-events-none"})]}),Vm.jsxs("div",{className:"absolute top-10 right-10 bg-white/80 backdrop-blur-sm border border-white/30 rounded-2xl px-5 py-3 shadow-xl",children:[Vm.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"ROI Score"}),Vm.jsxs("p",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["94",Vm.jsx("span",{className:"text-2xl",children:"/100"})]})]}),Vm.jsxs("div",{className:"absolute bottom-10 left-10 bg-white/80 backdrop-blur-sm border border-white/30 rounded-full px-4 py-2 shadow-xl flex items-center gap-2",children:[Vm.jsxs("div",{className:"relative",children:[Vm.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),Vm.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-500 rounded-full animate-ping"})]}),Vm.jsx("span",{className:"text-sm text-slate-900 font-medium",children:"Live Analysis"})]})]})]})]})})]})}function wW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{icon:sI,title:"Handlowcy i dystrybutorzy",desc:"Ocena zestawień od dostawców"},{icon:GM,title:"Menedżerowie zakupów",desc:"Analiza opłacalności inwestycji"},{icon:eI,title:"Analitycy biznesowi",desc:"Ocena rentowności produktów"},{icon:oM,title:"Właściciele firm",desc:"Planowanie strategii zakupowych"}];return Vm.jsxs("section",{id:"about",ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-blue-50/30 to-purple-50/30"}),Vm.jsx("div",{className:"absolute top-[20%] right-[10%] w-[600px] h-[500px] bg-gradient-to-br from-purple-200/15 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-0 left-[5%] w-[500px] h-[400px] bg-gradient-to-tr from-blue-200/15 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center max-w-4xl mx-auto mb-16",children:[Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/60 backdrop-blur-sm border border-white/20 mb-6",children:[Vm.jsx(KM,{className:"w-4 h-4 text-purple-600"}),Vm.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"O Aplikacji PalletAI"})]}),Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Nowoczesne narzędzie do analizy zestawień produktowych"}),Vm.jsx("p",{className:"text-xl text-slate-500 leading-relaxed",children:"Aplikacja stworzona z myślą o przedsiębiorcach, handlowcach i analitykach, którzy regularnie oceniają rentowność zakupów"})]}),Vm.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center mb-24",children:[Vm.jsxs(gW.div,{initial:{opacity:0,x:-30},animate:t?{opacity:1,x:0}:{},transition:{duration:.6,delay:.2},children:[Vm.jsx("h3",{className:"text-3xl font-medium text-slate-900 mb-6",children:"Czym jest PalletAI?"}),Vm.jsx("p",{className:"text-slate-500 leading-relaxed mb-8",children:"PalletAI to inteligentna platforma do analizy zestawień produktowych w formacie Excel. Wykorzystujemy zaawansowaną sztuczną inteligencję do automatyzacji procesu oceny, dzięki czemu możesz podejmować świadome decyzje biznesowe w oparciu o konkretne dane finansowe i trendy rynkowe."}),Vm.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{value:"12",label:"Zaimplementowane funkcje"},{value:"85%",label:"Podstawowej funkcjonalności"},{value:"100%",label:"Dostępności aplikacji"}].map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.3+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-2xl p-4 text-center",children:[Vm.jsx("div",{className:"text-3xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:e.value}),Vm.jsx("div",{className:"text-xs text-slate-500 leading-tight",children:e.label})]},n))})]}),Vm.jsxs(gW.div,{initial:{opacity:0,x:30},animate:t?{opacity:1,x:0}:{},transition:{duration:.6,delay:.4},className:"relative",children:[Vm.jsx("div",{className:"absolute -top-10 -right-10 w-64 h-64 bg-purple-300/30 rounded-full blur-3xl"}),Vm.jsxs("div",{className:"relative bg-white/40 backdrop-blur-sm border border-white/20 rounded-3xl overflow-hidden shadow-2xl",children:[Vm.jsxs("div",{className:"aspect-video bg-gradient-to-br from-slate-100 via-blue-50 to-purple-50 flex items-center justify-center p-8 relative",children:[Vm.jsx("div",{className:"w-full h-full bg-white/60 rounded-2xl p-6 border border-white/40",children:Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("div",{className:"h-4 w-32 bg-gradient-to-r from-slate-300 to-slate-200 rounded"}),Vm.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-400"})]}),Vm.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(e=>Vm.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 rounded-lg p-3 border border-slate-200/50",children:[Vm.jsx("div",{className:"h-2 w-12 bg-gradient-to-r from-blue-400 to-purple-400 rounded mb-2"}),Vm.jsx("div",{className:"h-6 w-16 bg-slate-200 rounded"})]},e))}),Vm.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-lg p-4 border border-blue-200/30 h-32 flex items-end gap-1",children:[40,60,45,75,55,80,65].map((e,t)=>Vm.jsx("div",{className:"flex-1 bg-gradient-to-t from-blue-500 to-purple-500 rounded-t",style:{height:`${e}%`}},t))})]})}),Vm.jsx(KM,{className:"absolute bottom-4 right-4 w-8 h-8 text-purple-400 opacity-50"})]}),Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-600/10 to-transparent pointer-events-none"})]})]})]}),Vm.jsxs("div",{children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.5},className:"text-center mb-12",children:[Vm.jsx("h3",{className:"text-3xl font-medium text-slate-900 mb-4",children:"Dla kogo jest PalletAI?"}),Vm.jsx("p",{className:"text-slate-500",children:"Nasze narzędzie wspiera różne role w organizacjach handlowych i dystrybucyjnych"})]}),Vm.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.6+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-2xl p-6 hover:shadow-lg transition-shadow",children:[Vm.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center mb-4",children:Vm.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Vm.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:e.title}),Vm.jsx("p",{className:"text-sm text-slate-500",children:e.desc})]},n))})]})]})]})}function kW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{icon:nI,title:"Przesyłanie i analiza",items:["Upload plików Excel przez drag & drop","Automatyczne parsowanie i interpretacja danych","Obliczanie rentowności i marży produktów"]},{icon:jM,title:"Raporty i analizy",items:["Szczegółowe raporty z kategoriami rentowności","Analiza AI z rekomendacjami zakupu","Historia wszystkich wcześniejszych analiz"]},{icon:tM,title:"System ostrzeżeń",items:["Reguły dla konkretnych produktów","Ostrzeżenia na poziomie kategorii","Wizualne oznaczenia w interfejsie"]},{icon:iM,title:"Sztuczna inteligencja",items:["Hybrid AI Service (chmura, przeglądarka, Docker)","Automatyczny wybór najlepszego serwisu AI","5 poziomów rekomendacji zakupu"]}];return Vm.jsxs("section",{ref:e,className:"relative py-16 overflow-hidden",children:[Vm.jsx("div",{className:"absolute inset-0 -z-10",children:Vm.jsx("div",{className:"absolute top-[30%] right-[20%] w-[500px] h-[400px] bg-gradient-to-bl from-green-100/15 to-transparent rounded-full blur-3xl"})}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-12",children:[Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-100/60 backdrop-blur-sm border border-green-300/30 mb-6",children:[Vm.jsx(dM,{className:"w-4 h-4 text-green-600"}),Vm.jsx("span",{className:"text-sm font-medium text-green-600",children:"Dostępne teraz"})]}),Vm.jsx("h3",{className:"text-3xl font-medium text-slate-900 mb-4",children:"Funkcjonalności już dostępne"}),Vm.jsx("p",{className:"text-slate-500 max-w-2xl mx-auto",children:"Pełen zestaw narzędzi gotowych do użycia bez konieczności rejestracji"})]}),Vm.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.1+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[Vm.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Vm.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:Vm.jsx(e.icon,{className:"w-5 h-5 text-white"})}),Vm.jsx("h4",{className:"text-lg font-medium text-slate-900",children:e.title})]}),Vm.jsx("ul",{className:"space-y-2",children:e.items.map((e,t)=>Vm.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-500",children:[Vm.jsx(dM,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),Vm.jsx("span",{children:e})]},t))})]},n))})]})]})}function SW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{icon:iM,title:"Zaawansowana AI",badge:"Q1 2025",items:["Rozpoznawanie produktów z baz Allegro/Amazon","Real-time scraping cen z e-commerce","ML model oceny ryzyka i predykcji trendów","Personalizowane rekomendacje"]},{icon:aI,title:"Integracje i eksport",badge:"Q2 2025",items:["Generowanie raportów PDF/Excel","API integracje z systemami ERP","Email/SMS powiadomienia","Wsparcie wielojęzyczne"]},{icon:eI,title:"Analityka zaawansowana",badge:"Q3 2025",items:["Analiza trendów w czasie","Benchmarking branżowy","Symulacje cenowe 'co jeśli'","Współpraca zespołowa"]},{icon:qM,title:"Bezpieczeństwo",badge:"Q3 2025",items:["System logowania i kont użytkowników","Szyfrowanie wrażliwych danych","Skalowalność dla dużych zestawów","Automatyczne backupy"]}];return Vm.jsxs("section",{ref:e,className:"relative py-16 overflow-hidden",children:[Vm.jsx("div",{className:"absolute inset-0 -z-10",children:Vm.jsx("div",{className:"absolute top-[20%] left-[15%] w-[550px] h-[450px] bg-gradient-to-br from-blue-100/12 to-transparent rounded-full blur-3xl"})}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-12",children:[Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100/60 backdrop-blur-sm border border-blue-300/30 mb-6",children:[Vm.jsx(pM,{className:"w-4 h-4 text-blue-600"}),Vm.jsx("span",{className:"text-sm font-medium text-blue-600",children:"W planach rozwoju"})]}),Vm.jsx("h3",{className:"text-3xl font-medium text-slate-900 mb-4",children:"Nadchodzące funkcjonalności"}),Vm.jsx("p",{className:"text-slate-500 max-w-2xl mx-auto",children:"Ciągle rozwijamy Paletę, aby dostarczać jeszcze więcej wartości"})]}),Vm.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.1+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Vm.jsxs("div",{className:"flex items-center gap-4",children:[Vm.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:Vm.jsx(e.icon,{className:"w-5 h-5 text-white"})}),Vm.jsx("h4",{className:"text-lg font-medium text-slate-900",children:e.title})]}),Vm.jsx("span",{className:"text-xs font-medium text-blue-600 px-3 py-1 rounded-lg border border-blue-300/30",children:e.badge})]}),Vm.jsx("ul",{className:"space-y-2",children:e.items.map((e,t)=>Vm.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-500",children:[Vm.jsx(pM,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"}),Vm.jsx("span",{children:e})]},t))})]},n))})]})]})}function jW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{phase:"Faza 1",title:"Podstawowa funkcjonalność",description:"Upload dokumentów Excel, podstawowa analiza rentowności, system ostrzeżeń",progress:100,status:"ZAKOŃCZONE",statusColor:"text-green-600",barColor:"bg-green-500",borderColor:"border-green-500/50",icon:cM},{phase:"Faza 2",title:"AI i automatyzacja",description:"Rozpoznawanie produktów, wycena rynkowa, zaawansowane rekomendacje AI",progress:60,status:"W REALIZACJI",statusColor:"text-blue-600",barColor:"bg-blue-500",borderColor:"border-blue-500/50",icon:pM},{phase:"Faza 3",title:"Integracje i eksport",description:"Eksport raportów, integracje API, automatyzacja workflow",progress:0,status:"Q2 2025",statusColor:"text-slate-500",barColor:"bg-slate-300",borderColor:"border-slate-200",icon:pM},{phase:"Faza 4",title:"Zaawansowane funkcje",description:"Analiza trendów, benchmarking, współpraca zespołowa",progress:0,status:"Q3 2025",statusColor:"text-slate-500",barColor:"bg-slate-300",borderColor:"border-slate-200",icon:pM}];return Vm.jsxs("section",{ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-50/30 via-white to-blue-50/30"}),Vm.jsx("div",{className:"absolute top-[15%] right-[18%] w-[650px] h-[500px] bg-gradient-to-bl from-purple-200/13 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[20%] left-[12%] w-[600px] h-[450px] bg-gradient-to-tr from-blue-200/11 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-100/60 backdrop-blur-sm border border-purple-300/30 mb-6",children:[Vm.jsx(KM,{className:"w-4 h-4 text-purple-600"}),Vm.jsx("span",{className:"text-sm font-medium text-purple-600",children:"Roadmap"})]}),Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 to-purple-900 bg-clip-text text-transparent",children:"Plan rozwoju aplikacji"}),Vm.jsx("p",{className:"text-xl text-slate-500",children:"Transparentny plan rozwoju produktu z harmonogramem realizacji"})]}),Vm.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.2+.1*n},className:`bg-white/60 backdrop-blur-sm border ${e.borderColor} rounded-2xl p-6`,children:[Vm.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-slate-500 mb-1",children:e.phase}),Vm.jsx("h3",{className:"text-lg font-medium text-slate-900 leading-tight",children:e.title})]}),Vm.jsx(e.icon,{className:`w-6 h-6 ${e.statusColor}`})]}),Vm.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:e.description}),Vm.jsxs("div",{className:"mb-4",children:[Vm.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[Vm.jsx("span",{className:"text-slate-500",children:"Postęp"}),Vm.jsxs("span",{className:e.statusColor,children:[e.progress,"%"]})]}),Vm.jsx("div",{className:"h-2 bg-slate-50 rounded-full overflow-hidden",children:Vm.jsx("div",{className:`h-full ${e.barColor} transition-all duration-1000`,style:{width:`${e.progress}%`}})})]}),Vm.jsx("div",{className:`text-center py-2 rounded-lg border ${e.borderColor}`,children:Vm.jsx("span",{className:`text-xs font-medium ${e.statusColor}`,children:e.status})})]},n))})]})]})}function _W(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{icon:fM,title:"Oszczędzaj czas",description:"Analiza w minutę"},{icon:eI,title:"Maksymalizuj zysk",description:"Poznaj wartość palety"},{icon:iM,title:"AI-asystent",description:"Obiektywna ocena produktów"},{icon:CM,title:"Przeglądaj historię",description:"Ucz się na własnych decyzjach"}];return Vm.jsxs("section",{ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-blue-50/30 to-purple-50/30"}),Vm.jsx("div",{className:"absolute top-[10%] left-[5%] w-[700px] h-[600px] bg-gradient-to-br from-blue-200/10 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[10%] right-[10%] w-[600px] h-[500px] bg-gradient-to-tl from-purple-200/10 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Dlaczego PalletAI?"}),Vm.jsx("p",{className:"text-xl text-slate-500 max-w-3xl mx-auto",children:"Wszystko czego potrzebujesz do profesjonalnej analizy palet produktowych"})]}),Vm.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.2+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-3xl p-8 hover:shadow-xl transition-shadow group",children:[Vm.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center mb-6 shadow-lg shadow-purple-500/30 group-hover:scale-110 transition-transform",children:Vm.jsx(e.icon,{className:"w-7 h-7 text-white"})}),Vm.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:e.title}),Vm.jsx("p",{className:"text-sm text-slate-500",children:e.description})]},n))})]})]})}function AW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2}),n=[{number:"01",icon:nI,title:"Prześlij plik z zestawem produktów",description:"Załaduj plik Excel, CSV lub PDF zawierający listę produktów w palecie"},{number:"02",icon:iM,title:"AI analizuje dane i ocenia opłacalność",description:"Algorytm sztucznej inteligencji przetwarza dane i oblicza wskaźniki"},{number:"03",icon:jM,title:"Otrzymujesz ranking i raport PDF",description:"Pobierz szczegółowy raport z rekomendacjami i oceną każdego produktu"}];return Vm.jsxs("section",{id:"how-it-works",ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-50/30 via-purple-50/30 to-pink-50/30"}),Vm.jsx("div",{className:"absolute top-[15%] left-[10%] w-[700px] h-[400px] bg-gradient-to-br from-blue-300/15 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[20%] right-[15%] w-[600px] h-[300px] bg-gradient-to-tl from-pink-300/12 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Jak to działa?"}),Vm.jsx("p",{className:"text-xl text-slate-500",children:"Prosty 3-etapowy proces do pełnej analizy palety"})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.2+.15*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-3xl p-8",children:[Vm.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Vm.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-lg shadow-purple-500/30",children:Vm.jsx(e.icon,{className:"w-8 h-8 text-white"})}),Vm.jsx("span",{className:"text-5xl font-bold text-transparent bg-gradient-to-br from-slate-200 to-slate-300 bg-clip-text",children:e.number})]}),Vm.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-3",children:e.title}),Vm.jsx("p",{className:"text-slate-500",children:e.description})]},n))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.7},className:"relative bg-white/40 backdrop-blur-sm border border-white/20 rounded-[40px] p-12 overflow-hidden",children:[Vm.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-blue-300/25 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-tl from-purple-300/30 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute top-1/2 right-1/4 w-56 h-56 bg-gradient-to-br from-pink-200/20 to-transparent rounded-full blur-3xl"}),Vm.jsxs("div",{className:"relative grid md:grid-cols-2 gap-12 items-center",children:[Vm.jsxs("div",{children:[Vm.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/60 backdrop-blur-sm border border-white/20 mb-4",children:[Vm.jsx(KM,{className:"w-4 h-4 text-purple-600"}),Vm.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Powered by AI"})]}),Vm.jsx("h3",{className:"text-3xl font-medium text-slate-900 mb-4",children:"Zobacz PalletAI w akcji"}),Vm.jsx("p",{className:"text-slate-500 mb-8 leading-relaxed",children:"Przetestuj analizę na przykładowych danych i zobacz jak AI może usprawnić Twoje decyzje zakupowe w ciągu kilku sekund"}),Vm.jsx("div",{className:"flex gap-4 mb-0",children:[{value:"3min",label:"Średni czas"},{value:"94%",label:"Dokładność"},{value:"500+",label:"Analiz"}].map((e,t)=>Vm.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-white/30 rounded-2xl px-5 py-4 text-center shadow-md",children:[Vm.jsx("div",{className:`text-3xl font-bold bg-gradient-to-r ${["from-blue-600 to-cyan-600","from-purple-600 to-pink-600","from-cyan-600 to-teal-600"][t]} bg-clip-text text-transparent mb-1`,children:e.value}),Vm.jsx("div",{className:"text-xs text-slate-500 font-medium",children:e.label})]},t))})]}),Vm.jsx("div",{className:"flex items-center justify-center",children:Vm.jsxs("button",{className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium shadow-xl shadow-purple-500/30 hover:shadow-2xl hover:shadow-purple-500/40 transition-all text-lg flex items-center gap-3",children:[Vm.jsx(KM,{className:"w-5 h-5"}),"Wypróbuj analizę demo"]})})]})]})]})]})}function EW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.1}),n=[{icon:nI,title:"Upload i analiza plików",description:"Wczytaj dowolny plik Excel z opisem produktów – PalletAI automatycznie rozpozna strukturę i dokona analizy."},{icon:qM,title:"System reguł i oceny",description:"Zdefiniuj limity, wagi i kryteria – algorytm AI obliczy wskaźnik opłacalności (0–100)."},{icon:iM,title:"Rekomendacje AI",description:"Sztuczna inteligencja podpowie, które produkty są ryzykowne, a które generują największy potencjalny zysk."},{icon:rM,title:"Dashboard i historia",description:"Zachowaj każdą analizę, wróć do niej w przyszłości, porównuj palety i śledź trendy zakupowe."},{icon:kM,title:"Eksport wyników",description:"Wyniki możesz pobrać w PDF lub CSV, by przedstawić raport wewnętrznie."},{icon:OM,title:"Bezpieczeństwo danych",description:"Twoje dane są szyfrowane i przechowywane zgodnie z najwyższymi standardami bezpieczeństwa."}];return Vm.jsxs("section",{id:"features",ref:e,className:"py-24 relative overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-50/30 via-white to-blue-50/30"}),Vm.jsx("div",{className:"absolute top-[10%] right-[20%] w-[800px] h-[700px] bg-gradient-to-bl from-purple-200/12 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[15%] left-[15%] w-[700px] h-[600px] bg-gradient-to-tr from-blue-200/10 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-purple-900 to-blue-900 bg-clip-text text-transparent",children:"Funkcje PalletAI"}),Vm.jsx("p",{className:"text-xl text-slate-500 max-w-3xl mx-auto",children:"Pełen zestaw narzędzi do profesjonalnej analizy palet produktowych"})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.1+.1*n},className:"group bg-white/60 backdrop-blur-sm border border-white/20 rounded-3xl overflow-hidden hover:shadow-xl transition-all",children:[Vm.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-slate-100 via-blue-50 to-purple-50 flex items-center justify-center overflow-hidden",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),Vm.jsxs("div",{className:"absolute inset-0 p-6 flex items-center justify-center",children:[0===n&&Vm.jsxs("div",{className:"w-full h-full border-2 border-dashed border-white/40 rounded-xl flex flex-col items-center justify-center",children:[Vm.jsx(nI,{className:"w-12 h-12 text-white/70 mb-2"}),Vm.jsx("p",{className:"text-white/60 text-sm",children:"Drag & Drop"})]}),1===n&&Vm.jsx("div",{className:"w-full space-y-2",children:[1,2,3].map(e=>Vm.jsxs("div",{className:"flex items-center gap-2 bg-white/20 rounded-lg p-2",children:[Vm.jsx("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-blue-400 to-purple-400"}),Vm.jsx("div",{className:"flex-1 h-3 bg-white/40 rounded"})]},e))}),2===n&&Vm.jsxs("div",{className:"w-full space-y-2",children:[Vm.jsxs("div",{className:"bg-green-500/20 border border-green-400/40 rounded-lg p-3 flex items-center gap-2",children:[Vm.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),Vm.jsx("div",{className:"flex-1 h-2 bg-white/40 rounded"})]}),Vm.jsxs("div",{className:"bg-amber-500/20 border border-amber-400/40 rounded-lg p-3 flex items-center gap-2",children:[Vm.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),Vm.jsx("div",{className:"flex-1 h-2 bg-white/40 rounded"})]})]}),3===n&&Vm.jsx("div",{className:"w-full grid grid-cols-2 gap-2",children:[1,2,3,4].map(e=>Vm.jsxs("div",{className:"bg-white/20 rounded-lg p-2",children:[Vm.jsx("div",{className:"h-2 bg-white/40 rounded mb-1"}),Vm.jsx("div",{className:"h-4 bg-gradient-to-r from-blue-400 to-purple-400 rounded"})]},e))}),4===n&&Vm.jsx("div",{className:"space-y-2",children:Vm.jsxs("div",{className:"bg-white/20 rounded-lg p-3 flex items-center gap-2",children:[Vm.jsx(kM,{className:"w-6 h-6 text-white/70"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("div",{className:"h-2 bg-white/40 rounded mb-1"}),Vm.jsx("div",{className:"h-2 w-20 bg-white/30 rounded"})]})]})}),5===n&&Vm.jsx("div",{className:"flex items-center justify-center",children:Vm.jsx(OM,{className:"w-16 h-16 text-white/50"})})]}),Vm.jsx("div",{className:"absolute bottom-4 right-4 w-12 h-12 rounded-2xl bg-white/70 backdrop-blur-sm shadow-lg flex items-center justify-center",children:Vm.jsx(e.icon,{className:"w-6 h-6 text-slate-600"})})]}),Vm.jsxs("div",{className:"p-6",children:[Vm.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-3",children:e.title}),Vm.jsx("p",{className:"text-slate-500 leading-relaxed",children:e.description})]})]},n))})]})]})}function TW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.2});return Vm.jsxs("section",{ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-50/30 via-white to-blue-50/30"}),Vm.jsx("div",{className:"absolute top-[20%] left-[8%] w-[650px] h-[550px] bg-gradient-to-br from-purple-200/12 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[25%] right-[12%] w-[600px] h-[500px] bg-gradient-to-tl from-blue-200/10 to-transparent rounded-full blur-3xl"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-purple-900 to-blue-900 bg-clip-text text-transparent",children:"Zaufali nam profesjonaliści"}),Vm.jsx("p",{className:"text-xl text-slate-500",children:"Zobacz, co mówią o PalletAI eksperci zakupów i inwestorzy"})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{name:"Anna Kowalska",role:"Kierownik Zakupów, TechStore",content:"PalletAI zmieniła sposób, w jaki analizujemy oferty od dostawców. Oszczędzamy teraz 5-6 godzin tygodniowo na analizie zestawów.",gradient:"from-blue-600 to-cyan-600"},{name:"Michał Nowak",role:"Inwestor",content:"Dzięki AI-asystentowi unikam nietrafionych inwestycji w palety. ROI wzrósł o 23% w ciągu 3 miesięcy.",gradient:"from-purple-600 to-pink-600"},{name:"Katarzyna Wiśniewska",role:"Dyrektor ds. Zakupów, RetailPro",content:"Intuicyjny interfejs i obiektywna ocena produktów. To narzędzie, na które czekaliśmy.",gradient:"from-indigo-600 to-purple-600"}].map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.2+.1*n},className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-3xl p-8 hover:shadow-xl transition-shadow relative overflow-hidden",children:[Vm.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.gradient}`}),Vm.jsx("div",{className:"flex gap-1 mb-6",children:[...Array(5)].map((e,t)=>Vm.jsx(XM,{className:"w-4 h-4 fill-amber-400 text-amber-400"},t))}),Vm.jsxs("div",{className:"mb-6 relative",children:[Vm.jsx(WM,{className:"absolute -left-2 -top-2 w-8 h-8 text-slate-200"}),Vm.jsx("p",{className:"text-slate-500 leading-relaxed relative z-10 pl-6",children:e.content})]}),Vm.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t border-white/10",children:[Vm.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${e.gradient} blur-sm`}),Vm.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${e.gradient} -ml-12 border-2 border-white flex items-center justify-center shadow-md`,children:Vm.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Vm.jsx("circle",{cx:"12",cy:"10",r:"4",fill:"white",opacity:"0.95"}),Vm.jsx("path",{d:"M4 20C4 16 7 14 12 14C17 14 20 16 20 20",fill:"white",opacity:"0.95"})]})}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"font-medium text-slate-900",children:e.name}),Vm.jsx("div",{className:"text-sm text-slate-500",children:e.role})]})]})]},n))})]})]})}function NW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.1});return Vm.jsxs("section",{id:"pricing",ref:e,className:"py-24 relative overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-50/30 via-purple-50/50 to-pink-50/30"}),Vm.jsx("div",{className:"absolute top-0 right-[15%] w-[900px] h-[500px] bg-gradient-to-bl from-purple-200/15 to-transparent rounded-full blur-3xl opacity-70"}),Vm.jsx("div",{className:"absolute bottom-[10%] left-[10%] w-[850px] h-[600px] bg-gradient-to-tr from-blue-200/12 to-transparent rounded-full blur-3xl opacity-60"}),Vm.jsx("div",{className:"absolute top-[40%] left-[20%] w-[700px] h-[500px] bg-gradient-to-br from-pink-200/10 to-transparent rounded-full blur-3xl opacity-50"})]}),Vm.jsxs("div",{className:"container mx-auto px-8 relative",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6},className:"text-center mb-16",children:[Vm.jsx("h2",{className:"text-4xl md:text-5xl font-normal mb-6 bg-gradient-to-r from-slate-900 via-purple-900 to-pink-900 bg-clip-text text-transparent",children:"Wybierz plan dla siebie"}),Vm.jsx("p",{className:"text-xl text-slate-500",children:"Przejrzysta cennik bez ukrytych kosztów. Rozpocznij za darmo."})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-20",children:[{name:"Free",price:"0",period:"zł na zawsze",description:"Idealne do testów i małych projektów",features:[{name:"3 analizy / miesiąc",included:!0},{name:"Podstawowy raport PDF",included:!0},{name:"Historia analiz (7 dni)",included:!0},{name:"Wsparcie email",included:!0},{name:"Zaawansowane reguły AI",included:!1},{name:"Eksport do CSV",included:!1},{name:"Analizy porównawcze",included:!1},{name:"Wsparcie priorytetowe",included:!1}],cta:"Rozpocznij za darmo",popular:!1},{name:"Pro",price:"99",period:"zł / miesiąc",description:"Dla profesjonalistów i średnich firm",features:[{name:"Nielimitowane analizy",included:!0},{name:"Pełny raport PDF",included:!0},{name:"Nielimitowana historia",included:!0},{name:"Wsparcie email i chat",included:!0},{name:"Zaawansowane reguły AI",included:!0},{name:"Eksport do CSV",included:!0},{name:"Analizy porównawcze",included:!0},{name:"Wsparcie priorytetowe",included:!1}],cta:"Wybierz Pro",popular:!0},{name:"Business",price:"299",period:"zł / miesiąc",description:"Dla dużych organizacji i zespołów",features:[{name:"Nielimitowane analizy",included:!0},{name:"Pełny raport PDF + Excel",included:!0},{name:"Nielimitowana historia",included:!0},{name:"Dedykowany opiekun",included:!0},{name:"Zaawansowane reguły AI",included:!0},{name:"Eksport do CSV",included:!0},{name:"Analizy porównawcze",included:!0},{name:"Wsparcie priorytetowe 24/7",included:!0}],cta:"Skontaktuj się",popular:!1}].map((e,n)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.1+.1*n},className:"relative bg-white/60 backdrop-blur-sm border rounded-3xl p-8 "+(e.popular?"border-purple-500/50 shadow-xl shadow-purple-500/10 md:-mt-4 md:mb-4":"border-white/20"),children:[e.popular&&Vm.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:Vm.jsxs("div",{className:"px-6 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg shadow-purple-500/30 flex items-center gap-2",children:[Vm.jsx(KM,{className:"w-4 h-4 text-white"}),Vm.jsx("span",{className:"text-sm text-white font-medium",children:"Najpopularniejszy"})]})}),Vm.jsxs("div",{className:"mb-8",children:[Vm.jsx("h3",{className:"text-2xl font-semibold text-slate-900 mb-4",children:e.name}),Vm.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[Vm.jsx("span",{className:"text-5xl font-semibold "+(e.popular?"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent":"text-slate-600"),children:e.price}),Vm.jsx("span",{className:"text-slate-500",children:e.period})]}),Vm.jsx("p",{className:"text-sm text-slate-500",children:e.description})]}),Vm.jsx(RR,{mode:"modal",children:Vm.jsx("button",{className:"w-full py-3 rounded-xl font-medium transition-all mb-8 "+(e.popular?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40":"bg-white/80 border-2 border-blue-600 text-slate-900 hover:bg-white"),children:e.cta})}),Vm.jsx("ul",{className:"space-y-4",children:e.features.map((e,t)=>Vm.jsxs("li",{className:"flex items-center gap-3",children:[e.included?Vm.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:Vm.jsx(uM,{className:"w-3 h-3 text-white"})}):Vm.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:Vm.jsx(iI,{className:"w-4 h-4 text-slate-300"})}),Vm.jsx("span",{className:e.included?"text-slate-900":"text-slate-400",children:e.name})]},t))})]},n))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.5},className:"max-w-3xl mx-auto",children:[Vm.jsx("h3",{className:"text-2xl font-semibold text-center mb-8 bg-gradient-to-r from-slate-900 to-purple-900 bg-clip-text text-transparent",children:"Często zadawane pytania"}),Vm.jsx("div",{className:"space-y-4",children:[{question:"Czy mogę zrezygnować w każdej chwili?",answer:"Tak, możesz anulować subskrypcję w dowolnym momencie bez dodatkowych opłat."},{question:"Czy oferujecie rabaty roczne?",answer:"Tak, przy płatności rocznej otrzymujesz 20% rabatu."},{question:"Czy moje dane są bezpieczne?",answer:"Absolutnie. Wszystkie dane są szyfrowane i przechowywane zgodnie z RODO."}].map((e,t)=>Vm.jsxs("div",{className:"bg-white/60 backdrop-blur-sm border border-white/20 rounded-2xl p-6",children:[Vm.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:e.question}),Vm.jsx("p",{className:"text-slate-500",children:e.answer})]},t))})]})]})]})}function CW(){const e=Im.useRef(null),t=yW(e,{once:!0,amount:.3});return Vm.jsxs("section",{ref:e,className:"relative py-24 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-purple-50 to-blue-50"}),Vm.jsx("div",{className:"absolute top-[20%] left-[10%] w-[800px] h-[600px] bg-gradient-to-br from-purple-200/12 to-transparent rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-[15%] right-[15%] w-[700px] h-[500px] bg-gradient-to-tl from-blue-200/15 to-transparent rounded-full blur-3xl"})]}),Vm.jsx("div",{className:"container mx-auto px-8 relative",children:Vm.jsxs(gW.div,{initial:{opacity:0,scale:.95},animate:t?{opacity:1,scale:1}:{},transition:{duration:.6},className:"relative bg-gradient-to-r from-blue-600 to-purple-600 rounded-[40px] p-16 overflow-hidden",children:[Vm.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/20 rounded-full blur-3xl"}),Vm.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-white/20 rounded-full blur-3xl"}),Vm.jsxs("div",{className:"relative max-w-3xl mx-auto text-center space-y-8",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.2},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/20 backdrop-blur-sm border border-white/30",children:[Vm.jsx(KM,{className:"w-4 h-4 text-white"}),Vm.jsx("span",{className:"text-sm font-medium text-white",children:"Zacznij dziś"})]}),Vm.jsx(gW.h2,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.3},className:"text-5xl md:text-6xl font-normal text-white leading-tight",children:"Zacznij analizować palety mądrzej już dziś"}),Vm.jsx(gW.p,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.4},className:"text-xl text-white/90 leading-relaxed max-w-2xl mx-auto",children:"Dołącz do setek profesjonalistów, którzy oszczędzają czas i maksymalizują zyski dzięki AI"}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},animate:t?{opacity:1,y:0}:{},transition:{duration:.6,delay:.5},className:"flex flex-wrap justify-center gap-4 pt-4",children:[Vm.jsx(RR,{mode:"modal",children:Vm.jsx("button",{className:"px-8 py-4 rounded-xl bg-white text-purple-600 font-medium shadow-xl hover:shadow-2xl hover:scale-105 transition-all",children:"Zarejestruj się za darmo"})}),Vm.jsxs("button",{className:"px-8 py-4 rounded-xl bg-white/10 backdrop-blur-sm border border-white/40 text-white font-medium hover:bg-white/20 transition-all flex items-center gap-2",children:[Vm.jsx(lM,{className:"w-5 h-5"}),"Umów prezentację"]})]}),Vm.jsx(gW.p,{initial:{opacity:0},animate:t?{opacity:1}:{},transition:{duration:.6,delay:.6},className:"text-sm text-white/80 pt-4",children:"Nie wymaga karty kredytowej • Anuluj w każdej chwili"})]})]})})]})}function PW(){const e={product:[{name:"Funkcje",href:"#features"},{name:"Jak to działa",href:"#how-it-works"},{name:"Cennik",href:"#pricing"},{name:"Demo",href:"#"}],company:[{name:"O nas",href:"#"},{name:"Blog",href:"#"},{name:"Kariera",href:"#"},{name:"Kontakt",href:"#"}],legal:[{name:"Polityka prywatności",href:"#"},{name:"Regulamin",href:"#"},{name:"RODO",href:"#"},{name:"Cookies",href:"#"}],support:[{name:"Pomoc",href:"#"},{name:"Dokumentacja",href:"#"},{name:"Status systemu",href:"#"},{name:"API",href:"#"}]};return Vm.jsxs("footer",{id:"footer",className:"relative border-t border-white/20 overflow-hidden",children:[Vm.jsxs("div",{className:"absolute inset-0 -z-10",children:[Vm.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-50/50 via-blue-50/50 to-white"}),Vm.jsx("div",{className:"absolute bottom-0 left-[25%] w-[600px] h-[300px] bg-gradient-to-t from-purple-100/15 to-transparent rounded-full blur-3xl"})]}),Vm.jsx("div",{className:"relative bg-white/40 backdrop-blur-sm",children:Vm.jsxs("div",{className:"container mx-auto px-8 py-16",children:[Vm.jsxs("div",{className:"grid md:grid-cols-5 gap-12 mb-12",children:[Vm.jsxs("div",{className:"md:col-span-1",children:[Vm.jsxs(fT,{to:"/",className:"flex items-center gap-2 mb-4",children:[Vm.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/50",children:Vm.jsx("span",{className:"text-white font-semibold",children:"P"})}),Vm.jsx("span",{className:"text-xl font-normal bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PalletAI"})]}),Vm.jsx("p",{className:"text-slate-500 mb-6 leading-relaxed text-sm",children:"Analizuj zestawy produktów w minutę z pomocą sztucznej inteligencji."}),Vm.jsxs("div",{className:"flex gap-3",children:[Vm.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/60 backdrop-blur-sm border border-white/20 flex items-center justify-center hover:bg-white transition-colors",children:Vm.jsx(EM,{className:"w-4 h-4 text-slate-600"})}),Vm.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/60 backdrop-blur-sm border border-white/20 flex items-center justify-center hover:bg-white transition-colors",children:Vm.jsx(tI,{className:"w-4 h-4 text-slate-600"})}),Vm.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-white/60 backdrop-blur-sm border border-white/20 flex items-center justify-center hover:bg-white transition-colors",children:Vm.jsx(MM,{className:"w-4 h-4 text-slate-600"})})]})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Produkt"}),Vm.jsx("ul",{className:"space-y-3",children:e.product.map(e=>Vm.jsx("li",{children:Vm.jsx("button",{onClick:()=>(e=>{if(e.startsWith("#")){const t=document.getElementById(e.substring(1));t&&t.scrollIntoView({behavior:"smooth"})}})(e.href),className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:e.name})},e.name))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Firma"}),Vm.jsx("ul",{className:"space-y-3",children:e.company.map(e=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:e.name})},e.name))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Prawne"}),Vm.jsx("ul",{className:"space-y-3",children:e.legal.map(e=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:e.name})},e.name))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Wsparcie"}),Vm.jsx("ul",{className:"space-y-3",children:e.support.map(e=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:e.name})},e.name))})]})]}),Vm.jsxs("div",{className:"pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4",children:[Vm.jsx("p",{className:"text-sm text-slate-500",children:"© 2025 PalletAI. Wszystkie prawa zastrzeżone."}),Vm.jsxs("div",{className:"flex gap-6",children:[Vm.jsx("a",{href:"#",className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:"Polityka prywatności"}),Vm.jsx("a",{href:"#",className:"text-sm text-slate-500 hover:text-slate-900 transition-colors",children:"Warunki użytkowania"})]})]})]})})]})}function RW(){const e=$E();return Im.useEffect(()=>{window.scrollTo(0,0);const t=e.state;(null==t?void 0:t.scrollTo)&&setTimeout(()=>{const e=document.getElementById(t.scrollTo);e&&e.scrollIntoView({behavior:"smooth"})},100)},[e]),Vm.jsxs("div",{className:"min-h-screen bg-white",children:[Vm.jsx(xW,{}),Vm.jsx(bW,{}),Vm.jsx(wW,{}),Vm.jsx(kW,{}),Vm.jsx(SW,{}),Vm.jsx(jW,{}),Vm.jsx(_W,{}),Vm.jsx(AW,{}),Vm.jsx(EW,{}),Vm.jsx(TW,{}),Vm.jsx(NW,{}),Vm.jsx(CW,{}),Vm.jsx(PW,{})]})}var MW=function(e,t){return(MW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function IW(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}MW(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var OW=function(){return OW=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},OW.apply(this,arguments)};function zW(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function DW(e,t,n,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function LW(e,t){return function(n,r){t(n,r,e)}}function FW(e,t,n,r,s,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?r.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var g=(0,n[p])("accessor"===l?{get:u.get,set:u.set}:u[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=i(g.get))&&(u.get=o),(o=i(g.set))&&(u.set=o),(o=i(g.init))&&s.unshift(o)}else(o=i(g))&&("field"===l?s.unshift(o):u[c]=o)}d&&Object.defineProperty(d,r.name,u),h=!0}function BW(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function UW(e){return"symbol"==typeof e?e:"".concat(e)}function WW(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function $W(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function VW(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(Vne){a(Vne)}}function o(e){try{l(r.throw(e))}catch(Vne){a(Vne)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}function HW(e,t){var n,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(Vne){o=[6,Vne],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var qW=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function GW(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||qW(t,e,n)}function KW(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function XW(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return i}function YW(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(XW(arguments[t]));return e}function JW(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)r[s]=a[i];return r}function ZW(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function QW(e){return this instanceof QW?(this.v=e,this):new QW(e)}function e$(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){s[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{(n=s[e](t)).value instanceof QW?Promise.resolve(n.value.v).then(l,c):d(a[0][2],n)}catch(Vne){d(a[0][3],Vne)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function t$(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:QW(e[r](t)),done:!1}:s?s(t):t}:s}}function n$(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=KW(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,s){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,s,(t=e[n](t)).done,t.value)})}}}function r$(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var s$=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a$=function(e){return(a$=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)};function i$(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=a$(e),r=0;r<n.length;r++)"default"!==n[r]&&qW(t,e,n[r]);return s$(t,e),t}function o$(e){return e&&e.__esModule?e:{default:e}}function l$(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function c$(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function d$(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function u$(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(Vne){return Promise.reject(Vne)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var h$="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function p$(e){function t(t){e.error=e.hasError?new h$(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(e){return t(e),s()})}else r|=1}catch(Vne){t(Vne)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function f$(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,s,a){return n?t?".jsx":".js":!r||s&&a?r+s+"."+a.toLowerCase()+"js":e}):e}const m$={__extends:IW,__assign:OW,__rest:zW,__decorate:DW,__param:LW,__esDecorate:FW,__runInitializers:BW,__propKey:UW,__setFunctionName:WW,__metadata:$W,__awaiter:VW,__generator:HW,__createBinding:qW,__exportStar:GW,__values:KW,__read:XW,__spread:YW,__spreadArrays:JW,__spreadArray:ZW,__await:QW,__asyncGenerator:e$,__asyncDelegator:t$,__asyncValues:n$,__makeTemplateObject:r$,__importStar:i$,__importDefault:o$,__classPrivateFieldGet:l$,__classPrivateFieldSet:c$,__classPrivateFieldIn:d$,__addDisposableResource:u$,__disposeResources:p$,__rewriteRelativeImportExtension:f$},g$=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:u$,get __assign(){return OW},__asyncDelegator:t$,__asyncGenerator:e$,__asyncValues:n$,__await:QW,__awaiter:VW,__classPrivateFieldGet:l$,__classPrivateFieldIn:d$,__classPrivateFieldSet:c$,__createBinding:qW,__decorate:DW,__disposeResources:p$,__esDecorate:FW,__exportStar:GW,__extends:IW,__generator:HW,__importDefault:o$,__importStar:i$,__makeTemplateObject:r$,__metadata:$W,__param:LW,__propKey:UW,__read:XW,__rest:zW,__rewriteRelativeImportExtension:f$,__runInitializers:BW,__setFunctionName:WW,__spread:YW,__spreadArray:ZW,__spreadArrays:JW,__values:KW,default:m$},Symbol.toStringTag,{value:"Module"}));class v$ extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class y$ extends v${constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class x$ extends v${constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b$ extends v${constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var w$,k$;(k$=w$||(w$={})).Any="any",k$.ApNortheast1="ap-northeast-1",k$.ApNortheast2="ap-northeast-2",k$.ApSouth1="ap-south-1",k$.ApSoutheast1="ap-southeast-1",k$.ApSoutheast2="ap-southeast-2",k$.CaCentral1="ca-central-1",k$.EuCentral1="eu-central-1",k$.EuWest1="eu-west-1",k$.EuWest2="eu-west-2",k$.EuWest3="eu-west-3",k$.SaEast1="sa-east-1",k$.UsEast1="us-east-1",k$.UsWest1="us-west-1",k$.UsWest2="us-west-2";class S${constructor(e,{headers:t={},customFetch:n,region:r=w$.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Gf(()=>Promise.resolve().then(()=>D$),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return VW(this,arguments,void 0,function*(e,t={}){var n;try{const{headers:r,method:s,body:a,signal:i}=t;let o={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let d;l&&"any"!==l&&(o["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)?"undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):"string"==typeof a?(o["Content-Type"]="text/plain",d=a):"undefined"!=typeof FormData&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)):d=a;const u=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:d,signal:i}).catch(e=>{if("AbortError"===e.name)throw e;throw new y$(e)}),h=u.headers.get("x-relay-error");if(h&&"true"===h)throw new x$(u);if(!u.ok)throw new b$(u);let p,f=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===f?yield u.json():"application/octet-stream"===f||"application/pdf"===f?yield u.blob():"text/event-stream"===f?u:"multipart/form-data"===f?yield u.formData():yield u.text(),{data:p,error:null,response:u}}catch(r){return r instanceof Error&&"AbortError"===r.name?{data:null,error:new y$(r)}:{data:null,error:r,response:r instanceof b$||r instanceof x$?r.context:void 0}}})}}var j$={};const _$=Xf(g$);var A$={},E$={},T$={},N$={},C$={},P$=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const R$=P$.fetch,M$=P$.fetch.bind(P$),I$=P$.Headers,O$=P$.Request,z$=P$.Response,D$=Object.freeze(Object.defineProperty({__proto__:null,Headers:I$,Request:O$,Response:z$,default:M$,fetch:R$},Symbol.toStringTag,{value:"Module"})),L$=Xf(D$);var F$,B$,U$,W$,$$,V$,H$={};function q$(){if(F$)return H$;F$=1,Object.defineProperty(H$,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return H$.default=e,H$}function G$(){if(B$)return C$;B$=1,Object.defineProperty(C$,"__esModule",{value:!0});const e=_$,t=e.__importDefault(L$),n=e.__importDefault(q$());return C$.default=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(n=e.shouldThrowOnError)&&void 0!==n&&n,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,a;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new n.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},C$}function K$(){if(U$)return N$;U$=1,Object.defineProperty(N$,"__esModule",{value:!0});const e=_$.__importDefault(G$());class t extends e.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return N$.default=t,N$}function X$(){if(W$)return T$;W$=1,Object.defineProperty(T$,"__esModule",{value:!0});const e=_$.__importDefault(K$());class t extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const a=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}return T$.default=t,T$}function Y$(){if($$)return E$;$$=1,Object.defineProperty(E$,"__esModule",{value:!0});const e=_$.__importDefault(X$());return E$.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(t,n){const{head:r=!1,count:s}=null!=n?n:{},a=r?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==n&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:n}={}){var r;return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}},E$}Object.defineProperty(j$,"__esModule",{value:!0}),j$.PostgrestError=j$.PostgrestBuilder=j$.PostgrestTransformBuilder=j$.PostgrestFilterBuilder=j$.PostgrestQueryBuilder=j$.PostgrestClient=void 0;const J$=_$,Z$=J$.__importDefault(function(){if(V$)return A$;V$=1,Object.defineProperty(A$,"__esModule",{value:!0});const e=_$,t=e.__importDefault(Y$()),n=e.__importDefault(X$());class r{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new t.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:a}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new n.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return A$.default=r,A$}());j$.PostgrestClient=Z$.default;const Q$=J$.__importDefault(Y$());j$.PostgrestQueryBuilder=Q$.default;const eV=J$.__importDefault(X$());j$.PostgrestFilterBuilder=eV.default;const tV=J$.__importDefault(K$());j$.PostgrestTransformBuilder=tV.default;const nV=J$.__importDefault(G$());j$.PostgrestBuilder=nV.default;const rV=J$.__importDefault(q$());j$.PostgrestError=rV.default;var sV=j$.default={PostgrestClient:Z$.default,PostgrestQueryBuilder:Q$.default,PostgrestFilterBuilder:eV.default,PostgrestTransformBuilder:tV.default,PostgrestBuilder:nV.default,PostgrestError:rV.default};const{PostgrestClient:aV,PostgrestQueryBuilder:iV,PostgrestFilterBuilder:oV,PostgrestTransformBuilder:lV,PostgrestBuilder:cV,PostgrestError:dV}=sV;class uV{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const hV=1e4;var pV,fV,mV,gV,vV,yV,xV,bV,wV,kV,SV;(fV=pV||(pV={}))[fV.connecting=0]="connecting",fV[fV.open=1]="open",fV[fV.closing=2]="closing",fV[fV.closed=3]="closed",(gV=mV||(mV={})).closed="closed",gV.errored="errored",gV.joined="joined",gV.joining="joining",gV.leaving="leaving",(yV=vV||(vV={})).close="phx_close",yV.error="phx_error",yV.join="phx_join",yV.reply="phx_reply",yV.leave="phx_leave",yV.access_token="access_token",(xV||(xV={})).websocket="websocket",(wV=bV||(bV={})).Connecting="connecting",wV.Open="open",wV.Closing="closing",wV.Closed="closed";class jV{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+r));a+=r;const o=n.decode(e.slice(a,a+s));a+=s;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class _V{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(SV=kV||(kV={})).abstime="abstime",SV.bool="bool",SV.date="date",SV.daterange="daterange",SV.float4="float4",SV.float8="float8",SV.int2="int2",SV.int4="int4",SV.int4range="int4range",SV.int8="int8",SV.int8range="int8range",SV.json="json",SV.jsonb="jsonb",SV.money="money",SV.numeric="numeric",SV.oid="oid",SV.reltime="reltime",SV.text="text",SV.time="time",SV.timestamp="timestamp",SV.timestamptz="timestamptz",SV.timetz="timetz",SV.tsrange="tsrange",SV.tstzrange="tstzrange";const AV=(e,t,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=EV(r,e,t,s),n),{}):{}},EV=(e,t,n,r)=>{const s=t.find(t=>t.name===e),a=null==s?void 0:s.type,i=n[e];return a&&!r.includes(a)?TV(a,i):NV(i)},TV=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return MV(t,n)}switch(e){case kV.bool:return CV(t);case kV.float4:case kV.float8:case kV.int2:case kV.int4:case kV.int8:case kV.numeric:case kV.oid:return PV(t);case kV.json:case kV.jsonb:return RV(t);case kV.timestamp:return IV(t);case kV.abstime:case kV.date:case kV.daterange:case kV.int4range:case kV.int8range:case kV.money:case kV.reltime:case kV.text:case kV.time:case kV.timestamptz:case kV.timetz:case kV.tsrange:case kV.tstzrange:default:return NV(t)}},NV=e=>e,CV=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PV=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},RV=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},MV=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(s){r=a?a.split(","):[]}return r.map(e=>TV(t,e))}return e},IV=e=>"string"==typeof e?e.replace(" ","T"):e,OV=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zV{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var DV,LV,FV,BV,UV,WV,$V,VV;(LV=DV||(DV={})).SYNC="sync",LV.JOIN="join",LV.LEAVE="leave";class HV{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=HV.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=HV.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=HV.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=s[e];if(n){const r=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(t,r)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let s=e[t];if(!s)return;const a=n.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,r(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(BV=FV||(FV={})).ALL="*",BV.INSERT="INSERT",BV.UPDATE="UPDATE",BV.DELETE="DELETE",(WV=UV||(UV={})).BROADCAST="broadcast",WV.PRESENCE="presence",WV.POSTGRES_CHANGES="postgres_changes",WV.SYSTEM="system",(VV=$V||($V={})).SUBSCRIBED="SUBSCRIBED",VV.TIMED_OUT="TIMED_OUT",VV.CLOSED="CLOSED",VV.CHANNEL_ERROR="CHANNEL_ERROR";class qV{constructor(e,t={config:{}},n){var r,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=mV.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zV(this,vV.join,this.params,this.timeout),this.rejoinTimer=new _V(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mV.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mV.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=mV.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mV.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=mV.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vV.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new HV(this),this.broadcastEndpointURL=OV(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(s=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===s?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==mV.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[UV.PRESENCE]&&this.bindings[UV.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e($V.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e($V.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,s=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,a=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:i,schema:o,table:l,filter:c}}=s,d=t&&t[n];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=mV.errored,void(null==e||e($V.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e($V.SUBSCRIBED))}null==e||e($V.SUBSCRIBED)}).receive("error",t=>{this.state=mV.errored,null==e||e($V.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e($V.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===mV.joined&&e===UV.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mV.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vV.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new zV(this,vV.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mV.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new zV(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=vV;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,n)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var n,r,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:a}=e,i={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===mV.closed}_isJoined(){return this.state===mV.joined}_isJoining(){return this.state===mV.joining}_isLeaving(){return this.state===mV.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&qV.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vV.close,{},e)}_onError(e){this._on(vV.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mV.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=AV(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=AV(e.columns,e.old_record)),t}}const GV=()=>{},KV=25e3,XV=10,YV=100,JV=[1e3,2e3,5e3,1e4];class ZV{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hV,this.transport=null,this.heartbeatIntervalMs=KV,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=GV,this.ref=0,this.reconnectTimer=null,this.logger=GV,this.conn=null,this.sendBuffer=[],this.serializer=new jV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Gf(()=>Promise.resolve().then(()=>D$),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${xV.websocket}`,this.httpEndpoint=OV(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uV.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case pV.connecting:return bV.Connecting;case pV.open:return bV.Open;case pV.closing:return bV.Closing;default:return bV.Closed}}isConnected(){return this.connectionState()===bV.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new qV(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(Vne){this.log("error","error in heartbeat callback",Vne)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},YV)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(Vne){this.log("error","error in heartbeat callback",Vne)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(Vne){this.log("error","error in heartbeat callback",Vne)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(Vne){this.log("error","error in heartbeat callback",Vne)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:s}=e,a=s?`(${s})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vV.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.76.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(vV.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(Vne){this.log("error",`error in ${e} callback`,Vne)}})}catch(Vne){this.log("error",`error triggering ${e} callbacks`,Vne)}}_setupReconnectionTimer(){this.reconnectTimer=new _V(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},XV)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,s,a,i,o,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:hV,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:KV,this.worker=null!==(s=null==e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:GV,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>JV[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class QV extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function eH(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class tH extends QV{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nH extends QV{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const rH=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Gf(()=>Promise.resolve().then(()=>D$),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},sH=e=>{if(Array.isArray(e))return e.map(e=>sH(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=sH(n)}),t},aH=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iH=(e,t,n)=>VW(void 0,void 0,void 0,function*(){const r=yield VW(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Gf(()=>Promise.resolve().then(()=>D$),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,s=(null==n?void 0:n.statusCode)||r+"";t(new tH(aH(n),r,s))}).catch(e=>{t(new nH(aH(e),e))}):t(new nH(aH(e),e))}),oH=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,(null==t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n)):s};function lH(e,t,n,r,s,a){return VW(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,oH(t,r,s,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>iH(e,o,r))})})}function cH(e,t,n,r){return VW(this,void 0,void 0,function*(){return lH(e,"GET",t,n,r)})}function dH(e,t,n,r,s){return VW(this,void 0,void 0,function*(){return lH(e,"POST",t,r,s,n)})}function uH(e,t,n,r,s){return VW(this,void 0,void 0,function*(){return lH(e,"PUT",t,r,s,n)})}function hH(e,t,n,r,s){return VW(this,void 0,void 0,function*(){return lH(e,"DELETE",t,r,s,n)})}class pH{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return VW(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eH(e))return{data:null,error:e};throw e}})}}var fH;fH=Symbol.toStringTag;const mH=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[fH]="BlobDownloadBuilder",this.promise=null}asStream(){return new pH(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return VW(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eH(e))return{data:null,error:e};throw e}})}},gH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vH={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yH{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=rH(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return VW(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},vH),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?uH:dH)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(eH(s))return{data:null,error:s};throw s}})}upload(e,t,n){return VW(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return VW(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:vH.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield uH(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(eH(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return VW(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield dH(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new QV("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n))return{data:null,error:n};throw n}})}update(e,t,n){return VW(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return VW(this,void 0,void 0,function*(){try{return{data:yield dH(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(eH(r))return{data:null,error:r};throw r}})}copy(e,t,n){return VW(this,void 0,void 0,function*(){try{return{data:{path:(yield dH(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(eH(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return VW(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield dH(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(eH(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return VW(this,void 0,void 0,function*(){try{const r=yield dH(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(eH(r))return{data:null,error:r};throw r}})}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e);return new mH(()=>cH(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return VW(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield cH(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:sH(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n))return{data:null,error:n};throw n}})}exists(e){return VW(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return VW(this,void 0,void 0,function*(){return lH(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n)&&n instanceof nH){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&r.push(s);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}remove(e){return VW(this,void 0,void 0,function*(){try{return{data:yield hH(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}list(e,t,n){return VW(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},gH),t),{prefix:e||""});return{data:yield dH(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(eH(r))return{data:null,error:r};throw r}})}listV2(e,t){return VW(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield dH(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xH="2.76.1",bH={"X-Client-Info":`storage-js/${xH}`};class wH{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bH),t),this.fetch=rH(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return VW(this,void 0,void 0,function*(){try{return{data:yield cH(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(eH(e))return{data:null,error:e};throw e}})}getBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield cH(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}createBucket(e){return VW(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield dH(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return VW(this,void 0,void 0,function*(){try{return{data:yield uH(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(eH(n))return{data:null,error:n};throw n}})}emptyBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield dH(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}deleteBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield hH(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}}class kH{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bH),t),this.fetch=rH(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield dH(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}listBuckets(e){return VW(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,s=yield cH(this.fetch,r,{headers:this.headers});return{data:Array.isArray(s)?s.filter(e=>"ANALYTICS"===e.type):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}deleteBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield hH(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(eH(t))return{data:null,error:t};throw t}})}}const SH={"X-Client-Info":`storage-js/${xH}`,"Content-Type":"application/json"};class jH extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _H(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class AH extends jH{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class EH extends jH{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var TH,NH;(NH=TH||(TH={})).InternalError="InternalError",NH.S3VectorConflictException="S3VectorConflictException",NH.S3VectorNotFoundException="S3VectorNotFoundException",NH.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",NH.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",NH.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const CH=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Gf(()=>Promise.resolve().then(()=>D$),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},PH=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RH=(e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function MH(e,t,n,r,s,a){return VW(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,RH(t,r,s,a)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,n)=>VW(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new AH(PH(e),n,r))}).catch(()=>{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new AH(s,n,e))});else{const e=n+"",s=r.statusText||`HTTP ${n} error`;t(new AH(s,n,e))}}else t(new EH(PH(e),e))}))(e,o,r))})})}function IH(e,t,n,r,s){return VW(this,void 0,void 0,function*(){return MH(e,"POST",t,r,s,n)})}class OH{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},SH),t),this.fetch=CH(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return VW(this,void 0,void 0,function*(){try{return{data:(yield IH(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}getIndex(e,t){return VW(this,void 0,void 0,function*(){try{return{data:yield IH(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_H(n))return{data:null,error:n};throw n}})}listIndexes(e){return VW(this,void 0,void 0,function*(){try{return{data:yield IH(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return VW(this,void 0,void 0,function*(){try{return{data:(yield IH(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_H(n))return{data:null,error:n};throw n}})}}class zH{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},SH),t),this.fetch=CH(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return VW(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield IH(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}getVectors(e){return VW(this,void 0,void 0,function*(){try{return{data:yield IH(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}listVectors(e){return VW(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield IH(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}queryVectors(e){return VW(this,void 0,void 0,function*(){try{return{data:yield IH(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}deleteVectors(e){return VW(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield IH(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}}class DH{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},SH),t),this.fetch=CH(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:(yield IH(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}getBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:yield IH(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}listBuckets(){return VW(this,arguments,void 0,function*(e={}){try{return{data:yield IH(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return VW(this,void 0,void 0,function*(){try{return{data:(yield IH(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_H(t))return{data:null,error:t};throw t}})}}class LH extends DH{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new FH(this.url,this.headers,e,this.fetch)}}class FH extends OH{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return VW(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return VW(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return VW(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return VW(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new BH(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class BH extends zH{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return VW(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return VW(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return VW(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return VW(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return VW(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class UH extends wH{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new yH(this.url,this.headers,e,this.fetch)}get vectors(){return new LH(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kH(this.url+"/iceberg",this.headers,this.fetch)}}let WH="";WH="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const $H={headers:{"X-Client-Info":`supabase-js-${WH}/2.76.1`}},VH={schema:"public"},HH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qH={},GH=(e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?M$:fetch),(...e)=>t(...e)})(n),s="undefined"==typeof Headers?I$:Headers;return async(n,a)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new s(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},a),{headers:l}))}};const KH="2.76.1",XH=3e4,YH=9e4,JH={"X-Client-Info":`gotrue-js/${KH}`},ZH="X-Supabase-Api-Version",QH={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},eq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class tq extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function nq(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class rq extends tq{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class sq extends tq{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class aq extends tq{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class iq extends aq{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class oq extends aq{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lq extends aq{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cq extends aq{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dq extends aq{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uq extends aq{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function hq(e){return nq(e)&&"AuthRetryableFetchError"===e.name}class pq extends aq{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class fq extends aq{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gq=" \t\n\r=".split(""),vq=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gq.length;t+=1)e[gq[t].charCodeAt(0)]=-2;for(let t=0;t<mq.length;t+=1)e[mq[t].charCodeAt(0)]=t;return e})();function yq(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mq[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mq[e]),t.queuedBits-=6}}function xq(e,t,n){const r=vq[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function bq(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)xq(e.charCodeAt(i),s,a);return t.join("")}function wq(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function kq(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)xq(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Sq(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}wq(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function jq(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>yq(e,n,r)),yq(null,n,r),t.join("")}const _q=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Aq={tested:!1,writable:!1},Eq=()=>{if(!_q())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Vne){return!1}if(Aq.tested)return Aq.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Aq.tested=!0,Aq.writable=!0}catch(Vne){Aq.tested=!0,Aq.writable=!1}return Aq.writable};const Tq=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Gf(()=>Promise.resolve().then(()=>D$),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Nq=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cq=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Pq=async(e,t)=>{await e.removeItem(t)};class Rq{constructor(){this.promise=new Rq.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Mq(e){const t=e.split(".");if(3!==t.length)throw new fq("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!eq.test(t[n]))throw new fq("JWT not in base64url format");return{header:JSON.parse(bq(t[0])),payload:JSON.parse(bq(t[1])),signature:kq(t[2]),raw:{header:t[0],payload:t[1]}}}function Iq(e){return("0"+e.toString(16)).substr(-2)}async function Oq(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zq(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Iq).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Nq(e,`${t}-code-verifier`,s);const a=await Oq(r);return[a,r===a?"plain":"s256"]}Rq.promiseConstructor=Promise;const Dq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Lq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fq(e){if(!Lq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bq(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uq(e){return JSON.parse(JSON.stringify(e))}const Wq=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$q=[502,503,504];async function Vq(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new uq(Wq(e),0);if($q.includes(e.status))throw new uq(Wq(e),e.status);let r,s;try{r=await e.json()}catch(Vne){throw new sq(Wq(Vne),Vne)}const a=function(e){const t=e.headers.get(ZH);if(!t)return null;if(!t.match(Dq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Vne){return null}}(e);if(a&&a.getTime()>=QH.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new pq(Wq(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new iq}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new pq(Wq(r),e.status,r.weak_password.reasons);throw new rq(Wq(r),e.status||500,s)}async function Hq(e,t,n,r){var s;const a=Object.assign({},null==r?void 0:r.headers);a[ZH]||(a[ZH]=QH.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(s=null==r?void 0:r.query)&&void 0!==s?s:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,s,a){const i=((e,t,n,r)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,a);let o;try{o=await e(n,Object.assign({},i))}catch(Vne){throw console.error(Vne),new uq(Wq(Vne),0)}o.ok||await Vq(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Vne){await Vq(Vne)}}(e,t,n+o,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function qq(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Gq(e){const t=qq(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Kq(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Xq(e){return{data:e,error:null}}function Yq(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=zW(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function Jq(e){return e}const Zq=["global","local","others"];class Qq{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Tq(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Zq[0]){if(Zq.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zq.join(", ")}`);try{return await Hq(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nq(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Hq(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Kq})}catch(n){if(nq(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=zW(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Hq(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Yq,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(nq(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Hq(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kq})}catch(t){if(nq(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Hq(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Jq});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(nq(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Fq(e);try{return await Hq(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kq})}catch(t){if(nq(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Fq(e);try{return await Hq(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Kq})}catch(n){if(nq(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Fq(e);try{return await Hq(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Kq})}catch(n){if(nq(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Fq(e.userId);try{const{data:t,error:n}=await Hq(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Fq(e.userId),Fq(e.id);try{return{data:await Hq(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Hq(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Jq});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(nq(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Hq(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Hq(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Hq(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Hq(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}}function eG(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const tG=!!(globalThis&&Eq()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class nG extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rG extends nG{}async function sG(e,t,n){tG&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),tG&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw tG&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rG(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(tG)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Vne){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Vne)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}tG&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{tG&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}function aG(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function iG(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class oG extends Error{constructor({message:e,code:t,cause:n,name:r}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=t}}class lG extends oG{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function cG({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new oG({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=a.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new oG({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=a.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new oG({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(s=a.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new oG({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new oG({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new oG({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new oG({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new oG({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!gG(t))return new oG({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new oG({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new oG({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new oG({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oG({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function dG({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new oG({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new oG({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!gG(t))return new oG({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new oG({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new oG({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oG({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const uG=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function hG(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=zW(e,["challenge","user","excludeCredentials"]),a=kq(t).buffer,i=Object.assign(Object.assign({},n),{id:kq(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:kq(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function pG(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=zW(e,["challenge","allowCredentials"]),s=kq(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:kq(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function fG(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:jq(new Uint8Array(e.response.attestationObject)),clientDataJSON:jq(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function mG(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:jq(new Uint8Array(s.authenticatorData)),clientDataJSON:jq(new Uint8Array(s.clientDataJSON)),signature:jq(new Uint8Array(s.signature)),userHandle:s.userHandle?jq(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function gG(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function vG(){var e,t;return!!(_q()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const yG={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xG={userVerification:"preferred",hints:["security-key"]};function bG(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const s of e)if(s)for(const e in s){const a=s[e];if(void 0!==a)if(Array.isArray(a))r[e]=a;else if(n(a))r[e]=a;else if(t(a)){const n=r[e];t(n)?r[e]=bG(n,a):r[e]=bG(a)}else r[e]=a}return r}class wG{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},s){try{const{data:a,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:i};const o=null!=r?r:uG.createNewAbortSignal();if("create"===a.webauthn.type){const{user:e}=a.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(a.webauthn.type){case"create":{const t=function(e,t){return bG(yG,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new lG("Browser returned unexpected credential type",t)}:{data:null,error:new lG("Empty credential response",t)}}catch(t){return{data:null,error:cG({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return bG(xG,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new lG("Browser returned unexpected credential type",t)}:{data:null,error:new lG("Empty credential response",t)}}catch(t){return{data:null,error:dG({error:t,options:e})}}}(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(a){return nq(a)?{data:null,error:a}:{data:null,error:new sq("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}},s){if(!t)return{data:null,error:new tq("rpId is required for WebAuthn authentication")};try{if(!vG())return{data:null,error:new sq("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:s});if(!a)return{data:null,error:i};const{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(a){return nq(a)?{data:null,error:a}:{data:null,error:new sq("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r},s){if(!t)return{data:null,error:new tq("rpId is required for WebAuthn registration")};try{if(!vG())return{data:null,error:new sq("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:s});return o?this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(a){return nq(a)?{data:null,error:a}:{data:null,error:new sq("Unexpected error in register",a)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Vne){"undefined"!=typeof self&&(self.globalThis=self)}}();const kG={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function SG(e,t,n){return await n()}const jG={};class _G{get jwks(){var e,t;return null!==(t=null===(e=jG[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){jG[this.storageKey]=Object.assign(Object.assign({},jG[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=jG[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jG[this.storageKey]=Object.assign(Object.assign({},jG[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_G.nextInstanceID,_G.nextInstanceID+=1,this.instanceID>0&&_q()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},kG),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Qq({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Tq(r.fetch),this.lock=r.lock||SG,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:_q()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=sG:this.lock=SG,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wG(this)},this.persistSession?(r.storage?this.storage=r.storage:Eq()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eG(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=eG(this.memoryStorage)),_q()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Vne){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Vne)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${KH}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(Vne){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),_q()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return nq(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return nq(t)?{error:t}:{error:new sq("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await Hq(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:qq}),{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(nq(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await zq(this.storage,this.storageKey)),s=await Hq(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:qq})}else{if(!("phone"in e))throw new lq("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await Hq(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:qq})}}const{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(nq(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Gq})}else{if(!("phone"in e))throw new lq("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Gq})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new oq}}catch(t){if(nq(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,s,a,i,o,l,c,d,u;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:d,wallet:u,statement:f,options:m}=e;let g;if(_q())if("object"==typeof u)g=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof u||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=u}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=aG(y[0]);let b=null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:d,uri:u,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${d?`${d}://${r}`:r} wants you to sign in with your Ethereum account:\n${aG(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let f=`URI: ${u}\nVersion: ${h}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${a.toISOString()}`;if(s&&(f+=`\nExpiration Time: ${s.toISOString()}`),o&&(f+=`\nNot Before: ${o.toISOString()}`),l&&(f+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}f+=e}return`${p}\n${f}`}({domain:v.host,address:x,statement:f,uri:v.href,version:"1",chainId:b,nonce:null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(a=null===(s=null==m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==a?a:new Date,expirationTime:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[iG(h),x]})}try{const{data:t,error:n}=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:qq});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new oq}}catch(f){if(nq(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSolana(e){var t,n,r,s,a,i,o,l,c,d,u,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let v;if(_q())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:jq(f)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:qq});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new oq}}catch(m){if(nq(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Cq(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qq});if(await Pq(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new oq}}catch(s){if(nq(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:a}=e,i=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:qq}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new oq}}catch(t){if(nq(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,a;try{if("email"in e){const{email:r,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await zq(this.storage,this.storageKey));const{error:o}=await Hq(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Hq(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(a=null==n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new lq("You must provide either an email or phone number.")}catch(i){if(nq(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Hq(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:qq});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(nq(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,a=null;return"pkce"===this.flowType&&([s,a]=await zq(this.storage,this.storageKey)),await Hq(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Xq})}catch(s){if(nq(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new iq;const{error:r}=await Hq(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(nq(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:s}=e,{error:a}=await Hq(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:a,error:i}=await Hq(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new lq("You must provide either an email or phone number and a type")}catch(t){if(nq(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Vne){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Vne){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Cq(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<YH;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Cq(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Bq()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;const n=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))});e=n}return{data:{session:e},error:null}}const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Hq(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kq}):await this._useSession(async e=>{var t,n,r;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Hq(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Kq}):{data:{user:null},error:new iq}})}catch(t){if(nq(t))return function(e){return nq(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Pq(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new iq;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await zq(this.storage,this.storageKey));const{data:l,error:c}=await Hq(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Kq});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(nq(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new iq;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:a}=Mq(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(nq(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new iq;const{data:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(nq(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!_q())throw new cq("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cq(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new dq("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new cq("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dq("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(s&&i&&a&&l))throw new cq("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=XH&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:f,error:m}=await this._getUser(s);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(nq(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Cq(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return nq(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Pq(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await zq(this.storage,this.storageKey,!0));try{return await Hq(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(nq(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(nq(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Hq(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return _q()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(nq(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:s}}=t;if(r)throw r;const{options:a,provider:i,token:o,access_token:l,nonce:c}=e,d=await Hq(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==s?void 0:s.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:qq}),{data:u,error:h}=d;return h?{data:{user:null,session:null},error:h}:u&&u.session&&u.user?(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),{data:u,error:h}):{data:{user:null,session:null},error:new oq}}catch(r){if(nq(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)throw a;return await Hq(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Hq(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qq})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&hq(t)&&Date.now()+n-s<XH},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(Vne){if(!r(s,Vne))return void t(Vne)}})()}))}catch(s){if(this._debug(t,"error",s),nq(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),_q()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Cq(this.storage,this.storageKey);if(s&&this.userStorage){let t=await Cq(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await Nq(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Bq()}else if(s&&!s.user&&!s.user){const e=await Cq(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await Pq(this.storage,this.storageKey+"-user"),await Nq(this.storage,this.storageKey,s)):s.user=Bq()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<YH;if(this._debug(n,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),hq(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new iq;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Rq;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new iq;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),nq(s)){const e={data:null,error:s};return hq(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(Vne){r.push(Vne)}});if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Nq(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Uq(e);await Nq(this.storage,this.storageKey,r)}else{const e=Uq(t);await Nq(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Pq(this.storage,this.storageKey),await Pq(this.storage,this.storageKey+"-code-verifier"),await Pq(this.storage,this.storageKey+"-user"),this.userStorage&&await Pq(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_q()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Vne){console.error("removing visibilitychange callback failed",Vne)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),XH);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/XH);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(Vne){console.error("Auto refresh tick failed with error. This is likely a transient error.",Vne)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Vne){if(!(Vne.isAcquireTimeout||Vne instanceof nG))throw Vne;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_q()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await zq(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Hq(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Hq(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(nq(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?fG(e.webauthn.credential_response):mG(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Hq(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(nq(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const a=await Hq(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(a.error)return a;const{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:hG(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:pG(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(nq(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(s),"verified"===s.status&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Mq(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:s,error:a}=await Hq(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,n=s.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:a,raw:{header:i,payload:o}}=Mq(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,a,Sq(`${i}.${o}`))))throw new fq("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(n){if(nq(n))return{data:null,error:n};throw n}}}_G.nextInstanceID=0;const AG=_G;class EG extends AG{constructor(e){super(e)}}class TG{constructor(e,t,n){var r,s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var n,r;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null==u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:VH,realtime:qH,auth:Object.assign(Object.assign({},HH),{storageKey:o}),global:$H});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=GH(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new aV(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new UH(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new S$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:o,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new EG({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new ZV(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NG={}.VITE_SUPABASE_URL,CG={}.VITE_SUPABASE_ANON_KEY;let PG;NG&&CG?PG=((e,t,n)=>new TG(e,t,n))(NG,CG,{auth:{persistSession:!1,autoRefreshToken:!1}}):(console.warn("Supabase environment variables not found - running in pre-launch mode"),PG=null);const RG=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;async function MG(e){var t;try{const n=e.email.trim().toLowerCase();if(!n)return{success:!1,message:"Email jest wymagany",error:"EMPTY_EMAIL"};if(!function(e){return RG.test(e.trim().toLowerCase())}(n))return{success:!1,message:"Podaj prawidłowy adres email",error:"INVALID_EMAIL"};const{data:r,error:s}=await PG.from("waitlist").select("id, email").eq("email",n).maybeSingle();if(s)return console.error("Error checking existing email:",s),{success:!1,message:"Wystąpił błąd. Spróbuj ponownie.",error:"CHECK_ERROR"};if(r)return{success:!1,message:"Ten email jest już na liście! Sprawdź swoją skrzynkę.",error:"DUPLICATE_EMAIL"};const{data:a,error:i}=await PG.from("waitlist").insert({email:n,first_name:(null==(t=e.first_name)?void 0:t.trim())||null,business_type:e.business_type||null,referral_code:e.referral_code||null,source:e.source||null,utm_source:e.utm_source||null,utm_campaign:e.utm_campaign||null,confirmed:!1,metadata:{user_agent:navigator.userAgent,language:navigator.language,signup_date:(new Date).toISOString()}}).select("id, email, created_at").single();return i?(console.error("Error inserting to waitlist:",i),"23505"===i.code?{success:!1,message:"Ten email jest już na liście!",error:"DUPLICATE_EMAIL"}:{success:!1,message:"Nie udało się zapisać. Spróbuj ponownie.",error:"INSERT_ERROR"}):{success:!0,message:"✅ Dziękujemy! Jesteś na liście!",data:a}}catch(n){return console.error("Unexpected error in addToWaitlist:",n),{success:!1,message:"Wystąpił nieoczekiwany błąd. Spróbuj ponownie.",error:"UNEXPECTED_ERROR"}}}function IG({source:e="hero",size:t="default",showOptionalFields:n=!1,inline:r=!1,className:s=""}){const[a,i]=Im.useState(""),[o,l]=Im.useState(""),[c,d]=Im.useState(""),[u,h]=Im.useState(!1),[p,f]=Im.useState("idle"),[m,g]=Im.useState(""),v="large"===t;return"success"===p?Vm.jsxs(gW.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`\n          bg-green-50 \n          border-2 border-green-200 \n          rounded-2xl \n          p-6 md:p-8\n          text-center\n          ${s}\n        `,children:[Vm.jsx(gW.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},children:Vm.jsx(dM,{className:"w-16 h-16 text-green-600 mx-auto mb-4"})}),Vm.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Dziękujemy! Jesteś na liście!"}),Vm.jsx("p",{className:"text-gray-700 mb-4",children:"Sprawdź swoją skrzynkę email - właśnie wysłaliśmy Ci potwierdzenie."}),Vm.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 text-left",children:[Vm.jsx("p",{className:"text-sm text-gray-700 font-medium mb-2",children:"Co dalej?"}),Vm.jsxs("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[Vm.jsx("li",{children:"Potwierdź adres email (kliknij link w mailu)"}),Vm.jsx("li",{children:"Dodaj nas do kontaktów: kontakt@palletai.com"}),Vm.jsx("li",{children:"Czekaj na powiadomienie o premierze (Luty 2026)"})]})]}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:[Vm.jsx("strong",{children:"P.S."})," Już za 2 tygodnie przed startem otrzymasz wczesny dostęp!"]})]}):Vm.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!a.trim())return void g("Podaj adres email");if(!u)return void g("Musisz zaakceptować warunki");f("loading"),g("");const n=await MG({email:a.trim(),first_name:o.trim()||void 0,business_type:c||void 0,source:e});n.success?(f("success"),i(""),l(""),d(""),h(!1)):(f("error"),g(n.message),setTimeout(()=>{f("idle")},3e3))},className:s,children:[Vm.jsxs("div",{className:`\n        flex flex-col gap-3\n        ${r?"md:flex-row md:items-start":""}\n      `,children:[Vm.jsxs("div",{className:"flex-grow",children:[Vm.jsxs("div",{className:"relative",children:[Vm.jsx(DM,{className:`\n              absolute left-3 md:left-4 top-1/2 -translate-y-1/2 \n              text-gray-400\n              ${v?"w-5 h-5":"w-4 h-4"}\n            `}),Vm.jsx("input",{type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"Twój adres email",disabled:"loading"===p,className:`\n                w-full\n                border-2 border-gray-200\n                rounded-xl\n                bg-white\n                text-gray-900\n                placeholder:text-gray-400\n                focus:border-[#4f39f6] focus:ring-4 focus:ring-[#4f39f6]/10\n                transition-all duration-200\n                disabled:opacity-50 disabled:cursor-not-allowed\n                ${v?"pl-11 md:pl-12 pr-4 py-4 text-base md:text-lg":"pl-10 pr-4 py-3 text-sm md:text-base"}\n              `,required:!0})]}),!n&&Vm.jsx("div",{className:"mt-4 mb-3 w-full",children:Vm.jsxs("label",{className:"flex items-start gap-2 cursor-pointer group w-full",children:[Vm.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:"loading"===p,className:"\n                    mt-0.5\n                    w-4 h-4\n                    rounded\n                    border-2 border-gray-300\n                    text-[#4f39f6]\n                    focus:ring-2 focus:ring-[#4f39f6]\n                    disabled:opacity-50\n                    cursor-pointer\n                    flex-shrink-0\n                  ",required:!0}),Vm.jsx("span",{className:"text-sm md:text-base text-gray-600 group-hover:text-gray-900 flex-1",children:"Zgadzam się na otrzymywanie informacji z premierą PalletAI (możesz wypisać się w każdym czasie)"})]})}),n&&Vm.jsxs("div",{className:"mt-3 space-y-3",children:[Vm.jsx("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Imię (opcjonalnie)",disabled:"loading"===p,className:`\n                  w-full\n                  border-2 border-gray-200\n                  rounded-xl\n                  px-4\n                  bg-white\n                  text-gray-900\n                  placeholder:text-gray-400\n                  focus:border-[#4f39f6] focus:ring-4 focus:ring-[#4f39f6]/10\n                  transition-all duration-200\n                  disabled:opacity-50\n                  ${v?"py-4 text-base md:text-lg":"py-3 text-sm md:text-base"}\n                `}),Vm.jsxs("select",{value:c,onChange:e=>d(e.target.value),disabled:"loading"===p,className:`\n                  w-full\n                  border-2 border-gray-200\n                  rounded-xl\n                  px-4\n                  bg-white\n                  text-gray-900\n                  focus:border-[#4f39f6] focus:ring-4 focus:ring-[#4f39f6]/10\n                  transition-all duration-200\n                  disabled:opacity-50\n                  ${v?"py-4 text-base md:text-lg":"py-3 text-sm md:text-base"}\n                `,children:[Vm.jsx("option",{value:"",children:"Rodzaj biznesu (opcjonalnie)"}),Vm.jsx("option",{value:"trader_palet",children:"Trader palet"}),Vm.jsx("option",{value:"sklep_ecommerce",children:"Sklep e-commerce"}),Vm.jsx("option",{value:"reseller",children:"Reseller marketplace"}),Vm.jsx("option",{value:"hurtownia",children:"Hurtownia"}),Vm.jsx("option",{value:"inne",children:"Inne"})]}),Vm.jsx("div",{className:"mb-3",children:Vm.jsxs("label",{className:"flex items-start gap-2 cursor-pointer group",children:[Vm.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:"loading"===p,className:"\n                      mt-0.5\n                      w-4 h-4\n                      rounded\n                      border-2 border-gray-300\n                      text-[#4f39f6]\n                      focus:ring-2 focus:ring-[#4f39f6]\n                      disabled:opacity-50\n                      cursor-pointer\n                    ",required:!0}),Vm.jsx("span",{className:"text-sm md:text-base text-gray-600 group-hover:text-gray-900",children:"Zgadzam się na otrzymywanie informacji z premierą PalletAI (możesz wypisać się w każdym czasie)"})]})})]})]}),Vm.jsx("button",{type:"submit",disabled:"loading"===p||!u,className:`\n            ${r?"md:flex-shrink-0":"w-full"}\n            bg-gradient-to-r from-[#4f39f6] to-[#9810fa]\n            text-white\n            font-semibold\n            rounded-xl\n            hover:shadow-lg hover:shadow-[#9810fa]/30\n            hover:scale-[1.02]\n            active:scale-[0.98]\n            transition-all duration-200\n            disabled:opacity-50 disabled:cursor-not-allowed\n            disabled:hover:scale-100 disabled:hover:shadow-none\n            flex items-center justify-center gap-2\n            ${v?"px-8 md:px-10 py-4 text-base md:text-lg":"px-6 md:px-8 py-3 text-sm md:text-base"}\n          `,children:"loading"===p?Vm.jsxs(Vm.Fragment,{children:[Vm.jsx(IM,{className:(v?"w-5 h-5":"w-4 h-4")+" animate-spin"}),Vm.jsx("span",{children:"Zapisuję..."})]}):Vm.jsxs(Vm.Fragment,{children:[Vm.jsx(KM,{className:v?"w-5 h-5":"w-4 h-4"}),Vm.jsx("span",{children:"Zapisz się"})]})})]}),Vm.jsx(yL,{children:"error"===p&&m&&Vm.jsxs(gW.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"\n              mt-3\n              flex items-start gap-2\n              p-3\n              bg-red-50\n              border border-red-200\n              rounded-lg\n            ",children:[Vm.jsx(eM,{className:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5"}),Vm.jsx("p",{className:"text-sm text-red-700",children:m})]})})]})}const OG={sm:"w-32 h-32 md:w-48 md:h-48",md:"w-48 h-48 md:w-64 md:h-64",lg:"w-64 h-64 md:w-96 md:h-96",xl:"w-96 h-96 md:w-[600px] md:h-[600px]"},zG={blue:"bg-gradient-to-br from-blue-400 to-blue-600",purple:"bg-gradient-to-br from-purple-400 to-purple-600",pink:"bg-gradient-to-br from-pink-400 to-pink-600",teal:"bg-gradient-to-br from-teal-400 to-cyan-600",orange:"bg-gradient-to-br from-orange-400 to-pink-500",indigo:"bg-gradient-to-br from-indigo-400 to-indigo-600",violet:"bg-gradient-to-br from-violet-400 to-violet-600",fuchsia:"bg-gradient-to-br from-fuchsia-400 to-fuchsia-600"},DG={sm:"blur-2xl",md:"blur-3xl",lg:"blur-[100px]",xl:"blur-[150px]"};function LG({size:e="lg",position:t,color:n="blue",opacity:r=.2,blur:s="xl",animate:a=!0}){const i={top:t.top,right:t.right,bottom:t.bottom,left:t.left},o=a?gW.div:"div",l=a?{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0],x:[0,20,-20,0],y:[0,-20,20,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}:{};return Vm.jsx(o,{className:`\n        absolute -z-10 rounded-full\n        ${OG[e]}\n        ${zG[n]}\n        ${DG[s]}\n        pointer-events-none\n      `,style:{...i,opacity:r},...l})}const FG="/paleta/assets/check-icon-60c9a294.svg",BG="/paleta/assets/target-icon-86ee6571.svg",UG="/paleta/assets/shield-icon-31fc1f42.svg";function WG({className:e=""}){const t=Im.useRef(null),n=Im.useRef(null);return Im.useEffect(()=>{if(console.log("🚀 XRay: Komponent montowany"),!t.current)return void console.log("❌ XRay: Canvas ref nie istnieje");console.log("✅ XRay: Canvas ref dostępny, tworzę efekt");const e=new class{constructor(e){Lf(this,"canvas"),Lf(this,"ctx"),Lf(this,"maskX"),Lf(this,"maskY"),Lf(this,"maskRadius"),Lf(this,"targetX"),Lf(this,"targetY"),Lf(this,"smoothing"),Lf(this,"autoMove"),Lf(this,"autoMoveSpeed"),Lf(this,"autoMoveAngle"),Lf(this,"autoMoveRadius"),Lf(this,"backgroundImage"),Lf(this,"xrayImage"),Lf(this,"imagesLoaded"),Lf(this,"animationFrame"),Lf(this,"isMouseOver"),Lf(this,"resizeTimeout"),console.log("🔧 XRay: Tworzę instancję XRayEffect"),this.canvas=e,this.ctx=e.getContext("2d"),this.maskX=0,this.maskY=0,this.maskRadius=84,this.targetX=0,this.targetY=0,this.smoothing=.12,this.autoMove=!0,this.autoMoveSpeed=.015,this.autoMoveAngle=0,this.autoMoveRadius=100,this.backgroundImage=null,this.xrayImage=null,this.imagesLoaded=0,this.animationFrame=null,this.isMouseOver=!1,this.resizeTimeout=null,console.log("🔧 XRay: Inicjalizuję efekt"),this.init()}init(){if(setTimeout(()=>{this.handleResize()},100),this.createImages(),this.canvas.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.canvas.addEventListener("mouseenter",()=>{this.isMouseOver=!0,this.autoMove=!1}),this.canvas.addEventListener("mouseleave",()=>{this.isMouseOver=!1,this.autoMove=!0}),window.ResizeObserver){new ResizeObserver(()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.handleResize()},50)}).observe(this.canvas.parentElement)}window.addEventListener("resize",()=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.handleResize()},100)})}createImages(){const e="/paleta/";console.log("🔍 XRay: Ładowanie obrazów z base path:",e),this.backgroundImage=new Image,this.backgroundImage.onload=()=>{console.log("✅ XRay: Załadowano background.png"),this.onImageLoad()},this.backgroundImage.onerror=()=>{console.log("❌ XRay: Błąd ładowania background.png, używam fallback"),this.createFallbackImages()},this.xrayImage=new Image,this.xrayImage.onload=()=>{console.log("✅ XRay: Załadowano xray.png"),this.onImageLoad()},this.xrayImage.onerror=()=>{console.log("❌ XRay: Błąd ładowania xray.png, używam fallback"),this.createFallbackImages()};const t=`${e}images/background.png`,n=`${e}images/xray.png`;console.log("🔍 XRay: Próbuję załadować:",t,n),this.backgroundImage.src=t,this.xrayImage.src=n}createFallbackImages(){console.log("🎨 Tworzę fallback images"),this.imagesLoaded=0;const e=document.createElement("canvas");e.width=1024,e.height=1024;const t=e.getContext("2d"),n=t.createLinearGradient(0,0,1024,1024);n.addColorStop(0,"#4f39f6"),n.addColorStop(1,"#9810fa"),t.fillStyle=n,t.fillRect(0,0,1024,1024),t.fillStyle="#ff6467",t.beginPath(),t.arc(40,40,12,0,2*Math.PI),t.fill(),t.fillStyle="#fdc700",t.beginPath(),t.arc(70,40,12,0,2*Math.PI),t.fill(),t.fillStyle="#05df72",t.beginPath(),t.arc(100,40,12,0,2*Math.PI),t.fill(),t.fillStyle="rgba(255, 255, 255, 0.2)",t.fillRect(80,80,200,120),t.fillRect(300,80,200,120),t.fillRect(520,80,200,120);for(let a=0;a<8;a++)t.fillStyle="rgba(255, 255, 255, 0.1)",t.fillRect(80,250+40*a,640,30),t.fillStyle="rgba(124, 134, 255, 0.8)",t.fillRect(80,250+40*a,640*(.6+.3*Math.random()),30);t.fillStyle="white",t.font="bold 36px Inter",t.textAlign="center",t.fillText("Dashboard Preview",512,60),this.backgroundImage=new Image,this.backgroundImage.onload=()=>this.onImageLoad(),this.backgroundImage.src=e.toDataURL();const r=document.createElement("canvas");r.width=1024,r.height=1024;const s=r.getContext("2d");s.fillStyle="#0a0a0a",s.fillRect(0,0,1024,1024),s.strokeStyle="#00ffff",s.lineWidth=3,s.shadowColor="#00ffff",s.shadowBlur=20,s.strokeRect(80,80,200,120),s.strokeRect(300,80,200,120),s.strokeRect(520,80,200,120);for(let a=0;a<8;a++)s.strokeStyle="#00ffff",s.lineWidth=2,s.strokeRect(80,250+40*a,640,30);s.fillStyle="#00ffff",s.font="bold 36px Inter",s.textAlign="center",s.shadowBlur=30,s.fillText("X-RAY VIEW",512,60),s.shadowBlur=0,this.xrayImage=new Image,this.xrayImage.onload=()=>this.onImageLoad(),this.xrayImage.src=r.toDataURL()}onImageLoad(){this.imagesLoaded++,console.log(`🎨 XRay: Załadowano obraz ${this.imagesLoaded}/2`),2===this.imagesLoaded&&(console.log("✅ XRay: Wszystkie obrazy załadowane, uruchamiam animację"),this.handleResize(),this.maskX=this.canvas.width/2,this.maskY=this.canvas.height/2,this.targetX=this.maskX,this.targetY=this.maskY,console.log(`📐 XRay: Canvas size: ${this.canvas.width}x${this.canvas.height}`),this.startAnimation())}handleResize(){const e=this.canvas.parentElement;if(!e)return void console.log("❌ XRay: Brak parent element");const t=e.getBoundingClientRect(),n=t.width||500;this.canvas.width=n,this.canvas.height=n,this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",console.log(`📐 XRay: Canvas KWADRAT: ${this.canvas.width} x ${this.canvas.height}`),console.log(`📐 XRay: Container: ${t.width} x ${t.height}`),console.log(`📐 XRay: Canvas.style: ${this.canvas.style.width} x ${this.canvas.style.height}`),this.maskX=this.canvas.width/2,this.maskY=this.canvas.height/2,this.targetX=this.maskX,this.targetY=this.maskY,this.backgroundImage&&this.xrayImage&&this.draw()}handleMouseMove(e){const t=this.canvas.getBoundingClientRect();this.targetX=(e.clientX-t.left)*(this.canvas.width/t.width),this.targetY=(e.clientY-t.top)*(this.canvas.height/t.height)}updateMaskPosition(){if(this.autoMove){this.autoMoveAngle+=this.autoMoveSpeed;const e=this.canvas.width/2,t=this.canvas.height/2,n=40*Math.sin(3*this.autoMoveAngle),r=30*Math.cos(2*this.autoMoveAngle);this.targetX=e+Math.cos(this.autoMoveAngle)*(this.autoMoveRadius+n),this.targetY=t+Math.sin(.8*this.autoMoveAngle)*(.7*this.autoMoveRadius+r)}this.maskX+=(this.targetX-this.maskX)*this.smoothing,this.maskY+=(this.targetY-this.maskY)*this.smoothing}draw(){this.backgroundImage&&this.xrayImage&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.backgroundImage,0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.maskX,this.maskY,this.maskRadius,0,2*Math.PI),this.ctx.closePath(),this.ctx.clip(),this.ctx.drawImage(this.xrayImage,0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),this.ctx.beginPath(),this.ctx.arc(this.maskX,this.maskY,this.maskRadius,0,2*Math.PI),this.ctx.strokeStyle="rgba(0, 255, 255, 0.8)",this.ctx.lineWidth=3,this.ctx.shadowColor="#00ffff",this.ctx.shadowBlur=15,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.maskX,this.maskY,this.maskRadius+8,0,2*Math.PI),this.ctx.strokeStyle="rgba(0, 255, 255, 0.3)",this.ctx.lineWidth=2,this.ctx.shadowBlur=25,this.ctx.stroke(),this.ctx.shadowBlur=0,this.ctx.beginPath(),this.ctx.arc(this.maskX,this.maskY,5,0,2*Math.PI),this.ctx.fillStyle="rgba(0, 255, 255, 0.6)",this.ctx.fill())}animate(){this.updateMaskPosition(),this.draw(),this.animationFrame=requestAnimationFrame(()=>this.animate())}startAnimation(){console.log("🎬 XRay: Uruchamiam animację"),this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animate()}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.canvas.removeEventListener("mousemove",e=>this.handleMouseMove(e)),this.canvas.removeEventListener("mouseenter",()=>{this.isMouseOver=!0,this.autoMove=!1}),this.canvas.removeEventListener("mouseleave",()=>{this.isMouseOver=!1,this.autoMove=!0}),window.removeEventListener("resize",()=>this.handleResize())}}(t.current);return n.current=e,()=>{n.current&&n.current.destroy()}},[]),Vm.jsx("div",{className:`relative ${e}`,style:{aspectRatio:"1/1",width:"100%",height:"100%",minHeight:"400px",maxHeight:"600px"},children:Vm.jsx("canvas",{ref:t,className:"block w-full h-full rounded-2xl bg-gradient-to-br from-[#4f39f6] to-[#9810fa]",style:{cursor:"none",width:"100%",height:"100%",aspectRatio:"1/1"}})})}function $G(){const[e,t]=Im.useState(500);return Im.useEffect(()=>{(async()=>{const e=await async function(){try{const{count:e,error:t}=await PG.from("waitlist").select("*",{count:"exact",head:!0});return t?(console.error("Error getting waitlist count:",t),500):e||500}catch(e){return console.error("Unexpected error in getWaitlistCount:",e),500}}();t(e)})()},[]),Vm.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-b from-white via-blue-50/30 to-white pt-20 pb-12",children:[Vm.jsx(LG,{size:"xl",position:{top:"-20%",right:"-10%"},color:"indigo",opacity:.15}),Vm.jsx(LG,{size:"lg",position:{bottom:"-10%",left:"-5%"},color:"violet",opacity:.15}),Vm.jsx(LG,{size:"md",position:{top:"30%",left:"50%"},color:"fuchsia",opacity:.1}),Vm.jsx("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl relative z-10",children:Vm.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[Vm.jsxs("div",{className:"text-center lg:text-left",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[rgba(255,255,255,0.8)] border border-[#c6d2ff] mb-6",children:[Vm.jsx("img",{src:"/paleta/assets/sparkles-icon-45ed5223.svg",alt:"",className:"w-3 h-3"}),Vm.jsx("span",{className:"text-sm font-medium text-[#4f39f6]",children:"Premiera w Marcu 2026"})]}),Vm.jsxs(gW.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"\n                text-4xl md:text-5xl lg:text-6xl \n                font-bold \n                text-gray-900 \n                mb-6\n                leading-tight\n              ",children:["Już wkrótce:"," ",Vm.jsx("span",{className:"bg-gradient-to-r from-[#4f39f6] to-[#9810fa] bg-clip-text text-transparent",children:"Inteligentna"}),Vm.jsx("br",{}),Vm.jsx("span",{className:"bg-gradient-to-r from-[#4f39f6] to-[#9810fa] bg-clip-text text-transparent",children:"Analiza Palet"})," ","z AI"]}),Vm.jsx(gW.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"\n                text-lg md:text-xl \n                text-gray-600 \n                mb-8\n                leading-relaxed\n                max-w-2xl\n                mx-auto lg:mx-0\n              ",children:"Oszczędzaj czas i pieniądze. Pozwól AI ocenić rentowność palety produktów w 60 sekund - zanim podejmiesz decyzję o zakupie palet."}),Vm.jsx(gW.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-3 mb-10",children:[{icon:FG,text:"Analiza w 60 sekund zamiast 2 godzin"},{icon:BG,text:"85% dokładnośCI - AI wie, co się opłaca"},{icon:UG,text:"Unikaj złych inwestycji - wykryj nieopłacalne przed ryzykiem"}].map((e,t)=>Vm.jsxs(gW.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.4+.1*t},className:"flex items-center gap-3 justify-center lg:justify-start",children:[Vm.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-indigo-100",children:Vm.jsx("img",{src:e.icon,alt:"",className:"w-4 h-4"})}),Vm.jsx("span",{className:"text-gray-700 text-sm md:text-base",children:e.text})]},t))}),Vm.jsx(gW.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mb-6",children:Vm.jsx(IG,{source:"hero",size:"large",inline:!0})}),Vm.jsxs(gW.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4 text-sm",children:[Vm.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[Vm.jsx(sI,{className:"w-4 h-4"}),Vm.jsxs("span",{children:["Dołącz do ",Vm.jsxs("strong",{className:"text-gray-900",children:[e,"+"]})," osób czekających na premierę"]})]}),Vm.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:[Vm.jsx(AM,{className:"w-4 h-4 text-green-600"}),Vm.jsx("span",{className:"text-green-700 font-medium",children:"3 miesiące PRO gratis"})]})]})]}),Vm.jsx(gW.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.3},className:"relative hidden lg:block",children:Vm.jsx("div",{className:"\n              relative\n              rounded-2xl\n              shadow-[0px_25px_50px_-12px_rgba(0,0,0,0.25)]\n              transform hover:scale-[1.02]\n              transition-transform duration-500\n              w-full\n              aspect-square\n            ",children:Vm.jsx(WG,{className:"w-full h-full"})})})]})})]})}const VG="/paleta/assets/alert-circle-icon-5b5e8b11.svg";function HG(){const e=[{icon:"/paleta/assets/clock-icon-efe0e9f7.svg",title:"Tracisz 2-3 godziny na każdą analizę",description:"Ręczne sprawdzanie cen, liczenie marż, analiza konkurencji - to wszystko zabiera mnóstwo czasu."},{icon:"/paleta/assets/alert-triangle-icon-1c97f680.svg",title:"Ryzykujesz stratę tysięcy złotych",description:"Jeden błąd w ocenie palety może kosztować Cię całą inwestycję. Nie możesz sobie na to pozwolić."},{icon:VG,title:"Brak pewności w decyzjach",description:"Czy ta paleta jest opłacalna? Czy nie przepłacam? Czy sprzedam te produkty? - te pytania męczą Cię przy każdym zakupie."},{icon:VG,title:"Konkurencja Cię wyprzedza",description:"Podczas gdy Ty analizujesz - inni kupują najlepsze palety. Brak szybkiej decyzji = stracona okazja."}];return Vm.jsx("section",{className:"relative py-16 md:py-24 bg-gray-50",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsxs("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:["Znasz Ten ",Vm.jsx("span",{className:"text-[#dc2826]",children:"Problem?"})]}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-full mx-auto leading-relaxed",children:"Kupowanie palet to loteria. Jedne decyzje przynoszą zysk, inne - straty. A bez odpowiednich narzędzi - nie wiesz, które to będą. Tracisz 2-3 godziny na każdą analizę. Ręczne sprawdzanie cen, liczenie marż, analiza konkurencji - to wszystko zabiera mnóstwo czasu."})]}),Vm.jsx("div",{className:"grid md:grid-cols-2 gap-6 md:gap-8",children:e.map((e,t)=>Vm.jsxs(gW.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:.15*t},className:"\n                bg-white\n                rounded-2xl\n                p-6 md:p-8\n                border border-gray-200\n                hover:border-red-200\n                hover:shadow-lg\n                transition-all duration-300\n                text-left\n              ",children:[Vm.jsx("div",{className:"\n                inline-flex items-center justify-center\n                w-14 h-14\n                rounded-lg\n                bg-[#ffe2e2]\n                mb-5\n              ",children:Vm.jsx("img",{src:e.icon,alt:"",className:"w-7 h-7"})}),Vm.jsx("h3",{className:"\n                text-xl md:text-2xl \n                font-bold \n                text-gray-900 \n                mb-3\n              ",children:e.title}),Vm.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},t))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.5},className:"text-center mt-12 md:mt-16 space-y-4",children:[Vm.jsx("p",{className:"text-xl md:text-2xl text-gray-700 font-bold",children:"Czy to nie brzmi znajomo?"}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"Nie jesteś sam. Setki traderów boryka się z tym samym problemem każdego dnia."}),Vm.jsx("p",{className:"text-lg md:text-xl text-[#4f39f6] font-bold",children:"PalletAI rozwiązuje te problemy."})]})]})})}function qG(){const e=[{step:"01",title:"Wrzuć Plik",description:"Upload pliku Excel z ofertą palety (XLSX, CSV, PDF). Obsługujemy wszystkie popularne formaty.",icon:nI},{step:"02",title:"AI Analizuje",description:"Sztuczna inteligencja sprawdza każdy produkt, porównuje ceny na 10+ platformach i wykreśla trendy.",icon:iM},{step:"03",title:"Otrzymujesz Raport",description:"Jasna rekomendacja: KUP / ROZWAŻ / UNIKAJ. Szczegółowa analiza każdego produktu i listy ostrzeżeń.",icon:rM}];return Vm.jsx("section",{className:"relative py-16 md:py-24 bg-white",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsxs("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:["Poznaj"," ",Vm.jsx("span",{className:"text-[#4f39f6]",children:"PalletAI"})]}),Vm.jsx("p",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Twój Inteligentny Asystent Zakupowy"}),Vm.jsx("p",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Wrzuć plik Excel z paletą."}),Vm.jsx("p",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-8",children:"AI zrobi reszte."})]}),Vm.jsxs("div",{className:"mb-16",children:[Vm.jsx("p",{className:"text-xl md:text-2xl text-gray-600 text-center mb-10",children:"Automatyczna analiza rentowności w 3 prostych krokach"}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:e.map((e,t)=>Vm.jsx(gW.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:.15*t},className:"relative",children:Vm.jsxs("div",{className:"\n                  bg-white\n                  border border-gray-200\n                  rounded-2xl\n                  p-6\n                  text-center\n                  h-full\n                  flex flex-col items-center\n                  relative\n                  shadow-lg\n                  shadow-[#4f39f6]/5\n                ",children:[Vm.jsx("div",{className:"\n                    w-10 h-10\n                    rounded-full\n                    bg-[#4f39f6]\n                    text-white\n                    font-normal\n                    text-base\n                    flex items-center justify-center\n                    absolute top-4 left-4\n                  ",children:e.step}),Vm.jsx("div",{className:"w-20 h-20 flex items-center justify-center mb-6",children:Vm.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#4f39f6]/10 to-[#9810fa]/10 flex items-center justify-center",children:Vm.jsx(e.icon,{className:"w-12 h-12 text-[#4f39f6]"})})}),Vm.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:e.title}),Vm.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:e.description})]})},t))})]})]})})}function GG({icon:e,title:t,description:n,index:r=0}){return Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5,delay:.1*r},whileHover:{y:-8,transition:{duration:.2}},className:"\n        group relative\n        bg-white \n        border border-gray-200 \n        rounded-2xl \n        p-6 md:p-8\n        hover:border-[#4f39f6]/30\n        hover:shadow-lg hover:shadow-[#4f39f6]/10\n        transition-all duration-300\n        h-full flex flex-col\n      ",children:[Vm.jsx("div",{className:"\n        inline-flex items-center justify-center\n        w-12 h-12 md:w-14 md:h-14\n        rounded-xl\n        bg-gradient-to-br from-[#4f39f6]/10 to-[#9810fa]/10\n        group-hover:from-[#4f39f6]/20 group-hover:to-[#9810fa]/20\n        transition-colors duration-300\n        mb-4\n      ",children:Vm.jsx(e,{className:"w-6 h-6 md:w-7 md:h-7 text-[#4f39f6]"})}),Vm.jsx("h3",{className:"\n        text-lg md:text-xl font-semibold \n        text-gray-900 \n        mb-2\n        group-hover:text-[#4f39f6]\n        transition-colors duration-300\n      ",children:t}),Vm.jsx("p",{className:"text-gray-600 text-sm md:text-base leading-relaxed flex-grow",children:n}),Vm.jsx("div",{className:"\n        absolute inset-0 \n        rounded-2xl \n        bg-gradient-to-br from-[#4f39f6]/0 to-[#9810fa]/0\n        group-hover:from-[#4f39f6]/5 group-hover:to-[#9810fa]/5\n        pointer-events-none\n        transition-all duration-300\n      "})]})}function KG(){const e=[{icon:oI,title:"AI Powered Analysis",description:"Sztuczna inteligencja analizuje każdy produkt. 85% Accuracy - sprawdzono na tysiącach palet.",color:"blue"},{icon:vM,title:"Real-time Market Prices",description:"Aktualne ceny z Allegro, eBay, Amazon i innych. Dokładne porównanie aktualnych cen rynkowych.",color:"blue"},{icon:LM,title:"AI Raporty w Języku Naturalnym",description:"Nie musisz rozumieć skąd AI podjął decyzje. AI wyjaśni w zwykłym języku dlaczego produkt jest opłacalny lub nie.",color:"blue"},{icon:YM,title:"Automatyczna Tabela",description:"Widzą całą tabelę za jednym kliknięciem. Sortuj po rentowności, filtruj wyniki.",color:"blue"},{icon:jM,title:"Darmowe Wszystko",description:"Programy w języku CSV, PDF, Excel. System sam rozpozna format.",color:"blue"},{icon:qM,title:"Łaciń Dane na Bezablazach",description:"Twoje dane pozostają bezpieczne. Nie udostępniamy ich osobom trzecim. RODO Safe.",color:"blue"}];return Vm.jsx("section",{className:"relative py-16 md:py-24 bg-gradient-to-b from-white via-blue-50/30 to-white",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsx("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:"Wszystko, Czego Potrzebujesz w Jednym Miejscu"}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:"Zaawansowane narzędzia AI w jednej rakieta z kompletnymi danymi"})]}),Vm.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-16",children:e.map((e,t)=>Vm.jsx(gW.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:.1*t},className:"flex",children:Vm.jsx(GG,{...e})},t))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-[#4f39f6] to-[#9810fa] p-8 md:p-12 text-center text-white",children:[Vm.jsx("h3",{className:"text-2xl md:text-3xl lg:text-4xl font-bold mb-4",children:"I to wszystko za mniej niż kolacja dla dwojga"}),Vm.jsxs("div",{className:"mb-6",children:[Vm.jsx("p",{className:"text-lg md:text-xl mb-2",children:"Plan PRO: 99 zł/miesiąc - Wszystko potrzebujesz za cenę co potrzebujesz"}),Vm.jsx("p",{className:"text-sm md:text-base opacity-90",children:"Bez ukrytych kosztów • Anuluj w każdej chwili • Pierwsza analiza za darmo!"})]}),Vm.jsx(gW.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const e=document.getElementById("pricing-section");e&&e.scrollIntoView({behavior:"smooth"})},className:"\n              bg-white text-[#4f39f6] \n              px-8 py-4 \n              rounded-xl \n              font-semibold text-lg\n              hover:bg-gray-50 \n              transition-colors duration-200\n              shadow-lg\n              cursor-pointer\n            ",children:"Zobacz ceny"})]})]})})}function XG({quote:e,name:t,role:n,company:r,rating:s=5,avatar:a,index:i=0}){return Vm.jsxs(gW.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.6,delay:.15*i},className:"\n        relative\n        bg-white\n        border border-gray-200\n        rounded-2xl\n        p-6 md:p-8\n        hover:border-[#4f39f6]/20\n        hover:shadow-lg hover:shadow-[#4f39f6]/10\n        transition-all duration-300\n        h-full\n        flex flex-col\n      ",children:[Vm.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Vm.jsx(WM,{className:"w-8 h-8 text-[#4f39f6]/20"}),Vm.jsx("div",{className:"flex gap-1",children:Array.from({length:s}).map((e,t)=>Vm.jsx(XM,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},t))})]}),Vm.jsxs("blockquote",{className:"\n        text-gray-700 \n        text-sm md:text-base \n        leading-relaxed \n        mb-6\n        flex-grow\n      ",children:['"',e,'"']}),Vm.jsxs("div",{className:"flex items-center gap-3 mt-auto",children:[Vm.jsx("div",{className:"\n          w-12 h-12 \n          rounded-full \n          bg-gradient-to-br from-[#4f39f6] to-[#9810fa]\n          flex items-center justify-center\n          text-white font-semibold\n          text-lg\n          flex-shrink-0\n          overflow-hidden\n        ",children:a?Vm.jsx("img",{src:a,alt:t,className:"w-full h-full object-cover"}):Vm.jsx("span",{children:t.charAt(0)})}),Vm.jsxs("div",{className:"min-w-0",children:[Vm.jsx("div",{className:"font-semibold text-gray-900 text-sm md:text-base truncate",children:t}),Vm.jsxs("div",{className:"text-gray-600 text-xs md:text-sm truncate",children:[n,r&&` @ ${r}`]})]})]}),Vm.jsx("div",{className:"\n        absolute inset-0 \n        rounded-2xl \n        bg-gradient-to-br from-[#4f39f6]/0 via-transparent to-[#9810fa]/0\n        opacity-0 hover:opacity-100\n        pointer-events-none\n        transition-opacity duration-300\n      ",style:{padding:"1px"}})]})}function YG(){const e=[{icon:sI,value:"500+",label:"Beta testerów",color:"blue"},{icon:ZM,value:"10,000+",label:"Przeanalizowanych palet",color:"purple"},{icon:XM,value:"4.8/5",label:"Średnia ocena",color:"yellow"},{icon:eI,value:"92%",label:"Poleciłoby znajomym",color:"green"}];return Vm.jsx("section",{className:"relative py-16 md:py-24 bg-gray-50",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsxs("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:["Dołącz do"," ",Vm.jsx("span",{className:"bg-gradient-to-r from-[#4f39f6] to-[#9810fa] bg-clip-text text-transparent",children:"500+ Osób"}),", Które Już Testują PalletAI"]}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-2xl mx-auto",children:"Zobacz, co mówią beta testerzy o aplikacji"})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-6 md:gap-8 mb-12 md:mb-16",children:[{quote:"Wcześniej spędzałem 3-4 godziny dziennie na sprawdzaniu cen i obliczaniu marży. PalletAI robi to w minutę. Mogę się skupić na negocjacjach i sprzedaży. Game changer!",name:"Tomasz K.",role:"Trader palet",company:"5 lat doświadczenia",rating:5},{quote:'Kupiłam paletę, która według PalletAI była "ryzykowna". Zignorowałam ostrzeżenie i straciłam 2000 zł. Od tego czasu słucham AI - i działa!',name:"Anna M.",role:"Właścicielka sklepu e-commerce",rating:5},{quote:"Najlepsza inwestycja w moim biznesie. Za 99 zł miesięcznie oszczędzam tysiące na złych decyzjach. ROI w pierwszym tygodniu!",name:"Michał P.",role:"Reseller Marketplace",rating:5}].map((e,t)=>Vm.jsx(XG,{...e,index:t},t))}),Vm.jsx(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.5},children:Vm.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:e.map((e,t)=>Vm.jsxs(gW.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4,delay:.6+.1*t},className:"\n                  bg-white\n                  rounded-2xl\n                  p-6 md:p-8\n                  border border-gray-200\n                  text-center\n                  hover:border-blue-200\n                  hover:shadow-lg\n                  transition-all duration-300\n                ",children:[Vm.jsx("div",{className:`\n                  inline-flex items-center justify-center\n                  w-12 h-12 md:w-14 md:h-14\n                  rounded-xl\n                  mb-3\n                  bg-${e.color}-50\n                `,children:Vm.jsx(e.icon,{className:`w-6 h-6 md:w-7 md:h-7 text-${e.color}-600`})}),Vm.jsx("div",{className:`\n                  text-3xl md:text-4xl \n                  font-bold \n                  text-${e.color}-600\n                  mb-1\n                `,children:e.value}),Vm.jsx("div",{className:"text-sm md:text-base text-gray-600",children:e.label})]},t))})})]})})}function JG({name:e,price:t,period:n="/miesiąc",description:r,features:s,isPopular:a=!1,ctaText:i,onCTAClick:o,index:l=0}){return Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5,delay:.1*l},className:`\n        relative\n        bg-white\n        rounded-2xl\n        p-6 md:p-8\n        border-2\n        transition-all duration-300\n        flex flex-col\n        h-full\n        ${a?"border-[#4f39f6] shadow-xl shadow-[#4f39f6]/10":"border-gray-200 hover:border-[#4f39f6]/30 hover:shadow-lg"}\n      `,children:[a&&Vm.jsx("div",{className:"\n          absolute -top-4 left-1/2 -translate-x-1/2\n          px-4 py-1.5\n          bg-gradient-to-r from-[#4f39f6] to-[#9810fa]\n          text-white text-xs font-semibold\n          rounded-lg\n          shadow-lg\n          flex items-center gap-1\n        ",children:"Najpopularniejsze"}),Vm.jsxs("div",{className:"mb-4",children:[Vm.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:e}),Vm.jsx("p",{className:"text-sm text-gray-600",children:r})]}),Vm.jsx("div",{className:"mb-6",children:"Darmowy"===t||"Na żądanie"===t?Vm.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:t}):Vm.jsxs("div",{className:"flex items-baseline gap-1",children:[Vm.jsx("span",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:t}),Vm.jsx("span",{className:"text-xl text-gray-600",children:"zł"}),Vm.jsx("span",{className:"text-sm text-gray-500",children:n})]})}),Vm.jsx("ul",{className:"space-y-3 mb-8 flex-grow",children:s.map((e,t)=>Vm.jsxs("li",{className:"flex items-start gap-3",children:[Vm.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center mt-0.5",children:e.included?Vm.jsx("img",{src:"/paleta/assets/checkmark-icon-0ead22a6.svg",alt:"",className:"w-5 h-5"}):Vm.jsx(iI,{className:"w-3 h-3 text-gray-400",strokeWidth:2})}),Vm.jsx("span",{className:`\n              text-sm md:text-base\n              ${e.included?"text-gray-700":"text-gray-400"}\n            `,children:e.text})]},t))}),Vm.jsx("button",{onClick:o,className:`\n          w-full\n          py-3 md:py-4\n          rounded-xl\n          font-semibold\n          text-sm md:text-base\n          transition-all duration-200\n          ${a?"\n              bg-gradient-to-r from-[#4f39f6] to-[#9810fa]\n              text-white\n              hover:shadow-lg hover:shadow-[#9810fa]/30\n              hover:scale-[1.02]\n            ":"\n              bg-white\n              border-2 border-[#4f39f6]\n              text-gray-900\n              hover:bg-gray-50\n            "}\n        `,children:i}),a&&Vm.jsx("div",{className:"\n          absolute -inset-0.5 \n          bg-gradient-to-r from-[#4f39f6] to-[#9810fa]\n          rounded-2xl \n          opacity-20 \n          blur\n          -z-10\n        "})]})}function ZG(){const e=()=>{const e=document.getElementById("hero");e&&e.scrollIntoView({behavior:"smooth"})},t=[{name:"STARTER",price:0,period:"/miesiąc",description:"Idealny na start",features:[{text:"3 analizy miesięcznie",included:!0},{text:"Podstawowe raporty",included:!0},{text:"Analiza do 50 produktów",included:!0},{text:"Dashboard podstawowy",included:!0},{text:"Email support",included:!0},{text:"Zaawansowane analizy AI",included:!1},{text:"Export do Excel/PDF",included:!1}],ctaText:"Zapisz się",onCTAClick:e,isPopular:!1},{name:"PRO",price:199,period:"/miesiąc",description:"Dla profesjonalnych traderów",features:[{text:"20 analiz miesięcznie",included:!0},{text:"Zaawansowane analizy AI",included:!0},{text:"Analiza do 500 produktów",included:!0},{text:"Ostrzeżenia przed ryzykiem",included:!0},{text:"Integracja z Allegro",included:!0},{text:"Porównanie z konkurencją",included:!0},{text:"Export do Excel/PDF",included:!0}],ctaText:"Wypróbuj PRO przez 3 miesiące",onCTAClick:e,isPopular:!0},{name:"BUSINESS",price:499,period:"/miesiąc",description:"Dla firm i zespołów",features:[{text:"Wszystko z PRO +",included:!0},{text:"Nielimitowane analizy",included:!0},{text:"Analiza do 2000 produktów",included:!0},{text:"5 kont użytkowników",included:!0},{text:"Wyłączny account manager",included:!0},{text:"Integracje (Allegro, Amazon)",included:!0},{text:"Własne reguły i kryteria",included:!0},{text:"24/7 support",included:!0}],ctaText:"Skontaktuj się",onCTAClick:e,isPopular:!1}];return Vm.jsx("section",{id:"pricing-section",className:"relative py-16 md:py-24 bg-white",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsxs("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:["Prosty Cennik."," ",Vm.jsx("span",{className:"text-[#4f39f6]",children:"Zero Ukrytych Kosztów"})]}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:"Wybierz plan dopasowany do Twoich potrzeb"})]}),Vm.jsx("div",{className:"grid md:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto",children:t.map((e,t)=>Vm.jsx(gW.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:.1*t},children:Vm.jsx(JG,{...e})},t))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"\n            mt-12\n            text-center\n            bg-blue-50\n            rounded-2xl\n            p-6 md:p-8\n            border border-blue-100\n          ",children:[Vm.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-4",children:"Najczęściej zadawane pytania o cennik"}),Vm.jsxs("div",{className:"space-y-3 text-left max-w-2xl mx-auto",children:[Vm.jsxs("div",{children:[Vm.jsx("p",{className:"font-semibold text-gray-900",children:"Czy mogę anulować w każdej chwili?"}),Vm.jsx("p",{className:"text-gray-600",children:"Tak! Bez zobowiązań. Jeden klik w ustawieniach."})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"font-semibold text-gray-900",children:"Czy dostanę fakturę VAT?"}),Vm.jsx("p",{className:"text-gray-600",children:"Oczywiście! Automatyczna faktura po każdej płatności."})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"font-semibold text-gray-900",children:"Co jeśli nie będę zadowolony?"}),Vm.jsx("p",{className:"text-gray-600",children:"30 dni gwarancji zwrotu pieniędzy - bez pytań."})]})]})]}),Vm.jsx(gW.p,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.6},className:"text-center text-sm text-gray-500 mt-8",children:"Wszystkie ceny podane są brutto (z VAT w przypadku zakupu przez firmę w Polsce)"})]})})}function QG({question:e,answer:t,defaultOpen:n=!1}){const[r,s]=Im.useState(n);return Vm.jsxs("div",{className:"\n      border border-gray-200 \n      rounded-xl \n      overflow-hidden\n      hover:border-blue-200\n      transition-colors duration-200\n    ",children:[Vm.jsxs("button",{onClick:()=>s(!r),className:"\n          w-full \n          flex items-center justify-between \n          p-4 md:p-6\n          text-left\n          bg-white\n          hover:bg-gray-50\n          transition-colors duration-200\n        ","aria-expanded":r,children:[Vm.jsx("span",{className:"\n          text-base md:text-lg \n          font-semibold \n          text-gray-900\n          pr-4\n        ",children:e}),Vm.jsx(gW.div,{animate:{rotate:r?180:0},transition:{duration:.3},className:"flex-shrink-0",children:Vm.jsx(hM,{className:"w-5 h-5 text-gray-500"})})]}),Vm.jsx(yL,{initial:!1,children:r&&Vm.jsx(gW.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{height:{duration:.3},opacity:{duration:.2,delay:.1}}},exit:{height:0,opacity:0,transition:{height:{duration:.3,delay:.1},opacity:{duration:.2}}},className:"overflow-hidden",children:Vm.jsx("div",{className:"\n              px-4 md:px-6 \n              pb-4 md:pb-6\n              pt-2\n              bg-gray-50\n              border-t border-gray-100\n            ",children:Vm.jsx("p",{className:"\n                text-sm md:text-base \n                text-gray-700 \n                leading-relaxed\n                whitespace-pre-line\n              ",children:t})})})})]})}function eK(){return Vm.jsx("section",{className:"relative py-16 md:py-24 bg-white",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-4xl",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[Vm.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-[#4f39f6]/10 mb-6",children:Vm.jsx(NM,{className:"w-8 h-8 text-[#4f39f6]"})}),Vm.jsxs("h2",{className:"\n            text-3xl md:text-4xl lg:text-5xl \n            font-bold \n            text-gray-900 \n            mb-4\n          ",children:["Masz Pytania?"," ",Vm.jsx("span",{className:"bg-gradient-to-r from-[#4f39f6] to-[#9810fa] bg-clip-text text-transparent",children:"Mamy Odpowiedzi!"})]}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"Najczęściej zadawane pytania o PalletAI"})]}),Vm.jsx("div",{className:"space-y-4",children:[{question:"Kiedy startuje PalletAI?",answer:"Oficjalna premiera planowana na Marzec 2025.\n\nOsoby z waitlist otrzymają wczesny dostęp 2 tygodnie wcześniej + 3 miesiące PRO gratis!"},{question:"Czy muszę znać się na technologii/AI?",answer:"Absolutnie nie! Aplikacja jest prostsza niż Excel.\n\nWrzucasz plik → otrzymujesz raport. To wszystko! AI robi całą ciężką pracę za Ciebie."},{question:"Czy moje dane są bezpieczne?",answer:"Tak! Używamy:\n\n• Szyfrowanie bankowe (256-bit SSL)\n• Pełna zgodność z RODO\n• Twoje dane nigdy nie są udostępniane osobom trzecim\n• Hosting w bezpiecznej chmurze (Supabase - certyfikat SOC 2)"},{question:"Jakie pliki mogę uploadować?",answer:"Obsługujemy wszystkie popularne formaty:\n\n• Excel (.xlsx, .xls)\n• CSV (.csv)\n• PDF\n\nPraktycznie każdy format, który otrzymujesz od dostawców palet."},{question:"Czy mogę anulować subskrypcję w każdej chwili?",answer:"Tak! Bez zobowiązań, żadnych ukrytych opłat.\n\n• Anulujesz jednym kliknięciem\n• Zachowujesz dostęp do końca opłaconego okresu\n• Możesz wrócić w każdej chwili"},{question:"Czy działa na telefonie?",answer:"Tak! Aplikacja działa na każdym urządzeniu:\n\n• Przeglądarka (Chrome, Firefox, Safari, Edge)\n• Telefon (iOS i Android)\n• Tablet (iPad, Android tablets)\n• Komputer (Windows, Mac, Linux)\n\nW pełni responsywna - dostosowuje się do ekranu."},{question:"Czy mogę testować za darmo?",answer:"Tak! Masz dwie opcje:\n\n1. Plan STARTER - darmowy na zawsze (5 analiz miesięcznie)\n2. Wczesny dostęp z waitlist = 3 miesiące PRO gratis (unlimited)\n\nBez podawania karty kredytowej!"},{question:"A jeśli nie będę zadowolony?",answer:"Gwarantujemy zwrot pieniędzy w ciągu 30 dni.\n\nBez pytań, bez problemów. Jeśli aplikacja nie spełni Twoich oczekiwań - po prostu napisz do nas, a zwrócimy pieniądze."}].map((e,t)=>Vm.jsx(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.4,delay:.05*t},children:Vm.jsx(QG,{question:e.question,answer:e.answer,defaultOpen:0===t})},t))}),Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.5},className:"\n            mt-12\n            text-center\n            bg-gray-50\n            rounded-2xl\n            p-6 md:p-8\n            border border-gray-200\n          ",children:[Vm.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Nadal masz pytania?"}),Vm.jsx("p",{className:"text-gray-600 mb-4",children:"Napisz do nas, chętnie pomożemy!"}),Vm.jsx("a",{href:"mailto:kontakt@palletai.com",className:"\n              inline-flex items-center gap-2\n              px-6 py-3\n              bg-gradient-to-r from-[#4f39f6] to-[#9810fa]\n              text-white\n              rounded-xl\n              font-semibold\n              hover:shadow-lg hover:shadow-[#9810fa]/30\n              transition-all duration-200\n            ",children:"📧 kontakt@palletai.com"})]})]})})}function tK(){const e=[{icon:fM,text:"Wczesny dostęp - 2 tygodnie przed oficjalną premierą"},{icon:AM,text:"3 miesiące PRO gratis - wartość 297 zł (tylko dla waitlist)"},{icon:sM,text:"Bądź pierwszy - powiadomienie o starcie w momencie premiery"},{icon:qM,text:"Zero spamu - możesz wypisać się w każdej chwili"}];return Vm.jsxs("section",{className:"relative py-20 md:py-32 bg-gradient-to-br from-[#4f39f6] via-[#9810fa] to-[#4f39f6] overflow-hidden",children:[Vm.jsx(LG,{size:"xl",position:{top:"-30%",left:"-20%"},color:"indigo",opacity:.15}),Vm.jsx(LG,{size:"xl",position:{top:"-20%",right:"-20%"},color:"violet",opacity:.15}),Vm.jsx(LG,{size:"lg",position:{bottom:"-20%",left:"50%"},color:"fuchsia",opacity:.12}),Vm.jsx(LG,{size:"lg",position:{bottom:"-15%",right:"10%"},color:"purple",opacity:.12}),Vm.jsx("div",{className:"container mx-auto px-4 md:px-8 max-w-5xl relative z-10",children:Vm.jsxs("div",{className:"\n          bg-white/95 backdrop-blur-sm\n          rounded-3xl\n          border-2 border-white/20\n          shadow-2xl shadow-black/10\n          p-8 md:p-12 lg:p-16\n        ",children:[Vm.jsxs(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-12",children:[Vm.jsxs("h2",{className:"\n              text-3xl md:text-4xl lg:text-5xl \n              font-bold \n              text-gray-900 \n              mb-6\n            ",children:["Nie Przegap Startu -"," ",Vm.jsx("span",{className:"bg-gradient-to-r from-[#4f39f6] to-[#9810fa] bg-clip-text text-transparent",children:"Dołącz do Waitlist!"})]}),Vm.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Premiera już w Marcu 2025. Bądź w pierwszej setce!"})]}),Vm.jsx(gW.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"mb-10",children:Vm.jsx(IG,{source:"final_cta",size:"large",showOptionalFields:!0})}),Vm.jsx(gW.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"grid md:grid-cols-2 gap-6 mb-12",children:e.map((e,t)=>Vm.jsxs(gW.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.4,delay:.5+.1*t},className:"flex items-start gap-4",children:[Vm.jsx("div",{className:"\n                  flex-shrink-0\n                  w-12 h-12\n                  rounded-xl\n                  bg-gradient-to-br from-[#4f39f6]/10 to-[#9810fa]/10\n                  flex items-center justify-center\n                  border border-[#4f39f6]/20\n                ",children:Vm.jsx(e.icon,{className:"w-6 h-6 text-[#4f39f6]"})}),Vm.jsx("div",{className:"pt-1",children:Vm.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:e.text})})]},t))}),Vm.jsx(gW.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.8},className:"\n              text-center\n              pt-8\n              border-t border-gray-200\n            "})]})})]})}function nK(){const e=(new Date).getFullYear(),t={produkt:[{label:"Jak to działa",href:"#solution"},{label:"Funkcje",href:"#features"},{label:"Cennik",href:"#pricing"},{label:"FAQ",href:"#faq"}],firma:[{label:"O nas",href:"#"},{label:"Kontakt",href:"mailto:kontakt@palletai.com"},{label:"Blog",href:"#"},{label:"Kariera",href:"#"}],prawne:[{label:"Polityka prywatności",href:"#"},{label:"Regulamin",href:"#"},{label:"RODO",href:"#"},{label:"Cookies",href:"#"}]},n=[{icon:MM,href:"#",label:"LinkedIn"},{icon:tI,href:"#",label:"Twitter"},{icon:wM,href:"#",label:"Facebook"}];return Vm.jsx("footer",{className:"relative bg-gray-900 text-gray-300",children:Vm.jsxs("div",{className:"container mx-auto px-4 md:px-8 max-w-7xl",children:[Vm.jsx("div",{className:"py-12 md:py-16",children:Vm.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12",children:[Vm.jsxs("div",{className:"col-span-2 md:col-span-1",children:[Vm.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Vm.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-[#4f39f6] to-[#9810fa] flex items-center justify-center",children:Vm.jsx("span",{className:"text-white font-semibold text-sm",children:"P"})}),Vm.jsx("span",{className:"text-xl font-semibold text-white",children:"PalletAI"})]}),Vm.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Inteligentna analiza palet produktów z wykorzystaniem AI. Oszczędź czas, uniknij złych decyzji."}),Vm.jsx("div",{className:"flex items-center gap-3",children:n.map((e,t)=>Vm.jsx(gW.a,{href:e.href,"aria-label":e.label,whileHover:{scale:1.1},whileTap:{scale:.95},className:"\n                      w-9 h-9\n                      rounded-lg\n                      bg-gray-800\n                      hover:bg-gray-700\n                      flex items-center justify-center\n                      transition-colors duration-200\n                    ",children:Vm.jsx(e.icon,{className:"w-4 h-4"})},t))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-white font-semibold mb-4",children:"Produkt"}),Vm.jsx("ul",{className:"space-y-2",children:t.produkt.map((e,t)=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"\n                        text-sm\n                        text-gray-400\n                        hover:text-white\n                        transition-colors duration-200\n                      ",children:e.label})},t))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-white font-semibold mb-4",children:"Firma"}),Vm.jsx("ul",{className:"space-y-2",children:t.firma.map((e,t)=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"\n                        text-sm\n                        text-gray-400\n                        hover:text-white\n                        transition-colors duration-200\n                      ",children:e.label})},t))})]}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-white font-semibold mb-4",children:"Prawne"}),Vm.jsx("ul",{className:"space-y-2",children:t.prawne.map((e,t)=>Vm.jsx("li",{children:Vm.jsx("a",{href:e.href,className:"\n                        text-sm\n                        text-gray-400\n                        hover:text-white\n                        transition-colors duration-200\n                      ",children:e.label})},t))})]})]})}),Vm.jsxs("div",{className:"\n          border-t border-gray-800\n          py-6\n          flex flex-col md:flex-row\n          items-center justify-between\n          gap-4\n        ",children:[Vm.jsxs("p",{className:"text-sm text-gray-400 text-center md:text-left",children:["© ",e," PalletAI. Wszystkie prawa zastrzeżone."]}),Vm.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[Vm.jsxs("a",{href:"mailto:kontakt@palletai.com",className:"flex items-center gap-2 hover:text-white transition-colors duration-200",children:[Vm.jsx(DM,{className:"w-4 h-4"}),Vm.jsx("span",{className:"hidden sm:inline",children:"kontakt@palletai.com"})]}),Vm.jsx("span",{className:"hidden md:inline",children:"•"}),Vm.jsx("span",{className:"hidden md:inline",children:"💬 Chat online (9-17)"})]})]})]})})}function rK(){return Im.useEffect(()=>{document.title="PalletAI - Inteligentna Analiza Palet z AI | Już Wkrótce";const e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content","Oszczędź czas i pieniądze. Pozwól AI ocenić rentowność palety produktów w 60 sekund. Wczesny dostęp + 3 miesiące PRO gratis.")},[]),Im.useEffect(()=>(document.documentElement.style.scrollBehavior="smooth",()=>{document.documentElement.style.scrollBehavior="auto"}),[]),Im.useEffect(()=>{const e=()=>{const e=window.location.hash;if(e){const t=document.querySelector(e);null==t||t.scrollIntoView({behavior:"smooth"})}};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[]),Vm.jsxs("main",{className:"bg-white overflow-x-hidden",children:[Vm.jsx("div",{id:"hero",children:Vm.jsx($G,{})}),Vm.jsx("div",{id:"problem",children:Vm.jsx(HG,{})}),Vm.jsx("div",{id:"solution",children:Vm.jsx(qG,{})}),Vm.jsx("div",{id:"features",children:Vm.jsx(KG,{})}),Vm.jsx("div",{id:"testimonials",children:Vm.jsx(YG,{})}),Vm.jsx("div",{id:"pricing",children:Vm.jsx(ZG,{})}),Vm.jsx("div",{id:"faq",children:Vm.jsx(eK,{})}),Vm.jsx("div",{id:"cta",children:Vm.jsx(tK,{})}),Vm.jsx(nK,{})]})}var sK={exports:{}};function aK(){}function iK(){}iK.resetWarningCache=aK;sK.exports=function(){function e(e,t,n,r,s,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iK,resetWarningCache:aK};return n.PropTypes=n,n}();const oK=Kf(sK.exports),lK=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function cK(e,t,n){const r=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),r=lK.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:s}=e,a="string"==typeof t?t:"string"==typeof s&&s.length>0?s:`./${e.name}`;return"string"!=typeof r.path&&dK(r,"path",a),void 0!==n&&Object.defineProperty(r,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),dK(r,"relativePath",a),r}function dK(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const uK=[".DS_Store","Thumbs.db"];function hK(e){return"object"==typeof e&&null!==e}function pK(e){return e.filter(e=>-1===uK.indexOf(e.name))}function fK(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function mK(e){if("function"!=typeof e.webkitGetAsEntry)return vK(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?xK(t):vK(e,t)}function gK(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?gK(t):[t]],[])}function vK(e,t){return VW(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,cK(e)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return cK(r,null!==(n=null==t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function yK(e){return VW(this,void 0,void 0,function*(){return e.isDirectory?xK(e):function(e){return VW(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{const r=cK(n,e.fullPath);t(r)},e=>{n(e)})})})}(e)})}function xK(e){const t=e.createReader();return new Promise((e,n)=>{const r=[];!function s(){t.readEntries(t=>VW(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(yK));r.push(e),s()}else try{const t=yield Promise.all(r);e(t)}catch(a){n(a)}}),e=>{n(e)})}()})}var bK=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var r=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):s===t})}return!0};function wK(e){return function(e){if(Array.isArray(e))return EK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||AK(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kK(Object(n),!0).forEach(function(t){jK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){o=!0,s=l}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(e,t)||AK(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AK(e,t){if(e){if("string"==typeof e)return EK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EK(e,t):void 0}}function EK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var TK=bK,NK=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},CK=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},PK=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},RK={code:"too-many-files",message:"Too many files"};function MK(e,t){var n="application/x-moz-file"===e.type||TK(e,t);return[n,n?null:NK(t)]}function IK(e,t,n){if(OK(e.size))if(OK(t)&&OK(n)){if(e.size>n)return[!1,CK(n)];if(e.size<t)return[!1,PK(t)]}else{if(OK(t)&&e.size<t)return[!1,PK(t)];if(OK(n)&&e.size>n)return[!1,CK(n)]}return[!0,null]}function OK(e){return null!=e}function zK(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function DK(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function LK(e){e.preventDefault()}function FK(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return t.some(function(t){return!zK(e)&&t&&t.apply(void 0,[e].concat(r)),zK(e)})}}function BK(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function UK(e){return/^.*\.[\w]+$/.test(e)}var WK=["children"],$K=["open"],VK=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],HK=["refKey","onChange","onClick"];function qK(e){return function(e){if(Array.isArray(e))return XK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||KK(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){o=!0,s=l}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(e,t)||KK(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KK(e,t){if(e){if("string"==typeof e)return XK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XK(e,t):void 0}}function XK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function JK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YK(Object(n),!0).forEach(function(t){ZK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QK(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var eX=Im.forwardRef(function(e,t){var n=e.children,r=rX(QK(e,WK)),s=r.open,a=QK(r,$K);return Im.useImperativeHandle(t,function(){return{open:s}},[s]),Om.createElement(Im.Fragment,null,n(JK(JK({},a),{},{open:s})))});eX.displayName="Dropzone";var tX={disabled:!1,getFilesFromEvent:function(e){return VW(this,void 0,void 0,function*(){return hK(e)&&hK(e.dataTransfer)?function(e,t){return VW(this,void 0,void 0,function*(){if(e.items){const n=fK(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return n;return pK(gK(yield Promise.all(n.map(mK))))}return pK(fK(e.files).map(e=>cK(e)))})}(e.dataTransfer,e.type):function(e){return hK(e)&&hK(e.target)}(e)?function(e){return fK(e.target.files).map(e=>cK(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return VW(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>cK(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};eX.defaultProps=tX,eX.propTypes={children:oK.func,accept:oK.objectOf(oK.arrayOf(oK.string)),multiple:oK.bool,preventDropOnDocument:oK.bool,noClick:oK.bool,noKeyboard:oK.bool,noDrag:oK.bool,noDragEventsBubbling:oK.bool,minSize:oK.number,maxSize:oK.number,maxFiles:oK.number,disabled:oK.bool,getFilesFromEvent:oK.func,onFileDialogCancel:oK.func,onFileDialogOpen:oK.func,useFsAccessApi:oK.bool,autoFocus:oK.bool,onDragEnter:oK.func,onDragLeave:oK.func,onDragOver:oK.func,onDrop:oK.func,onDropAccepted:oK.func,onDropRejected:oK.func,onError:oK.func,validator:oK.func};var nX={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function rX(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JK(JK({},tX),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,i=t.minSize,o=t.multiple,l=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,u=t.onDragOver,h=t.onDrop,p=t.onDropAccepted,f=t.onDropRejected,m=t.onFileDialogCancel,g=t.onFileDialogOpen,v=t.useFsAccessApi,y=t.autoFocus,x=t.preventDropOnDocument,b=t.noClick,w=t.noKeyboard,k=t.noDrag,S=t.noDragEventsBubbling,j=t.onError,_=t.validator,A=Im.useMemo(function(){return function(e){if(OK(e))return Object.entries(e).reduce(function(e,t){var n=_K(t,2),r=n[0],s=n[1];return[].concat(wK(e),[r],wK(s))},[]).filter(function(e){return BK(e)||UK(e)}).join(",")}(n)},[n]),E=Im.useMemo(function(){return function(e){return OK(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=_K(e,2),n=t[0],r=t[1],s=!0;return BK(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),Array.isArray(r)&&r.every(UK)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(e,t){var n=_K(t,2),r=n[0],s=n[1];return SK(SK({},e),{},jK({},r,s))},{})}]:e}(n)},[n]),T=Im.useMemo(function(){return"function"==typeof g?g:aX},[g]),N=Im.useMemo(function(){return"function"==typeof m?m:aX},[m]),C=Im.useRef(null),P=Im.useRef(null),R=GK(Im.useReducer(sX,nX),2),M=R[0],I=R[1],O=M.isFocused,z=M.isFileDialogActive,D=Im.useRef("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),L=function(){!D.current&&z&&setTimeout(function(){P.current&&(P.current.files.length||(I({type:"closeDialog"}),N()))},300)};Im.useEffect(function(){return window.addEventListener("focus",L,!1),function(){window.removeEventListener("focus",L,!1)}},[P,z,N,D]);var F=Im.useRef([]),B=function(e){C.current&&C.current.contains(e.target)||(e.preventDefault(),F.current=[])};Im.useEffect(function(){return x&&(document.addEventListener("dragover",LK,!1),document.addEventListener("drop",B,!1)),function(){x&&(document.removeEventListener("dragover",LK),document.removeEventListener("drop",B))}},[C,x]),Im.useEffect(function(){return!r&&y&&C.current&&C.current.focus(),function(){}},[C,y,r]);var U=Im.useCallback(function(e){j?j(e):console.error(e)},[j]),W=Im.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[].concat(qK(F.current),[e.target]),DK(e)&&Promise.resolve(s(e)).then(function(t){if(!zK(e)||S){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,a=e.multiple,i=e.maxFiles,o=e.validator;return!(!a&&t.length>1||a&&i>=1&&t.length>i)&&t.every(function(e){var t=_K(MK(e,n),1)[0],a=_K(IK(e,r,s),1)[0],i=o?o(e):null;return t&&a&&!i})}({files:t,accept:A,minSize:i,maxSize:a,multiple:o,maxFiles:l,validator:_});I({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}}).catch(function(e){return U(e)})},[s,c,U,S,A,i,a,o,l,_]),$=Im.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=DK(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&u&&u(e),!1},[u,S]),V=Im.useCallback(function(e){e.preventDefault(),e.persist(),te(e);var t=F.current.filter(function(e){return C.current&&C.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),F.current=t,t.length>0||(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),DK(e)&&d&&d(e))},[C,d,S]),H=Im.useCallback(function(e,t){var n=[],r=[];e.forEach(function(e){var t=GK(MK(e,A),2),s=t[0],o=t[1],l=GK(IK(e,i,a),2),c=l[0],d=l[1],u=_?_(e):null;if(s&&c&&!u)n.push(e);else{var h=[o,d];u&&(h=h.concat(u)),r.push({file:e,errors:h.filter(function(e){return e})})}}),(!o&&n.length>1||o&&l>=1&&n.length>l)&&(n.forEach(function(e){r.push({file:e,errors:[RK]})}),n.splice(0)),I({acceptedFiles:n,fileRejections:r,isDragReject:r.length>0,type:"setFiles"}),h&&h(n,r,t),r.length>0&&f&&f(r,t),n.length>0&&p&&p(n,t)},[I,o,A,i,a,l,h,p,f,_]),q=Im.useCallback(function(e){e.preventDefault(),e.persist(),te(e),F.current=[],DK(e)&&Promise.resolve(s(e)).then(function(t){zK(e)&&!S||H(t,e)}).catch(function(e){return U(e)}),I({type:"reset"})},[s,H,U,S]),G=Im.useCallback(function(){if(D.current){I({type:"openDialog"}),T();var e={multiple:o,types:E};window.showOpenFilePicker(e).then(function(e){return s(e)}).then(function(e){H(e,null),I({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(N(e),I({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?U(e):(D.current=!1,P.current?(P.current.value=null,P.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else P.current&&(I({type:"openDialog"}),T(),P.current.value=null,P.current.click())},[I,T,N,v,H,U,E,o]),K=Im.useCallback(function(e){C.current&&C.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),G()))},[C,G]),X=Im.useCallback(function(){I({type:"focus"})},[]),Y=Im.useCallback(function(){I({type:"blur"})},[]),J=Im.useCallback(function(){b||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?G():setTimeout(G,0))},[b,G]),Z=function(e){return r?null:e},Q=function(e){return w?null:Z(e)},ee=function(e){return k?null:Z(e)},te=function(e){S&&e.stopPropagation()},ne=Im.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,s=e.role,a=e.onKeyDown,i=e.onFocus,o=e.onBlur,l=e.onClick,c=e.onDragEnter,d=e.onDragOver,u=e.onDragLeave,h=e.onDrop,p=QK(e,VK);return JK(JK(ZK({onKeyDown:Q(FK(a,K)),onFocus:Q(FK(i,X)),onBlur:Q(FK(o,Y)),onClick:Z(FK(l,J)),onDragEnter:ee(FK(c,W)),onDragOver:ee(FK(d,$)),onDragLeave:ee(FK(u,V)),onDrop:ee(FK(h,q)),role:"string"==typeof s&&""!==s?s:"presentation"},n,C),r||w?{}:{tabIndex:0}),p)}},[C,K,X,Y,J,W,$,V,q,w,k,r]),re=Im.useCallback(function(e){e.stopPropagation()},[]),se=Im.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,s=e.onClick,a=QK(e,HK);return JK(JK({},ZK({accept:A,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Z(FK(r,q)),onClick:Z(FK(s,re)),tabIndex:-1},n,P)),a)}},[P,n,o,q,r]);return JK(JK({},M),{},{isFocused:O&&!r,getRootProps:ne,getInputProps:se,rootRef:C,inputRef:P,open:Z(G)})}function sX(e,t){switch(t.type){case"focus":return JK(JK({},e),{},{isFocused:!0});case"blur":return JK(JK({},e),{},{isFocused:!1});case"openDialog":return JK(JK({},nX),{},{isFileDialogActive:!0});case"closeDialog":return JK(JK({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return JK(JK({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return JK(JK({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return JK({},nX);default:return e}}function aX(){}const iX=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,s,a);return a},oX=e=>e;const lX=e=>{const t=(e=>e?iX(e):iX)(e),n=e=>function(e,t=oX){const n=Om.useSyncExternalStore(e.subscribe,Om.useCallback(()=>t(e.getState()),[e,t]),Om.useCallback(()=>t(e.getInitialState()),[e,t]));return Om.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},cX=e=>e?lX(e):lX,dX={defaultScore:50,maxScore:100,minScore:0,blockThreshold:0,warningThreshold:30};const uX=new class{constructor(e={}){Lf(this,"config"),this.config={...dX,...e}}async evaluateProducts(e,t,n){const r=t.filter(e=>"active"===e.status),s=[];for(let a=0;a<e.length;a++){const t=e[a],i=Math.round(a/e.length*100);null==n||n(i,`Ocenianie produktu: ${t.name}`);const o=this.evaluateProduct(t,r);s.push(o)}return null==n||n(100,"Ocena zakończona"),s}evaluateProduct(e,t){let n=this.config.defaultScore;const r=[],s=[],a=[],i=[];t.forEach(t=>{const o=this.applyRule(t,e);if(o.matched)switch(r.push(o),t.action){case"prefer":n+=this.calculateBonus(o.score,t.weight),s.push(o.reason);break;case"warn":n-=this.calculatePenalty(o.score,t.weight),a.push(o.reason);break;case"block":n=this.config.blockThreshold,i.push(o.reason)}}),n=Math.max(this.config.minScore,Math.min(this.config.maxScore,n));let o="ok";return i.length>0?o="blocked":(a.length>0||n<this.config.warningThreshold)&&(o="warning"),{productId:e.id,score:Math.round(n),status:o,appliedRules:r,recommendations:s,warnings:a,blocks:i}}applyRule(e,t){let n=!1,r="",s=0;switch(e.type){case"budget":const a=this.evaluateBudgetRule(e,t);n=a.matched,r=a.reason,s=a.score;break;case"category":const i=this.evaluateCategoryRule(e,t);n=i.matched,r=i.reason,s=i.score;break;case"quality":const o=this.evaluateQualityRule(e,t);n=o.matched,r=o.reason,s=o.score}return{ruleId:e.id,ruleName:e.name,action:e.action,weight:e.weight,score:s,reason:r,matched:n}}evaluateBudgetRule(e,t){const n=e.conditions;let r=!1,s="",a=0;if(t.price&&n.maxPrice&&t.price>n.maxPrice){r=!0;const e=t.price-n.maxPrice;s=`Cena ${t.price} PLN przekracza limit ${n.maxPrice} PLN (o ${e} PLN)`,a=Math.min(50,e/10)}if(t.price&&t.quantity&&n.maxPricePerUnit){const e=t.price/t.quantity;if(e>n.maxPricePerUnit){r=!0;const t=e-n.maxPricePerUnit;s=`Cena za sztukę ${e.toFixed(2)} PLN przekracza limit ${n.maxPricePerUnit} PLN`,a=Math.min(50,2*t)}}return{matched:r,reason:s,score:a}}evaluateCategoryRule(e,t){const n=e.conditions;let r=!1,s="",a=0;if(t.category){const e=t.category.toLowerCase(),i=n.caseSensitive||!1;if(n.blacklist&&n.blacklist.length>0){(i?n.blacklist:n.blacklist.map(e=>e.toLowerCase())).find(n=>{var r;return i?null==(r=t.category)?void 0:r.includes(n):e.includes(n)})&&(r=!0,s=`Kategoria "${t.category}" jest na liście zakazanych`,a=30)}if(n.whitelist&&n.whitelist.length>0){(i?n.whitelist:n.whitelist.map(e=>e.toLowerCase())).find(n=>{var r;return i?null==(r=t.category)?void 0:r.includes(n):e.includes(n)})&&(r=!0,s=`Kategoria "${t.category}" jest na liście preferowanych`,a=-20)}if(n.warningList&&n.warningList.length>0){(i?n.warningList:n.warningList.map(e=>e.toLowerCase())).find(n=>{var r;return i?null==(r=t.category)?void 0:r.includes(n):e.includes(n)})&&(r=!0,s=`Kategoria "${t.category}" jest na liście ostrzegających`,a=15)}}return{matched:r,reason:s,score:a}}evaluateQualityRule(e,t){const n=e.conditions;let r=!1,s="",a=0;if(n.minRating){const e=5*Math.random();e<n.minRating&&(r=!0,s=`Ocena produktu ${e.toFixed(1)} jest poniżej wymaganej ${n.minRating}`,a=10*(n.minRating-e))}if(n.minReviews){const e=Math.floor(100*Math.random());e<n.minReviews&&(r=!0,s=`Liczba opinii ${e} jest poniżej wymaganej ${n.minReviews}`,a=(n.minReviews-e)/2)}if(n.requiredCertifications&&n.requiredCertifications.length>0){Math.random()>.7||(r=!0,s=`Brak wymaganych certyfikatów: ${n.requiredCertifications.join(", ")}`,a=25)}if(n.requiredBrands&&n.requiredBrands.length>0&&t.brand){const e=t.brand.toLowerCase();n.requiredBrands.map(e=>e.toLowerCase()).some(t=>e.includes(t))&&(r=!0,s=`Marka "${t.brand}" jest na liście preferowanych`,a=-15)}return{matched:r,reason:s,score:a}}calculateBonus(e,t){return e*t/10}calculatePenalty(e,t){return e*t/10}generateRecommendations(e){const t=[];return"blocked"===e.status?t.push({type:"action",title:"Produkt zablokowany",description:"Ten produkt nie spełnia wymagań i został zablokowany",priority:"high",action:"Usuń produkt z zestawu"}):"warning"===e.status?t.push({type:"warning",title:"Produkt z ostrzeżeniem",description:"Ten produkt ma pewne problemy, rozważ alternatywy",priority:"medium",action:"Przejrzyj szczegóły ostrzeżeń"}):e.score>80&&t.push({type:"action",title:"Produkt rekomendowany",description:"Ten produkt spełnia wszystkie wymagania",priority:"low",action:"Dodaj do zestawu"}),e.appliedRules.forEach(e=>{"prefer"===e.action?t.push({type:"info",title:"Preferencja",description:e.reason,priority:"low"}):"warn"===e.action&&t.push({type:"warning",title:"Ostrzeżenie",description:e.reason,priority:"medium"})}),t}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}},hX=cX((e,t)=>({files:[],isUploading:!1,uploadProgress:0,isParsing:!1,parsedProducts:[],productEvaluations:[],isEvaluating:!1,addFiles:n=>{const r=t().files,s=new Set(r.map(e=>`${e.name}-${e.size}`)),a=n.filter(e=>!s.has(`${e.name}-${e.size}`)).map(e=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,file:e,name:e.name,size:e.size,type:e.type,status:"pending",progress:0}));e(e=>({files:[...e.files,...a]}))},removeFile:t=>{e(e=>({files:e.files.filter(e=>e.id!==t)}))},updateFileStatus:(t,n,r=0,s)=>{e(e=>({files:e.files.map(e=>e.id===t?{...e,status:n,progress:r,error:s,uploadedAt:"success"===n?new Date:e.uploadedAt}:e)}))},clearFiles:()=>{e({files:[],isUploading:!1,uploadProgress:0,isParsing:!1,parsedProducts:[],productEvaluations:[],isEvaluating:!1})},setUploading:t=>{e({isUploading:t})},setUploadProgress:t=>{e({uploadProgress:t})},setParsing:t=>{e({isParsing:t})},setParseResult:(t,n)=>{e(e=>({files:e.files.map(e=>e.id===t?{...e,parseResult:n}:e),parsedProducts:[...e.parsedProducts,...n.products]}))},clearParsedProducts:()=>{e({parsedProducts:[]})},getAllParsedProducts:()=>t().parsedProducts,evaluateProducts:async()=>{const{parsedProducts:n}=t();if(0!==n.length){e({isEvaluating:!0});try{const{useRulesStore:t}=await Gf(()=>import("./rulesStore-c008fac2.js"),[]),r=t.getState().getActiveRules(),s=await uX.evaluateProducts(n,r,(e,t)=>{console.log(`Ocena produktów: ${e}% - ${t}`)});e({productEvaluations:s})}catch(r){console.error("Błąd oceny produktów:",r)}finally{e({isEvaluating:!1})}}},clearEvaluations:()=>{e({productEvaluations:[]})},getAllEvaluations:()=>t().productEvaluations})),pX=({variant:e="primary",size:t="md",children:n,className:r="",...s})=>{const a=`font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed ${{primary:"bg-primary-500 text-white hover:bg-primary-400 focus:ring-primary-200 disabled:bg-neutral-300 disabled:text-neutral-500",secondary:"bg-transparent text-primary-500 border border-primary-500 hover:bg-primary-50 focus:ring-primary-200",danger:"bg-danger-500 text-white hover:bg-danger-400 focus:ring-danger-200 disabled:bg-neutral-300 disabled:text-neutral-500"}[e]} ${{sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-sm",lg:"px-6 py-4 text-base"}[t]} ${r}`;return Vm.jsx("button",{className:a,...s,children:n})},fX=({children:e,className:t="",padding:n="md",shadow:r="sm"})=>{const s=`bg-white rounded-lg border border-neutral-200 ${{sm:"p-4",md:"p-6",lg:"p-8"}[n]} ${{sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[r]} ${t}`;return Vm.jsx("div",{className:s,children:e})},mX=({children:e,className:t=""})=>Vm.jsx("div",{className:`mb-4 pb-4 border-b border-neutral-200 ${t}`,children:e}),gX=({children:e,className:t=""})=>Vm.jsx("div",{className:`mb-4 ${t}`,children:e}),vX=({label:e,error:t,helperText:n,leftIcon:r,rightIcon:s,className:a="",...i})=>{const o=`w-full px-4 py-3 border rounded-md text-sm text-neutral-700 bg-white transition-all duration-200 focus:outline-none focus:ring-3 disabled:bg-neutral-100 disabled:text-neutral-400 disabled:cursor-not-allowed ${t?"border-danger-500 focus:border-danger-500 focus:ring-danger-100":"border-neutral-300 focus:border-primary-500 focus:ring-primary-100"} ${r?"pl-10":s?"pr-10":""} ${a}`;return Vm.jsxs("div",{className:"w-full",children:[e&&Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:e}),Vm.jsxs("div",{className:"relative",children:[r&&Vm.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Vm.jsx("div",{className:"text-neutral-400",children:r})}),Vm.jsx("input",{className:o,...i}),s&&Vm.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:Vm.jsx("div",{className:"text-neutral-400",children:s})})]}),t&&Vm.jsx("p",{className:"mt-1 text-sm text-danger-500",children:t}),n&&!t&&Vm.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n})]})},yX=({status:e,children:t,className:n=""})=>{const r=`inline-flex items-center px-2 py-1 rounded-sm text-xs font-medium ${{success:"text-success-500 bg-success-50",warning:"text-warning-500 bg-warning-50",danger:"text-danger-500 bg-danger-50",info:"text-primary-500 bg-primary-50"}[e]} ${n}`;return Vm.jsx("span",{className:r,children:t})},xX=({products:e,title:t="Sparsowane produkty",className:n="",showSource:r=!0,showRawData:s=!1,maxRows:a=100})=>{const[i,o]=Im.useState(null),[l,c]=Im.useState(""),[d,u]=Im.useState(1),[h]=Im.useState(20);console.log("DataTable: Otrzymane produkty:",{count:e.length,products:e.slice(0,3),title:t});const p=Im.useMemo(()=>{let t=e.filter(e=>{var t,n,r;return e.name.toLowerCase().includes(l.toLowerCase())||(null==(t=e.category)?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null==(n=e.sku)?void 0:n.toLowerCase().includes(l.toLowerCase()))||(null==(r=e.brand)?void 0:r.toLowerCase().includes(l.toLowerCase()))});return i&&t.sort((e,t)=>{const n=e[i.key],r=t[i.key];return void 0===n&&void 0===r?0:void 0===n?1:void 0===r?-1:"string"==typeof n&&"string"==typeof r?"asc"===i.direction?n.localeCompare(r):r.localeCompare(n):"number"==typeof n&&"number"==typeof r?"asc"===i.direction?n-r:r-n:0}),t.slice(0,a)},[e,l,i,a]),f=Math.ceil(p.length/h),m=(d-1)*h,g=m+h,v=p.slice(m,g),y=(e,t)=>Vm.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-neutral-50",onClick:()=>(e=>{o(t=>({key:e,direction:(null==t?void 0:t.key)===e&&"asc"===t.direction?"desc":"asc"}))})(e),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:t}),(null==i?void 0:i.key)===e&&Vm.jsx("span",{className:"text-primary-500",children:"asc"===i.direction?"↑":"↓"})]})});return 0===e.length?Vm.jsxs(fX,{className:n,children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:t})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"text-neutral-400 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak danych"}),Vm.jsx("p",{className:"text-neutral-500",children:"Załaduj pliki aby zobaczyć sparsowane produkty"})]})})]}):Vm.jsxs(fX,{className:n,children:[Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:[t," (",p.length,")"]}),Vm.jsx("div",{className:"flex items-center space-x-4",children:Vm.jsxs("div",{className:"relative",children:[Vm.jsx("input",{type:"text",placeholder:"Szukaj produktów...",value:l,onChange:e=>c(e.target.value),className:"pl-8 pr-4 py-2 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),Vm.jsx("svg",{className:"absolute left-2 top-2.5 w-4 h-4 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]})}),Vm.jsxs(gX,{children:[Vm.jsx("div",{className:"overflow-x-auto",children:Vm.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[Vm.jsx("thead",{className:"bg-neutral-50",children:Vm.jsxs("tr",{children:[y("name","Nazwa"),y("category","Kategoria"),y("price","Cena"),y("quantity","Ilość"),y("unit","Jednostka"),y("brand","Marka"),y("sku","SKU"),r&&y("source","Źródło"),s&&Vm.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Dane surowe"})]})}),Vm.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:v.map(e=>{return Vm.jsxs("tr",{className:"hover:bg-neutral-50",children:[Vm.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[Vm.jsx("div",{className:"text-sm font-medium text-neutral-900",children:e.name||"-"}),e.description&&Vm.jsx("div",{className:"text-sm text-neutral-500 truncate max-w-xs",children:e.description})]}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:Vm.jsx(yX,{status:"info",children:e.category||"-"})}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-900",children:(n=e.price,void 0===n?"-":`${n.toFixed(2)} PLN`)}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-900",children:(t=e.quantity,null==t?"-":"number"==typeof t?t.toLocaleString("pl-PL"):String(t))}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-900",children:e.unit||"-"}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-900",children:e.brand||"-"}),Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-900",children:e.sku||"-"}),r&&Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-500",children:e.source||"-"}),s&&Vm.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-neutral-500",children:Vm.jsxs("details",{className:"cursor-pointer",children:[Vm.jsx("summary",{className:"text-primary-600 hover:text-primary-800",children:"Pokaż dane"}),Vm.jsx("pre",{className:"mt-2 text-xs bg-neutral-100 p-2 rounded max-w-xs overflow-auto",children:JSON.stringify(e.rawData,null,2)})]})})]},e.id);var t,n})})]})}),f>1&&Vm.jsxs("div",{className:"flex items-center justify-between mt-6",children:[Vm.jsxs("div",{className:"text-sm text-neutral-700",children:["Pokazuję ",m+1,"-",Math.min(g,p.length)," z ",p.length," produktów"]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===d,className:"px-3 py-1 text-sm border border-neutral-300 rounded hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Poprzednia"}),Vm.jsxs("span",{className:"px-3 py-1 text-sm text-neutral-700",children:["Strona ",d," z ",f]}),Vm.jsx("button",{onClick:()=>u(e=>Math.min(f,e+1)),disabled:d===f,className:"px-3 py-1 text-sm border border-neutral-300 rounded hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Następna"})]})]})]})]})},bX=({evaluations:e,className:t=""})=>{const n=e=>{switch(e){case"action":return"🎯";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📋"}},r=e=>{switch(e){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"info"}},s=e=>{switch(e){case"high":return"Wysoki";case"medium":return"Średni";case"low":return"Niski";default:return"Nieznany"}},a={total:e.length,blocked:e.filter(e=>"blocked"===e.status).length,warnings:e.filter(e=>"warning"===e.status).length,ok:e.filter(e=>"ok"===e.status).length,averageScore:e.length>0?Math.round(e.reduce((e,t)=>e+t.score,0)/e.length):0};return 0===e.length?Vm.jsx(fX,{className:t,children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"text-neutral-400 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak rekomendacji"}),Vm.jsx("p",{className:"text-neutral-500",children:"Załaduj i przeanalizuj produkty aby zobaczyć rekomendacje"})]})})}):Vm.jsxs("div",{className:t,children:[Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Podsumowanie analizy"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-neutral-800",children:a.total}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Produktów"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-success-500",children:a.ok}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"OK"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-warning-500",children:a.warnings}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Ostrzeżenia"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-danger-500",children:a.blocked}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Zablokowane"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-primary-500",children:a.averageScore}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Średnia ocena"})]})]})})]}),Vm.jsx("div",{className:"space-y-4",children:e.map(e=>{const t=(e=>{const t=[];return"blocked"===e.status?t.push({type:"action",title:"Produkt zablokowany",description:"Ten produkt nie spełnia wymagań i został zablokowany",priority:"high",action:"Usuń produkt z zestawu"}):"warning"===e.status?t.push({type:"warning",title:"Produkt z ostrzeżeniem",description:"Ten produkt ma pewne problemy, rozważ alternatywy",priority:"medium",action:"Przejrzyj szczegóły ostrzeżeń"}):e.score>80&&t.push({type:"action",title:"Produkt rekomendowany",description:"Ten produkt spełnia wszystkie wymagania",priority:"low",action:"Dodaj do zestawu"}),e.appliedRules.forEach(e=>{"prefer"===e.action?t.push({type:"info",title:"Preferencja",description:e.reason,priority:"low"}):"warn"===e.action&&t.push({type:"warning",title:"Ostrzeżenie",description:e.reason,priority:"medium"})}),t})(e);return Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("h4",{className:"text-lg font-semibold text-neutral-800",children:["Produkt #",e.productId.split("-").pop()]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(yX,{status:"ok"===e.status?"success":"warning"===e.status?"warning":"danger",children:"ok"===e.status?"OK":"warning"===e.status?"Ostrzeżenie":"Zablokowany"}),Vm.jsxs("span",{className:"text-sm font-medium text-neutral-600",children:["Ocena: ",e.score,"/100"]})]})]})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-4",children:[e.appliedRules.length>0&&Vm.jsxs("div",{children:[Vm.jsx("h5",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Zastosowane reguły:"}),Vm.jsx("div",{className:"space-y-2",children:e.appliedRules.map((e,t)=>Vm.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[Vm.jsx("span",{className:"w-2 h-2 bg-primary-500 rounded-full"}),Vm.jsx("span",{className:"text-neutral-600",children:e.ruleName}),Vm.jsxs("span",{className:"text-neutral-500",children:["(",e.reason,")"]})]},t))})]}),t.length>0&&Vm.jsxs("div",{children:[Vm.jsx("h5",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Rekomendacje:"}),Vm.jsx("div",{className:"space-y-2",children:t.map((e,t)=>Vm.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-neutral-50 rounded-lg",children:[Vm.jsx("span",{className:"text-lg",children:n(e.type)}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Vm.jsx("h6",{className:"text-sm font-medium text-neutral-800",children:e.title}),Vm.jsx(yX,{status:r(e.priority),children:s(e.priority)})]}),Vm.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:e.description}),e.action&&Vm.jsxs("div",{className:"text-sm text-primary-600 font-medium",children:["💡 ",e.action]})]})]},t))})]}),0===t.length&&Vm.jsx("div",{className:"text-center py-4",children:Vm.jsx("p",{className:"text-sm text-neutral-500",children:"Brak rekomendacji dla tego produktu"})})]})})]},e.productId)})})]})};
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
var wX=1252,kX=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],SX={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},jX=function(e){-1!=kX.indexOf(e)&&(wX=SX[0]=e)};var _X=function(e){jX(e)};function AX(){_X(1200),jX(1252)}function EX(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}function TX(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var NX,CX=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return 255==t&&254==n?function(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==n?TX(e.slice(2)):65279==t?e.slice(1):e},PX=function(e){return String.fromCharCode(e)},RX=function(e){return String.fromCharCode(e)},MX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function IX(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,c=0;c<e.length;)a=(n=e.charCodeAt(c++))>>2,i=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(r)?o=l=64:isNaN(s)&&(l=64),t+=MX.charAt(a)+MX.charAt(i)+MX.charAt(o)+MX.charAt(l);return t}function OX(e){var t="",n=0,r=0,s=0,a=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=MX.indexOf(e.charAt(l++))<<2|(a=MX.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&a)<<4|(i=MX.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(r)),s=(3&i)<<6|(o=MX.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(s));return t}var zX=function(){return"undefined"!=typeof Buffer&&"undefined"!=typeof process&&void 0!==process.versions&&!!process.versions.node}(),DX=function(){if("undefined"!=typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(Vne){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function LX(e){return zX?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function FX(e){return zX?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var BX=function(e){return zX?DX(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function UX(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function WX(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return WX(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var $X=zX?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:DX(e)}))}:function(e){if("undefined"!=typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),s=0;for(t=0,n=0;t<e.length;n+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var VX=/\u0000/g,HX=/[\u0001-\u0006]/g;function qX(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function GX(e,t){var n=""+e;return n.length>=t?n:tJ("0",t-n.length)+n}function KX(e,t){var n=""+e;return n.length>=t?n:tJ(" ",t-n.length)+n}function XX(e,t){var n=""+e;return n.length>=t?n:n+tJ(" ",t-n.length)}var YX=Math.pow(2,32);function JX(e,t){return e>YX||e<-YX?function(e,t){var n=""+Math.round(e);return n.length>=t?n:tJ("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:tJ("0",t-n.length)+n}(Math.round(e),t)}function ZX(e,t){return t=t||0,e.length>=7+t&&103==(32|e.charCodeAt(t))&&101==(32|e.charCodeAt(t+1))&&110==(32|e.charCodeAt(t+2))&&101==(32|e.charCodeAt(t+3))&&114==(32|e.charCodeAt(t+4))&&97==(32|e.charCodeAt(t+5))&&108==(32|e.charCodeAt(t+6))}var QX=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],eY=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var tY={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},nY={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},rY={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sY(e,t,n){for(var r=e<0?-1:1,s=e*r,a=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(s);c<t&&(o=(u=Math.floor(s))*i+a,d=u*c+l,!(s-u<5e-8));)s=1/(s-u),a=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=a):(d=c,o=i)),!n)return[0,r*o,d];var h=Math.floor(r*o/d);return[h,r*o-h*d,d]}function aY(e,t,n){if(e>2958465||e<0)return null;var r=0|e,s=Math.floor(86400*(e-r)),a=0,i=[],o={D:r,T:s,u:86400*(e-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++s&&(o.T=s=0,++r,++o.D)),60===r)i=n?[1317,10,29]:[1900,2,29],a=3;else if(0===r)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var iY=new Date(1899,11,31,0,0,0),oY=iY.getTime(),lY=new Date(1900,2,1,0,0,0);function cY(e,t){var n=e.getTime();return t?n-=1262304e5:e>=lY&&(n+=864e5),(n-(oY+6e4*(e.getTimezoneOffset()-iY.getTimezoneOffset())))/864e5}function dY(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function uY(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=dY(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=dY(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),dY(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function hY(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):uY(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return MY(14,cY(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function pY(e,t,n,r){var s,a="",i=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:s=l%100,c=2;break;default:s=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=n.m,c=t.length;break;case 3:return eY[n.m-1][1];case 5:return eY[n.m-1][0];default:return eY[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=n.d,c=t.length;break;case 3:return QX[n.q][0];default:return QX[n.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(i=Math.round(o*(n.S+n.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(a=GX(i,2+r),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):GX(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*n.D+n.H;break;case"[m]":case"[mm]":s=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":s=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=l,c=1}return c>0?GX(s,c):""}function fY(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var mY=/%/g;function gY(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+gY(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),-1===(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var vY=/# (\?+)( ?)\/( ?)(\d+)/;var yY=/^#*0*\.([0#]+)/,xY=/\).*[0#]/,bY=/\(###\) ###\\?-####/;function wY(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function kY(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function SY(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function jY(e,t,n){if(40===e.charCodeAt(0)&&!t.match(xY)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?jY("n",r,n):"("+jY("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return EY(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(mY,""),s=t.length-r.length;return EY(e,r,n*Math.pow(10,2*s))+tJ("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return gY(t,n);if(36===t.charCodeAt(0))return"$"+jY(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+JX(l,t.length);if(t.match(/^[#?]+$/))return"0"===(s=JX(n,0))&&(s=""),s.length>t.length?s:wY(t.substr(0,t.length-s.length))+s;if(a=t.match(vY))return function(e,t,n){var r=parseInt(e[4],10),s=Math.round(t*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(0===a?"":""+a)+" "+(0===i?tJ(" ",e[1].length+1+e[4].length):KX(i,e[1].length)+e[2]+"/"+e[3]+GX(o,e[4].length))}(a,l,c);if(t.match(/^#+0+$/))return c+JX(l,t.length-t.indexOf("0"));if(a=t.match(yY))return s=kY(n,a[1].length).replace(/^([^\.]+)$/,"$1."+wY(a[1])).replace(/\.$/,"."+wY(a[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+tJ("0",wY(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+kY(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+fY(JX(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+jY(e,t,-n):fY(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,a[1].length)))+"."+GX(SY(n,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return jY(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qX(jY(e,t.replace(/[\\-]/g,""),n)),i=0,qX(qX(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(bY))return"("+(s=jY(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=sY(l,Math.pow(10,i)-1,!1),s=""+c," "==(d=EY("n",a[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=XX(o[2],i)).length<a[4].length&&(d=wY(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=sY(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?KX(o[1],i)+a[2]+"/"+a[3]+XX(o[2],i):tJ(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=JX(n,0),t.length<=s.length?s:wY(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,h=t.length-s.length-u;return wY(t.substr(0,u)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=SY(n,a[1].length),n<0?"-"+jY(e,t,-n):fY(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?GX(0,3-e.length):"")+e})+"."+GX(i,a[1].length);switch(t){case"###,##0.00":return jY(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=fY(JX(l,0));return"0"!==p?c+p:"";case"###,###.00":return jY(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return jY(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function _Y(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+_Y(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),!(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function AY(e,t,n){if(40===e.charCodeAt(0)&&!t.match(xY)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?AY("n",r,n):"("+AY("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return EY(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(mY,""),s=t.length-r.length;return EY(e,r,n*Math.pow(10,2*s))+tJ("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return _Y(t,n);if(36===t.charCodeAt(0))return"$"+AY(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+GX(l,t.length);if(t.match(/^[#?]+$/))return s=""+n,0===n&&(s=""),s.length>t.length?s:wY(t.substr(0,t.length-s.length))+s;if(a=t.match(vY))return function(e,t,n){return n+(0===t?"":""+t)+tJ(" ",e[1].length+2+e[4].length)}(a,l,c);if(t.match(/^#+0+$/))return c+GX(l,t.length-t.indexOf("0"));if(a=t.match(yY))return s=(s=(""+n).replace(/^([^\.]+)$/,"$1."+wY(a[1])).replace(/\.$/,"."+wY(a[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+tJ("0",wY(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+fY(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+AY(e,t,-n):fY(""+n)+"."+tJ("0",a[1].length);if(a=t.match(/^#,#*,#0/))return AY(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=qX(AY(e,t.replace(/[\\-]/g,""),n)),i=0,qX(qX(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(bY))return"("+(s=AY(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=sY(l,Math.pow(10,i)-1,!1),s=""+c," "==(d=EY("n",a[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=XX(o[2],i)).length<a[4].length&&(d=wY(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=sY(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?KX(o[1],i)+a[2]+"/"+a[3]+XX(o[2],i):tJ(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+n,t.length<=s.length?s:wY(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,h=t.length-s.length-u;return wY(t.substr(0,u)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+AY(e,t,-n):fY(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?GX(0,3-e.length):"")+e})+"."+GX(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=fY(""+l);return"0"!==p?c+p:"";default:if(t.match(/\.[0#?]*$/))return AY(e,t.slice(0,t.lastIndexOf(".")),n)+wY(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function EY(e,t,n){return(0|n)===n?AY(e,t,n):jY(e,t,n)}var TY=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function NY(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":ZX(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("上午/下午"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(TY))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var CY=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function PY(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function RY(e,t){var n=function(e){for(var t=[],n=!1,r=0,s=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(s,r-s),s=r+1}if(t[t.length]=e.substr(s),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!=typeof t)return[4,4===n.length||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var a=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,a];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var i=n[0].match(CY),o=n[1].match(CY);return PY(t,i)?[r,n[0]]:PY(t,o)?[r,n[1]]:[r,n[null!=i&&null!=o?2:1]]}return[r,a]}function MY(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:tY)[e])&&(r=n.table&&n.table[nY[e]]||tY[nY[e]]),null==r&&(r=rY[e]||"General")}if(ZX(r,0))return hY(t,n);t instanceof Date&&(t=cY(t,n.date1904));var s=RY(r,t);if(ZX(s[1]))return hY(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var s,a,i,o=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!ZX(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var p=e.charAt(++c),f="("===p||")"===p?p:"t";o[o.length]={t:f,v:p},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=aY(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=aY(t,n)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"上":var m={t:d,v:d};if(null==s&&(s=aY(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(m.v=s.H>=12?"P":"A"),m.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"PM":"AM"),m.t="T",c+=5,h="h"):"上午/下午"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"下午":"上午"),m.t="T",c+=5,h="h"):(m.t="t",++c),null==s&&"T"===m.t)return"";o[o.length]=m,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(TY)){if(null==s&&null==(s=aY(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",NY(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=s){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var g,v=0,y=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,u="h",v<1&&(v=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[c].v.match(/[Hh]/)&&(v=1),v<2&&o[c].v.match(/[Mm]/)&&(v=2),v<3&&o[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var x,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=pY(o[c].t.charCodeAt(0),o[c].v,s,y),o[c].t="t";break;case"n":case"?":for(x=c+1;null!=o[x]&&("?"===(d=o[x].t)||"D"===d||(" "===d||"t"===d)&&null!=o[x+1]&&("?"===o[x+1].t||"t"===o[x+1].t&&"/"===o[x+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[x].v||" "===o[x].v&&null!=o[x+1]&&"?"==o[x+1].t));)o[c].v+=o[x].v,o[x]={v:"",t:";"},++x;b+=o[c].v,c=x-1;break;case"G":o[c].t="t",o[c].v=hY(t,n)}var w,k,S="";if(b.length>0){40==b.charCodeAt(0)?(w=t<0&&45===b.charCodeAt(0)?-t:t,k=EY("n",b,w)):(k=EY("n",b,w=t<0&&r>1?-t:t),w<0&&o[0]&&"t"==o[0].t&&(k=k.substr(1),o[0].v="-"+o[0].v)),x=k.length-1;var j=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){j=c;break}var _=o.length;if(j===o.length&&-1===k.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(x>=o[c].v.length-1?(x-=o[c].v.length,o[c].v=k.substr(x+1,o[c].v.length)):x<0?o[c].v="":(o[c].v=k.substr(0,x+1),x=-1),o[c].t="t",_=c);x>=0&&_<o.length&&(o[_].v=k.substr(0,x+1)+o[_].v)}else if(j!==o.length&&-1===k.indexOf("E")){for(x=k.indexOf(".")-1,c=j;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(a=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")-1:o[c].v.length-1,S=o[c].v.substr(a+1);a>=0;--a)x>=0&&("0"===o[c].v.charAt(a)||"#"===o[c].v.charAt(a))&&(S=k.charAt(x--)+S);o[c].v=S,o[c].t="t",_=c}for(x>=0&&_<o.length&&(o[_].v=k.substr(0,x+1)+o[_].v),x=k.indexOf(".")+1,c=j;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===j)){for(a=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")+1:0,S=o[c].v.substr(0,a);a<o[c].v.length;++a)x<k.length&&(S+=k.charAt(x++));o[c].v=S,o[c].t="t",_=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(w=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=EY(o[c].t,o[c].v,w),o[c].t="t");var A="";for(c=0;c!==o.length;++c)null!=o[c]&&(A+=o[c].v);return A}(s[1],t,n,s[0])}function IY(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(null!=tY[n]){if(tY[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return tY[t]=e,t}function OY(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',tY=e}var zY={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},DY=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var LY=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,s="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)s[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=s[t]=n>>>8^e[255&n];var a=[];for(r=1;16!=r;++r)a[r-1]="undefined"!=typeof Int32Array?s.subarray(256*r,256*r+256):s.slice(256*r,256*r+256);return a}(t),r=n[0],s=n[1],a=n[2],i=n[3],o=n[4],l=n[5],c=n[6],d=n[7],u=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,s=0,a=e.length;s<a;)r=r>>>8^t[255&(r^e.charCodeAt(s++))];return~r},e.buf=function(e,n){for(var y=-1^n,x=e.length-15,b=0;b<x;)y=v[e[b++]^255&y]^g[e[b++]^y>>8&255]^m[e[b++]^y>>16&255]^f[e[b++]^y>>>24]^p[e[b++]]^h[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^i[e[b++]]^a[e[b++]]^s[e[b++]]^r[e[b++]]^t[e[b++]];for(x+=15;b<x;)y=y>>>8^t[255&(y^e[b++])];return~y},e.str=function(e,n){for(var r=-1^n,s=0,a=e.length,i=0,o=0;s<a;)(i=e.charCodeAt(s++))<128?r=r>>>8^t[255&(r^i)]:i<2048?r=(r=r>>>8^t[255&(r^(192|i>>6&31))])>>>8^t[255&(r^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(s++),r=(r=(r=(r=r>>>8^t[255&(r^(240|i>>8&7))])>>>8^t[255&(r^(128|i>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|i>>12&15))])>>>8^t[255&(r^(128|i>>6&63))])>>>8^t[255&(r^(128|63&i))];return~r},e}(),FY=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"==typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function a(e){CZ(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),s=e.read_shift(2),a=e.l+s,i={};if(21589===r)1&(n=e.read_shift(1))&&(i.mtime=e.read_shift(4)),s>5&&(2&n&&(i.atime=e.read_shift(4)),4&n&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=a,t[r]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=k(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(zX&&Buffer.isBuffer(e)?e.toString("binary"):k(e)).split("\r\n"),s=0,a="";for(s=0;s<r.length;++s)if(a=r[s],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),n||(n=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),a.slice(0,n.length)!=n););var i=(r[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,p=0;for(s=0;s<r.length;++s){var f=r[s];f!==o&&f!==o+"--"||(p++&&ce(d,r.slice(u,s),n),u=s)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,s,a,i,o,p=512,f=[],m=e.slice(0,512);CZ(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:p=512;break;case 4:p=4096;break;case 0:if(0==g[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==p&&CZ(m=e.slice(0,p),28);var x=e.slice(0,p);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var b=m.read_shift(4,"i");if(3===n&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);m.l+=4,a=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),i=m.read_shift(4,"i"),r=m.read_shift(4,"i"),o=m.read_shift(4,"i"),s=m.read_shift(4,"i");for(var w=-1,S=0;S<109&&!((w=m.read_shift(4,"i"))<0);++S)f[S]=w;var j=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],s=1;s<n;++s)r[s-1]=e.slice(s*t,(s+1)*t);return r[n-1]=e.slice(n*t),r}(e,p);c(o,s,j,p,f);var _=function(e,t,n,r){var s=e.length,a=[],i=[],o=[],l=[],c=r-1,d=0,u=0,h=0,p=0;for(d=0;d<s;++d)if(o=[],(h=d+t)>=s&&(h-=s),!i[h]){l=[];var f=[];for(u=h;u>=0;){f[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var m=n[Math.floor(4*u/r)];if(r<4+(p=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+r);if(!e[m])break;if(f[u=kZ(e[m],p)])break}a[h]={nodes:o,data:ZJ([l])}}return a}(j,a,f,p);_[a].name="!Directory",r>0&&i!==v&&(_[i].name="!MiniFAT"),_[f[0]].name="!FAT",_.fat_addrs=f,_.ssz=p;var A=[],E=[],T=[];!function(e,t,n,r,s,a,i,o){for(var c,h=0,p=r.length?2:0,f=t[e].data,m=0,g=0;m<f.length;m+=128){var y=f.slice(m,m+128);CZ(y,64),g=y.read_shift(2),c=eZ(y,0,g-p),r.push(c);var x={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(x.ct=u(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(x.mt=u(y,y.l-8)),x.start=y.read_shift(4,"i"),x.size=y.read_shift(4,"i"),x.size<0&&x.start<0&&(x.size=x.type=0,x.start=v,x.name=""),5===x.type?(h=x.start,s>0&&h!==v&&(t[h].name="!StreamData")):x.size>=4096?(x.storage="fat",void 0===t[x.start]&&(t[x.start]=d(n,x.start,t.fat_addrs,t.ssz)),t[x.start].name=x.name,x.content=t[x.start].data.slice(0,x.size)):(x.storage="minifat",x.size<0?x.size=0:h!==v&&x.start!==v&&t[h]&&(x.content=l(x,t[h].data,(t[o]||{}).data))),x.content&&CZ(x.content,0),a[c]=x,i.push(x)}}(a,_,j,A,r,{},E,i),function(e,t,n){for(var r=0,s=0,a=0,i=0,o=0,l=n.length,c=[],d=[];r<l;++r)c[r]=d[r]=r,t[r]=n[r];for(;o<d.length;++o)s=e[r=d[o]].L,a=e[r].R,i=e[r].C,c[r]===r&&(-1!==s&&c[s]!==s&&(c[r]=c[s]),-1!==a&&c[a]!==a&&(c[r]=c[a])),-1!==i&&(c[i]=r),-1!==s&&r!=c[r]&&(c[s]=c[r],d.lastIndexOf(s)<o&&d.push(s)),-1!==a&&r!=c[r]&&(c[a]=c[r],d.lastIndexOf(a)<o&&d.push(a));for(r=1;r<l;++r)c[r]===r&&(-1!==a&&c[a]!==a?c[r]=c[a]:-1!==s&&c[s]!==s&&(c[r]=c[s]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(E,T,A),A.shift();var N={FileIndex:E,FullPaths:T};return t&&t.raw&&(N.raw={header:x,sectors:j}),N}function l(e,t,n){for(var r=e.start,s=e.size,a=[],i=r;n&&s>0&&i>=0;)a.push(t.slice(i*g,i*g+g)),s-=g,i=kZ(n,4*i);return 0===a.length?RZ(0):$X(a).slice(0,e.size)}function c(e,t,n,r,s){var a=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=n[e],o=(r>>>2)-1;if(!i)return;for(var l=0;l<o&&(a=kZ(i,4*l))!==v;++l)s.push(a);c(kZ(i,r-4),t-1,n,r,s)}}function d(e,t,n,r,s){var a=[],i=[];s||(s=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){s[l]=!0,a[a.length]=l,i.push(e[l]);var d=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[d])break;l=kZ(e[d],c)}return{nodes:a,data:ZJ([i])}}function u(e,t){return new Date(1e3*(wZ(e,t+4)/1e7*Math.pow(2,32)+wZ(e,t)/1e7-11644473600))}function h(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="Sh33tJ5";if(FY.find(e,"/"+t))return;var n=RZ(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),p(e)}(e)}function p(e,t){h(e);for(var s=!1,a=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:a?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(o.R*o.L*o.C)&&(s=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(s=!0);break;default:s=!0}}if(s||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var p=n(u[i][0]);(a=d[p])||(u.push([p,{name:r(p).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),d[p]=!0)}for(u.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),s=0,a=0,i=Math.min(n.length,r.length);s<i;++s){if(a=n[s].length-r[s].length)return a;if(n[s]!=r[s])return n[s]<r[s]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var f=e.FileIndex[i],m=e.FullPaths[i];if(f.name=r(m).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||b,0===i)f.C=u.length>1?1:-1,f.size=0,f.type=5;else if("/"==m.slice(-1)){for(c=i+1;c<u.length&&n(e.FullPaths[c])!=m;++c);for(f.C=c>=u.length?-1:c,c=i+1;c<u.length&&n(e.FullPaths[c])!=n(m);++c);f.R=c>=u.length?-1:c,f.type=1}else n(e.FullPaths[i+1]||"")==n(m)&&(f.R=i+1),f.type=2}}}function f(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],a=e.FullPaths[0],i=a,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(a.length),(o=e.FileIndex[l]).size&&o.content&&"Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,d=zX&&Buffer.isBuffer(c)?c.toString("binary"):k(c),u=0,h=Math.min(1024,d.length),p=0,f=0;f<=h;++f)(p=d.charCodeAt(f))>=32&&p<128&&++u;var m=u>=4*h/5;s.push(r),s.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+i),s.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),s.push("Content-Type: "+ie(o,i)),s.push(""),s.push(m?le(d):oe(d))}return s.push(r+"--\r\n"),s.join("\r\n")}(e,n);if(p(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],a=[],i=RZ(1),o=n.compression?8:0,l=0,c=0,d=0,u=0,h=0,p=e.FullPaths[0],f=p,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(p.length),(m=e.FileIndex[c]).size&&m.content&&"Sh33tJ5"!=f){var y=u,x=RZ(f.length);for(d=0;d<f.length;++d)x.write_shift(1,127&f.charCodeAt(d));x=x.slice(0,x.l),g[h]=LY.buf(m.content,0);var b=m.content;8==o&&(b=S(b)),(i=RZ(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),m.mt?s(i,m.mt):i.write_shift(4,0),i.write_shift(-4,g[h]),i.write_shift(4,b.length),i.write_shift(4,m.content.length),i.write_shift(2,x.length),i.write_shift(2,0),u+=i.length,r.push(i),u+=x.length,r.push(x),u+=b.length,r.push(b),(i=RZ(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,g[h]),i.write_shift(4,b.length),i.write_shift(4,m.content.length),i.write_shift(2,x.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,y),v+=i.l,a.push(i),v+=x.length,a.push(x),++h}return i=RZ(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,h),i.write_shift(2,h),i.write_shift(4,v),i.write_shift(4,u),i.write_shift(2,0),$X([$X(r),$X(a),i])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var s=e.FileIndex[r];if(s.content){var a=s.content.length;a>0&&(a<4096?t+=a+63>>6:n+=a+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,n,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),a=RZ(r[7]<<9),i=0,o=0;for(i=0;i<8;++i)a.write_shift(1,x[i]);for(i=0;i<8;++i)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),i=0;i<3;++i)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,r[2]),a.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:v),a.write_shift(4,r[3]),a.write_shift(-4,r[1]?r[0]-1:v),a.write_shift(4,r[1]),i=0;i<109;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);if(r[1])for(o=0;o<r[1];++o){for(;i<236+127*o;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);a.write_shift(-4,o===r[1]-1?v:o+1)}var l=function(e){for(o+=e;i<o-1;++i)a.write_shift(-4,i+1);e&&(++i,a.write_shift(-4,v))};for(o=i=0,o+=r[1];i<o;++i)a.write_shift(-4,w.DIFSECT);for(o+=r[2];i<o;++i)a.write_shift(-4,w.FATSECT);l(r[3]),l(r[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(r[6]+7>>3);511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(i=0;i<r[4]<<2;++i){var h=e.FullPaths[i];if(h&&0!==h.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:v);var f=0===i&&n.root||u.name;if(d=2*(f.length+1),a.write_shift(64,f,"utf16le"),a.write_shift(2,d),a.write_shift(1,u.type),a.write_shift(1,u.color),a.write_shift(-4,u.L),a.write_shift(-4,u.R),a.write_shift(-4,u.C),u.clsid)a.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,u.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,u.start),a.write_shift(4,u.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(a.l=u.start+1<<9,zX&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(zX&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(zX)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var m,g=64,v=-2,y="d0cf11e0a1b11ae1",x=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function k(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function S(e){return m?m.deflateRawSync(e):K(e)}var j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function E(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var T="undefined"!=typeof Uint8Array,N=T?new Uint8Array(256):[],C=0;C<256;++C)N[C]=E(C);function P(e,t){var n=N[255&e];return t<=8?n>>>8-t:(n=n<<8|N[e>>8&255],t<=16?n>>>16-t:(n=n<<8|N[e>>16&255])>>>24-t)}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function M(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function I(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function z(e,t,n){var r=7&t,s=t>>>3,a=(1<<n)-1,i=e[s]>>>r;return n<8-r?i&a:(i|=e[s+1]<<8-r,n<16-r?i&a:(i|=e[s+2]<<16-r,n<24-r?i&a:(i|=e[s+3]<<24-r)&a))}function D(e,t,n){var r=7&t,s=t>>>3;return r<=5?e[s]|=(7&n)<<r:(e[s]|=n<<r&255,e[s+1]=(7&n)>>8-r),t+3}function L(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function F(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function U(e,t){var n=e.length,r=2*n>t?2*n:t+5,s=0;if(n>=t)return e;if(zX){var a=FX(r);if(e.copy)e.copy(a);else for(;s<e.length;++s)a[s]=e[s];return a}if(T){var i=new Uint8Array(r);if(i.set)i.set(e);else for(;s<n;++s)i[s]=e[s];return i}return e.length=r,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function $(e,t,n){var r=1,s=0,a=0,i=0,o=0,l=e.length,c=T?new Uint16Array(32):W(32);for(a=0;a<32;++a)c[a]=0;for(a=l;a<n;++a)e[a]=0;l=e.length;var d=T?new Uint16Array(l):W(l);for(a=0;a<l;++a)c[s=e[a]]++,r<s&&(r=s),d[a]=0;for(c[0]=0,a=1;a<=r;++a)c[a+16]=o=o+c[a-1]<<1;for(a=0;a<l;++a)0!=(o=e[a])&&(d[a]=c[o+16]++);var u=0;for(a=0;a<l;++a)if(0!=(u=e[a]))for(o=P(d[a],r)>>r-u,i=(1<<r+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|a<<4;return r}var V=T?new Uint16Array(512):W(512),H=T?new Uint16Array(32):W(32);if(!T){for(var q=0;q<512;++q)V[q]=0;for(q=0;q<32;++q)H[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);$(e,H,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);$(n,V,288)}();var G=function(){for(var e=T?new Uint8Array(32768):[],t=0,n=0;t<A.length-1;++t)for(;n<A[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=T?new Uint8Array(259):[];for(t=0,n=0;t<_.length-1;++t)for(;n<_[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),s=n+r==e.length;for(t.write_shift(1,+s),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var s=0,a=0,i=T?new Uint16Array(32768):[];a<t.length;){var o=Math.min(65535,t.length-a);if(o<10){for(7&(s=D(n,s,+!(a+o!=t.length)))&&(s+=8-(7&s)),n.l=s/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[a++];s=8*n.l}else{s=D(n,s,+!(a+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[a],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&a)>a&&(d-=32768),d<a))for(;t[d+u]==t[a+u]&&u<250;)++u;if(u>2){(c=r[u])<=22?s=F(n,s,N[c+1]>>1)-1:(F(n,s,3),F(n,s+=5,N[c-23]>>5),s+=3);var h=c<8?0:c-4>>2;h>0&&(B(n,s,u-_[c]),s+=h),c=e[a-d],s=F(n,s,N[c]>>3),s-=3;var p=c<4?0:c-2>>1;p>0&&(B(n,s,a-d-A[c]),s+=p);for(var f=0;f<u;++f)i[l]=32767&a,l=32767&(l<<5^t[a]),++a;o-=u-1}else c<=143?c+=48:s=L(n,s,1),s=F(n,s,N[c]),i[l]=32767&a,++a}s=F(n,s,0)-1}}return n.l=(s+7)/8|0,n.l}(t,n)}}();function K(e){var t=RZ(50+Math.floor(1.1*e.length)),n=G(e,t);return t.slice(0,n)}var X=T?new Uint16Array(32768):W(32768),Y=T?new Uint16Array(32768):W(32768),J=T?new Uint16Array(128):W(128),Z=1,Q=1;function ee(e,t){var n=I(e,t)+257,r=I(e,t+=5)+1,s=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var a=0,i=T?new Uint8Array(19):W(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=T?new Uint8Array(8):W(8),d=T?new Uint8Array(8):W(8),u=i.length,h=0;h<s;++h)i[j[h]]=a=M(e,t),l<a&&(l=a),c[a]++,t+=3;var p=0;for(c[0]=0,h=1;h<=l;++h)d[h]=p=p+c[h-1]<<1;for(h=0;h<u;++h)0!=(p=i[h])&&(o[h]=d[p]++);var f=0;for(h=0;h<u;++h)if(0!=(f=i[h])){p=N[o[h]]>>8-f;for(var m=(1<<7-f)-1;m>=0;--m)J[p|m<<f]=7&f|h<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(p=J[O(e,t)]),p>>>=3){case 16:for(a=3+R(e,t),t+=2,p=g[g.length-1];a-- >0;)g.push(p);break;case 17:for(a=3+M(e,t),t+=3;a-- >0;)g.push(0);break;case 18:for(a=11+O(e,t),t+=7;a-- >0;)g.push(0);break;default:g.push(p),l<p&&(l=p)}var v=g.slice(0,n),y=g.slice(n);for(h=n;h<286;++h)v[h]=0;for(h=r;h<30;++h)y[h]=0;return Z=$(v,X,286),Q=$(y,Y,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[LX(t),2];for(var n=0,r=0,s=FX(t||1<<18),a=0,i=s.length>>>0,o=0,l=0;!(1&r);)if(r=M(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=Z,l=Q);;){!t&&i<a+32767&&(i=(s=U(s,a+32767)).length);var c=z(e,n,o),d=r>>>1==1?V[c]:X[c];if(n+=15&d,(d>>>=4)>>>8&255){if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=a+_[d];u>0&&(h+=z(e,n,u),n+=u),c=z(e,n,l),n+=15&(d=r>>>1==1?H[c]:Y[c]);var p=(d>>>=4)<4?0:d-2>>1,f=A[d];for(p>0&&(f+=z(e,n,p),n+=p),!t&&i<h&&(i=(s=U(s,h+100)).length);a<h;)s[a]=s[a-f],++a}else s[a++]=d}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&i<a+m&&(i=(s=U(s,a+m)).length);m-- >0;)s[a++]=e[n>>>3],n+=8}return t?[s,n+7>>>3]:[s.slice(0,a),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!=typeof console&&console.error(t)}function re(e,t){var n=e;CZ(n,0);var r={FileIndex:[],FullPaths:[]};h(r,{root:t.root});for(var s=n.length-4;(80!=n[s]||75!=n[s+1]||5!=n[s+2]||6!=n[s+3])&&s>=0;)--s;n.l=s+4,n.l+=4;var i=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,s=0;s<i;++s){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),d=n.read_shift(2),u=n.read_shift(2),p=n.read_shift(2);n.l+=8;var f=n.read_shift(4),m=a(n.slice(n.l+d,n.l+d+u));n.l+=d+u+p;var g=n.l;n.l=f+4,se(n,l,c,r,m),n.l=g}return r}function se(e,t,n,r,s){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,s=31&n,a=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(a-1),r.setDate(s);var i=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(i<<1),r}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),p="",f=0;f<u;++f)p+=String.fromCharCode(e[e.l++]);if(h){var g=a(e.slice(e.l,e.l+h));(g[21589]||{}).mt&&(l=g[21589].mt),((s||{})[21589]||{}).mt&&(l=s[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(o){case 8:v=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var y=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&ne(y,"Bad compressed size: "+t+" != "+c),d!=n&&ne(y,"Bad uncompressed size: "+n+" != "+d),de(r,p,v,{unsafe:!0,mt:l})}var ae={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&ae[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&ae[r[1]]?ae[r[1]]:"application/octet-stream"}function oe(e){for(var t=IX(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<r.length;++s){var a=r[s];if(0!=a.length)for(var i=0;i<a.length;){var o=76,l=a.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=a.slice(i,i+o),(i+=o)<a.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,s="",a="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++o,a.toLowerCase()){case"base64":r=BX(OX(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return BX(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var d=de(e,s.slice(n.length),r,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,n,s){var a=s&&s.unsafe;a||h(e);var i=!a&&FY.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:r(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),a||FY.utils.cfb_gc(e)}return i.content=n,i.size=n?n.length:0,s&&(s.CLSID&&(i.clsid=s.CLSID),s.mt&&(i.mt=s.mt),s.ct&&(i.ct=s.ct)),i}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),s=!1;47===t.charCodeAt(0)?(s=!0,t=n[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var a=t.toUpperCase(),i=!0===s?n.indexOf(a):r.indexOf(a);if(-1!==i)return e.FileIndex[i];var o=!a.match(HX);for(a=a.replace(VX,""),o&&(a=a.replace(HX,"!")),i=0;i<n.length;++i){if((o?n[i].replace(HX,"!"):n[i]).replace(VX,"")==a)return e.FileIndex[i];if((o?r[i].replace(HX,"!"):r[i]).replace(VX,"")==a)return e.FileIndex[i]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||zX&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return i(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(BX(OX(t)),n);case"binary":return o(BX(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=f(t,n);switch(n&&n.type||"buffer"){case"file":return i(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:k(r);case"base64":return IX("string"==typeof r?r:k(r));case"buffer":if(zX)return Buffer.isBuffer(r)?r:DX(r);case"array":return"string"==typeof r?BX(r):r}return r},t.writeFile=function(t,n,r){i();var s=f(t,r);e.writeFileSync(n,s)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var n=FY.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){h(e);var s=FY.find(e,t);if(s)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==s)return e.FileIndex[a].name=r(n),e.FullPaths[a]=n,!0;return!1},cfb_gc:function(e){p(e,!0)},ReadShift:jZ,CheckField:NZ,prep_blob:CZ,bconcat:$X,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(Vne){console.error("cannot use native zlib: "+(Vne.message||Vne))}},_deflateRaw:K,_inflateRaw:te,consts:w},t}();function BY(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function UY(e){for(var t=[],n=BY(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}var WY=new Date(1899,11,30,0,0,0);function $Y(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(WY.getTime()+6e4*(e.getTimezoneOffset()-WY.getTimezoneOffset())))/864e5}var VY=new Date,HY=WY.getTime()+6e4*(VY.getTimezoneOffset()-WY.getTimezoneOffset()),qY=VY.getTimezoneOffset();function GY(e){var t=new Date;return t.setTime(24*e*60*60*1e3+HY),t.getTimezoneOffset()!==qY&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-qY)),t}function KY(e){var t=0,n=0,r=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(n=1,a>3&&(r=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":n*=24;case"H":n*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");n*=60}t+=n*parseInt(s[a],10)}return t}var XY=new Date("2017-02-19T19:06:09.000Z"),YY=isNaN(XY.getFullYear())?new Date("2/19/17"):XY,JY=2017==YY.getFullYear();function ZY(e,t){var n=new Date(e);if(JY)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==YY.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function QY(e,t){if(zX&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return LJ(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return LJ(TX(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!=typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return LJ(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return LJ(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"€":"","‚":"","ƒ":"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"","Š":"","‹":"","Œ":"","Ž":"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"","š":"","›":"","œ":"","ž":"","Ÿ":""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(e){return n[e]||e})}catch(Vne){}for(var r=[],s=0;s!=e.length;++s)r.push(String.fromCharCode(e[s]));return r.join("")}function eJ(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=eJ(e[n]));return t}function tJ(e,t){for(var n="";n.length<t;)n+=e;return n}function nJ(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var rJ=["january","february","march","april","may","june","july","august","september","october","november","december"];function sJ(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return n;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==rJ.indexOf(i))return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}var aJ=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,n,r){if(e||"string"==typeof n)return t.split(n);for(var s=t.split(n),a=[s[0]],i=1;i<s.length;++i)a.push(r),a.push(s[i]);return a}}();function iJ(e){return e?e.content&&e.type?QY(e.content,!0):e.data?CX(e.data):e.asNodeBuffer&&zX?CX(e.asNodeBuffer().toString("binary")):e.asBinary?CX(e.asBinary()):e._data&&e._data.getContent?CX(QY(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function oJ(e){if(!e)return null;if(e.data)return EX(e.data);if(e.asNodeBuffer&&zX)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?EX(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function lJ(e,t){for(var n=e.FullPaths||BY(e.files),r=t.toLowerCase().replace(/[\/]/g,"\\"),s=r.replace(/\\/g,"/"),a=0;a<n.length;++a){var i=n[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||s==i)return e.files?e.files[n[a]]:e.FileIndex[a]}return null}function cJ(e,t){var n=lJ(e,t);if(null==n)throw new Error("Cannot find file "+t+" in zip");return n}function dJ(e,t,n){if(!n)return(r=cJ(e,t))&&".bin"===r.name.slice(-4)?oJ(r):iJ(r);var r;if(!t)return null;try{return dJ(e,t)}catch(Vne){return null}}function uJ(e,t,n){if(!n)return iJ(cJ(e,t));if(!t)return null;try{return uJ(e,t)}catch(Vne){return null}}function hJ(e,t,n){if(!n)return oJ(cJ(e,t));if(!t)return null;try{return hJ(e,t)}catch(Vne){return null}}function pJ(e){for(var t=e.FullPaths||BY(e.files),n=[],r=0;r<t.length;++r)"/"!=t[r].slice(-1)&&n.push(t[r].replace(/^Root Entry[\/]/,""));return n.sort()}function fJ(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=zX?DX(n):function(e){for(var t=[],n=0,r=e.length+250,s=LX(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++a);s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(3&i)<<4,s[n++]=128|63&o}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|63&i;n>r&&(t.push(s.slice(0,n)),n=0,s=LX(65535),r=65530)}return t.push(s.slice(0,n)),$X(t)}(n),FY.utils.cfb_add(e,t,r);FY.utils.cfb_add(e,t,n)}else e.file(t,n)}function mJ(e,t){switch(t.type){case"base64":return FY.read(e,{type:"base64"});case"binary":return FY.read(e,{type:"binary"});case"buffer":case"array":return FY.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function gJ(e,t){if("/"==e.charAt(0))return e.slice(1);var n=t.split("/");"/"!=t.slice(-1)&&n.pop();for(var r=e.split("/");0!==r.length;){var s=r.shift();".."===s?n.pop():"."!==s&&n.push(s)}return n.join("/")}var vJ='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',yJ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,xJ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,bJ=vJ.match(xJ)?xJ:/<[^>]*>/g,wJ=/<\w*:/,kJ=/<(\/?)\w+:/;function SJ(e,t,n){for(var r={},s=0,a=0;s!==e.length&&(32!==(a=e.charCodeAt(s))&&10!==a&&13!==a);++s);if(t||(r[0]=e.slice(0,s)),s===e.length)return r;var i=e.match(yJ),o=0,l="",c=0,d="",u="",h=1;if(i)for(c=0;c!=i.length;++c){for(u=i[c],a=0;a!=u.length&&61!==u.charCodeAt(a);++a);for(d=u.slice(0,a).trim();32==u.charCodeAt(a+1);)++a;for(h=34==(s=u.charCodeAt(a+1))||39==s?1:0,l=u.slice(a+1+h,u.length-h),o=0;o!=d.length&&58!==d.charCodeAt(o);++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,n||(r[d.toLowerCase()]=l);else{var p=(5===o&&"xmlns"===d.slice(0,5)?"xmlns":"")+d.slice(o+1);if(r[p]&&"ext"==d.slice(o-3,o))continue;r[p]=l,n||(r[p.toLowerCase()]=l)}}return r}function jJ(e){return e.replace(kJ,"<$1")}var _J={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},AJ=UY(_J),EJ=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function n(r){var s=r+"",a=s.indexOf("<![CDATA[");if(-1==a)return s.replace(e,function(e,t){return _J[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e}).replace(t,function(e,t){return String.fromCharCode(parseInt(t,16))});var i=s.indexOf("]]>");return n(s.slice(0,a))+s.slice(a+9,i)+n(s.slice(i+3))}}(),TJ=/[&<>'"]/g,NJ=/[\u0000-\u001f]/g;function CJ(e){return(e+"").replace(TJ,function(e){return AJ[e]}).replace(/\n/g,"<br/>").replace(NJ,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}var PJ=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(n){return n.replace(e,t)}}();function RJ(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function MJ(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(s=e.charCodeAt(n++),r>191&&r<224?(i=(31&r)<<6,i|=63&s,t+=String.fromCharCode(i)):(a=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a):(o=((7&r)<<18|(63&s)<<12|(63&a)<<6|63&(i=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function IJ(e){var t,n,r,s=LX(2*e.length),a=1,i=0,o=0;for(n=0;n<e.length;n+=a)a=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),a=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),a=3):(a=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(s[i++]=255&o,s[i++]=o>>>8,o=0),s[i++]=t%256,s[i++]=t>>>8;return s.slice(0,i).toString("ucs2")}function OJ(e){return DX(e,"binary").toString("utf8")}var zJ="foo bar bazâð£",DJ=zX&&(OJ(zJ)==MJ(zJ)&&OJ||IJ(zJ)==MJ(zJ)&&IJ)||MJ,LJ=zX?function(e){return DX(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,s=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,s=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},FJ=function(){var e={};return function(t,n){var r=t+"|"+(n||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}}(),BJ=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}(),UJ=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),WJ=/<\/?(?:vt:)?variant>/g,$J=/<(?:vt:)([^>]*)>([\s\S]*)</;function VJ(e,t){var n=SJ(e),r=e.match(UJ(n.baseType))||[],s=[];if(r.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return s}return r.forEach(function(e){var t=e.replace(WJ,"").match($J);t&&s.push({v:DJ(t[2]),t:t[1]})}),s}var HJ=/(^\s|\s$|\n)/;function qJ(e,t,n){return"<"+e+(null!=n?function(e){return BY(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}(n):"")+(null!=t?(t.match(HJ)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function GJ(e){if(zX&&Buffer.isBuffer(e))return e.toString("utf8");if("string"==typeof e)return e;if("undefined"!=typeof Uint8Array&&e instanceof Uint8Array)return DJ(UX(WX(e)));throw new Error("Bad input format: expected Buffer or string")}var KJ=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,XJ="http://schemas.openxmlformats.org/package/2006/content-types",YJ=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];var JJ=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,s=e[0][n].length;r<s;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},ZJ=zX?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:DX(e)})):JJ(e)}:JJ,QJ=function(e,t,n){for(var r=[],s=t;s<n;s+=2)r.push(String.fromCharCode(xZ(e,s)));return r.join("").replace(VX,"")},eZ=zX?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(VX,""):QJ(e,t,n)}:QJ,tZ=function(e,t,n){for(var r=[],s=t;s<t+n;++s)r.push(("0"+e[s].toString(16)).slice(-2));return r.join("")},nZ=zX?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):tZ(e,t,n)}:tZ,rZ=function(e,t,n){for(var r=[],s=t;s<n;s++)r.push(String.fromCharCode(yZ(e,s)));return r.join("")},sZ=zX?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):rZ(e,t,n)}:rZ,aZ=function(e,t){var n=wZ(e,t);return n>0?sZ(e,t+4,t+4+n-1):""},iZ=aZ,oZ=function(e,t){var n=wZ(e,t);return n>0?sZ(e,t+4,t+4+n-1):""},lZ=oZ,cZ=function(e,t){var n=2*wZ(e,t);return n>0?sZ(e,t+4,t+4+n-1):""},dZ=cZ,uZ=function(e,t){var n=wZ(e,t);return n>0?eZ(e,t+4,t+4+n):""},hZ=uZ,pZ=function(e,t){var n=wZ(e,t);return n>0?sZ(e,t+4,t+4+n):""},fZ=pZ,mZ=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],a=5;a>=0;--a)s=256*s+e[t+a];return 2047==r?0==s?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}(e,t)},gZ=mZ,vZ=function(e){return Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array};zX&&(iZ=function(e,t){if(!Buffer.isBuffer(e))return aZ(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},lZ=function(e,t){if(!Buffer.isBuffer(e))return oZ(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},dZ=function(e,t){if(!Buffer.isBuffer(e))return cZ(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},hZ=function(e,t){if(!Buffer.isBuffer(e))return uZ(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},fZ=function(e,t){if(!Buffer.isBuffer(e))return pZ(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},gZ=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):mZ(e,t)},vZ=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array});var yZ=function(e,t){return e[t]},xZ=function(e,t){return 256*e[t+1]+e[t]},bZ=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},wZ=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},kZ=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},SZ=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function jZ(e,t){var n,r,s,a,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,zX&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(xZ(this,o)),o+=2;e*=2;break;case"utf8":l=sZ(this,this.l,this.l+e);break;case"utf16le":e*=2,l=eZ(this,this.l,this.l+e);break;case"wstr":return jZ.call(this,e,"dbcs");case"lpstr-ansi":l=iZ(this,this.l),e=4+wZ(this,this.l);break;case"lpstr-cp":l=lZ(this,this.l),e=4+wZ(this,this.l);break;case"lpwstr":l=dZ(this,this.l),e=4+2*wZ(this,this.l);break;case"lpp4":e=4+wZ(this,this.l),l=hZ(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+wZ(this,this.l),l=fZ(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(s=yZ(this,this.l+e++));)c.push(PX(s));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(s=xZ(this,this.l+e));)c.push(PX(s)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=yZ(this,o),this.l=o+1,a=jZ.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(PX(xZ(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=yZ(this,o),this.l=o+1,a=jZ.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(PX(yZ(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=yZ(this,this.l),this.l++,n;case 2:return n=("i"===t?bZ:xZ)(this,this.l),this.l+=2,n;case 4:case-4:return"i"!==t&&128&this[this.l+3]?(r=wZ(this,this.l),this.l+=4,r):(n=(e>0?kZ:SZ)(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return r=8==e?gZ(this,this.l):gZ([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=nZ(this,this.l,e)}}return this.l+=e,l}var _Z=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},AZ=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},EZ=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function TZ(e,t,n){var r=0,s=0;if("dbcs"===n){for(s=0;s!=t.length;++s)EZ(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if("sbcs"===n){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);r=t.length}else{if("hex"===n){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=255&i,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,_Z(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=r?-t:t;isFinite(i)?0==i?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[n+o]=255&a;e[n+6]=(15&s)<<4|15&a,e[n+7]=s>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,AZ(this,t,this.l)}}return this.l+=r,this}function NZ(e,t){var n=nZ(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function CZ(e,t){e.l=t,e.read_shift=jZ,e.chk=NZ,e.write_shift=TZ}function PZ(e,t){e.l+=t}function RZ(e){var t=LX(e);return CZ(t,0),t}function MZ(e,t,n){if(e){var r,s,a;CZ(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=B4[o]||B4[65535];for(a=127&(r=e.read_shift(1)),s=1;s<4&&128&r;++s)a+=(127&(r=e.read_shift(1)))<<7*s;l=e.l+a;var d=c.f&&c.f(e,a,n);if(e.l=l,t(d,c,o))return}}}function IZ(){var e=[],t=zX?256:2048,n=function(e){var t=RZ(e);return CZ(t,0),t},r=n(t),s=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},a=function(e){return r&&e<r.length-r.l?r:(s(),r=n(Math.max(e+1,t)))};return{next:a,push:function(e){s(),null==(r=e).l&&(r.l=r.length),a(t)},end:function(){return s(),$X(e)},_bufs:e}}function OZ(e,t,n){var r=eJ(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function zZ(e,t,n){var r=eJ(e);return r.s=OZ(r.s,t.s,n),r.e=OZ(r.e,t.s,n),r}function DZ(e,t){if(e.cRel&&e.c<0)for(e=eJ(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=eJ(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=VZ(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function LZ(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?DZ(e.s,t.biff)+":"+DZ(e.e,t.biff):(e.s.rRel?"":"$")+BZ(e.s.r)+":"+(e.e.rRel?"":"$")+BZ(e.e.r):(e.s.cRel?"":"$")+WZ(e.s.c)+":"+(e.e.cRel?"":"$")+WZ(e.e.c)}function FZ(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function BZ(e){return""+(e+1)}function UZ(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function WZ(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function $Z(e){for(var t=0,n=0,r=0;r<e.length;++r){var s=e.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:t-1}}function VZ(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function HZ(e){var t=e.indexOf(":");return-1==t?{s:$Z(e),e:$Z(e)}:{s:$Z(e.slice(0,t)),e:$Z(e.slice(t+1))}}function qZ(e,t){return void 0===t||"number"==typeof t?qZ(e.s,e.e):("string"!=typeof e&&(e=VZ(e)),"string"!=typeof t&&(t=VZ(t)),e==t?e:e+":"+t)}function GZ(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=e.length;for(n=0;r<a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.s.c=--n,n=0;r<a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(t.s.r=--n,r===a||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.e.c=--n,n=0;r!=a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return t.e.r=--n,t}function KZ(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=MY(e.z,n?$Y(t):t)}catch(Vne){}try{return e.w=MY((e.XF||{}).numFmtId||(n?14:0),n?$Y(t):t)}catch(Vne){return""+t}}function XZ(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?kQ[e.v]||e.v:KZ(e,null==t?e.v:t))}function YZ(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function JZ(e,t,n){var r=n||{},s=e?Array.isArray(e):r.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&null!=r.origin){if("number"==typeof r.origin)i=r.origin;else{var l="string"==typeof r.origin?$Z(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=GZ(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if(void 0!==t[u][h]){var p={v:t[u][h]},f=i+u,m=o+h;if(c.s.r>f&&(c.s.r=f),c.s.c>m&&(c.s.c=m),c.e.r<f&&(c.e.r=f),c.e.c<m&&(c.e.c=m),!t[u][h]||"object"!=typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(p.v)&&(p.f=t[u][h][1],p.v=p.v[0]),null===p.v)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else{if(!r.sheetStubs)continue;p.t="z"}else"number"==typeof p.v?p.t="n":"boolean"==typeof p.v?p.t="b":p.v instanceof Date?(p.z=r.dateNF||tY[14],r.cellDates?(p.t="d",p.w=MY(p.z,$Y(p.v))):(p.t="n",p.v=$Y(p.v),p.w=MY(p.z,p.v))):p.t="s";else p=t[u][h];if(s)a[f]||(a[f]=[]),a[f][m]&&a[f][m].z&&(p.z=a[f][m].z),a[f][m]=p;else{var g=VZ({c:m,r:f});a[g]&&a[g].z&&(p.z=a[g].z),a[g]=p}}}return c.s.c<1e7&&(a["!ref"]=qZ(c)),a}function ZZ(e,t){return JZ(null,e,t)}function QZ(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function eQ(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function tQ(e,t){var n=e.l,r=e.read_shift(1),s=QZ(e),a=[],i={t:s,h:s};if(1&r){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(eQ(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=n+t,i}var nQ=tQ;function rQ(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function sQ(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var aQ=QZ;function iQ(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}var oQ=QZ,lQ=iQ;function cQ(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var s=0===r?gZ([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):kZ(t,0)>>2;return n?s/100:s}function dQ(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var uQ=dQ;function hQ(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function pQ(e,t){var n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var fQ=80,mQ=[fQ,81],gQ={1:{n:"CodePage",t:2},2:{n:"Category",t:fQ},3:{n:"PresentationFormat",t:fQ},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:fQ},15:{n:"Company",t:fQ},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:fQ},27:{n:"ContentStatus",t:fQ},28:{n:"Language",t:fQ},29:{n:"Version",t:fQ},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},vQ={1:{n:"CodePage",t:2},2:{n:"Title",t:fQ},3:{n:"Subject",t:fQ},4:{n:"Author",t:fQ},5:{n:"Keywords",t:fQ},6:{n:"Comments",t:fQ},7:{n:"Template",t:fQ},8:{n:"LastAuthor",t:fQ},9:{n:"RevNumber",t:fQ},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:fQ},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},yQ={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},xQ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function bQ(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var wQ=eJ(bQ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),kQ={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},SQ={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},jQ={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};var _Q={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function AQ(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function EQ(e,t){var n={"!id":{}};if(!e)return n;"/"!==t.charAt(0)&&(t="/"+t);var r={};return(e.match(bJ)||[]).forEach(function(e){var s=SJ(e);if("<Relationship"===s[0]){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var i="External"===s.TargetMode?s.Target:gJ(s.Target,t);n[i]=a,r[s.Id]=a}}),n["!id"]=r,n}var TQ=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],NQ=function(){for(var e=new Array(TQ.length),t=0;t<TQ.length;++t){var n=TQ[t],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e}();function CQ(e){var t={};e=DJ(e);for(var n=0;n<TQ.length;++n){var r=TQ[n],s=e.match(NQ[n]);null!=s&&s.length>0&&(t[r[1]]=EJ(s[1])),"date"===r[2]&&t[r[1]]&&(t[r[1]]=ZY(t[r[1]]))}return t}var PQ=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function RQ(e,t,n,r){var s=[];if("string"==typeof e)s=VJ(e,r);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(e){return{v:e}}));var i="string"==typeof t?VJ(t,r).map(function(e){return e.v}):t,o=0,l=0;if(i.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l)}o+=l}}var MQ=/<[^>]+>[^<]*/g;var IQ,OQ={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function zQ(e,t,n){IQ||(IQ=UY(OQ)),e[t=IQ[t]||t]=n}function DQ(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date(1e3*(n/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function LQ(e,t,n){var r=e.l,s=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-r&3;)++e.l;return s}function FQ(e,t,n){var r=e.read_shift(0,"lpwstr");return n&&(e.l+=4-(r.length+1&3)&3),r}function BQ(e,t,n){return 31===t?FQ(e):LQ(e,0,n)}function UQ(e,t,n){return BQ(e,t,!1===n?0:4)}function WQ(e){var t=e.l,n=HQ(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[n,HQ(e,3)]}function $Q(e,t){for(var n=e.read_shift(4),r={},s=0;s!=n;++s){var a=e.read_shift(4),i=e.read_shift(4);r[a]=e.read_shift(i,1200===t?"utf16le":"utf8").replace(VX,"").replace(HX,"!"),1200===t&&i%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),r}function VQ(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),n}function HQ(e,t,n){var r,s=e.read_shift(2),a=n||{};if(e.l+=2,12!==t&&s!==t&&-1===mQ.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&s)))throw new Error("Expected type "+t+" saw "+s);switch(12===t?s:t){case 2:return r=e.read_shift(2,"i"),a.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return r=e.read_shift(4);case 30:return LQ(e,0,4).replace(VX,"");case 31:return FQ(e);case 64:return DQ(e);case 65:return VQ(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return UQ(e,s,!a.raw).replace(VX,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return BQ(e,t,0)}(e,s).replace(VX,"");case 4108:return function(e){for(var t=e.read_shift(4),n=[],r=0;r<t/2;++r)n.push(WQ(e));return n}(e);case 4126:case 4127:return 4127==s?function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r){var s=e.l;n[r]=e.read_shift(0,"lpwstr").replace(VX,""),e.l-s&2&&(e.l+=2)}return n}(e):function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r)n[r]=e.read_shift(0,"lpstr-cp").replace(VX,"");return n}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function qQ(e,t){var n=e.l,r=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,c={};for(i=0;i!=s;++i){var d=e.read_shift(4),u=e.read_shift(4);a[i]=[d,u+n]}a.sort(function(e,t){return e[1]-t[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var p=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,p=!1);break;case 80:case 4108:e.l<=a[i][1]&&(e.l=a[i][1],p=!1)}if((!t||0==i)&&e.l<=a[i][1]&&(p=!1,e.l=a[i][1]),p)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var f=t[a[i][0]];if(h[f.n]=HQ(e,f.t,{raw:!0}),"version"===f.p&&(h[f.n]=String(h[f.n]>>16)+"."+("0000"+String(65535&h[f.n])).slice(-4)),"CodePage"==f.n)switch(h[f.n]){case 0:h[f.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_X(o=h[f.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[f.n])}}else if(1===a[i][0]){if(o=h.CodePage=HQ(e,2),_X(o),-1!==l){var m=e.l;e.l=a[l][1],c=$Q(e,o),e.l=m}}else if(0===a[i][0]){if(0===o){l=i,e.l=a[i+1][1];continue}c=$Q(e,o)}else{var g,v=c[a[i][0]];switch(e[e.l]){case 65:e.l+=4,g=VQ(e);break;case 30:case 31:e.l+=4,g=UQ(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=XQ(e,4);break;case 64:e.l+=4,g=ZY(DQ(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=g}}return e.l=n+r,h}function GQ(e,t,n){var r=e.content;if(!r)return{};CZ(r,0);var s,a,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),d=r.read_shift(16);if(d!==FY.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(1!==(s=r.read_shift(4))&&2!==s)throw new Error("Unrecognized #Sets: "+s);if(a=r.read_shift(16),o=r.read_shift(4),1===s&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);2===s&&(i=r.read_shift(16),l=r.read_shift(4));var u,h=qQ(r,t),p={SystemIdentifier:c};for(var f in h)p[f]=h[f];if(p.FMTID=a,1===s)return p;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);try{u=qQ(r,null)}catch(Vne){}for(f in u)p[f]=u[f];return p.FMTID=[a,i],p}function KQ(e,t){return e.read_shift(t),null}function XQ(e,t){return 1===e.read_shift(t)}function YQ(e){return e.read_shift(2,"u")}function JQ(e,t){return function(e,t,n){for(var r=[],s=e.l+t;e.l<s;)r.push(n(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return r}(e,t,YQ)}function ZQ(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";(n&&n.biff,n&&8!=n.biff)?12==n.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");return n.biff>=2&&n.biff<=5&&(s="cpstr"),r?e.read_shift(r,s):""}function QQ(e){var t,n=e.read_shift(2),r=e.read_shift(1),s=4&r,a=8&r,i=1+(1&r),o=0,l={};a&&(o=e.read_shift(2)),s&&(t=e.read_shift(4));var c=2==i?"dbcs-cont":"sbcs-cont",d=0===n?"":e.read_shift(n,c);return a&&(e.l+=4*o),s&&(e.l+=t),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function e0(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function t0(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):e0(e,r,n)}function n0(e,t,n){if(n.biff>5)return t0(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function r0(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),n=e.l,r=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(r=!0),e.l=n);var s=e.read_shift((r?t-24:t)>>1,"utf16le").replace(VX,"");return r&&(e.l+=24),s}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return n+r.replace(/\\/g,"/");var s=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return n+e.read_shift(s>>1,"utf16le").replace(VX,"")}(e);default:throw new Error("Unsupported Moniker "+n)}}function s0(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(VX,""):""}function a0(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function i0(e,t){var n=a0(e);return n[3]=0,n}function o0(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function l0(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function c0(e){return[e.read_shift(2),cQ(e)]}function d0(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function u0(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:n}}}var h0=u0;function p0(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[n,t,r]}function f0(e){e.l+=2,e.l+=e.read_shift(2)}var m0={0:f0,4:f0,5:f0,6:f0,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:f0,9:f0,10:f0,11:f0,12:f0,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:f0,15:f0,16:f0,17:f0,18:f0,19:f0,20:f0,21:p0};function g0(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),(t-=2)>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function v0(e,t,n){var r=0;n&&2==n.biff||(r=e.read_shift(2));var s=e.read_shift(2);return n&&2==n.biff&&(r=1-(s>>15),s&=32767),[{Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3},s]}var y0=n0;function x0(e,t,n){var r=e.l+t,s=8!=n.biff&&n.biff?2:4,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=r,{s:{r:a,c:o},e:{r:i,c:l}}}function b0(e,t,n){var r=o0(e);2!=n.biff&&9!=t||++e.l;var s=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return r.val=s,r.t=!0===s||!1===s?"b":"e",r}var w0=function(e,t,n){return 0===t?"":n0(e,0,n)};function k0(e,t,n){var r,s=e.read_shift(2),a={fBuiltIn:1&s,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return 14849===n.sbcch&&(r=function(e,t,n){e.l+=4,t-=4;var r=e.l+t,s=ZQ(e,0,n),a=e.read_shift(2);if(a!==(r-=e.l))throw new Error("Malformed AddinUdf: padding = "+r+" != "+a);return e.l+=a,s}(e,t-2,n)),a.body=r||e.read_shift(t-2),"string"==typeof r&&(a.Name=r),a}var S0=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function j0(e,t,n){var r=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(n&&2==n.biff?1:2),l=0;(!n||n.biff>=5)&&(5!=n.biff&&(e.l+=2),l=e.read_shift(2),5==n.biff&&(e.l+=2),e.l+=4);var c=e0(e,i,n);32&s&&(c=S0[c.charCodeAt(0)]);var d=r-e.l;n&&2==n.biff&&--d;var u=r!=e.l&&0!==o&&d>0?function(e,t,n,r){var s,a=e.l+t,i=h2(e,r,n);a!==e.l&&(s=u2(e,a-e.l,i,n));return[i,s]}(e,d,n,o):[];return{chKey:a,Name:c,itab:l,rgce:u}}function _0(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=ZQ(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],s=e.l+t,a=e.read_shift(n.biff>8?4:2);0!==a--;)r.push(l0(e,n.biff,n));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return r}function A0(e,t,n){var r=h0(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[r,y2(e,t,n)]}var E0={8:function(e,t){var n=e.l+t;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=n,{fmt:r}}};function T0(e,t,n){if(!n.cellStyles)return PZ(e,t);var r=n&&n.biff>=12?4:2,s=e.read_shift(r),a=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var N0=o0,C0=JQ,P0=t0;var R0=[2,3,48,49,131,139,140,245],M0=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=UY({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var s=ZZ(function(t,n){var r=[],s=LX(1);switch(n.type){case"base64":s=BX(OX(t));break;case"binary":s=BX(t);break;case"buffer":case"array":s=t}CZ(s,0);var a=s.read_shift(1),i=!!(136&a),o=!1,l=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,d=521;2==a&&(c=s.read_shift(2)),s.l+=3,2!=a&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(d=s.read_shift(2));var u=s.read_shift(2),h=n.codepage||1252;2!=a&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(h=e[s[s.l]]),s.l+=1,s.l+=2),l&&(s.l+=36);for(var p=[],f={},m=Math.min(s.length,2==a?521:d-10-(o?264:0)),g=l?32:11;s.l<m&&13!=s[s.l];)switch((f={}).name=NX.utils.decode(h,s.slice(s.l,s.l+g)).replace(/[\u0000\r\n].*$/g,""),s.l+=g,f.type=String.fromCharCode(s.read_shift(1)),2==a||l||(f.offset=s.read_shift(4)),f.len=s.read_shift(1),2==a&&(f.offset=s.read_shift(2)),f.dec=s.read_shift(1),f.name.length&&p.push(f),2!=a&&(s.l+=l?13:14),f.type){case"B":o&&8==f.len||!n.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==s[s.l]&&(s.l=d-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=d;var v=0,y=0;for(r[0]=[],y=0;y!=p.length;++y)r[0][y]=p[y].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,r[++v]=[],y=0,y=0;y!=p.length;++y){var x=s.slice(s.l,s.l+p[y].len);s.l+=p[y].len,CZ(x,0);var b=NX.utils.decode(h,x);switch(p[y].type){case"C":b.trim().length&&(r[v][y]=b.replace(/\s+$/,""));break;case"D":8===b.length?r[v][y]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):r[v][y]=b;break;case"F":r[v][y]=parseFloat(b.trim());break;case"+":case"I":r[v][y]=l?2147483648^x.read_shift(-4,"i"):x.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":r[v][y]=!0;break;case"N":case"F":r[v][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));r[v][y]="##MEMO##"+(l?parseInt(b.trim(),10):x.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(r[v][y]=+b||0);break;case"@":r[v][y]=new Date(x.read_shift(-8,"f")-621356832e5);break;case"T":r[v][y]=new Date(864e5*(x.read_shift(4)-2440588)+x.read_shift(4));break;case"Y":r[v][y]=x.read_shift(4,"i")/1e4+x.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[v][y]=-x.read_shift(-8,"f");break;case"B":if(o&&8==p[y].len){r[v][y]=x.read_shift(8,"f");break}case"G":case"P":x.l+=p[y].len;break;case"0":if("_NullFlags"===p[y].name)break;default:throw new Error("DBF Unsupported data type "+p[y].type)}}else s.l+=u;if(2!=a&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=p,r}(t,r),r);return s["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,s}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return YZ(n(e,t),t)}catch(Vne){if(t&&t.WTF)throw Vne}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var s=n||{};if(+s.codepage>=0&&_X(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var a=IZ(),i=A3(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,p=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++h;else if(null!=o[d]){if(++h,"number"==typeof o[d]&&(o[d]=o[d].toString(10)),"string"!=typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var f=GZ(e["!ref"]),m=[],g=[],v=[];for(d=0;d<=f.e.c-f.s.c;++d){var y="",x="",b=0,w=[];for(u=0;u<l.length;++u)null!=l[u][d]&&w.push(l[u][d]);if(0!=w.length&&null!=o[d]){for(u=0;u<w.length;++u){switch(typeof w[u]){case"number":x="B";break;case"string":default:x="C";break;case"boolean":x="L";break;case"object":x=w[u]instanceof Date?"D":"C"}b=Math.max(b,String(w[u]).length),y=y&&y!=x?"C":x}b>250&&(b=250),"C"==(x=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==y&&"N"==x&&(y="N",v[d]=c[d].DBF.dec,b=c[d].DBF.len),g[d]="C"==y||"N"==x?b:r[y]||0,p+=g[d],m[d]=y}else m[d]="?"}var k=a.next(32);for(k.write_shift(4,318902576),k.write_shift(4,l.length),k.write_shift(2,296+32*h),k.write_shift(2,p),d=0;d<4;++d)k.write_shift(4,0);for(k.write_shift(4,(+t[wX]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var S=a.next(32),j=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,j,"sbcs"),S.write_shift(1,"?"==m[d]?"C":m[d],"sbcs"),S.write_shift(4,u),S.write_shift(1,g[d]||r[m[d]]||0),S.write_shift(1,v[d]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),u+=g[d]||r[m[d]]||0}var _=a.next(264);for(_.write_shift(4,13),d=0;d<65;++d)_.write_shift(4,0);for(d=0;d<l.length;++d){var A=a.next(p);for(A.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(m[u]){case"L":A.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":A.write_shift(8,l[d][u]||0,"f");break;case"N":var E="0";for("number"==typeof l[d][u]&&(E=l[d][u].toFixed(v[u]||0)),h=0;h<g[u]-E.length;++h)A.write_shift(1,32);A.write_shift(1,E,"sbcs");break;case"D":l[d][u]?(A.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),A.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),A.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):A.write_shift(8,"00000000","sbcs");break;case"C":var T=String(null!=l[d][u]?l[d][u]:"").slice(0,g[u]);for(A.write_shift(1,T,"sbcs"),h=0;h<g[u]-T.length;++h)A.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),I0=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("N("+BY(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?RX(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:RX(r)};function s(e,s){var a,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],h=[],p=null,f={},m=[],g=[],v=[],y=0;for(+s.codepage>=0&&_X(+s.codepage);c!==i.length;++c){y=0;var x,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),w=b.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),k=w[0];if(b.length>0)switch(k){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var S=!1,j=!1,_=!1,A=!1,E=-1,T=-1;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[d].slice(1))-1,j=!0;break;case"Y":for(o=parseInt(w[d].slice(1))-1,j||(l=0),a=u.length;a<=o;++a)u[a]=[];break;case"K":'"'===(x=w[d].slice(1)).charAt(0)?x=x.slice(1,x.length-1):"TRUE"===x?x=!0:"FALSE"===x?x=!1:isNaN(nJ(x))?isNaN(sJ(x).getDate())||(x=ZY(x)):(x=nJ(x),null!==p&&NY(p)&&(x=GY(x))),S=!0;break;case"E":A=!0;var N=B1(w[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],N];break;case"S":_=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":E=parseInt(w[d].slice(1))-1;break;case"C":T=parseInt(w[d].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}if(S&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=x:u[o][l]=x,p=null),_){if(A)throw new Error("SYLK shared formula cannot have own formula");var C=E>-1&&u[E][T];if(!C||!C[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=$1(C[1],{r:o-E,c:l-T})}break;case"F":var P=0;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"X":l=parseInt(w[d].slice(1))-1,++P;break;case"Y":for(o=parseInt(w[d].slice(1))-1,a=u.length;a<=o;++a)u[a]=[];break;case"M":y=parseInt(w[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":p=h[parseInt(w[d].slice(1))];break;case"W":for(v=w[d].slice(1).split(" "),a=parseInt(v[0],10);a<=parseInt(v[1],10);++a)y=parseInt(v[2],10),g[a-1]=0===y?{hidden:!0}:{wch:y},g1(g[a-1]);break;case"C":g[l=parseInt(w[d].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(w[d].slice(1))-1]||(m[o]={}),y>0?(m[o].hpt=y,m[o].hpx=x1(y)):0===y&&(m[o].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}P<1&&(p=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}}return m.length>0&&(f["!rows"]=m),g.length>0&&(f["!cols"]=g),s&&s.sheetRows&&(u=u.slice(0,s.sheetRows)),[u,f]}function a(e,t){var n=function(e,t){switch(t.type){case"base64":return s(OX(e),t);case"binary":return s(e,t);case"buffer":return s(zX&&Buffer.isBuffer(e)?e.toString("binary"):UX(e),t);case"array":return s(QY(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],a=n[1],i=ZZ(r,t);return BY(a).forEach(function(e){i[e]=a[e]}),i}function i(e,t,n,r){var s="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+W1(e.f,{r:n,c:r}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return YZ(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var n,r,s=["ID;PWXL;N;E"],a=[],o=GZ(e["!ref"]),l=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=s,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=u1(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=h1(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*y1(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(s,e["!rows"]),s.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=VZ({r:d,c:u});(n=l?(e[d]||[])[u]:e[h])&&(null!=n.v||n.f&&!n.F)&&a.push(i(n,0,d,u))}return s.join(c)+c+a.join(c)+c+"E"+c}}}(),O0=function(){function e(e,t){for(var n=e.split("\n"),r=-1,s=-1,a=0,i=[];a!==n.length;++a)if("BOT"!==n[a].trim()){if(!(r<0)){for(var o=n[a].trim().split(","),l=o[0],c=o[1],d=n[++a]||"";1&(d.match(/["]/g)||[]).length&&a<n.length-1;)d+="\n"+n[++a];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++r]=[],s=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[r][s]=!0:"FALSE"===d?i[r][s]=!1:isNaN(nJ(c))?isNaN(sJ(c).getDate())?i[r][s]=c:i[r][s]=ZY(c):i[r][s]=nJ(c),++s;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[r][s++]=""!==d?d:null}if("EOD"===d)break}}else i[++r]=[],s=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,n){return ZZ(function(t,n){switch(n.type){case"base64":return e(OX(t),n);case"binary":return e(t,n);case"buffer":return e(zX&&Buffer.isBuffer(t)?t.toString("binary"):UX(t),n);case"array":return e(QY(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return YZ(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,s){e.push(t),e.push(n+","+r),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,s=[],a=GZ(n["!ref"]),i=Array.isArray(n);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,a.e.r-a.s.r+1,""),e(s,"TUPLES",0,a.e.c-a.s.c+1,""),e(s,"DATA",0,0,"");for(var o=a.s.r;o<=a.e.r;++o){t(s,-1,0,"BOT");for(var l=a.s.c;l<=a.e.c;++l){var c=VZ({r:o,c:l});if(r=i?(n[o]||[])[l]:n[c])switch(r.t){case"n":var d=r.w;d||null==r.v||(d=r.v),null==d?r.f&&!r.F?t(s,1,0,"="+r.f):t(s,1,0,""):t(s,0,d,"V");break;case"b":t(s,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=MY(r.z||tY[14],$Y(ZY(r.v)))),t(s,0,r.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}()}}(),z0=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return ZZ(function(t,n){for(var r=t.split("\n"),s=-1,a=-1,i=0,o=[];i!==r.length;++i){var l=r[i].trim().split(":");if("cell"===l[0]){var c=$Z(l[1]);if(o.length<=c.r)for(s=o.length;s<=c.r;++s)o[s]||(o[s]=[]);switch(s=c.r,a=c.c,l[2]){case"t":o[s][a]=e(l[3]);break;case"v":o[s][a]=+l[3];break;case"vtf":var d=l[l.length-1];case"vtc":"nl"===l[3]?o[s][a]=!!+l[4]:o[s][a]=+l[4],"vtf"==l[2]&&(o[s][a]=[o[s][a],d])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],s=[],a="",i=HZ(e["!ref"]),o=Array.isArray(e),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(a=VZ({r:l,c:c}),(n=o?(e[l]||[])[c]:e[a])&&null!=n.v&&"z"!==n.t){switch(s=["cell",a,"t"],n.t){case"s":case"str":s.push(t(n.v));break;case"n":n.f?(s[2]="vtf",s[3]="n",s[4]=n.v,s[5]=t(n.f)):(s[2]="v",s[3]=n.v);break;case"b":s[2]="vt"+(n.f?"f":"c"),s[3]="nl",s[4]=n.v?"1":"0",s[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var d=$Y(ZY(n.v));s[2]="vtc",s[3]="nd",s[4]=""+d,s[5]=n.w||MY(n.z||tY[14],d);break;case"e":continue}r.push(s.join(":"))}return r.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return YZ(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,s,a,s,o(e),i].join("\n")}}}(),D0=function(){function e(e,t,n,r,s){s.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(nJ(e))?isNaN(sJ(e).getDate())?t[n][r]=e:t[n][r]=ZY(e):t[n][r]=nJ(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},s=!1,a=0,i=0;a<e.length;++a)34==(i=e.charCodeAt(a))?s=!s:!s&&i in t&&(r[i]=(r[i]||0)+1);for(a in i=[],r)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);if(!i.length)for(a in r=n)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);return i.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[i.pop()[1]]||44}function s(e,t){var n=t||{},s="",a=n.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=r(e.slice(0,1024)):s=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,h=s.charCodeAt(0),p=!1,f=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g,v,y=null!=n.dateNF?(g=n.dateNF,v=(v="number"==typeof g?tY[g]:g).replace(DY,"(\\d+)"),new RegExp("^"+v+"$")):null;function x(){var t=e.slice(d,u),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=nJ(t)))if(!isNaN(sJ(t).getDate())||y&&t.match(y)){r.z=n.dateNF||tY[14];var s=0;y&&t.match(y)&&(t=function(e,t,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(DY)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":a=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:s=c}}),l>=0&&-1==o&&s>=0&&(o=s,s=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==r&&-1==s&&-1==a?d:c+"T"+d}(0,n.dateNF,t.match(y)||[]),s=1),n.cellDates?(r.t="d",r.v=ZY(t,s)):(r.t="n",r.v=$Y(ZY(t,s))),!1!==n.cellText&&(r.w=MY(r.z,r.v instanceof Date?$Y(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(a[o]||(a[o]=[]),a[o][l]=r):a[VZ({c:l,r:o})]=r),d=u+1,m=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),f==h)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(f=e.charCodeAt(u)){case 34:34===m&&(p=!p);break;case h:case 10:case 13:if(!p&&x())break e}return u-d>0&&x(),a["!ref"]=qZ(i),a}function a(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,n):ZZ(function(t,n){var r=n||{},s=[];if(!t||0===t.length)return s;for(var a=t.split(/[\r\n]/),i=a.length-1;i>=0&&0===a[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=a[c].indexOf(" "))?l=a[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){s[c]=[];var d=0;for(e(a[c].slice(0,o).trim(),s,c,d,r),d=1;d<=(a[c].length-o)/10+1;++d)e(a[c].slice(o+10*(d-1),o+10*d).trim(),s,c,d,r)}return r.sheetRows&&(s=s.slice(0,r.sheetRows)),s}(t,n),n):s(t,n)}function i(e,t){var n="",r="string"==t.type?[0,0,0,0]:w3(e,t);switch(t.type){case"base64":n=OX(e);break;case"binary":case"string":n=e;break;case"buffer":65001==t.codepage?n=e.toString("utf8"):(t.codepage,n=zX&&Buffer.isBuffer(e)?e.toString("binary"):UX(e));break;case"array":n=QY(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=DJ(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=DJ(n):t.type,"socialcalc:version:"==n.slice(0,19)?z0.to_sheet("string"==t.type?n:DJ(n),t):a(n,t)}return{to_workbook:function(e,t){return YZ(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,n=[],r=GZ(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){for(var i=[],o=r.s.c;o<=r.e.c;++o){var l=VZ({r:a,c:o});if((t=s?(e[a]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(XZ(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}n.push(i.join(""))}return n.join("\n")}}}();var L0=function(){function e(e,t,n){if(e){CZ(e,e.l||0);for(var r=n.Enum||v;e.l<e.length;){var s=e.read_shift(2),a=r[s]||r[65535],i=e.read_shift(2),o=e.l+i,l=a.f&&a.f(e,i,n);if(e.l=o,t(l,a,s))return}}}function t(t,n){if(!t)return t;var r=n||{},s=r.dense?[]:{},a="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=v,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&!(112&~e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||tY[14],r.cellDates&&(e[1].t="d",e[1].v=GY(e[1].v))),r.qpro&&e[3]>o&&(s["!ref"]=qZ(u),l[a]=s,c.push(a),s=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a=i||"Sheet"+(o+1),i="");var d=r.dense?(s[e[0].r]||[])[e[0].c]:s[VZ(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[VZ(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=y,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(s["!ref"]=qZ(u),l[a]=s,c.push(a),s=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a="Sheet"+(o+1)),h>0&&e[0].r>=h)break;r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[VZ(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(a=e[1])}},r)}if(s["!ref"]=qZ(u),l[i||a]=s,c.push(i||a),!d.length)return{SheetNames:c,Sheets:l};for(var p={},f=[],m=0;m<d.length;++m)l[c[m]]?(f.push(d[m]||c[m]),p[d[m]]=l[d[m]]||l[c[m]]):(f.push(d[m]),p[d[m]]={"!ref":"A1"});return{SheetNames:f,Sheets:p}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].t="s",20768==r.vers){e.l++;var i=e.read_shift(1);return a[1].v=e.read_shift(i,"utf8"),a}return r.qpro&&e.l++,a[1].v=e.read_shift(s-e.l,"cstr"),a}function s(e,t,n){var r=RZ(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var s=0;s<r.length;++s){var a=n.charCodeAt(s);r.write_shift(1,a>=128?95:a)}return r.write_shift(1,0),r}function a(e,t,n){var r=RZ(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function i(e,t,n){var r=RZ(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?WZ(t):BZ(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,n,r){var s=RZ(6+r.length);s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),s.write_shift(1,39);for(var a=0;a<r.length;++a){var i=r.charCodeAt(a);s.write_shift(1,i>=128?95:i)}return s.write_shift(1,0),s}function h(e,t){var n=d(e),r=e.read_shift(4),s=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===r&&3221225472===s?(n[1].t="e",n[1].v=15):0===r&&3489660928===s?(n[1].t="e",n[1].v=42):n[1].v=0,n;var i=32768&a;return a=(32767&a)-16446,n[1].v=(1-2*i)*(s*Math.pow(2,a+32)+r*Math.pow(2,a)),n}function p(e,t,n,r){var s=RZ(14);if(s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),0==r)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var a,i=0,o=0,l=0;return r<0&&(i=1,r=-r),o=0|Math.log2(r),2147483648&(l=(r/=Math.pow(2,o-31))>>>0)||(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,a=(r*=Math.pow(2,32))>>>0,s.write_shift(4,a),s.write_shift(4,l),o+=16383+(i?32768:0),s.write_shift(2,o),s}function f(e,t){var n=d(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=RZ(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var s=e.charCodeAt(r);n[n.l++]=s>127?95:s}return n[n.l++]=0,n}var v={0:{n:"BOF",f:YQ},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].v=e.read_shift(8,"f"),r.qpro)e.l=s;else{var i=e.read_shift(2);!function(e,t){CZ(e,0);var n=[],r=0,s="",a="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:n.push(e.read_shift(8,"f"));break;case 1:a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(a+s);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),p=o(t[0].r,e.read_shift(2),!1);a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(h+p+":"+a+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var f="";u=e[e.l++];)f+=String.fromCharCode(u);n.push('"'+f.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:d=n.pop(),i=n.pop(),n.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=n.pop(),i=n.pop(),n.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(r=l[u][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[u][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+i),a),e.l+=i}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=d(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var n=d(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=h(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var s=e.read_shift(2);if(14e3==s){for(n[s]=[0,""],n[s][0]=e.read_shift(2);e[e.l];)n[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=d(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var n=f(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&_X(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r,o,l=IZ(),c=GZ(e["!ref"]),d=Array.isArray(e),u=[];W4(l,0,(r=1030,(o=RZ(2)).write_shift(2,r),o)),W4(l,6,function(e){var t=RZ(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(c));for(var h=Math.min(c.e.r,8191),p=c.s.r;p<=h;++p)for(var f=BZ(p),m=c.s.c;m<=c.e.c;++m){p===c.s.r&&(u[m]=WZ(m));var g=u[m]+f,v=d?(e[p]||[])[m]:e[g];if(v&&"z"!=v.t)if("n"==v.t)(0|v.v)==v.v&&v.v>=-32768&&v.v<=32767?W4(l,13,a(p,m,v.v)):W4(l,14,i(p,m,v.v));else W4(l,15,s(p,m,XZ(v).slice(0,239)))}return W4(l,1),l.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&_X(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=IZ();W4(r,0,function(e){var t=RZ(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,s=0,a=0;a<e.SheetNames.length;++a){var i=e.SheetNames[a],o=e.Sheets[i];if(o&&o["!ref"]){++s;var l=HZ(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,s),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,a=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&W4(r,27,g(e.SheetNames[s],a++));var i=0;for(s=0;s<e.SheetNames.length;++s){var o=e.Sheets[e.SheetNames[s]];if(o&&o["!ref"]){for(var l=GZ(o["!ref"]),c=Array.isArray(o),d=[],h=Math.min(l.e.r,8191),f=l.s.r;f<=h;++f)for(var m=BZ(f),v=l.s.c;v<=l.e.c;++v){f===l.s.r&&(d[v]=WZ(v));var y=d[v]+m,x=c?(o[f]||[])[v]:o[y];if(x&&"z"!=x.t)if("n"==x.t)W4(r,23,p(f,v,i,x.v));else W4(r,22,u(f,v,i,XZ(x).slice(0,239)))}++i}}return W4(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(BX(OX(e)),n);case"binary":return t(BX(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var F0=function(){var e=FJ("t"),t=FJ("rPr");function n(n){var r=n.match(e);if(!r)return{t:"s",v:""};var s={t:"s",v:EJ(r[1])},a=n.match(t);return a&&(s.s=function(e){var t={},n=e.match(bJ),r=0,s=!1;if(n)for(;r!=n.length;++r){var a=SJ(n[r]);switch(a[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==a.val)break;t.cp=SX[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==a.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==a.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(47!==a[0].charCodeAt(1)&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}(a[1])),s}var r=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(e){return e.replace(r,"").split(s).map(n).filter(function(e){return e.v})}}(),B0=function(){var e=/(\r\n|\n)/g;function t(t){var n=[[],t.v,[]];return t.v?(t.s&&function(e,t,n){var r=[];e.u&&r.push("text-decoration: underline;"),e.uval&&r.push("text-underline-style:"+e.uval+";"),e.sz&&r.push("font-size:"+e.sz+"pt;"),e.outline&&r.push("text-effect: outline;"),e.shadow&&r.push("text-shadow: auto;"),t.push('<span style="'+r.join("")+'">'),e.b&&(t.push("<b>"),n.push("</b>")),e.i&&(t.push("<i>"),n.push("</i>")),e.strike&&(t.push("<s>"),n.push("</s>"));var s=e.valign||"";"superscript"==s||"super"==s?s="sup":"subscript"==s&&(s="sub"),""!=s&&(t.push("<"+s+">"),n.push("</"+s+">")),n.push("</span>")}(t.s,n[0],n[2]),n[0].join("")+n[1].replace(e,"<br/>")+n[2].join("")):""}return function(e){return e.map(t).join("")}}(),U0=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,W0=/<(?:\w+:)?r>/,$0=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function V0(e,t){var n=!t||t.cellHTML,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=EJ(DJ(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=DJ(e),n&&(r.h=CJ(r.t))):e.match(W0)&&(r.r=DJ(e),r.t=EJ(DJ((e.replace($0,"").match(U0)||[]).join("").replace(bJ,""))),n&&(r.h=B0(F0(r.r)))),r):{t:""}}var H0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,q0=/<(?:\w+:)?(?:si|sstItem)>/g,G0=/<\/(?:\w+:)?(?:si|sstItem)>/;function K0(e){for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function X0(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function Y0(e){for(var t=e.read_shift(4),n=e.l+t-4,r={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=a,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return r}function J0(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=X0(e,4),t.U=X0(e,4),t.W=X0(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function Z0(e,t){var n=e.l+t,r={};r.Flags=63&e.read_shift(4),e.l+=4,r.AlgID=e.read_shift(4);var s=!1;switch(r.AlgID){case 26126:case 26127:case 26128:s=36==r.Flags;break;case 26625:s=4==r.Flags;break;case 0:s=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,r}function Q0(e,t){var n={},r=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,r),e.l=r,n}function e1(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:Z0(e,t),v:Q0(e,e.length-e.l)}}function t1(){throw new Error("File is password-protected: ECMA-376 Extensible")}function n1(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),r={};return n.replace(bJ,function(e){var n=SJ(e);switch(jJ(n[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach(function(e){r[e]=n[e]});break;case"<dataIntegrity":r.encryptedHmacKey=n.encryptedHmacKey,r.encryptedHmacValue=n.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"<keyEncryptor":r.uri=n.uri;break;case"<encryptedKey":r.encs.push(n);break;default:throw n[0]}}),r}var r1=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(e,t){return 255&((n=e^t)/2|128*n);var n};return function(s){for(var a,i,o,l=K0(s),c=function(e){for(var r=t[e.length-1],s=104,a=e.length-1;a>=0;--a)for(var i=e[a],o=0;7!=o;++o)64&i&&(r^=n[s]),i*=2,--s;return r}(l),d=l.length,u=LX(16),h=0;16!=h;++h)u[h]=0;for(1&~d||(a=c>>8,u[d]=r(e[0],a),--d,a=255&c,i=l[l.length-1],u[d]=r(i,a));d>0;)a=c>>8,u[--d]=r(l[d],a),a=255&c,u[--d]=r(l[d],a);for(d=15,o=15-l.length;o>0;)a=c>>8,u[d]=r(e[o],a),--o,a=255&c,u[--d]=r(l[d],a),--d,--o;return u}}(),s1=function(e){var t=0,n=r1(e);return function(e){var r=function(e,t,n,r,s){var a,i;for(s||(s=t),r||(r=r1(e)),a=0;a!=t.length;++a)i=t[a],i=255&((i^=r[n])>>5|i<<3),s[a]=i,++n;return[s,n,r]}("",e,t,n);return t=r[1],r[0]}};function a1(e,t,n,r){var s={key:YQ(e),verificationBytes:YQ(e)};return n.password&&(s.verifier=function(e){var t,n,r=0,s=K0(e),a=s.length+1;for((t=LX(a))[0]=s.length,n=1;n!=a;++n)t[n]=s[n-1];for(n=a-1;n>=0;--n)r=((16384&r?1:0)|r<<1&32767)^t[n];return 52811^r}(n.password)),r.valid=s.verificationBytes===s.verifier,r.valid&&(r.insitu=s1(n.password)),s}function i1(e,t,n){var r=n||{};return r.Info=e.read_shift(2),e.l-=2,1===r.Info?r.Data=function(e){var t={},n=t.EncryptionVersionInfo=X0(e,4);if(1!=n.Major||1!=n.Minor)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):r.Data=function(e,t){var n={},r=n.EncryptionVersionInfo=X0(e,4);if(t-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,n.EncryptionHeader=Z0(e,s),t-=s,n.EncryptionVerifier=Q0(e,t),n}(e,t),r}var o1=function(){function e(e,n){switch(n.type){case"base64":return t(OX(e),n);case"binary":return t(e,n);case"buffer":return t(zX&&Buffer.isBuffer(e)?e.toString("binary"):UX(e),n);case"array":return t(QY(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,a=/\\\w+\b/g,i=0,o=-1;r=a.exec(e);){if("\\cell"===r[0]){var l=e.slice(i,a.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[VZ({r:t,c:o})]=c}}i=a.lastIndex}o>s.e.c&&(s.e.c=o)}),n["!ref"]=qZ(s),n}return{to_workbook:function(t,n){return YZ(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=GZ(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){n.push("\\trowd\\trautofit1");for(var i=r.s.c;i<=r.e.c;++i)n.push("\\cellx"+(i+1));for(n.push("\\pard\\intbl"),i=r.s.c;i<=r.e.c;++i){var o=VZ({r:a,c:i});(t=s?(e[a]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(XZ(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function l1(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function c1(e,t){if(0===t)return e;var n,r,s=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(t,n,r),a=Math.min(t,n,r),i=s-a;if(0===i)return[0,0,t];var o,l=0,c=s+a;switch(o=i/(c>1?2-c:c),s){case t:l=((n-r)/i+6)%6;break;case n:l=(r-t)/i+2;break;case r:l=(t-n)/i+4}return[l/6,o,c/2]}((r=(n=e).slice("#"===n[0]?1:0).slice(0,6),[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]));return s[2]=t<0?s[2]*(1+t):1-(1-s[2])*(1-t),l1(function(e){var t,n=e[0],r=e[1],s=e[2],a=2*r*(s<.5?s:1-s),i=s-a/2,o=[i,i,i],l=6*n;if(0!==r)switch(0|l){case 0:case 6:t=a*l,o[0]+=a,o[1]+=t;break;case 1:t=a*(2-l),o[0]+=t,o[1]+=a;break;case 2:t=a*(l-2),o[1]+=a,o[2]+=t;break;case 3:t=a*(4-l),o[1]+=t,o[2]+=a;break;case 4:t=a*(l-4),o[2]+=a,o[0]+=t;break;case 5:t=a*(6-l),o[2]+=t,o[0]+=a}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(s))}var d1=6;function u1(e){return Math.floor((e+Math.round(128/d1)/256)*d1)}function h1(e){return Math.floor((e-5)/d1*100+.5)/100}function p1(e){return Math.round((e*d1+5)/d1*256)/256}function f1(e){return p1(h1(u1(e)))}function m1(e){var t=Math.abs(e-f1(e)),n=d1;if(t>.005)for(d1=1;d1<15;++d1)Math.abs(e-f1(e))<=t&&(t=Math.abs(e-f1(e)),n=d1);d1=n}function g1(e){e.width?(e.wpx=u1(e.width),e.wch=h1(e.wpx),e.MDW=d1):e.wpx?(e.wch=h1(e.wpx),e.width=p1(e.wch),e.MDW=d1):"number"==typeof e.wch&&(e.width=p1(e.wch),e.wpx=u1(e.width),e.MDW=d1),e.customWidth&&delete e.customWidth}var v1=96;function y1(e){return 96*e/v1}function x1(e){return e*v1/96}var b1={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var w1=["numFmtId","fillId","fontId","borderId","xfId"],k1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var S1=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(a,i,o){var l,c={};return a?((l=(a=a.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,n){t.NumberFmt=[];for(var r=BY(tY),s=0;s<r.length;++s)t.NumberFmt[r[s]]=tY[r[s]];var a=e[0].match(bJ);if(a)for(s=0;s<a.length;++s){var i=SJ(a[s]);switch(jJ(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=EJ(DJ(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}IY(o,l)}break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}(l,c,o),(l=a.match(r))&&function(e,t,n,r){t.Fonts=[];var s={},a=!1;(e[0].match(bJ)||[]).forEach(function(e){var i=SJ(e);switch(jJ(i[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":i.val&&(s.name=DJ(i.val));break;case"<b":s.bold=i.val?RJ(i.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=i.val?RJ(i.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(i.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=i.val?RJ(i.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=i.val?RJ(i.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=i.val?RJ(i.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=i.val?RJ(i.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=i.val?RJ(i.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":i.val&&(s.sz=+i.val);break;case"<vertAlign":i.val&&(s.vertAlign=i.val);break;case"<family":i.val&&(s.family=parseInt(i.val,10));break;case"<scheme":i.val&&(s.scheme=i.val);break;case"<charset":if("1"==i.val)break;i.codepage=SX[parseInt(i.val,10)];break;case"<color":if(s.color||(s.color={}),i.auto&&(s.color.auto=RJ(i.auto)),i.rgb)s.color.rgb=i.rgb.slice(-6);else if(i.indexed){s.color.index=parseInt(i.indexed,10);var o=wQ[s.color.index];81==s.color.index&&(o=wQ[1]),o||(o=wQ[1]),s.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else i.theme&&(s.color.theme=parseInt(i.theme,10),i.tint&&(s.color.tint=parseFloat(i.tint)),i.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=c1(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in fonts")}})}(l,c,i,o),(l=a.match(n))&&function(e,t,n,r){t.Fills=[];var s={},a=!1;(e[0].match(bJ)||[]).forEach(function(e){var n=SJ(e);switch(jJ(n[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":n.patternType&&(s.patternType=n.patternType);break;case"<bgColor":s.bgColor||(s.bgColor={}),n.indexed&&(s.bgColor.indexed=parseInt(n.indexed,10)),n.theme&&(s.bgColor.theme=parseInt(n.theme,10)),n.tint&&(s.bgColor.tint=parseFloat(n.tint)),n.rgb&&(s.bgColor.rgb=n.rgb.slice(-6));break;case"<fgColor":s.fgColor||(s.fgColor={}),n.theme&&(s.fgColor.theme=parseInt(n.theme,10)),n.tint&&(s.fgColor.tint=parseFloat(n.tint)),null!=n.rgb&&(s.fgColor.rgb=n.rgb.slice(-6));break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+n[0]+" in fills")}})}(l,c,0,o),(l=a.match(s))&&function(e,t,n,r){t.Borders=[];var s={},a=!1;(e[0].match(bJ)||[]).forEach(function(e){var n=SJ(e);switch(jJ(n[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":s={},n.diagonalUp&&(s.diagonalUp=RJ(n.diagonalUp)),n.diagonalDown&&(s.diagonalDown=RJ(n.diagonalDown)),t.Borders.push(s);break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+n[0]+" in borders")}})}(l,c,0,o),(l=a.match(t))&&function(e,t,n){var r;t.CellXf=[];var s=!1;(e[0].match(bJ)||[]).forEach(function(e){var a=SJ(e),i=0;switch(jJ(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(r=a)[0],i=0;i<w1.length;++i)r[w1[i]]&&(r[w1[i]]=parseInt(r[w1[i]],10));for(i=0;i<k1.length;++i)r[k1[i]]&&(r[k1[i]]=RJ(r[k1[i]]));if(t.NumberFmt&&r.numFmtId>392)for(i=392;i>60;--i)if(t.NumberFmt[r.numFmtId]==t.NumberFmt[i]){r.numFmtId=i;break}t.CellXf.push(r);break;case"<alignment":case"<alignment/>":var o={};a.vertical&&(o.vertical=a.vertical),a.horizontal&&(o.horizontal=a.horizontal),null!=a.textRotation&&(o.textRotation=a.textRotation),a.indent&&(o.indent=a.indent),a.wrapText&&(o.wrapText=RJ(a.wrapText)),r.alignment=o;break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}(l,c,o),c):c}}();var j1=PZ;var _1=PZ;var A1=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function E1(e,t,n){t.themeElements.clrScheme=[];var r={};(e[0].match(bJ)||[]).forEach(function(e){var s=SJ(e);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"<a:sysClr":r.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===s[0].charAt(1)?(t.themeElements.clrScheme[A1.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function T1(){}function N1(){}var C1=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,P1=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,R1=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var M1=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function I1(e,t){var n;e&&0!==e.length||(e=function(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[vJ];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}());var r={};if(!(n=e.match(M1)))throw new Error("themeElements not found in theme");return function(e,t,n){var r;t.themeElements={},[["clrScheme",C1,E1],["fontScheme",P1,T1],["fmtScheme",R1,N1]].forEach(function(s){if(!(r=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](r,t,n)})}(n[0],r,t),r.raw=e,r}function O1(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return PZ(e,t)}(e,4);break;case 2:t.xclrValue=a0(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function z1(e){var t=e.read_shift(2),n=e.read_shift(2)-4,r=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=O1(e);break;case 6:r[1]=function(e,t){return PZ(e,t)}(e,n);break;case 14:case 15:r[1]=e.read_shift(1===n?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return r}function D1(e,t){t.forEach(function(e){e[0]})}function L1(e,t,n,r){var s,a=Array.isArray(e);t.forEach(function(t){var i=$Z(t.ref);if(a?(e[i.r]||(e[i.r]=[]),s=e[i.r][i.c]):s=e[t.ref],!s){s={t:"z"},a?e[i.r][i.c]=s:e[t.ref]=s;var o=GZ(e["!ref"]||"BDWGO1000001:A1");o.s.r>i.r&&(o.s.r=i.r),o.e.r<i.r&&(o.e.r=i.r),o.s.c>i.c&&(o.s.c=i.c),o.e.c<i.c&&(o.e.c=i.c);var l=qZ(o);l!==e["!ref"]&&(e["!ref"]=l)}s.c||(s.c=[]);var c={a:t.author,t:t.t,r:t.r,T:n};t.h&&(c.h=t.h);for(var d=s.c.length-1;d>=0;--d){if(!n&&s.c[d].T)return;n&&!s.c[d].T&&s.c.splice(d,1)}if(n&&r)for(d=0;d<r.length;++d)if(c.a==r[d].id){c.a=r[d].name||c.a;break}s.c.push(c)})}var F1=QZ;var B1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,s){var a=!1,i=!1;0==r.length?i=!0:"["==r.charAt(0)&&(i=!0,r=r.slice(1,-1)),0==s.length?a=!0:"["==s.charAt(0)&&(a=!0,s=s.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=s.length>0?0|parseInt(s,10):0;return a?l+=t.c:--l,i?o+=t.r:--o,n+(a?"":"$")+WZ(l)+(i?"":"$")+BZ(o)}return function(r,s){return t=s,r.replace(e,n)}}(),U1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,W1=function(){return function(e,t){return e.replace(U1,function(e,n,r,s,a,i){var o=UZ(s)-(r?0:t.c),l=FZ(i)-(a?0:t.r);return n+"R"+(0==l?"":a?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function $1(e,t){return e.replace(U1,function(e,n,r,s,a,i){return n+("$"==r?r+s:WZ(UZ(s)+t.c))+("$"==a?a+i:BZ(FZ(i)+t.r))})}function V1(e,t,n){var r=HZ(t).s,s=$Z(n);return $1(e,{r:s.r-r.r,c:s.c-r.c})}function H1(e){return e.replace(/_xlfn\./g,"")}function q1(e){e.l+=1}function G1(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function K1(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return X1(e);12==n.biff&&(r=4)}var s=e.read_shift(r),a=e.read_shift(r),i=G1(e,2),o=G1(e,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function X1(e){var t=G1(e,2),n=G1(e,2),r=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function Y1(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=G1(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),s=G1(e,2);return{r:r,c:s[0],cRel:s[1],rRel:s[2]}}function J1(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function Z1(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Q1(e){return[e.read_shift(1),e.read_shift(1)]}function e2(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=XQ(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=kQ[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=hQ(e);break;case 2:n[1]=n0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function t2(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),s=[],a=0;a!=r;++a)s.push((12==n.biff?uQ:d0)(e));return s}function n2(e,t,n){var r=0,s=0;12==n.biff?(r=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--s&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=e2(e,n.biff);return i}function r2(e,t,n){return e.l+=2,[J1(e)]}function s2(e){return e.l+=6,[]}function a2(e){return e.l+=2,[YQ(e),1&e.read_shift(2)]}var i2=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var o2={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:PZ},3:{n:"PtgAdd",f:q1},4:{n:"PtgSub",f:q1},5:{n:"PtgMul",f:q1},6:{n:"PtgDiv",f:q1},7:{n:"PtgPower",f:q1},8:{n:"PtgConcat",f:q1},9:{n:"PtgLt",f:q1},10:{n:"PtgLe",f:q1},11:{n:"PtgEq",f:q1},12:{n:"PtgGe",f:q1},13:{n:"PtgGt",f:q1},14:{n:"PtgNe",f:q1},15:{n:"PtgIsect",f:q1},16:{n:"PtgUnion",f:q1},17:{n:"PtgRange",f:q1},18:{n:"PtgUplus",f:q1},19:{n:"PtgUminus",f:q1},20:{n:"PtgPercent",f:q1},21:{n:"PtgParen",f:q1},22:{n:"PtgMissArg",f:q1},23:{n:"PtgStr",f:function(e,t,n){return e.l++,ZQ(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,kQ[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,hQ(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(n&&n.biff<=3?1:2);return[T2[s],E2[s],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],s=e.read_shift(1),a=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===a[0]?E2:A2)[a[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=e.read_shift(s);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,a]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,Y1(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,K1(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:PZ},40:{n:"PtgMemNoMem",f:PZ},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==s&&n>=128&&(n-=256),{r:t,c:n,cRel:s,rRel:r}}(e);var s=e.read_shift(r>=12?4:2),a=e.read_shift(2),i=(16384&a)>>14,o=(32768&a)>>15;if(a&=16383,1==o)for(;s>524287;)s-=1048576;if(1==i)for(;a>8191;)a-=16384;return{r:s,c:a,cRel:i,rRel:o}}(e,0,n);return[r,s]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=function(e,t,n){if(n.biff<8)return X1(e);var r=e.read_shift(12==n.biff?4:2),s=e.read_shift(12==n.biff?4:2),a=G1(e,2),i=G1(e,2);return{s:{r:r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,n);return[r,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,s,Y1(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,s,K1(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[r,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=8;if(n)switch(n.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[r,s]}},255:{}},l2={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},c2={1:{n:"PtgElfLel",f:a2},2:{n:"PtgElfRw",f:r2},3:{n:"PtgElfCol",f:r2},6:{n:"PtgElfRwV",f:r2},7:{n:"PtgElfColV",f:r2},10:{n:"PtgElfRadical",f:r2},11:{n:"PtgElfRadicalS",f:s2},13:{n:"PtgElfColS",f:s2},15:{n:"PtgElfColSV",f:s2},16:{n:"PtgElfRadicalLel",f:a2},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&n,rt:i2[n>>2&31],idx:r,c:s,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},d2={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),s=[],a=0;a<=r;++a)s.push(e.read_shift(n&&2==n.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Z1},33:{n:"PtgAttrBaxcel",f:Z1},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Q1(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Q1(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function u2(e,t,n,r){if(r.biff<8)return PZ(e,t);for(var s=e.l+t,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=n2(e,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=t2(e,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&12==r.biff&&(n[i][1][1]=e.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return 0!==(t=s-e.l)&&a.push(PZ(e,t)),a}function h2(e,t,n){for(var r,s,a=e.l+t,i=[];a!=e.l;)t=a-e.l,s=e[e.l],r=o2[s]||o2[l2[s]],24!==s&&25!==s||(r=(24===s?c2:d2)[e[e.l+1]]),r&&r.f?i.push([r.n,r.f(e,t,n)]):PZ(e,t);return i}function p2(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)if(2===i[0])s.push('"'+i[1].replace(/"/g,'""')+'"');else s.push(i[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var f2={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m2(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(e[r[0]][0]){case 357:return s=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return s=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(s=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function g2(e,t,n){var r=m2(e,t,n);return"#REF"==r?r:function(e,t){if(!(e||t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function v2(e,t,n,r,s){var a,i,o,l,c=s&&s.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,p=0,f="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,y=e[0].length;v<y;++v){var x=e[0][v];switch(x[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=u.pop(),i=u.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=tJ(" ",e[0][m][1][1]);break;case 1:g=tJ("\r",e[0][m][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}i+=g,m=-1}u.push(i+f2[x[0]]+a);break;case"PtgIsect":a=u.pop(),i=u.pop(),u.push(i+" "+a);break;case"PtgUnion":a=u.pop(),i=u.pop(),u.push(i+","+a);break;case"PtgRange":a=u.pop(),i=u.pop(),u.push(i+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=OZ(x[1][1],d,s),u.push(DZ(o,c));break;case"PtgRefN":o=n?OZ(x[1][1],n,s):x[1][1],u.push(DZ(o,c));break;case"PtgRef3d":h=x[1][1],o=OZ(x[1][2],d,s),f=g2(r,h,s),u.push(f+"!"+DZ(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=x[1][0],w=x[1][1];b||(b=0);var k=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===w&&(w=k.shift()),u.push(w+"("+k.join(",")+")");break;case"PtgBool":u.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(x[1]);break;case"PtgNum":u.push(String(x[1]));break;case"PtgStr":u.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=zZ(x[1][1],n?{s:n}:d,s),u.push(LZ(l,s));break;case"PtgArea":l=zZ(x[1][1],d,s),u.push(LZ(l,s));break;case"PtgArea3d":h=x[1][1],l=x[1][2],f=g2(r,h,s),u.push(f+"!"+LZ(l,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":p=x[1][2];var S=(r.names||[])[p-1]||(r[0]||[])[p],j=S?S.Name:"SH33TJSNAME"+String(p);j&&"_xlfn."==j.slice(0,6)&&!s.xlfn&&(j=j.slice(6)),u.push(j);break;case"PtgNameX":var _,A=x[1][1];if(p=x[1][2],!(s.biff<=5)){var E="";if(14849==((r[A]||[])[0]||[])[0]||(1025==((r[A]||[])[0]||[])[0]?r[A][p]&&r[A][p].itab>0&&(E=r.SheetNames[r[A][p].itab-1]+"!"):E=r.SheetNames[p-1]+"!"),r[A]&&r[A][p])E+=r[A][p].Name;else if(r[0]&&r[0][p])E+=r[0][p].Name;else{var T=(m2(r,A,s)||"").split(";;");T[p-1]?E=T[p-1]:E+="SH33TJSERRX"}u.push(E);break}A<0&&(A=-A),r[A]&&(_=r[A][p]),_||(_={Name:"SH33TJSERRY"}),u.push(_.Name);break;case"PtgParen":var N="(",C=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:N=tJ(" ",e[0][m][1][1])+N;break;case 3:N=tJ("\r",e[0][m][1][1])+N;break;case 4:C=tJ(" ",e[0][m][1][1])+C;break;case 5:C=tJ("\r",e[0][m][1][1])+C;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}u.push(N+u.pop()+C);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:x[1][1],r:x[1][0]};var P={c:n.c,r:n.r};if(r.sharedf[VZ(o)]){var R=r.sharedf[VZ(o)];u.push(v2(R,d,P,r,s))}else{var M=!1;for(a=0;a!=r.arrayf.length;++a)if(i=r.arrayf[a],!(o.c<i[0].s.c||o.c>i[0].e.c||o.r<i[0].s.r||o.r>i[0].e.r)){u.push(v2(i[1],d,P,r,s)),M=!0;break}M||u.push(x[1])}break;case"PtgArray":u.push("{"+p2(x[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(x))}if(3!=s.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var I=!0;switch((x=e[0][m])[1][0]){case 4:I=!1;case 0:g=tJ(" ",x[1][1]);break;case 5:I=!1;case 1:g=tJ("\r",x[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}u.push((I?g:"")+u.pop()+(I?"":g)),m=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function y2(e,t,n){var r,s=e.l+t,a=2==n.biff?1:2,i=e.read_shift(a);if(65535==i)return[[],PZ(e,t-2)];var o=h2(e,i,n);return t!==i+a&&(r=u2(e,t-i-a,o,n)),e.l=s,[o,r]}function x2(e,t,n){var r,s=e.l+t,a=e.read_shift(2),i=h2(e,a,n);return 65535==a?[[],PZ(e,t-2)]:(t!==a+2&&(r=u2(e,s-a-2,i,n)),[i,r])}function b2(e,t,n){var r=e.l+t,s=o0(e);2==n.biff&&++e.l;var a=function(e){var t;if(65535!==xZ(e,e.l+6))return[hQ(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),i=e.read_shift(1);2!=n.biff&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=function(e,t,n){var r,s=e.l+t,a=2==n.biff?1:2,i=e.read_shift(a);if(65535==i)return[[],PZ(e,t-2)];var o=h2(e,i,n);return t!==i+a&&(r=u2(e,t-i-a,o,n)),e.l=s,[o,r]}(e,r-e.l,n);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function w2(e,t,n){var r=e.read_shift(4),s=h2(e,r,n),a=e.read_shift(4);return[s,a>0?u2(e,a,s,n):null]}var k2=w2,S2=w2,j2=w2,_2=w2,A2={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},E2={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},T2={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function N2(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")})).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function C2(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var P2={},R2={};function M2(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function I2(e,t,n,r,s,a){try{r.cellNF&&(e.z=tY[t])}catch(Vne){if(r.WTF)throw Vne}if("z"!==e.t||r.cellStyles){if("d"===e.t&&"string"==typeof e.v&&(e.v=ZY(e.v)),(!r||!1!==r.cellText)&&"z"!==e.t)try{if(null==tY[t]&&IY(zY[t]||"General",t),"e"===e.t)e.w=e.w||kQ[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=uY(e.v);else if("d"===e.t){var i=$Y(e.v);e.w=(0|i)===i?i.toString(10):uY(i)}else{if(void 0===e.v)return"";e.w=hY(e.v,R2)}else"d"===e.t?e.w=MY(t,$Y(e.v),R2):e.w=MY(t,e.v,R2)}catch(Vne){if(r.WTF)throw Vne}if(r.cellStyles&&null!=n)try{e.s=a.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=c1(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=c1(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(Vne){if(r.WTF&&a.Fills)throw Vne}}}var O2=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,z2=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,D2=/<(?:\w:)?hyperlink [^>]*>/gm,L2=/"(\w*:\w*)"/,F2=/<(?:\w:)?col\b[^>]*[\/]?>/g,B2=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,U2=/<(?:\w:)?pageMargins[^>]*\/>/g,W2=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,$2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,V2=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function H2(e,t,n,r,s,a,i){if(!e)return e;r||(r={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",u=e.match(z2);u?(c=e.slice(0,u.index),d=e.slice(u.index+u[0].length)):c=d=e;var h=c.match(W2);h?q2(h[0],o,s,n):(h=c.match($2))&&function(e,t,n,r,s){q2(e.slice(0,e.indexOf(">")),n,r,s)}(h[0],h[1],o,s,n);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var f=c.slice(p,p+50).match(L2);f&&function(e,t){var n=GZ(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=qZ(n))}(o,f[1])}var m=c.match(V2);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(G2)||[]).forEach(function(e,n){var r=SJ(e);t.Views[n]||(t.Views[n]={}),+r.zoomScale&&(t.Views[n].zoom=+r.zoomScale),RJ(r.rightToLeft)&&(t.Views[n].RTL=!0)})}(m[1],s);var g=[];if(t.cellStyles){var v=c.match(F2);v&&function(e,t){for(var n=!1,r=0;r!=t.length;++r){var s=SJ(t[r],!0);s.hidden&&(s.hidden=RJ(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,m1(s.width)),g1(s);a<=i;)e[a++]=eJ(s)}}(g,v)}u&&K2(u[1],o,t,l,a,i);var y=d.match(B2);y&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(y[0]));var x=[],b=d.match(O2);if(b)for(p=0;p!=b.length;++p)x[p]=GZ(b[p].slice(b[p].indexOf('"')+1));var w=d.match(D2);w&&function(e,t,n){for(var r=Array.isArray(e),s=0;s!=t.length;++s){var a=SJ(DJ(t[s]),!0);if(!a.ref)return;var i=((n||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+EJ(a.location))):(a.Target="#"+EJ(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=GZ(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=VZ({c:c,r:l});r?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}(o,w,r);var k,S,j=d.match(U2);if(j&&(o["!margins"]=(k=SJ(j[0]),S={},["left","right","top","bottom","header","footer"].forEach(function(e){k[e]&&(S[e]=parseFloat(k[e]))}),S)),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=qZ(l)),t.sheetRows>0&&o["!ref"]){var _=GZ(o["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>l.e.r&&(_.e.r=l.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>l.e.c&&(_.e.c=l.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),o["!fullref"]=o["!ref"],o["!ref"]=qZ(_))}return g.length>0&&(o["!cols"]=g),x.length>0&&(o["!merges"]=x),o}function q2(e,t,n,r){var s=SJ(e);n.Sheets[r]||(n.Sheets[r]={}),s.codeName&&(n.Sheets[r].CodeName=EJ(DJ(s.codeName)))}var G2=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;var K2=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=FJ("v"),i=FJ("f");return function(o,l,c,d,u,h){for(var p,f,m,g,v,y=0,x="",b=[],w=[],k=0,S=0,j=0,_="",A=0,E=0,T=0,N=0,C=Array.isArray(h.CellXf),P=[],R=[],M=Array.isArray(l),I=[],O={},z=!1,D=!!c.sheetStubs,L=o.split(t),F=0,B=L.length;F!=B;++F){var U=(x=L[F].trim()).length;if(0!==U){var W=0;e:for(y=0;y<U;++y)switch(x[y]){case">":if("/"!=x[y-1]){++y;break e}if(c&&c.cellStyles){if(A=null!=(f=SJ(x.slice(W,y),!0)).r?parseInt(f.r,10):A+1,E=-1,c.sheetRows&&c.sheetRows<A)continue;O={},z=!1,f.ht&&(z=!0,O.hpt=parseFloat(f.ht),O.hpx=x1(O.hpt)),"1"==f.hidden&&(z=!0,O.hidden=!0),null!=f.outlineLevel&&(z=!0,O.level=+f.outlineLevel),z&&(I[A-1]=O)}break;case"<":W=y}if(W>=y)break;if(A=null!=(f=SJ(x.slice(W,y),!0)).r?parseInt(f.r,10):A+1,E=-1,!(c.sheetRows&&c.sheetRows<A)){d.s.r>A-1&&(d.s.r=A-1),d.e.r<A-1&&(d.e.r=A-1),c&&c.cellStyles&&(O={},z=!1,f.ht&&(z=!0,O.hpt=parseFloat(f.ht),O.hpx=x1(O.hpt)),"1"==f.hidden&&(z=!0,O.hidden=!0),null!=f.outlineLevel&&(z=!0,O.level=+f.outlineLevel),z&&(I[A-1]=O)),b=x.slice(y).split(e);for(var $=0;$!=b.length&&"<"==b[$].trim().charAt(0);++$);for(b=b.slice($),y=0;y!=b.length;++y)if(0!==(x=b[y].trim()).length){if(w=x.match(n),k=y,S=0,j=0,x="<c "+("<"==x.slice(0,1)?">":"")+x,null!=w&&2===w.length){for(k=0,_=w[1],S=0;S!=_.length&&!((j=_.charCodeAt(S)-64)<1||j>26);++S)k=26*k+j;E=--k}else++E;for(S=0;S!=x.length&&62!==x.charCodeAt(S);++S);if(++S,(f=SJ(x.slice(0,S),!0)).r||(f.r=VZ({r:A-1,c:E})),p={t:""},null!=(w=(_=x.slice(S)).match(a))&&""!==w[1]&&(p.v=EJ(w[1])),c.cellFormula){if(null!=(w=_.match(i))&&""!==w[1]){if(p.f=EJ(DJ(w[1])).replace(/\r\n/g,"\n"),c.xlfn||(p.f=H1(p.f)),w[0].indexOf('t="array"')>-1)p.F=(_.match(s)||[])[1],p.F.indexOf(":")>-1&&P.push([GZ(p.F),p.F]);else if(w[0].indexOf('t="shared"')>-1){g=SJ(w[0]);var V=EJ(DJ(w[1]));c.xlfn||(V=H1(V)),R[parseInt(g.si,10)]=[g,V,f.r]}}else(w=_.match(/<f[^>]*\/>/))&&R[(g=SJ(w[0])).si]&&(p.f=V1(R[g.si][1],R[g.si][2],f.r));var H=$Z(f.r);for(S=0;S<P.length;++S)H.r>=P[S][0].s.r&&H.r<=P[S][0].e.r&&H.c>=P[S][0].s.c&&H.c<=P[S][0].e.c&&(p.F=P[S][1])}if(null==f.t&&void 0===p.v)if(p.f||p.F)p.v=0,p.t="n";else{if(!D)continue;p.t="z"}else p.t=f.t||"n";switch(d.s.c>E&&(d.s.c=E),d.e.c<E&&(d.e.c=E),p.t){case"n":if(""==p.v||null==p.v){if(!D)continue;p.t="z"}else p.v=parseFloat(p.v);break;case"s":if(void 0===p.v){if(!D)continue;p.t="z"}else m=P2[parseInt(p.v,10)],p.v=m.t,p.r=m.r,c.cellHTML&&(p.h=m.h);break;case"str":p.t="s",p.v=null!=p.v?DJ(p.v):"",c.cellHTML&&(p.h=CJ(p.v));break;case"inlineStr":w=_.match(r),p.t="s",null!=w&&(m=V0(w[1]))?(p.v=m.t,c.cellHTML&&(p.h=m.h)):p.v="";break;case"b":p.v=RJ(p.v);break;case"d":c.cellDates?p.v=ZY(p.v,1):(p.v=$Y(ZY(p.v,1)),p.t="n");break;case"e":c&&!1===c.cellText||(p.w=p.v),p.v=SQ[p.v]}if(T=N=0,v=null,C&&void 0!==f.s&&null!=(v=h.CellXf[f.s])&&(null!=v.numFmtId&&(T=v.numFmtId),c.cellStyles&&null!=v.fillId&&(N=v.fillId)),I2(p,T,N,c,u,h),c.cellDates&&C&&"n"==p.t&&NY(tY[T])&&(p.t="d",p.v=GY(p.v)),f.cm&&c.xlmeta){var q=(c.xlmeta.Cell||[])[+f.cm-1];q&&"XLDAPR"==q.type&&(p.D=!0)}if(M){var G=$Z(f.r);l[G.r]||(l[G.r]=[]),l[G.r][G.c]=p}else l[f.r]=p}}}}I.length>0&&(l["!rows"]=I)}}();var X2=uQ;function Y2(e){return[sQ(e),hQ(e),"n"]}var J2=uQ;var Z2=["left","right","top","bottom","header","footer"];function Q2(e,t,n,r,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(e){var t=function(e){var t,n=[],r=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(n[+t[1]]=r?+t[2]:t[2])});var s=EJ((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach(function(e){t=e.replace(/<.*?>/g,"")}),[n,s,t]}(e);d.s.r=d.s.c=0,d.e.c=o,c=WZ(o),t[0].forEach(function(e,n){i[c+BZ(n)]={t:"n",v:e,z:t[1]},l=n}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=qZ(d)),i}var e4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],t4=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],n4=[],r4=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function s4(e,t){for(var n=0;n!=e.length;++n)for(var r=e[n],s=0;s!=t.length;++s){var a=t[s];if(null==r[a[0]])r[a[0]]=a[1];else switch(a[2]){case"bool":"string"==typeof r[a[0]]&&(r[a[0]]=RJ(r[a[0]]));break;case"int":"string"==typeof r[a[0]]&&(r[a[0]]=parseInt(r[a[0]],10))}}}function a4(e,t){for(var n=0;n!=t.length;++n){var r=t[n];if(null==e[r[0]])e[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof e[r[0]]&&(e[r[0]]=RJ(e[r[0]]));break;case"int":"string"==typeof e[r[0]]&&(e[r[0]]=parseInt(e[r[0]],10))}}}function i4(e){a4(e.WBProps,e4),a4(e.CalcPr,r4),s4(e.WBView,t4),s4(e.Sheets,n4),R2.date1904=RJ(e.WBProps.date1904)}var o4="][*?/\\".split("");var l4=/<\w+:workbook/;function c4(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function d4(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],B4[16]={n:"BrtFRTArchID$",f:c4},MZ(e,function(e,o,l){switch(l){case 156:i.SheetNames.push(e.name),n.Sheets.push(e);break;case 153:n.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=v2(e.Ptg,0,null,i,t),delete t.SID,delete e.Ptg,a.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:i[0].length?i.push([l,e]):i[0]=[l,e],i[i.length-1].XTI=[];break;case 362:0===i.length&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(e),i.XTI=i.XTI.concat(e);break;case 35:case 37:r.push(l),s=!0;break;case 36:case 38:r.pop(),s=!1;break;default:if(o.T);else if(!s||t.WTF&&37!=r[r.length-1]&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}},t),i4(n),n.Names=a,n.supbooks=i,n}(e,n):function(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,s="xmlns",a={},i=0;if(e.replace(bJ,function(o,l){var c=SJ(o);switch(jJ(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(l4)&&(s="xmlns"+o.match(/<(\w+):/)[1]),n.xmlns=c[s];break;case"<fileVersion":delete c[0],n.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":e4.forEach(function(e){if(null!=c[e[0]])switch(e[2]){case"bool":n.WBProps[e[0]]=RJ(c[e[0]]);break;case"int":n.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:n.WBProps[e[0]]=c[e[0]]}}),c.codeName&&(n.WBProps.CodeName=DJ(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],n.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=EJ(DJ(c.name)),delete c[0],n.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":r=!1;break;case"<definedName":(a={}).Name=DJ(c.name),c.comment&&(a.Comment=c.comment),c.localSheetId&&(a.Sheet=+c.localSheetId),RJ(c.hidden||"0")&&(a.Hidden=!0),i=l+o.length;break;case"</definedName>":a.Ref=EJ(DJ(e.slice(i,l))),n.Names.push(a);break;case"<calcPr":case"<calcPr/>":delete c[0],n.CalcPr=c;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o}),-1===YJ.indexOf(n.xmlns))throw new Error("Unknown Namespace: "+n.xmlns);return i4(n),n}(e,n)}function u4(e,t,n,r,s,a,i,o){return".bin"===t.slice(-4)?function(e,t,n,r,s,a,i){if(!e)return e;var o=t||{};r||(r={"!id":{}});var l,c,d,u,h,p,f,m,g,v,y=o.dense?[]:{},x={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=!1,w=!1,k=[];o.biff=12,o["!row"]=0;var S=0,j=!1,_=[],A={},E=o.supbooks||s.supbooks||[[]];if(E.sharedf=A,E.arrayf=_,E.SheetNames=s.SheetNames||s.Sheets.map(function(e){return e.name}),!o.supbooks&&(o.supbooks=E,s.Names))for(var T=0;T<s.Names.length;++T)E[0][T+1]=s.Names[T];var N,C=[],P=[],R=!1;if(B4[16]={n:"BrtShortReal",f:Y2},MZ(e,function(e,t,T){if(!w)switch(T){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(w=!0),g=BZ(h=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=x1(e.hpt)),P[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(d={t:e[2]},e[2]){case"n":d.v=e[1];break;case"s":m=P2[e[1]],d.v=m.t,d.r=m.r;break;case"b":d.v=!!e[1];break;case"e":d.v=e[1],!1!==o.cellText&&(d.w=kQ[d.v]);break;case"str":d.t="s",d.v=e[1];break;case"is":d.t="s",d.v=e[1].t}if((u=i.CellXf[e[0].iStyleRef])&&I2(d,u.numFmtId,null,o,a,i),p=-1==e[0].c?p+1:e[0].c,o.dense?(y[h]||(y[h]=[]),y[h][p]=d):y[WZ(p)+g]=d,o.cellFormula){for(j=!1,S=0;S<_.length;++S){var M=_[S];c.r>=M[0].s.r&&c.r<=M[0].e.r&&p>=M[0].s.c&&p<=M[0].e.c&&(d.F=qZ(M[0]),j=!0)}!j&&e.length>3&&(d.f=e[3])}if(x.s.r>c.r&&(x.s.r=c.r),x.s.c>p&&(x.s.c=p),x.e.r<c.r&&(x.e.r=c.r),x.e.c<p&&(x.e.c=p),o.cellDates&&u&&"n"==d.t&&NY(tY[u.numFmtId])){var I=aY(d.v);I&&(d.t="d",d.v=new Date(I.y,I.m-1,I.d,I.H,I.M,I.S,I.u))}N&&("XLDAPR"==N.type&&(d.D=!0),N=void 0);break;case 1:case 12:if(!o.sheetStubs||b)break;d={t:"z",v:void 0},p=-1==e[0].c?p+1:e[0].c,o.dense?(y[h]||(y[h]=[]),y[h][p]=d):y[WZ(p)+g]=d,x.s.r>c.r&&(x.s.r=c.r),x.s.c>p&&(x.s.c=p),x.e.r<c.r&&(x.e.r=c.r),x.e.c<p&&(x.e.c=p),N&&("XLDAPR"==N.type&&(d.D=!0),N=void 0);break;case 176:k.push(e);break;case 49:N=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var O=r["!id"][e.relId];for(O?(e.Target=O.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=O):""==e.relId&&(e.Target="#"+e.loc),h=e.rfx.s.r;h<=e.rfx.e.r;++h)for(p=e.rfx.s.c;p<=e.rfx.e.c;++p)o.dense?(y[h]||(y[h]=[]),y[h][p]||(y[h][p]={t:"z",v:void 0}),y[h][p].l=e):(f=VZ({c:p,r:h}),y[f]||(y[f]={t:"z",v:void 0}),y[f].l=e);break;case 426:if(!o.cellFormula)break;_.push(e),(v=o.dense?y[h][p]:y[WZ(p)+g]).f=v2(e[1],0,{r:c.r,c:p},E,o),v.F=qZ(e[0]);break;case 427:if(!o.cellFormula)break;A[VZ(e[0].s)]=e[1],(v=o.dense?y[h][p]:y[WZ(p)+g]).f=v2(e[1],0,{r:c.r,c:p},E,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)C[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},R||(R=!0,m1(e.w/256)),g1(C[e.e+1]);break;case 161:y["!autofilter"]={ref:qZ(e)};break;case 476:y["!margins"]=e;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),e.name&&(s.Sheets[n].CodeName=e.name),(e.above||e.left)&&(y["!outline"]={above:e.above,left:e.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),e.RTL&&(s.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:case 37:b=!0;break;case 36:case 38:b=!1;break;default:if(t.T);else if(!b||o.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}},o),delete o.supbooks,delete o["!row"],!y["!ref"]&&(x.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(y["!ref"]=qZ(l||x)),o.sheetRows&&y["!ref"]){var M=GZ(y["!ref"]);o.sheetRows<=+M.e.r&&(M.e.r=o.sheetRows-1,M.e.r>x.e.r&&(M.e.r=x.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>x.e.c&&(M.e.c=x.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),y["!fullref"]=y["!ref"],y["!ref"]=qZ(M))}return k.length>0&&(y["!merges"]=k),C.length>0&&(y["!cols"]=C),P.length>0&&(y["!rows"]=P),y}(e,r,n,s,a,i,o):H2(e,r,n,s,a,i,o)}function h4(e,t,n,r,s,a,i,o){return".bin"===t.slice(-4)?function(e,t,n,r,s){if(!e)return e;r||(r={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return MZ(e,function(e,r,o){switch(o){case 550:a["!rel"]=e;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),e.name&&(s.Sheets[n].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:case 37:case 38:break;case 35:i=!0;break;case 36:i=!1;break;default:if(r.T>0);else if(r.T<0);else if(!i||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}},t),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}(e,r,n,s,a):function(e,t,n,r,s){if(!e)return e;r||(r={"!id":{}});var a,i={"!type":"chart","!drawel":null,"!rel":""},o=e.match(W2);return o&&q2(o[0],0,s,n),(a=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}(e,0,n,s,a)}function p4(e,t,n,r){return".bin"===t.slice(-4)?function(e,t,n){var r={NumberFmt:[]};for(var s in tY)r.NumberFmt[s]=tY[s];r.CellXf=[],r.Fonts=[];var a=[],i=!1;return MZ(e,function(e,s,o){switch(o){case 44:r.NumberFmt[e[0]]=e[1],IY(e[1],e[0]);break;case 43:r.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=c1(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==a[a.length-1]&&r.CellXf.push(e);break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(o),i=!0;break;case 38:a.pop(),i=!1;break;default:if(s.T>0)a.push(o);else if(s.T<0)a.pop();else if(!i||n.WTF&&37!=a[a.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}}),r}(e,n,r):S1(e,n,r)}function f4(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=!1;return MZ(e,function(e,s,a){switch(a){case 159:n.Count=e[0],n.Unique=e[1];break;case 19:n.push(e);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(s.T,!r||t.WTF)throw new Error("Unexpected record 0x"+a.toString(16))}}),n}(e,n):function(e,t){var n=[],r="";if(!e)return n;var s=e.match(H0);if(s){r=s[2].replace(q0,"").split(G0);for(var a=0;a!=r.length;++a){var i=V0(r[a].trim(),t);null!=i&&(n[n.length]=i)}s=SJ(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}(e,n)}function m4(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=[],s={},a=!1;return MZ(e,function(e,i,o){switch(o){case 632:r.push(e);break;case 635:s=e;break;case 637:s.t=e.t,s.h=e.h,s.r=e.r;break;case 636:if(s.author=r[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:case 37:case 38:break;case 35:a=!0;break;case 36:a=!1;break;default:if(i.T);else if(!a||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}(e,n):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&n.push(t[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(e){if(""!==e&&""!==e.trim()){var s=e.match(/<(?:\w+:)?comment[^>]*>/);if(s){var a=SJ(s[0]),i={author:a.authorId&&n[a.authorId]||"sheetjsghost",ref:a.ref,guid:a.guid},o=$Z(a.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&V0(l[1])||{r:"",t:"",h:""};i.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),i.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(i.h=c.h),r.push(i)}}}}),r}(e,n)}function g4(e,t,n){return".bin"===t.slice(-4)?function(e){var t=[];return MZ(e,function(e,n,r){if(63===r)t.push(e);else if(!n.T)throw new Error("Unexpected record 0x"+r.toString(16))}),t}(e):function(e){var t=[];if(!e)return t;var n=1;return(e.match(bJ)||[]).forEach(function(e){var r=SJ(e);switch(r[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r)}}),t}(e)}function v4(e,t,n,r){if(".bin"===n.slice(-4))return function(e,t,n,r){if(!e)return e;var s=r||{},a=!1;MZ(e,function(e,t,n){switch(n){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(t.T);else if(!a||s.WTF)throw new Error("Unexpected record 0x"+n.toString(16))}},s)}(e,0,0,r)}function y4(e,t,n){return".bin"===t.slice(-4)?function(e,t,n){var r={Types:[],Cell:[],Value:[]},s=n||{},a=[],i=!1,o=2;return MZ(e,function(e,t,n){switch(n){case 335:r.Types.push({name:e.name});break;case 51:e.forEach(function(e){1==o?r.Cell.push({type:r.Types[e[0]-1].name,index:e[1]}):0==o&&r.Value.push({type:r.Types[e[0]-1].name,index:e[1]})});break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:a.push(n),i=!0;break;case 36:a.pop(),i=!1;break;default:if(t.T);else if(!i||s.WTF&&35!=a[a.length-1])throw new Error("Unexpected record 0x"+n.toString(16))}}),r}(e,0,n):function(e,t,n){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var s,a=!1,i=2;return e.replace(bJ,function(e){var t=SJ(e);switch(jJ(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":r.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<r.Types.length;++o)r.Types[o].name==t.name&&(s=r.Types[o]);break;case"<rc":1==i?r.Cell.push({type:r.Types[t.t-1].name,index:+t.v}):0==i&&r.Value.push({type:r.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":i=1;break;case"</cellMetadata>":case"</valueMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+t.i);break;default:if(!a&&n.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e}),r}(e,0,n)}var x4,b4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,w4=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function k4(e,t){var n=e.split(/\s+/),r=[];if(t||(r[0]=n[0]),1===n.length)return r;var s,a,i,o=e.match(b4);if(o)for(i=0;i!=o.length;++i)-1===(a=(s=o[i].match(w4))[1].indexOf(":"))?r[s[1]]=s[2].slice(1,s[2].length-1):r["xmlns:"===s[1].slice(0,6)?"xmlns"+s[1].slice(6):s[1].slice(a+1)]=s[2].slice(1,s[2].length-1);return r}function S4(e){var t={};if(1===e.split(/\s+/).length)return t;var n,r,s,a=e.match(b4);if(a)for(s=0;s!=a.length;++s)-1===(r=(n=a[s].match(w4))[1].indexOf(":"))?t[n[1]]=n[2].slice(1,n[2].length-1):t["xmlns:"===n[1].slice(0,6)?"xmlns"+n[1].slice(6):n[1].slice(r+1)]=n[2].slice(1,n[2].length-1);return t}function j4(e,t,n,r){var s=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=RJ(r);break;case"i2":case"int":s=parseInt(r,10);break;case"r4":case"float":s=parseFloat(r);break;case"date":case"dateTime.tz":s=ZY(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[EJ(t)]=s}function _4(e,t,n){if("z"!==e.t){if(!n||!1!==n.cellText)try{"e"===e.t?e.w=e.w||kQ[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=uY(e.v):e.w=hY(e.v):e.w=(r=t||"General",s=e.v,"General"===(a=x4[r]||EJ(r))?hY(s):MY(a,s))}catch(Vne){if(n.WTF)throw Vne}var r,s,a;try{var i=x4[t]||t||"General";if(n.cellNF&&(e.z=i),n.cellDates&&"n"==e.t&&NY(i)){var o=aY(e.v);o&&(e.t="d",e.v=new Date(o.y,o.m-1,o.d,o.H,o.M,o.S,o.u))}}catch(Vne){if(n.WTF)throw Vne}}}function A4(e,t,n){if(n.cellStyles&&t.Interior){var r=t.Interior;r.Pattern&&(r.patternType=b1[r.Pattern]||r.Pattern)}e[t.ID]=t}function E4(e,t,n,r,s,a,i,o,l,c){var d="General",u=r.StyleID,h={};c=c||{};var p=[],f=0;for(void 0===u&&o&&(u=o.StyleID),void 0===u&&i&&(u=i.StyleID);void 0!==a[u]&&(a[u].nf&&(d=a[u].nf),a[u].Interior&&p.push(a[u].Interior),a[u].Parent);)u=a[u].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=RJ(e);break;case"String":r.t="s",r.r=PJ(EJ(e)),r.v=e.indexOf("<")>-1?EJ(t||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),r.v=(ZY(e)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!=r.v?r.v=EJ(e):r.v<60&&(r.v=r.v-1),d&&"General"!=d||(d="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=SQ[e],!1!==c.cellText&&(r.w=e);break;default:""==e&&""==t?r.t="z":(r.t="s",r.v=PJ(t||e))}if(_4(r,d,c),!1!==c.cellFormula)if(r.Formula){var m=EJ(r.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),r.f=B1(m,s),delete r.Formula,"RC"==r.ArrayRange?r.F=B1("RC:RC",s):r.ArrayRange&&(r.F=B1(r.ArrayRange,s),l.push([GZ(r.F),r.F]))}else for(f=0;f<l.length;++f)s.r>=l[f][0].s.r&&s.r<=l[f][0].e.r&&s.c>=l[f][0].s.c&&s.c<=l[f][0].e.c&&(r.F=l[f][1]);c.cellStyles&&(p.forEach(function(e){!h.patternType&&e.patternType&&(h.patternType=e.patternType)}),r.s=h),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function T4(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function N4(e,t){var n=t||{};OY();var r=CX(GJ(e));"binary"!=n.type&&"array"!=n.type&&"base64"!=n.type||(r=DJ(r));var s,a=r.slice(0,1024).toLowerCase(),i=!1;if((1023&(a=a.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&a.indexOf(","),1023&a.indexOf(";"))){var o=eJ(n);return o.type="string",D0.to_workbook(r,o)}if(-1==a.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach(function(e){a.indexOf("<"+e)>=0&&(i=!0)}),i)return function(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||0==n.length)throw new Error("Invalid HTML: could not find <table>");if(1==n.length)return YZ($4(n[0],t),t);var r={SheetNames:[],Sheets:{}};return n.forEach(function(e,n){M3(r,$4(e,t),"Sheet"+(n+1))}),r}(r,n);x4={"General Number":"General","General Date":tY[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tY[15],"Short Date":tY[14],"Long Time":tY[19],"Medium Time":tY[18],"Short Time":tY[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tY[2],Standard:tY[4],Percent:tY[10],Scientific:tY[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c,d=[],u={},h=[],p=n.dense?[]:{},f="",m={},g={},v=k4('<Data ss:Type="String">'),y=0,x=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},S={},j="",_=0,A=[],E={},T={},N=0,C=[],P=[],R={},M=[],I=!1,O=[],z=[],D={},L=0,F=0,B={Sheets:[],WBProps:{date1904:!1}},U={};KJ.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");for(var W="";s=KJ.exec(r);)switch(s[3]=(W=s[3]).toLowerCase()){case"data":if("data"==W){if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&d.push([s[3],!0]);break}if(d[d.length-1][1])break;"/"===s[1]?E4(r.slice(y,s.index),j,v,"comment"==d[d.length-1][0]?R:m,{c:x,r:b},k,M[x],g,O,n):(j="",v=k4(s[0]),y=s.index+s[0].length);break;case"cell":if("/"===s[1])if(P.length>0&&(m.c=P),(!n.sheetRows||n.sheetRows>b)&&void 0!==m.v&&(n.dense?(p[b]||(p[b]=[]),p[b][x]=m):p[WZ(x)+BZ(b)]=m),m.HRef&&(m.l={Target:EJ(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(L=x+(0|parseInt(m.MergeAcross,10)),F=b+(0|parseInt(m.MergeDown,10)),A.push({s:{c:x,r:b},e:{c:L,r:F}})),n.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var $=x;$<=L;++$)for(var V=b;V<=F;++V)($>x||V>b)&&(n.dense?(p[V]||(p[V]=[]),p[V][$]={t:"z"}):p[WZ($)+BZ(V)]={t:"z"});x=L+1}else++x;else m.MergeAcross?x=L+1:++x;else(m=S4(s[0])).Index&&(x=+m.Index-1),x<w.s.c&&(w.s.c=x),x>w.e.c&&(w.e.c=x),"/>"===s[0].slice(-2)&&++x,P=[];break;case"row":"/"===s[1]||"/>"===s[0].slice(-2)?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),"/>"===s[0].slice(-2)&&(g=k4(s[0])).Index&&(b=+g.Index-1),x=0,++b):((g=k4(s[0])).Index&&(b=+g.Index-1),D={},("0"==g.AutoFitHeight||g.Height)&&(D.hpx=parseInt(g.Height,10),D.hpt=y1(D.hpx),z[b]=D),"1"==g.Hidden&&(D.hidden=!0,z[b]=D));break;case"worksheet":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));h.push(f),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(p["!ref"]=qZ(w),n.sheetRows&&n.sheetRows<=w.e.r&&(p["!fullref"]=p["!ref"],w.e.r=n.sheetRows-1,p["!ref"]=qZ(w))),A.length&&(p["!merges"]=A),M.length>0&&(p["!cols"]=M),z.length>0&&(p["!rows"]=z),u[f]=p}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=x=0,d.push([s[3],!1]),l=k4(s[0]),f=EJ(l.Name),p=n.dense?[]:{},A=[],O=[],z=[],U={name:f,Hidden:0},B.Sheets.push(U);break;case"table":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==s[0].slice(-2))break;d.push([s[3],!1]),M=[],I=!1}break;case"style":"/"===s[1]?A4(k,S,n):S=k4(s[0]);break;case"numberformat":S.nf=EJ(k4(s[0]).Format||"General"),x4[S.nf]&&(S.nf=x4[S.nf]);for(var H=0;392!=H&&tY[H]!=S.nf;++H);if(392==H)for(H=57;392!=H;++H)if(null==tY[H]){IY(S.nf,H);break}break;case"column":if("table"!==d[d.length-1][0])break;if((c=k4(s[0])).Hidden&&(c.hidden=!0,delete c.Hidden),c.Width&&(c.wpx=parseInt(c.Width,10)),!I&&c.wpx>10){I=!0,d1=6;for(var q=0;q<M.length;++q)M[q]&&g1(M[q])}I&&g1(c),M[c.Index-1||M.length]=c;for(var G=0;G<+c.Span;++G)M[M.length]=eJ(c);break;case"namedrange":if("/"===s[1])break;B.Names||(B.Names=[]);var K=SJ(s[0]),X={Name:K.Name,Ref:B1(K.RefersTo.slice(1),{r:0,c:0})};B.Sheets.length>0&&(X.Sheet=B.Sheets.length-1),B.Names.push(X);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===s[0].slice(-2))break;"/"===s[1]?j+=r.slice(_,s.index):_=s.index+s[0].length;break;case"interior":if(!n.cellStyles)break;S.Interior=k4(s[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===s[0].slice(-2))break;"/"===s[1]?zQ(E,W,r.slice(N,s.index)):N=s.index+s[0].length;break;case"styles":case"workbook":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else d.push([s[3],!1]);break;case"comment":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));T4(R),P.push(R)}else d.push([s[3],!1]),R={a:(l=k4(s[0])).Author};break;case"autofilter":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==s[0].charAt(s[0].length-2)){var Y=k4(s[0]);p["!autofilter"]={ref:B1(Y.Range).replace(/\$/g,"")},d.push([s[3],!0])}break;case"datavalidation":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&d.push([s[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===s[1]){if((l=d.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&d.push([s[3],!0]);break;default:if(0==d.length&&"document"==s[3])return Z4(r,n);if(0==d.length&&"uof"==s[3])return Z4(r,n);var J=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:J=!1}break;case"componentoptions":switch(s[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:J=!1}break;case"excelworkbook":switch(s[3]){case"date1904":B.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:J=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":case"height":case"width":break;default:J=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if("/>"===s[0].slice(-2));else if("/"===s[1])switch(r.slice(N,s.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2}else N=s.index+s[0].length;break;case"header":p["!margins"]||M2(p["!margins"]={},"xlml"),isNaN(+SJ(s[0]).Margin)||(p["!margins"].header=+SJ(s[0]).Margin);break;case"footer":p["!margins"]||M2(p["!margins"]={},"xlml"),isNaN(+SJ(s[0]).Margin)||(p["!margins"].footer=+SJ(s[0]).Margin);break;case"pagemargins":var Z=SJ(s[0]);p["!margins"]||M2(p["!margins"]={},"xlml"),isNaN(+Z.Top)||(p["!margins"].top=+Z.Top),isNaN(+Z.Left)||(p["!margins"].left=+Z.Left),isNaN(+Z.Right)||(p["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(p["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":B.Views||(B.Views=[]),B.Views[0]||(B.Views[0]={}),B.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;default:J=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:J=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:J=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:J=!1}break;case"querytable":switch(s[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:J=!1}break;case"datavalidation":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:J=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:J=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:J=!1}break;case"smarttags":break;default:J=!1}if(J)break;if(s[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+d.join("|");if("customdocumentproperties"===d[d.length-1][0]){if("/>"===s[0].slice(-2))break;"/"===s[1]?j4(T,W,C,r.slice(N,s.index)):(C=s,N=s.index+s[0].length);break}if(n.WTF)throw"Unrecognized tag: "+s[3]+"|"+d.join("|")}var Q={};return n.bookSheets||n.bookProps||(Q.Sheets=u),Q.SheetNames=h,Q.Workbook=B,Q.SSF=eJ(tY),Q.Props=E,Q.Custprops=T,Q}function C4(e,t){switch(g3(t=t||{}),t.type||"base64"){case"base64":return N4(OX(e),t);case"binary":case"buffer":case"file":return N4(e,t);case"array":return N4(UX(e),t)}}function P4(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return pQ(e,1)}(n),n.length-n.l<=4)return t;var r=n.read_shift(4);return 0==r||r>40?t:(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4||1907505652!==(r=n.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return pQ(e,2)}(n),0==(r=n.read_shift(4))||r>40?t:(n.l-=4,void(t.Reserved2=n.read_shift(0,"lpwstr")))))}var R4=[60,1084,2066,2165,2175];function M4(e,t,n,r,s){var a=r,i=[],o=n.slice(n.l,n.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:s.enc.insitu(o)}i.push(o),n.l+=a;for(var l=xZ(n,n.l),c=U4[l],d=0;null!=c&&R4.indexOf(l)>-1;)a=xZ(n,n.l+2),d=n.l+4,2066==l?d+=4:2165!=l&&2175!=l||(d+=12),o=n.slice(d,n.l+4+a),i.push(o),n.l+=4+a,c=U4[l=xZ(n,n.l)];var u=$X(i);CZ(u,0);var h=0;u.lens=[];for(var p=0;p<i.length;++p)u.lens.push(h),h+=i[p].length;if(u.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+r;return t.f(u,u.length,s)}function I4(e,t,n){if("z"!==e.t&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=tY[r])}catch(Vne){if(t.WTF)throw Vne}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||kQ[e.v]:0===r||"General"==r?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=uY(e.v):e.w=hY(e.v):e.w=MY(r,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(Vne){if(t.WTF)throw Vne}if(t.cellDates&&r&&"n"==e.t&&NY(tY[r]||String(r))){var s=aY(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function O4(e,t,n){return{v:e,ixfe:t,t:n}}function z4(e,t){var n,r,s,a,i,o,l,c,d={opts:{}},u={},h=t.dense?[]:{},p={},f={},m=null,g=[],v="",y={},x="",b={},w=[],k=[],S=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},A=function(e){return e<8?wQ[e]:e<64&&S[e-8]||wQ[e]},E=function(e,t,r){if(!(D>1||r.sheetRows&&e.r>=r.sheetRows)){if(r.cellStyles&&t.XF&&t.XF.data&&function(e,t,n){var r,s=t.XF.data;s&&s.patternType&&n&&n.cellStyles&&(t.s={},t.s.patternType=s.patternType,(r=l1(A(s.icvFore)))&&(t.s.fgColor={rgb:r}),(r=l1(A(s.icvBack)))&&(t.s.bgColor={rgb:r}))}(0,t,r),delete t.ixfe,delete t.XF,n=e,x=VZ(e),f&&f.s&&f.e||(f={s:{r:0,c:0},e:{r:0,c:0}}),e.r<f.s.r&&(f.s.r=e.r),e.c<f.s.c&&(f.s.c=e.c),e.r+1>f.e.r&&(f.e.r=e.r+1),e.c+1>f.e.c&&(f.e.c=e.c+1),r.cellFormula&&t.f)for(var s=0;s<w.length;++s)if(!(w[s][0].s.c>e.c||w[s][0].s.r>e.r||w[s][0].e.c<e.c||w[s][0].e.r<e.r)){t.F=qZ(w[s][0]),w[s][0].s.c==e.c&&w[s][0].s.r==e.r||delete t.f,t.f&&(t.f=""+v2(w[s][1],0,e,I,T));break}r.dense?(h[e.r]||(h[e.r]=[]),h[e.r][e.c]=t):h[x]=t}},T={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(T.password=t.password);var N=[],C=[],P=[],R=[],M=!1,I=[];I.SheetNames=T.snames,I.sharedf=T.sharedf,I.arrayf=T.arrayf,I.names=[],I.XTI=[];var O,z=0,D=0,L=0,F=[],B=[];T.codepage=1200,_X(1200);for(var U=!1;e.l<e.length-1;){var W=e.l,$=e.read_shift(2);if(0===$&&10===z)break;var V=e.l===e.length?0:e.read_shift(2),H=U4[$];if(H&&H.f){if(t.bookSheets&&133===z&&133!==$)break;if(z=$,2===H.r||12==H.r){var q=e.read_shift(2);if(V-=2,!T.enc&&q!==$&&((255&q)<<8|q>>8)!==$)throw new Error("rt mismatch: "+q+"!="+$);12==H.r&&(e.l+=10,V-=10)}var G={};if(G=10===$?H.f(e,V,T):M4($,H,e,V,T),0==D&&-1===[9,521,1033,2057].indexOf(z))continue;switch($){case 34:d.opts.Date1904=j.WBProps.date1904=G;break;case 134:d.opts.WriteProtect=!0;break;case 47:if(T.enc||(e.l=0),T.enc=G,!t.password)throw new Error("File is password-protected");if(null==G.valid)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=G;break;case 66:var K=Number(G);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252}_X(T.codepage=K),U=!0;break;case 317:T.rrtabid=G;break;case 25:T.winlocked=G;break;case 439:d.opts.RefreshAll=G;break;case 12:d.opts.CalcCount=G;break;case 16:d.opts.CalcDelta=G;break;case 17:d.opts.CalcIter=G;break;case 13:d.opts.CalcMode=G;break;case 14:d.opts.CalcPrecision=G;break;case 95:d.opts.CalcSaveRecalc=G;break;case 15:T.CalcRefMode=G;break;case 2211:d.opts.FullCalc=G;break;case 129:G.fDialog&&(h["!type"]="dialog"),G.fBelow||((h["!outline"]||(h["!outline"]={})).above=!0),G.fRight||((h["!outline"]||(h["!outline"]={})).left=!0);break;case 224:k.push(G);break;case 430:I.push([G]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(G);break;case 24:case 536:O={Name:G.Name,Ref:v2(G.rgce,0,null,I,T)},G.itab>0&&(O.Sheet=G.itab-1),I.names.push(O),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(G),"_xlnm._FilterDatabase"==G.Name&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&"PtgArea3d"==G.rgce[0][0][0]&&(B[G.itab-1]={ref:qZ(G.rgce[0][0][1][2])});break;case 22:T.ExternCount=G;break;case 23:0==I.length&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(G),I.XTI=I.XTI.concat(G);break;case 2196:if(T.biff<8)break;null!=O&&(O.Comment=G[1]);break;case 18:h["!protect"]=G;break;case 19:0!==G&&T.WTF&&console.error("Password verifier: "+G);break;case 133:p[G.pos]=G,T.snames.push(G.name);break;case 10:if(--D)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,h["!ref"]=qZ(f),t.sheetRows&&t.sheetRows<=f.e.r){var X=f.e.r;f.e.r=t.sheetRows-1,h["!fullref"]=h["!ref"],h["!ref"]=qZ(f),f.e.r=X}f.e.r++,f.e.c++}N.length>0&&(h["!merges"]=N),C.length>0&&(h["!objects"]=C),P.length>0&&(h["!cols"]=P),R.length>0&&(h["!rows"]=R),j.Sheets.push(_)}""===v?y=h:u[v]=h,h=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===T.biff&&(T.biff={9:2,521:3,1033:4}[$]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),T.biffguess=0==G.BIFFVer,0==G.BIFFVer&&4096==G.dt&&(T.biff=5,U=!0,_X(T.codepage=28591)),8==T.biff&&0==G.BIFFVer&&16==G.dt&&(T.biff=2),D++)break;if(h=t.dense?[]:{},T.biff<8&&!U&&(U=!0,_X(T.codepage=t.codepage||1252)),T.biff<5||0==G.BIFFVer&&4096==G.dt){""===v&&(v="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var Y={pos:e.l-V,name:v};p[Y.pos]=Y,T.snames.push(v)}else v=(p[W]||{name:""}).name;32==G.dt&&(h["!type"]="chart"),64==G.dt&&(h["!type"]="macro"),N=[],C=[],T.arrayf=w=[],P=[],R=[],M=!1,_={Hidden:(p[W]||{hs:0}).hs,name:v};break;case 515:case 3:case 2:"chart"==h["!type"]&&(t.dense?(h[G.r]||[])[G.c]:h[VZ({c:G.c,r:G.r})])&&++G.c,o={ixfe:G.ixfe,XF:k[G.ixfe]||{},v:G.val,t:"n"},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t);break;case 5:case 517:o={ixfe:G.ixfe,XF:k[G.ixfe],v:G.val,t:G.t},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t);break;case 638:o={ixfe:G.ixfe,XF:k[G.ixfe],v:G.rknum,t:"n"},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t);break;case 189:for(var J=G.c;J<=G.C;++J){var Z=G.rkrec[J-G.c][0];o={ixfe:Z,XF:k[Z],v:G.rkrec[J-G.c][1],t:"n"},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:J,r:G.r},o,t)}break;case 6:case 518:case 1030:if("String"==G.val){m=G;break}if((o=O4(G.val,G.cell.ixfe,G.tt)).XF=k[o.ixfe],t.cellFormula){var Q=G.formula;if(Q&&Q[0]&&Q[0][0]&&"PtgExp"==Q[0][0][0]){var ee=Q[0][0][1][0],te=Q[0][0][1][1],ne=VZ({r:ee,c:te});b[ne]?o.f=""+v2(G.formula,0,G.cell,I,T):o.F=((t.dense?(h[ee]||[])[te]:h[ne])||{}).F}else o.f=""+v2(G.formula,0,G.cell,I,T)}L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E(G.cell,o,t),m=G;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=G,(o=O4(G,m.cell.ixfe,"s")).XF=k[o.ixfe],t.cellFormula&&(o.f=""+v2(m.formula,0,m.cell,I,T)),L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E(m.cell,o,t),m=null;break;case 33:case 545:w.push(G);var re=VZ(G[0].s);if(r=t.dense?(h[G[0].s.r]||[])[G[0].s.c]:h[re],t.cellFormula&&r){if(!m)break;if(!re||!r)break;r.f=""+v2(G[1],0,G[0],I,T),r.F=qZ(G[0])}break;case 1212:if(!t.cellFormula)break;if(x){if(!m)break;b[VZ(m.cell)]=G[0],((r=t.dense?(h[m.cell.r]||[])[m.cell.c]:h[VZ(m.cell)])||{}).f=""+v2(G[0],0,n,I,T)}break;case 253:o=O4(g[G.isst].t,G.ixfe,"s"),g[G.isst].h&&(o.h=g[G.isst].h),o.XF=k[o.ixfe],L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t);break;case 513:t.sheetStubs&&(o={ixfe:G.ixfe,XF:k[G.ixfe],t:"z"},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t));break;case 190:if(t.sheetStubs)for(var se=G.c;se<=G.C;++se){var ae=G.ixfe[se-G.c];o={ixfe:ae,XF:k[ae],t:"z"},L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:se,r:G.r},o,t)}break;case 214:case 516:case 4:(o=O4(G.val,G.ixfe,"s")).XF=k[o.ixfe],L>0&&(o.z=F[o.ixfe>>8&63]),I4(o,t,d.opts.Date1904),E({c:G.c,r:G.r},o,t);break;case 0:case 512:1===D&&(f=G);break;case 252:g=G;break;case 1054:if(4==T.biff){F[L++]=G[1];for(var ie=0;ie<L+163&&tY[ie]!=G[1];++ie);ie>=163&&IY(G[1],L+163)}else IY(G[1],G[0]);break;case 30:F[L++]=G;for(var oe=0;oe<L+163&&tY[oe]!=G;++oe);oe>=163&&IY(G,L+163);break;case 229:N=N.concat(G);break;case 93:C[G.cmo[0]]=T.lastobj=G;break;case 438:T.lastobj.TxO=G;break;case 127:T.lastobj.ImData=G;break;case 440:for(i=G[0].s.r;i<=G[0].e.r;++i)for(a=G[0].s.c;a<=G[0].e.c;++a)(r=t.dense?(h[i]||[])[a]:h[VZ({c:a,r:i})])&&(r.l=G[1]);break;case 2048:for(i=G[0].s.r;i<=G[0].e.r;++i)for(a=G[0].s.c;a<=G[0].e.c;++a)(r=t.dense?(h[i]||[])[a]:h[VZ({c:a,r:i})])&&r.l&&(r.l.Tooltip=G[1]);break;case 28:if(T.biff<=5&&T.biff>=2)break;r=t.dense?(h[G[0].r]||[])[G[0].c]:h[VZ(G[0])];var le=C[G[2]];r||(t.dense?(h[G[0].r]||(h[G[0].r]=[]),r=h[G[0].r][G[0].c]={t:"z"}):r=h[VZ(G[0])]={t:"z"},f.e.r=Math.max(f.e.r,G[0].r),f.s.r=Math.min(f.s.r,G[0].r),f.e.c=Math.max(f.e.c,G[0].c),f.s.c=Math.min(f.s.c,G[0].c)),r.c||(r.c=[]),s={a:G[1],t:le.TxO.t},r.c.push(s);break;case 2173:D1(k[G.ixfe],G.ext);break;case 125:if(!T.cellStyles)break;for(;G.e>=G.s;)P[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(1&G.flags)},M||(M=!0,m1(G.w/256)),g1(P[G.e+1]);break;case 520:var ce={};null!=G.level&&(R[G.r]=ce,ce.level=G.level),G.hidden&&(R[G.r]=ce,ce.hidden=!0),G.hpt&&(R[G.r]=ce,ce.hpt=G.hpt,ce.hpx=x1(G.hpt));break;case 38:case 39:case 40:case 41:h["!margins"]||M2(h["!margins"]={}),h["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[$]]=G;break;case 161:h["!margins"]||M2(h["!margins"]={}),h["!margins"].header=G.header,h["!margins"].footer=G.footer;break;case 574:G.RTL&&(j.Views[0].RTL=!0);break;case 146:S=G;break;case 2198:c=G;break;case 140:l=G;break;case 442:v?_.CodeName=G||_.name:j.WBProps.CodeName=G||"ThisWorkbook"}}else H||console.error("Missing Info for XLS Record 0x"+$.toString(16)),e.l+=V}return d.SheetNames=BY(p).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return p[e].name}),t.bookSheets||(d.Sheets=u),!d.SheetNames.length&&y["!ref"]?(d.SheetNames.push("Sheet1"),d.Sheets&&(d.Sheets.Sheet1=y)):d.Preamble=y,d.Sheets&&B.forEach(function(e,t){d.Sheets[d.SheetNames[t]]["!autofilter"]=e}),d.Strings=g,d.SSF=eJ(tY),T.enc&&(d.Encryption=T.enc),c&&(d.Themes=c),d.Metadata={},void 0!==l&&(d.Metadata.Country=l),I.names.length>0&&(j.Names=I.names),d.Workbook=j,d}var D4="e0859ff2f94f6810ab9108002b27b3d9",L4="02d5cdd59c2e1b10939708002b2cf9ae";function F4(e,t){var n,r,s,a;if(t||(t={}),g3(t),AX(),t.codepage&&jX(t.codepage),e.FullPaths){if(FY.find(e,"/encryption"))throw new Error("File is password-protected");n=FY.find(e,"!CompObj"),r=FY.find(e,"/Workbook")||FY.find(e,"/Book")}else{switch(t.type){case"base64":e=BX(OX(e));break;case"binary":e=BX(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}CZ(e,0),r={content:e}}if(n&&P4(n),t.bookProps&&!t.bookSheets)s={};else{var i=zX?"buffer":"array";if(r&&r.content)s=z4(r.content,t);else if((a=FY.find(e,"PerfectOffice_MAIN"))&&a.content)s=L0.to_workbook(a.content,(t.type=i,t));else{if(!(a=FY.find(e,"NativeContent_MAIN"))||!a.content)throw(a=FY.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s=L0.to_workbook(a.content,(t.type=i,t))}t.bookVBA&&e.FullPaths&&FY.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=function(e){var t=FY.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,r){if("/"!==n.slice(-1)&&n.match(/_VBA_PROJECT_CUR/)){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");FY.utils.cfb_add(t,s,e.FileIndex[r].content)}}),FY.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,n){var r=FY.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var s=GQ(r,gQ,L4);for(var a in s)t[a]=s[a]}catch(Vne){if(n.WTF)throw Vne}var i=FY.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=GQ(i,vQ,D4);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(Vne){if(n.WTF)throw Vne}t.HeadingPairs&&t.TitlesOfParts&&(RQ(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}var B4={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=r,7&a&&(n.level=7&a),16&a&&(n.hidden=!0),32&a&&(n.hpt=s/20),n}},1:{f:function(e){return[rQ(e)]}},2:{f:function(e){return[rQ(e),cQ(e),"n"]}},3:{f:function(e){return[rQ(e),e.read_shift(1),"e"]}},4:{f:function(e){return[rQ(e),e.read_shift(1),"b"]}},5:{f:function(e){return[rQ(e),hQ(e),"n"]}},6:{f:function(e){return[rQ(e),QZ(e),"str"]}},7:{f:function(e){return[rQ(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,s=rQ(e);s.r=n["!row"];var a=[s,QZ(e),"str"];if(n.cellFormula){e.l+=2;var i=S2(e,r-e.l,n);a[3]=v2(i,0,s,n.supbooks,n)}else e.l=r;return a}},9:{f:function(e,t,n){var r=e.l+t,s=rQ(e);s.r=n["!row"];var a=[s,hQ(e),"n"];if(n.cellFormula){e.l+=2;var i=S2(e,r-e.l,n);a[3]=v2(i,0,s,n.supbooks,n)}else e.l=r;return a}},10:{f:function(e,t,n){var r=e.l+t,s=rQ(e);s.r=n["!row"];var a=[s,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var i=S2(e,r-e.l,n);a[3]=v2(i,0,s,n.supbooks,n)}else e.l=r;return a}},11:{f:function(e,t,n){var r=e.l+t,s=rQ(e);s.r=n["!row"];var a=[s,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var i=S2(e,r-e.l,n);a[3]=v2(i,0,s,n.supbooks,n)}else e.l=r;return a}},12:{f:function(e){return[sQ(e)]}},13:{f:function(e){return[sQ(e),cQ(e),"n"]}},14:{f:function(e){return[sQ(e),e.read_shift(1),"e"]}},15:{f:function(e){return[sQ(e),e.read_shift(1),"b"]}},16:{f:Y2},17:{f:function(e){return[sQ(e),QZ(e),"str"]}},18:{f:function(e){return[sQ(e),e.read_shift(4),"s"]}},19:{f:tQ},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=oQ(e),i=j2(e,0,n),o=iQ(e);e.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(r.underline=a);var i=e.read_shift(1);i>0&&(r.family=i);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=wQ[r];l&&(t.rgb=l1(l));break;case 2:t.rgb=l1([a,i,o]);break;case 3:t.theme=r}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=QZ(e),r}},44:{f:function(e,t){return[e.read_shift(2),QZ(e)]}},45:{f:j1},46:{f:_1},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),s=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:T0},62:{f:function(e){return[rQ(e),tQ(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=VZ(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:PZ,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=aQ(e),n}},148:{f:X2,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var s=t>8?QZ(e):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=lQ(e),n.name=QZ(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:uQ},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:J2},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:QZ(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:lQ},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_0},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,s=dQ(e),a=e.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=k2(e,r-e.l,n);i[1]=o}else e.l=r;return i}},427:{f:function(e,t,n){var r=e.l+t,s=[uQ(e)];if(n.cellFormula){var a=_2(e,r-e.l,n);s[1]=a,e.l=r}else e.l=r;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Z2.forEach(function(n){t[n]=hQ(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=uQ(e),s=iQ(e),a=QZ(e),i=QZ(e),o=QZ(e);e.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:lQ},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:F1},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=uQ(e);return t.rfx=n.s,t.ref=VZ(n.s),e.l+=16,t}},636:{T:-1},637:{f:nQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:QZ(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},U4={6:{f:b2},10:{f:KQ},12:{f:YQ},13:{f:YQ},14:{f:XQ},15:{f:XQ},16:{f:hQ},17:{f:XQ},18:{f:XQ},19:{f:YQ},20:{f:w0},21:{f:w0},23:{f:_0},24:{f:j0},25:{f:XQ},26:{},27:{},28:{f:function(e,t,n){return function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=n0(e,0,n);return n.biff<8&&e.read_shift(1),[{r:r,c:s},o,i,a]}}(e,0,n)}},29:{},34:{f:XQ},35:{f:k0},38:{f:hQ},39:{f:hQ},40:{f:hQ},41:{f:hQ},42:{f:XQ},43:{f:XQ},47:{f:function(e,t,n){var r={Type:n.biff>=8?e.read_shift(2):0};return r.Type?i1(e,t-2,r):a1(e,n.biff,n,r),r}},49:{f:function(e,t,n){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return r.name=ZQ(e,0,n),r}},51:{f:YQ},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:XQ},65:{f:function(){}},66:{f:YQ},77:{},80:{},81:{},82:{},85:{f:YQ},89:{},90:{},91:{},92:{f:function(e,t,n){if(n.enc)return e.l+=t,"";var r=e.l,s=n0(e,0,n);return e.read_shift(t+r-e.l),s}},93:{f:function(e,t,n){if(n&&n.biff<8)return function(e,t,n){e.l+=4;var r=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((E0[r]||PZ)(e,t,n)),{cmo:[s,r,a],ft:i}}(e,t,n);var r=p0(e),s=function(e,t){for(var n=e.l+t,r=[];e.l<n;){var s=e.read_shift(2);e.l-=2;try{r.push(m0[s](e,n-e.l))}catch(Vne){return e.l=n,r}}return e.l!=n&&(e.l=n),r}(e,t-22,r[1]);return{cmo:r,ft:s}}},94:{},95:{f:XQ},96:{},97:{},99:{f:XQ},125:{f:T0},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,n){var r=n&&8==n.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}},130:{f:YQ},131:{f:XQ},132:{f:XQ},133:{f:function(e,t,n){var r=e.read_shift(4),s=3&e.read_shift(1),a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule"}var i=ZQ(e,0,n);return 0===i.length&&(i="Sheet1"),{pos:r,hs:s,dt:a,name:i}}},134:{},140:{f:function(e){var t,n=[0,0];return t=e.read_shift(2),n[0]=yQ[t]||t,t=e.read_shift(2),n[1]=yQ[t]||t,n}},141:{f:YQ},144:{},146:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(i0(e));return n}},151:{},152:{},153:{},154:{},155:{},156:{f:YQ},157:{},158:{},160:{f:C0},161:{f:function(e,t){var n={};return t<32||(e.l+=16,n.header=hQ(e),n.footer=hQ(e),e.l+=2),n}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),s=e.read_shift(2),a=[];e.l<n;)a.push(c0(e));if(e.l!==n)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:r,c:s,C:i,rkrec:a}}},190:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),s=e.read_shift(2),a=[];e.l<n;)a.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:r,c:s,C:i,ixfe:a}}},193:{f:KQ},197:{},198:{},199:{},200:{},201:{},202:{f:XQ},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:YQ},220:{},221:{f:XQ},222:{},224:{f:function(e,t,n){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,r.data=function(e,t,n,r){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=xQ[o>>26],r.cellStyles?(s.alc=7&a,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=15&i,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=127&o,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=127&l,s.icvBack=l>>7&127,s.fsxButton=l>>14&1,s):s}(e,0,r.fStyle,n),r}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:KQ},227:{},229:{f:function(e,t){for(var n=[],r=e.read_shift(2);r--;)n.push(d0(e));return n}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var n=e.l+t,r=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<n;++i)a.push(QQ(e));return a.Count=r,a.Unique=s,a}},253:{f:function(e){var t=o0(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:JQ},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:XQ},353:{f:KQ},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,n){var r=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(n.sbcch=a,1025==a||14849==a)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=e0(e,a),o=[];r>e.l;)o.push(t0(e));return[a,s,i,o]}},431:{f:XQ},432:{},433:{},434:{},437:{},438:{f:function(e,t,n){var r=e.l,s="";try{e.l+=4;var a=(n.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(a)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}(e);var i=e.read_shift(2);e.read_shift(2),YQ(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-r!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((s+=e0(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?i:2*i))break}if(s.length!==i&&s.length!==2*i)throw new Error("cchText: "+i+" != "+s.length);return e.l=r+t,{t:s}}catch(Vne){return e.l=r+t,{t:s}}}},439:{f:XQ},440:{f:function(e,t){var n=d0(e);e.l+=16;var r=function(e,t){var n=e.l+t,r=e.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var s=e.read_shift(2);e.l+=2;var a,i,o,l,c,d,u="";16&s&&(a=s0(e,e.l)),128&s&&(i=s0(e,e.l)),257&~s||(o=s0(e,e.l)),1==(257&s)&&(l=r0(e,e.l)),8&s&&(u=s0(e,e.l)),32&s&&(c=e.read_shift(16)),64&s&&(d=DQ(e)),e.l=n;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),2&s&&"/"==h.charAt(0)&&"/"!=h.charAt(1)&&(h="file://"+h);var p={Target:h};return c&&(p.guid=c),d&&(p.time=d),a&&(p.Tooltip=a),p}(e,t-24);return[n,r]}},441:{},442:{f:t0},443:{},444:{f:YQ},445:{},446:{},448:{f:KQ},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:KQ},512:{f:x0},513:{f:N0},515:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5);var r=o0(e),s=hQ(e);return r.val=s,r}},516:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5),e.l;var r=o0(e);2==n.biff&&e.l++;var s=t0(e,e.l,n);return r.val=s,r}},517:{f:b0},519:{f:P0},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,7&r&&(t.level=7&r),32&r&&(t.hidden=!0),64&r&&(t.hpt=n/20),t}},523:{},545:{f:A0},549:{f:v0},566:{},574:{f:function(e,t,n){return n&&n.biff>=2&&n.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=c0(e);return{r:t,c:n,ixfe:r[0],rknum:r[1]}}},659:{},1048:{},1054:{f:function(e,t,n){return[e.read_shift(2),n0(e,0,n)]}},1084:{},1212:{f:function(e,t,n){var r=u0(e);e.l++;var s=e.read_shift(1);return[x2(e,t-=8,n),s,r]}},2048:{f:function(e,t){e.read_shift(2);var n=d0(e),r=e.read_shift((t-10)/2,"dbcs-cont");return[n,r=r.replace(VX,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:g0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:KQ},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var n=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),s=[];r-- >0;)s.push(z1(e,e.l));return{ixfe:n,ext:s}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:XQ,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),s=e.read_shift(2);return[e0(e,r,n),e0(e,s,n)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,n){var r=e.l+t;if(124226!==e.read_shift(4))if(n.cellStyles){var s,a=e.slice(e.l);e.l=r;try{s=mJ(a,{type:"array"})}catch(Vne){return}var i=uJ(s,"theme/theme/theme1.xml",!0);if(i)return I1(i,n)}else e.l=r},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:KQ},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:YQ},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,n){var r={area:!1};if(5!=n.biff)return e.l+=t,r;var s=e.read_shift(1);return e.l+=3,16&s&&(r.area=!0),r}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(i0(e));return n}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:x0},1:{},2:{f:function(e){var t=o0(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}},3:{f:function(e){var t=o0(e);++e.l;var n=hQ(e);return t.t="n",t.val=n,t}},4:{f:function(e,t,n){n.biffguess&&5==n.biff&&(n.biff=2);var r=o0(e);++e.l;var s=n0(e,0,n);return r.t="str",r.val=s,r}},5:{f:b0},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:g0},11:{},22:{f:YQ},30:{f:y0},31:{},32:{},33:{f:A0},36:{},37:{f:v0},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:YQ},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),s={fmt:t,env:n,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,s}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,n){var r=e.l+t,s=o0(e),a=e.read_shift(2),i=e0(e,a,n);return e.l=r,s.t="str",s.val=i,s}},223:{},234:{},354:{},421:{},518:{f:b2},521:{f:g0},536:{f:j0},547:{f:k0},561:{},579:{},1030:{f:b2},1033:{f:g0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function W4(e,t,n,r){var s=t;if(!isNaN(s)){var a=r||(n||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&vZ(n)&&e.push(n)}}function $4(e,t){var n=t||{},r=n.dense?[]:{},s=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=aJ(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,u=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},f=[];for(i=0;i<l.length;++i){var m=l[i].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var v=m.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var y=v[o].trim();if(y.match(/<t[dh]/i)){for(var x=y,b=0;"<"==x.charAt(0)&&(b=x.indexOf(">"))>-1;)x=x.slice(b+1);for(var w=0;w<f.length;++w){var k=f[w];k.s.c==d&&k.s.r<c&&c<=k.e.r&&(d=k.e.c+1,w=-1)}var S=SJ(y.slice(0,y.indexOf(">")));h=S.colspan?+S.colspan:1,((u=+S.rowspan)>1||h>1)&&f.push({s:{r:c,c:d},e:{r:c+(u||1)-1,c:d+h-1}});var j=S.t||S["data-t"]||"";if(x.length)if(x=BJ(x),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),x.length){var _={t:"s",v:x};n.raw||!x.trim().length||"s"==j||("TRUE"===x?_={t:"b",v:!0}:"FALSE"===x?_={t:"b",v:!1}:isNaN(nJ(x))?isNaN(sJ(x).getDate())||(_={t:"d",v:ZY(x)},n.cellDates||(_={t:"n",v:$Y(_.v)}),_.z=n.dateNF||tY[14]):_={t:"n",v:nJ(x)}),n.dense?(r[c]||(r[c]=[]),r[c][d]=_):r[VZ({r:c,c:d})]=_,d+=h}else d+=h;else d+=h}}}}else{if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}d=0}}return r["!ref"]=qZ(p),f.length&&(r["!merges"]=f),r}function V4(e,t,n,r){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>n||s[c].s.c>i||s[c].e.r<n||s[c].e.c<i)){if(s[c].s.r<n||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var d=VZ({r:n,c:i}),u=r.dense?(e[n]||[])[i]:e[d],h=u&&null!=u.v&&(u.h||CJ(u.w||(XZ(u),u.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":u&&(p["data-t"]=u&&u.t||"z",null!=u.v&&(p["data-v"]=u.v),null!=u.z&&(p["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),p.id=(r.id||"sjs")+"-"+d,a.push(qJ("td",h,p))}}return"<tr>"+a.join("")+"</tr>"}function H4(e,t,n){var r=n||{},s=0,a=0;if(null!=r.origin)if("number"==typeof r.origin)s=r.origin;else{var i="string"==typeof r.origin?$Z(r.origin):r.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=HZ(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==s&&(c.e.r=s=d.e.r+1)}var u=[],h=0,p=e["!rows"]||(e["!rows"]=[]),f=0,m=0,g=0,v=0,y=0,x=0;for(e["!cols"]||(e["!cols"]=[]);f<o.length&&m<l;++f){var b=o[f];if(G4(b)){if(r.display)continue;p[m]={hidden:!0}}var w=b.children;for(g=v=0;g<w.length;++g){var k=w[g];if(!r.display||!G4(k)){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):BJ(k.innerHTML),j=k.getAttribute("data-z")||k.getAttribute("z");for(h=0;h<u.length;++h){var _=u[h];_.s.c==v+a&&_.s.r<m+s&&m+s<=_.e.r&&(v=_.e.c+1-a,h=-1)}x=+k.getAttribute("colspan")||1,((y=+k.getAttribute("rowspan")||1)>1||x>1)&&u.push({s:{r:m+s,c:v+a},e:{r:m+s+(y||1)-1,c:v+a+(x||1)-1}});var A={t:"s",v:S},E=k.getAttribute("data-t")||k.getAttribute("t")||"";null!=S&&(0==S.length?A.t=E||"z":r.raw||0==S.trim().length||"s"==E||("TRUE"===S?A={t:"b",v:!0}:"FALSE"===S?A={t:"b",v:!1}:isNaN(nJ(S))?isNaN(sJ(S).getDate())||(A={t:"d",v:ZY(S)},r.cellDates||(A={t:"n",v:$Y(A.v)}),A.z=r.dateNF||tY[14]):A={t:"n",v:nJ(S)})),void 0===A.z&&null!=j&&(A.z=j);var T="",N=k.getElementsByTagName("A");if(N&&N.length)for(var C=0;C<N.length&&(!N[C].hasAttribute("href")||"#"==(T=N[C].getAttribute("href")).charAt(0));++C);T&&"#"!=T.charAt(0)&&(A.l={Target:T}),r.dense?(e[m+s]||(e[m+s]=[]),e[m+s][v+a]=A):e[VZ({c:v+a,r:m+s})]=A,c.e.c<v+a&&(c.e.c=v+a),v+=x}}++m}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,m-1+s),e["!ref"]=qZ(c),m>=l&&(e["!fullref"]=qZ((c.e.r=o.length-f+m-1+s,c))),e}function q4(e,t){return H4((t||{}).dense?[]:{},e,t)}function G4(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"==typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function K4(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(e,t){return Array(parseInt(t,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[EJ(t.replace(/<[^>]*>/g,""))]}var X4={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Y4(e,t){var n,r,s,a,i,o,l=t||{},c=GJ(e),d=[],u={name:""},h="",p=0,f={},m=[],g=l.dense?[]:{},v={value:""},y="",x=0,b=[],w=-1,k=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,_={},A=[],E={},T=[],N=1,C=1,P=[],R={Names:[]},M={},I=["",""],O=[],z={},D="",L=0,F=!1,B=!1,U=0;for(KJ.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");i=KJ.exec(c);)switch(i[3]=i[3].replace(/_.*$/,"")){case"table":case"工作表":"/"===i[1]?(S.e.c>=S.s.c&&S.e.r>=S.s.r?g["!ref"]=qZ(S):g["!ref"]="A1:A1",l.sheetRows>0&&l.sheetRows<=S.e.r&&(g["!fullref"]=g["!ref"],S.e.r=l.sheetRows-1,g["!ref"]=qZ(S)),A.length&&(g["!merges"]=A),T.length&&(g["!rows"]=T),s.name=s["名称"]||s.name,"undefined"!=typeof JSON&&JSON.stringify(s),m.push(s.name),f[s.name]=g,B=!1):"/"!==i[0].charAt(i[0].length-2)&&(s=SJ(i[0],!1),w=k=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,g=l.dense?[]:{},A=[],T=[],B=!0);break;case"table-row-group":"/"===i[1]?--j:++j;break;case"table-row":case"行":if("/"===i[1]){w+=N,N=1;break}if((a=SJ(i[0],!1))["行号"]?w=a["行号"]-1:-1==w&&(w=0),(N=+a["number-rows-repeated"]||1)<10)for(U=0;U<N;++U)j>0&&(T[w+U]={level:j});k=-1;break;case"covered-table-cell":"/"!==i[1]&&++k,l.sheetStubs&&(l.dense?(g[w]||(g[w]=[]),g[w][k]={t:"z"}):g[VZ({r:w,c:k})]={t:"z"}),y="",b=[];break;case"table-cell":case"数据":if("/"===i[0].charAt(i[0].length-2))++k,v=SJ(i[0],!1),C=parseInt(v["number-columns-repeated"]||"1",10),o={t:"z",v:null},v.formula&&0!=l.cellFormula&&(o.f=N2(EJ(v.formula))),"string"==(v["数据类型"]||v["value-type"])&&(o.t="s",o.v=EJ(v["string-value"]||""),l.dense?(g[w]||(g[w]=[]),g[w][k]=o):g[VZ({r:w,c:k})]=o),k+=C-1;else if("/"!==i[1]){y="",x=0,b=[],C=1;var W=N?w+N-1:w;if(++k>S.e.c&&(S.e.c=k),k<S.s.c&&(S.s.c=k),w<S.s.r&&(S.s.r=w),W>S.e.r&&(S.e.r=W),O=[],z={},o={t:(v=SJ(i[0],!1))["数据类型"]||v["value-type"],v:null},l.cellFormula)if(v.formula&&(v.formula=EJ(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(E={s:{r:w,c:k},e:{r:w+(parseInt(v["number-matrix-rows-spanned"],10)||0)-1,c:k+(parseInt(v["number-matrix-columns-spanned"],10)||0)-1}},o.F=qZ(E),P.push([E,o.F])),v.formula)o.f=N2(v.formula);else for(U=0;U<P.length;++U)w>=P[U][0].s.r&&w<=P[U][0].e.r&&k>=P[U][0].s.c&&k<=P[U][0].e.c&&(o.F=P[U][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(E={s:{r:w,c:k},e:{r:w+(parseInt(v["number-rows-spanned"],10)||0)-1,c:k+(parseInt(v["number-columns-spanned"],10)||0)-1}},A.push(E)),v["number-columns-repeated"]&&(C=parseInt(v["number-columns-repeated"],10)),o.t){case"boolean":o.t="b",o.v=RJ(v["boolean-value"]);break;case"float":case"percentage":case"currency":o.t="n",o.v=parseFloat(v.value);break;case"date":o.t="d",o.v=ZY(v["date-value"]),l.cellDates||(o.t="n",o.v=$Y(o.v)),o.z="m/d/yy";break;case"time":o.t="n",o.v=KY(v["time-value"])/86400,l.cellDates&&(o.t="d",o.v=GY(o.v)),o.z="HH:MM:SS";break;case"number":o.t="n",o.v=parseFloat(v["数据数值"]);break;default:if("string"!==o.t&&"text"!==o.t&&o.t)throw new Error("Unsupported value type "+o.t);o.t="s",null!=v["string-value"]&&(y=EJ(v["string-value"]),b=[])}}else{if(F=!1,"s"===o.t&&(o.v=y||"",b.length&&(o.R=b),F=0==x),M.Target&&(o.l=M),O.length>0&&(o.c=O,O=[]),y&&!1!==l.cellText&&(o.w=y),F&&(o.t="z",delete o.v),(!F||l.sheetStubs)&&!(l.sheetRows&&l.sheetRows<=w))for(var $=0;$<N;++$){if(C=parseInt(v["number-columns-repeated"]||"1",10),l.dense)for(g[w+$]||(g[w+$]=[]),g[w+$][k]=0==$?o:eJ(o);--C>0;)g[w+$][k+C]=eJ(o);else for(g[VZ({r:w+$,c:k})]=o;--C>0;)g[VZ({r:w+$,c:k+C})]=eJ(o);S.e.c<=k&&(S.e.c=k)}k+=(C=parseInt(v["number-columns-repeated"]||"1",10))-1,C=0,o={},y="",b=[]}M={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===i[1]){if((n=d.pop())[0]!==i[3])throw"Bad state: "+n}else"/"!==i[0].charAt(i[0].length-2)&&d.push([i[3],!0]);break;case"annotation":if("/"===i[1]){if((n=d.pop())[0]!==i[3])throw"Bad state: "+n;z.t=y,b.length&&(z.R=b),z.a=D,O.push(z)}else"/"!==i[0].charAt(i[0].length-2)&&d.push([i[3],!1]);D="",L=0,y="",x=0,b=[];break;case"creator":"/"===i[1]?D=c.slice(L,i.index):L=i.index+i[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===i[1]){if((n=d.pop())[0]!==i[3])throw"Bad state: "+n}else"/"!==i[0].charAt(i[0].length-2)&&d.push([i[3],!1]);y="",x=0,b=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"电子表格":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"标题":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===i[1]){if(_[u.name]=h,(n=d.pop())[0]!==i[3])throw"Bad state: "+n}else"/"!==i[0].charAt(i[0].length-2)&&(h="",u=SJ(i[0],!1),d.push([i[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(d[d.length-1][0]){case"time-style":case"date-style":r=SJ(i[0],!1),h+=X4[i[3]]["long"===r.style?1:0]}break;case"text":if("/>"===i[0].slice(-2))break;if("/"===i[1])switch(d[d.length-1][0]){case"number-style":case"date-style":case"time-style":h+=c.slice(p,i.index)}else p=i.index+i[0].length;break;case"named-range":I=C2((r=SJ(i[0],!1))["cell-range-address"]);var V={Name:r.name,Ref:I[0]+"!"+I[1]};B&&(V.Sheet=m.length),R.Names.push(V);break;case"p":case"文本串":if(["master-styles"].indexOf(d[d.length-1][0])>-1)break;if("/"!==i[1]||v&&v["string-value"])SJ(i[0],!1),x=i.index+i[0].length;else{var H=K4(c.slice(x,i.index));y=(y.length>0?y+"\n":"")+H[0]}break;case"database-range":if("/"===i[1])break;try{f[(I=C2(SJ(i[0])["target-range-address"]))[0]]["!autofilter"]={ref:I[1]}}catch(Vne){}break;case"a":if("/"!==i[1]){if(!(M=SJ(i[0],!1)).href)break;M.Target=EJ(M.href),delete M.href,"#"==M.Target.charAt(0)&&M.Target.indexOf(".")>-1?(I=C2(M.Target.slice(1)),M.Target="#"+I[0]+"!"+I[1]):M.Target.match(/^\.\.[\\\/]/)&&(M.Target=M.Target.slice(3))}break;default:switch(i[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(l.WTF)throw new Error(i)}}var q={Sheets:f,SheetNames:m,Workbook:R};return l.bookSheets&&delete q.Sheets,q}function J4(e,t){t=t||{},lJ(e,"META-INF/manifest.xml")&&function(e,t){for(var n,r,s=GJ(e);n=KJ.exec(s);)switch(n[3]){case"manifest":break;case"file-entry":if("/"==(r=SJ(n[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==r.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}(dJ(e,"META-INF/manifest.xml"),t);var n=uJ(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=Y4(DJ(n),t);return lJ(e,"meta.xml")&&(r.Props=CQ(dJ(e,"meta.xml"))),r}function Z4(e,t){return Y4(e,t)}
/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Q4(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function e3(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):DJ(UX(e))}function t3(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function n3(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function r3(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function s3(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function a3(e){for(var t=[],n=[0];n[0]<e.length;){var r,s=n[0],a=r3(e,n),i=7&a,o=0;if(0==(a=Math.floor(a/8)))break;switch(i){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=r3(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var c={data:r,type:i};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function i3(e,t){return(null==e?void 0:e.map(function(e){return t(e.data)}))||[]}function o3(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=r3(t,n),s=[];n[0]<t.length;){var a=3&t[n[0]];if(0!=a){var i=0,o=0;if(1==a?(o=4+(t[n[0]]>>2&7),i=(224&t[n[0]++])<<3,i|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==a?(i=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(i=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),s=[t3(s)],0==i)throw new Error("Invalid offset 0");if(i>s[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(s.push(s[0].slice(-i)),o-=i;o>=s[s.length-1].length;)s.push(s[s.length-1]),o-=s[s.length-1].length;s.push(s[0].slice(-i,-i+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}s.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var d=t3(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function l3(e,t,n){var r,s=Q4(e),a=s.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);switch(1&a&&(c=function(e,t){for(var n=(127&e[t+15])<<7|e[t+14]>>1,r=1&e[t+14],s=t+13;s>=t;--s)r=256*r+e[s];return(128&e[t+15]?-r:r)*Math.pow(10,n-6176)}(e,i),i+=16),2&a&&(d=s.getFloat64(i,!0),i+=8),4&a&&(u.setTime(u.getTime()+1e3*s.getFloat64(i,!0)),i+=8),8&a&&(l=s.getUint32(i,!0),i+=4),16&a&&(o=s.getUint32(i,!0),i+=4),e[1]){case 0:break;case 2:case 10:r={t:"n",v:c};break;case 3:r={t:"s",v:t[l]};break;case 5:r={t:"d",v:u};break;case 6:r={t:"b",v:d>0};break;case 7:r={t:"n",v:d/86400};break;case 8:r={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&a," : ").concat(e.slice(0,4)));r={t:"s",v:n[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&a," : ").concat(e.slice(0,4)))}return r}function c3(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,n,r){var s,a=Q4(e),i=a.getUint32(4,!0),o=(r>1?12:8)+4*n3(i&(r>1?3470:398)),l=-1,c=-1,d=NaN,u=new Date(2001,0,1);switch(512&i&&(l=a.getUint32(o,!0),o+=4),o+=4*n3(i&(r>1?12288:4096)),16&i&&(c=a.getUint32(o,!0),o+=4),32&i&&(d=a.getFloat64(o,!0),o+=8),64&i&&(u.setTime(u.getTime()+1e3*a.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:s={t:"n",v:d};break;case 3:s={t:"s",v:t[c]};break;case 5:s={t:"d",v:u};break;case 6:s={t:"b",v:d>0};break;case 7:s={t:"n",v:d/86400};break;case 8:s={t:"e",v:0};break;case 9:if(l>-1)s={t:"s",v:n[l]};else if(c>-1)s={t:"s",v:t[c]};else{if(isNaN(d))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));s={t:"n",v:d}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return s}(e,t,n,e[0]);case 5:return l3(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function d3(e){return r3(a3(e)[1][0].data)}function u3(e,t){var n=a3(t.data),r=s3(n[1][0].data),s=n[3],a=[];return(s||[]).forEach(function(t){var n=a3(t.data),s=s3(n[1][0].data)>>>0;switch(r){case 1:a[s]=e3(n[3][0].data);break;case 8:var i=a3(e[d3(n[9][0].data)][0].data),o=e[d3(i[1][0].data)][0],l=s3(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=a3(o.data);a[s]=c[3].map(function(e){return e3(e.data)}).join("")}}),a}function h3(e,t){var n,r=a3(t.data),s=(null==(n=null==r?void 0:r[7])?void 0:n[0])?s3(r[7][0].data)>>>0>0?1:0:-1,a=i3(r[5],function(e){return function(e,t){var n,r,s,a,i,o,l,c,d,u,h,p,f,m,g,v,y=a3(e),x=s3(y[1][0].data)>>>0,b=s3(y[2][0].data)>>>0,w=(null==(r=null==(n=y[8])?void 0:n[0])?void 0:r.data)&&s3(y[8][0].data)>0||!1;if((null==(a=null==(s=y[7])?void 0:s[0])?void 0:a.data)&&0!=t)g=null==(o=null==(i=y[7])?void 0:i[0])?void 0:o.data,v=null==(c=null==(l=y[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(d=y[4])?void 0:d[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(p=null==(h=y[4])?void 0:h[0])?void 0:p.data,v=null==(m=null==(f=y[3])?void 0:f[0])?void 0:m.data}for(var k=w?4:1,S=Q4(g),j=[],_=0;_<g.length/2;++_){var A=S.getUint16(2*_,!0);A<65535&&j.push([_,A])}if(j.length!=b)throw"Expected ".concat(b," cells, found ").concat(j.length);var E=[];for(_=0;_<j.length-1;++_)E[j[_][0]]=v.subarray(j[_][1]*k,j[_+1][1]*k);return j.length>=1&&(E[j[j.length-1][0]]=v.subarray(j[j.length-1][1]*k)),{R:x,cells:E}}(e,s)});return{nrows:s3(r[4][0].data)>>>0,data:a.reduce(function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach(function(n,r){if(e[t.R][r])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(r));e[t.R][r]=n}),e},[])}}function p3(e,t){var n={"!ref":"A1"},r=e[d3(a3(t.data)[2][0].data)],s=s3(r[0].meta[1][0].data);if(6001!=s)throw new Error("6000 unexpected reference to ".concat(s));return function(e,t,n){var r,s=a3(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(s3(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(s3(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=qZ(a);var i=a3(s[4][0].data),o=u3(e,e[d3(i[4][0].data)][0]),l=(null==(r=i[17])?void 0:r[0])?u3(e,e[d3(i[17][0].data)][0]):[],c=a3(i[3][0].data),d=0;c[1].forEach(function(t){var r=a3(t.data),s=e[d3(r[2][0].data)][0],a=s3(s.meta[1][0].data);if(6002!=a)throw new Error("6001 unexpected reference to ".concat(a));var i=h3(0,s);i.data.forEach(function(e,t){e.forEach(function(e,r){var s=VZ({r:d+t,c:r}),a=c3(e,o,l);a&&(n[s]=a)})}),d+=i.nrows})}(e,r[0],n),n}function f3(e,t){var n={SheetNames:[],Sheets:{}};if(i3(a3(t.data)[1],d3).forEach(function(t){e[t].forEach(function(t){if(2==s3(t.meta[1][0].data)){var r=function(e,t){var n,r=a3(t.data),s={name:(null==(n=r[1])?void 0:n[0])?e3(r[1][0].data):"",sheets:[]};return i3(r[2],d3).forEach(function(t){e[t].forEach(function(t){6e3==s3(t.meta[1][0].data)&&s.sheets.push(p3(e,t))})}),s}(e,t);r.sheets.forEach(function(e,t){M3(n,e,0==t?r.name:r.name+"_"+t,!0)})}})}),0==n.SheetNames.length)throw new Error("Empty NUMBERS file");return n}function m3(e){var t,n,r,s,a={},i=[];if(e.FullPaths.forEach(function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(e){if(e.name.match(/\.iwa$/)){var t,n;try{t=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++],s=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(o3(r,e.slice(n,n+s))),n+=s}if(n!==e.length)throw new Error("data is not a valid framed stream!");return t3(t)}(e.content)}catch(Vne){return console.log("?? "+e.content.length+" "+(Vne.message||Vne))}try{n=function(e){for(var t,n=[],r=[0];r[0]<e.length;){var s=r3(e,r),a=a3(e.slice(r[0],r[0]+s));r[0]+=s;var i={id:s3(a[1][0].data),messages:[]};a[2].forEach(function(t){var n=a3(t.data),s=s3(n[3][0].data);i.messages.push({meta:n,data:e.slice(r[0],r[0]+s)}),r[0]+=s}),(null==(t=a[3])?void 0:t[0])&&(i.merge=s3(a[3][0].data)>>>0>0),n.push(i)}return n}(t)}catch(Vne){return console.log("## "+(Vne.message||Vne))}n.forEach(function(e){a[e.id]=e.messages,i.push(e.id)})}}),!i.length)throw new Error("File has no messages");var o=(null==(s=null==(r=null==(n=null==(t=null==a?void 0:a[1])?void 0:t[0])?void 0:n.meta)?void 0:r[1])?void 0:s[0].data)&&1==s3(a[1][0].meta[1][0].data)&&a[1][0];if(o||i.forEach(function(e){a[e].forEach(function(e){if(1==s3(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}})}),!o)throw new Error("Cannot find Document root");return f3(a,o)}function g3(e){var t;(t=[["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]],function(e){for(var n=0;n!=t.length;++n){var r=t[n];void 0===e[r[0]]&&(e[r[0]]=r[1]),"n"===r[2]&&(e[r[0]]=Number(e[r[0]]))}})(e)}function v3(e,t,n,r,s,a,i,o,l,c,d,u){try{a[r]=EQ(uJ(e,n,!0),t);var h,p=dJ(e,t);switch(o){case"sheet":h=u4(p,t,s,l,a[r],c,d,u);break;case"chart":if(!(h=h4(p,t,s,l,a[r],c))||!h["!drawel"])break;var f=gJ(h["!drawel"].Target,t),m=AQ(f),g=function(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}(uJ(e,f,!0),EQ(uJ(e,m,!0),f)),v=gJ(g,f),y=AQ(v);h=Q2(uJ(e,v,!0),0,0,EQ(uJ(e,y,!0),v),0,h);break;case"macro":b=t,a[r],b.slice(-4),h={"!type":"macro"};break;case"dialog":h=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,a[r]);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=h;var x=[];a&&a[r]&&BY(a[r]).forEach(function(n){var s="";if(a[r][n].Type==_Q.CMNT){s=gJ(a[r][n].Target,t);var i=m4(dJ(e,s,!0),s,l);if(!i||!i.length)return;L1(h,i,!1)}a[r][n].Type==_Q.TCMNT&&(s=gJ(a[r][n].Target,t),x=x.concat(function(e,t){var n=[],r=!1,s={},a=0;return e.replace(bJ,function(i,o){var l=SJ(i);switch(jJ(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":s={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=s.t&&n.push(s);break;case"<text>":case"<text":a=o+i.length;break;case"</text>":s.t=e.slice(a,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":r=!0;break;case"</mentions>":case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),n}(dJ(e,s,!0),l)))}),x&&x.length&&L1(h,x,!0,l.people||[])}catch(Vne){if(l.WTF)throw Vne}var b}function y3(e){return"/"==e.charAt(0)?e.slice(1):e}function x3(e,t){if(OY(),g3(t=t||{}),lJ(e,"META-INF/manifest.xml"))return J4(e,t);if(lJ(e,"objectdata.xml"))return J4(e,t);if(lJ(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(void 0!==m3){if(e.FileIndex)return m3(e);var n=FY.utils.cfb_new();return pJ(e).forEach(function(t){fJ(n,t,hJ(e,t))}),m3(n)}throw new Error("Unsupported NUMBERS file")}if(!lJ(e,"[Content_Types].xml")){if(lJ(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(lJ(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var r,s,a=pJ(e),i=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var n={};if((e.match(bJ)||[]).forEach(function(e){var r=SJ(e);switch(r[0].replace(wJ,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":void 0!==t[jQ[r.ContentType]]&&t[jQ[r.ContentType]].push(r.PartName)}}),t.xmlns!==XJ)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}(uJ(e,"[Content_Types].xml")),o=!1;if(0===i.workbooks.length&&dJ(e,s="xl/workbook.xml",!0)&&i.workbooks.push(s),0===i.workbooks.length){if(!dJ(e,s="xl/workbook.bin",!0))throw new Error("Could not find workbook");i.workbooks.push(s),o=!0}"bin"==i.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(P2=[],i.sst)try{P2=f4(dJ(e,y3(i.sst)),i.sst,t)}catch(Vne){if(t.WTF)throw Vne}t.cellStyles&&i.themes.length&&(l=function(e,t,n){return I1(e,n)}(uJ(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=p4(dJ(e,y3(i.style)),i.style,l,t))}i.links.map(function(n){try{EQ(uJ(e,AQ(y3(n))),n);return v4(dJ(e,y3(n)),0,n,t)}catch(Vne){}});var d=d4(dJ(e,y3(i.workbooks[0])),i.workbooks[0],t),u={},h="";i.coreprops.length&&((h=dJ(e,y3(i.coreprops[0]),!0))&&(u=CQ(h)),0!==i.extprops.length&&(h=dJ(e,y3(i.extprops[0]),!0))&&function(e,t,n){var r={};t||(t={}),e=DJ(e),PQ.forEach(function(n){var s=(e.match(FJ(n[0]))||[])[1];switch(n[2]){case"string":s&&(t[n[1]]=EJ(s));break;case"bool":t[n[1]]="true"===s;break;case"raw":var a=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));a&&a.length>0&&(r[n[1]]=a[1])}}),r.HeadingPairs&&r.TitlesOfParts&&RQ(r.HeadingPairs,r.TitlesOfParts,t,n)}(h,u,t));var p={};t.bookSheets&&!t.bookProps||0!==i.custprops.length&&(h=uJ(e,y3(i.custprops[0]),!0))&&(p=function(e,t){var n={},r="",s=e.match(MQ);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=SJ(i);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":r=EJ(o.name);break;case"</property>":r=null;break;default:if(0===i.indexOf("<vt:")){var l=i.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":n[r]=EJ(d);break;case"bool":n[r]=RJ(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=ZY(d);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!=typeof console&&console.warn("Unexpected",i,c,l)}}else if("</"===i.slice(0,2));else if(t.WTF)throw new Error(i)}}return n}(h,t));var f={};if((t.bookSheets||t.bookProps)&&(d.Sheets?r=d.Sheets.map(function(e){return e.name}):u.Worksheets&&u.SheetNames.length>0&&(r=u.SheetNames),t.bookProps&&(f.Props=u,f.Custprops=p),t.bookSheets&&void 0!==r&&(f.SheetNames=r),t.bookSheets?f.SheetNames:t.bookProps))return f;r={};var m={};t.bookDeps&&i.calcchain&&(m=g4(dJ(e,y3(i.calcchain)),i.calcchain));var g,v,y=0,x={},b=d.Sheets;u.Worksheets=b.length,u.SheetNames=[];for(var w=0;w!=b.length;++w)u.SheetNames[w]=b[w].name;var k=o?"bin":"xml",S=i.workbooks[0].lastIndexOf("/"),j=(i.workbooks[0].slice(0,S+1)+"_rels/"+i.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");lJ(e,j)||(j="xl/_rels/workbook."+k+".rels");var _=EQ(uJ(e,j,!0),j.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=y4(dJ(e,y3(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=function(e,t){var n=[],r=!1;return e.replace(bJ,function(e){var s=SJ(e);switch(jJ(s[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":n.push({name:s.displayname,id:s.id});break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return e}),n}(dJ(e,y3(i.people[0])),t)),_&&(_=function(e,t){if(!e)return 0;try{e=t.map(function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(n=e["!id"][t.id].Type,_Q.WS.indexOf(n)>-1?"sheet":n==_Q.CS?"chart":n==_Q.DS?"dialog":n==_Q.MS?"macro":n&&n.length?n:"sheet")];var n})}catch(Vne){return null}return e&&0!==e.length?e:null}(_,d.Sheets));var A=dJ(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=u.Worksheets;++y){var E="sheet";if(_&&_[y]?(g="xl/"+_[y][1].replace(/[\/]?xl\//,""),lJ(e,g)||(g=_[y][1]),lJ(e,g)||(g=j.replace(/_rels\/.*$/,"")+_[y][1]),E=_[y][2]):g=(g="xl/worksheets/sheet"+(y+1-A)+"."+k).replace(/sheet0\./,"sheet."),v=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(u.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var T=!1,N=0;N!=t.sheets.length;++N)"number"==typeof t.sheets[N]&&t.sheets[N]==y&&(T=1),"string"==typeof t.sheets[N]&&t.sheets[N].toLowerCase()==u.SheetNames[y].toLowerCase()&&(T=1);if(!T)continue e}}v3(e,g,v,u.SheetNames[y],y,x,r,E,t,d,l,c)}return f={Directory:i,Workbook:d,Props:u,Custprops:p,Deps:m,Sheets:r,SheetNames:u.SheetNames,Strings:P2,Styles:c,Themes:l,SSF:eJ(tY)},t&&t.bookFiles&&(e.files?(f.keys=a,f.files=e.files):(f.keys=[],f.files={},e.FullPaths.forEach(function(t,n){t=t.replace(/^Root Entry[\/]/,""),f.keys.push(t),f.files[t]=e.FileIndex[n]}))),t&&t.bookVBA&&(i.vba.length>0?f.vbaraw=dJ(e,y3(i.vba[0]),!0):i.defaults&&"application/vnd.ms-office.vbaProject"===i.defaults.bin&&(f.vbaraw=dJ(e,"xl/vbaProject.bin",!0))),f}function b3(e,t){var n,r,s=t||{},a="Workbook",i=FY.find(e,a);try{if(a="/!DataSpaces/Version",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(n=i.content,(r={}).id=n.read_shift(0,"lpp4"),r.R=X0(n,4),r.U=X0(n,4),r.W=X0(n,4),a="/!DataSpaces/DataSpaceMap",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(Y0(e));return t}(i.content);if(1!==o.length||1!==o[0].comps.length||0!==o[0].comps[0].t||"StrongEncryptionDataSpace"!==o[0].name||"EncryptedPackage"!==o[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(i.content);if(1!=l.length||"StrongEncryptionTransform"!=l[0])throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);J0(i.content)}catch(Vne){}if(a="/EncryptionInfo",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);var c=function(e){var t=X0(e);switch(t.Minor){case 2:return[t.Minor,e1(e)];case 3:return[t.Minor,t1()];case 4:return[t.Minor,n1(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(i.content);if(a="/EncryptedPackage",!(i=FY.find(e,a))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(4==c[0]&&"undefined"!=typeof decrypt_agile)return decrypt_agile(c[1],i.content,s.password||"",s);if(2==c[0]&&"undefined"!=typeof decrypt_std76)return decrypt_std76(c[1],i.content,s.password||"",s);throw new Error("File is password-protected")}function w3(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=OX(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function k3(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return C4(e.slice(n),t);default:break e}return D0.to_workbook(e,t)}function S3(e,t,n,r){return r?(n.type="string",D0.to_workbook(e,n)):D0.to_workbook(t,n)}function j3(e,t){AX();var n=t||{};if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return j3(new Uint8Array(e),((n=eJ(n)).type="array",n));"undefined"!=typeof Uint8Array&&e instanceof Uint8Array&&!n.type&&(n.type="undefined"!=typeof Deno?"buffer":"array");var r,s=e,a=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),R2={},n.dateNF&&(R2.dateNF=n.dateNF),n.type||(n.type=zX&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==n.type&&(n.type=zX?"buffer":"binary",s=function(e){if("undefined"!=typeof Deno)return Deno.readFileSync(e);if("undefined"!=typeof $&&"undefined"!=typeof File&&"undefined"!=typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(Vne){if(!Vne.message||!Vne.message.match(/onstruct/))throw Vne}throw new Error("Cannot access file "+e)}(e),"undefined"==typeof Uint8Array||zX||(n.type="array")),"string"==n.type&&(a=!0,n.type="binary",n.codepage=65001,s=function(e){return e.match(/[^\x00-\x7F]/)?LJ(e):e}(e)),"array"==n.type&&"undefined"!=typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!=typeof ArrayBuffer){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return(n=eJ(n)).type="array",j3(WX(s),n)}switch((r=w3(s,n))[0]){case 208:if(207===r[1]&&17===r[2]&&224===r[3]&&161===r[4]&&177===r[5]&&26===r[6]&&225===r[7])return function(e,t){return FY.find(e,"EncryptedPackage")?b3(e,t):F4(e,t)}(FY.read(s,n),n);break;case 9:if(r[1]<=8)return F4(s,n);break;case 60:return C4(s,n);case 73:if(73===r[1]&&42===r[2]&&0===r[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===r[1])return function(e,t){var n=t||{},r=!!n.WTF;n.WTF=!0;try{var s=I0.to_workbook(e,n);return n.WTF=r,s}catch(Vne){if(n.WTF=r,!Vne.message.match(/SYLK bad record ID/)&&r)throw Vne;return D0.to_workbook(e,t)}}(s,n);break;case 84:if(65===r[1]&&66===r[2]&&76===r[3])return O0.to_workbook(s,n);break;case 80:return 75===r[1]&&r[2]<9&&r[3]<9?function(e,t){var n=e,r=t||{};return r.type||(r.type=zX&&Buffer.isBuffer(e)?"buffer":"base64"),x3(mJ(n,r),r)}(s,n):S3(e,s,n,a);case 239:return 60===r[3]?C4(s,n):S3(e,s,n,a);case 255:if(254===r[1])return function(e,t){var n=e;return"base64"==t.type&&(n=OX(n)),n=NX.utils.decode(1200,n.slice(2),"str"),t.type="binary",k3(n,t)}(s,n);if(0===r[1]&&2===r[2]&&0===r[3])return L0.to_workbook(s,n);break;case 0:if(0===r[1]){if(r[2]>=2&&0===r[3])return L0.to_workbook(s,n);if(0===r[2]&&(8===r[3]||9===r[3]))return L0.to_workbook(s,n)}break;case 3:case 131:case 139:case 140:return M0.to_workbook(s,n);case 123:if(92===r[1]&&114===r[2]&&116===r[3])return o1.to_workbook(s,n);break;case 10:case 13:case 32:return function(e,t){var n="",r=w3(e,t);switch(t.type){case"base64":n=OX(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=QY(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(n=DJ(n)),t.type="binary",k3(n,t)}(s,n);case 137:if(80===r[1]&&78===r[2]&&71===r[3])throw new Error("PNG Image File is not a spreadsheet")}return R0.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?M0.to_workbook(s,n):S3(e,s,n,a)}function _3(e,t,n,r,s,a,i,o){var l=BZ(n),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,h=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch(Vne){h.__rowNum__=n}else h.__rowNum__=n;if(!i||e[n])for(var p=t.s.c;p<=t.e.c;++p){var f=i?e[n][p]:e[r[p]+l];if(void 0!==f&&void 0!==f.t){var m=f.v;switch(f.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=a[p]){if(null==m)if("e"==f.t&&null===m)h[a[p]]=null;else if(void 0!==c)h[a[p]]=c;else{if(!d||null!==m)continue;h[a[p]]=null}else h[a[p]]=d&&("n"!==f.t||"n"===f.t&&!1!==o.rawNumbers)?m:XZ(f,m,o);null!=m&&(u=!1)}}else{if(void 0===c)continue;null!=a[p]&&(h[a[p]]=c)}}return{row:h,isempty:u}}function A3(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof d){case"string":l=GZ(d);break;case"number":(l=GZ(e["!ref"])).s.r=d;break;default:l=d}r>0&&(s=0);var u=BZ(l.s.r),h=[],p=[],f=0,m=0,g=Array.isArray(e),v=l.s.r,y=0,x={};g&&!e[v]&&(e[v]=[]);var b=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(b[y]||{}).hidden)switch(h[y]=WZ(y),n=g?e[v][y]:e[h[y]+u],r){case 1:a[y]=y-l.s.c;break;case 2:a[y]=h[y];break;case 3:a[y]=c.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=i=XZ(n,null,c),m=x[i]||0){do{o=i+"_"+m++}while(x[o]);x[i]=m,x[o]=1}else x[i]=1;a[y]=o}for(v=l.s.r+s;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var k=_3(e,l,v,h,r,a,g,c);(!1===k.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(p[f++]=k.row)}return p.length=f,p}var E3=/"/g;function T3(e,t,n,r,s,a,i,o){for(var l=!0,c=[],d="",u=BZ(n),h=t.s.c;h<=t.e.c;++h)if(r[h]){var p=o.dense?(e[n]||[])[h]:e[r[h]+u];if(null==p)d="";else if(null!=p.v){l=!1,d=""+(o.rawNumbers&&"n"==p.t?p.v:XZ(p,null,o));for(var f=0,m=0;f!==d.length;++f)if((m=d.charCodeAt(f))===s||m===a||34===m||o.forceQuotes){d='"'+d.replace(E3,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==p.f||p.F?d="":(l=!1,(d="="+p.f).indexOf(",")>=0&&(d='"'+d.replace(E3,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function N3(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=GZ(e["!ref"]),a=void 0!==r.FS?r.FS:",",i=a.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),d="",u=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],p=r.skipHidden&&e["!rows"]||[],f=s.s.c;f<=s.e.c;++f)(h[f]||{}).hidden||(u[f]=WZ(f));for(var m=0,g=s.s.r;g<=s.e.r;++g)(p[g]||{}).hidden||null!=(d=T3(e,s,g,u,i,l,a,r))&&(r.strip&&(d=d.replace(c,"")),(d||!1!==r.blankrows)&&n.push((m++?o:"")+d));return delete r.dense,n.join("")}function C3(e,t,n){var r,s=n||{},a=+!s.skipHeader,i=e||{},o=0,l=0;if(i&&null!=s.origin)if("number"==typeof s.origin)o=s.origin;else{var c="string"==typeof s.origin?$Z(s.origin):s.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var u=GZ(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+a)}else-1==o&&(o=0,d.e.r=t.length-1+a);var h=s.header||[],p=0;t.forEach(function(e,t){BY(e).forEach(function(n){-1==(p=h.indexOf(n))&&(h[p=h.length]=n);var c=e[n],d="z",u="",f=VZ({c:l+p,r:o+t+a});r=P3(i,f),!c||"object"!=typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",s.cellDates||(d="n",c=$Y(c)),u=s.dateNF||tY[14]):null===c&&s.nullError&&(d="e",c=0),r?(r.t=d,r.v=c,delete r.w,delete r.R,u&&(r.z=u)):i[f]=r={t:d,v:c},u&&(r.z=u)):i[f]=c})}),d.e.c=Math.max(d.e.c,l+h.length-1);var f=BZ(o);if(a)for(p=0;p<h.length;++p)i[WZ(p+l)+f]={t:"s",v:h[p]};return i["!ref"]=qZ(d),i}function P3(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=$Z(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return P3(e,VZ("number"!=typeof t?t:{r:t,c:n||0}))}function R3(){return{SheetNames:[],Sheets:{}}}function M3(e,t,n,r){var s=1;if(!n)for(;s<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+s);++s,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(n=i+s);++s);}if(function(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;o4.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})}(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function I3(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var O3={encode_col:WZ,encode_row:BZ,encode_cell:VZ,encode_range:qZ,decode_col:UZ,decode_row:FZ,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:$Z,decode_range:HZ,format_cell:XZ,sheet_add_aoa:JZ,sheet_add_json:C3,sheet_add_dom:H4,aoa_to_sheet:ZZ,json_to_sheet:function(e,t){return C3(null,e,t)},table_to_sheet:q4,table_to_book:function(e,t){return YZ(q4(e,t),t)},sheet_to_csv:N3,sheet_to_txt:function(e,t){return t||(t={}),t.FS="\t",t.RS="\n",N3(e,t)},sheet_to_json:A3,sheet_to_html:function(e,t){var n=t||{},r=null!=n.header?n.header:'<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',s=null!=n.footer?n.footer:"</body></html>",a=[r],i=HZ(e["!ref"]);n.dense=Array.isArray(e),a.push(function(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}(0,0,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(V4(e,i,o,n));return a.push("</table>"+s),a.join("")},sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var s,a=GZ(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(s=a.s.c;s<=a.e.c;++s)o[s]=WZ(s);for(var d=a.s.r;d<=a.e.r;++d)for(i=BZ(d),s=a.s.c;s<=a.e.c;++s)if(n=o[s]+i,r="",void 0!==(t=c?(e[d]||[])[s]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:A3,sheet_get_cell:P3,book_new:R3,book_append_sheet:M3,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:I3,cell_set_internal_link:function(e,t,n){return I3(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var s="string"!=typeof t?t:GZ(t),a="string"==typeof t?t:qZ(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=P3(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},z3={exports:{}};z3.exports=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,a={},i=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=x(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)n.postMessage({results:a,workerId:o.WORKER_ID,finished:r});else if(w(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):s&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(a){this._chunkError(a.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(e=(e=t).getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function d(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,s)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(r){this._streamError(r)}},this),this._streamError=b(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=b(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(e){var t,n,r,s,a=Math.pow(2,53),i=-a,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,d=this,u=0,h=0,p=!1,g=!1,v=[],y={data:[],errors:[],meta:{}};function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function k(){if(y&&r&&(j("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(y.data=y.data.filter(function(e){return!b(e)})),S()){let n=function(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),v.push(t)};if(y)if(Array.isArray(y.data[0])){for(var t=0;S()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n)}function n(t,n){for(var r=e.header?{}:[],s=0;s<t.length;s++){var o=s,d=t[s];d=((t,n)=>{return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),i<e&&e<a))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var r})(o=e.header?s>=v.length?"__parsed_extra":v[s]:o,d=e.transform?e.transform(d,o):d),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(d)):r[o]=d}return e.header&&(s>v.length?j("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+s,h+n):s<v.length&&j("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+s,h+n)),r}var s;y&&(e.header||e.dynamicTyping||e.transform)&&(s=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(n),s=y.data.length):y.data=n(y.data,0),e.header&&y.meta&&(y.meta.fields=v),h+=s)}function S(){return e.header&&0===v.length}function j(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),y.errors.push(e)}w(e.step)&&(s=e.step,e.step=function(t){y=t,S()?k():(k(),0!==y.data.length&&(u+=t.data.length,e.preview&&u>e.preview?n.abort():(y.data=y.data[0],s(y,d))))}),this.parse=function(s,a,i){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,l)),r=!1,e.delimiter?w(e.delimiter)&&(e.delimiter=e.delimiter(s),y.meta.delimiter=e.delimiter):((l=((t,n,r,s,a)=>{var i,l,c,d;a=a||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var u=0;u<a.length;u++){for(var h,p=a[u],f=0,g=0,v=0,y=(c=void 0,new m({comments:s,delimiter:p,newline:n,preview:10}).parse(t)),x=0;x<y.data.length;x++)r&&b(y.data[x])?v++:(g+=h=y.data[x].length,void 0===c?c=h:0<h&&(f+=Math.abs(h-c),c=h));0<y.data.length&&(g/=y.data.length-v),(void 0===l||f<=l)&&(void 0===d||d<g)&&1.99<g&&(l=f,i=p,d=g)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),y.meta.delimiter=e.delimiter),l=x(e),e.preview&&e.header&&l.preview++,t=s,n=new m(l),y=n.parse(t,a,i),k(),p?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){d.streamer._halted?(p=!1,d.streamer.parseChunk(t,!0)):setTimeout(d.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),y.meta.aborted=!0,w(e.complete)&&e.complete(y),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(f(t)+"([^]*?)"+f(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,s=0;s<n.length;s++)"\n"===n[s][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,s=e.step,a=e.preview,i=e.fastMode,l=null,c=!1,d=null==e.quoteChar?'"':e.quoteChar,u=d;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,p=!1;this.parse=function(o,m,g){if("string"!=typeof o)throw new Error("Input must be a string");var v=o.length,y=t.length,x=n.length,b=r.length,k=w(s),S=[],j=[],_=[],A=h=0;if(!o)return L();if(i||!1!==i&&-1===o.indexOf(d)){for(var E=o.split(n),T=0;T<E.length;T++){if(_=E[T],h+=_.length,T!==E.length-1)h+=n.length;else if(g)return L();if(!r||_.substring(0,b)!==r){if(k){if(S=[],I(_.split(t)),F(),p)return L()}else I(_.split(t));if(a&&a<=T)return S=S.slice(0,a),L(!0)}}return L()}for(var N=o.indexOf(t,h),C=o.indexOf(n,h),P=new RegExp(f(u)+f(d),"g"),R=o.indexOf(d,h);;)if(o[h]===d)for(R=h,h++;;){if(-1===(R=o.indexOf(d,R+1)))return g||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:S.length,index:h}),z();if(R===v-1)return z(o.substring(h,R).replace(P,d));if(d===u&&o[R+1]===u)R++;else if(d===u||0===R||o[R-1]!==u){-1!==N&&N<R+1&&(N=o.indexOf(t,R+1));var M=O(-1===(C=-1!==C&&C<R+1?o.indexOf(n,R+1):C)?N:Math.min(N,C));if(o.substr(R+1+M,y)===t){_.push(o.substring(h,R).replace(P,d)),o[h=R+1+M+y]!==d&&(R=o.indexOf(d,h)),N=o.indexOf(t,h),C=o.indexOf(n,h);break}if(M=O(C),o.substring(R+1+M,R+1+M+x)===n){if(_.push(o.substring(h,R).replace(P,d)),D(R+1+M+x),N=o.indexOf(t,h),R=o.indexOf(d,h),k&&(F(),p))return L();if(a&&S.length>=a)return L(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:S.length,index:h}),R++}}else if(r&&0===_.length&&o.substring(h,h+b)===r){if(-1===C)return L();h=C+x,C=o.indexOf(n,h),N=o.indexOf(t,h)}else if(-1!==N&&(N<C||-1===C))_.push(o.substring(h,N)),h=N+y,N=o.indexOf(t,h);else{if(-1===C)break;if(_.push(o.substring(h,C)),D(C+x),k&&(F(),p))return L();if(a&&S.length>=a)return L(!0)}return z();function I(e){S.push(e),A=h}function O(e){var t=0;return-1!==e&&(e=o.substring(R+1,e))&&""===e.trim()?e.length:t}function z(e){return g||(void 0===e&&(e=o.substring(h)),_.push(e),h=v,I(_),k&&F()),L()}function D(e){h=e,I(_),_=[],C=o.indexOf(n,h)}function L(r){if(e.header&&!m&&S.length&&!c){var s=S[0],a=Object.create(null),i=new Set(s);let t=!1;for(let n=0;n<s.length;n++){let r=s[n];if(a[r=w(e.transformHeader)?e.transformHeader(r,n):r]){let e,o=a[r];for(;e=r+"_"+o,o++,i.has(e););i.add(e),s[n]=e,a[r]++,t=!0,(l=null===l?{}:l)[e]=r}else a[r]=1,s[n]=r;i.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:S,errors:j,meta:{delimiter:t,linebreak:n,aborted:p,truncated:!!r,cursor:A+(m||0),renamedHeaders:l}}}function F(){s(L()),S=[],j=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return h}}function g(e){var t=e.data,n=a[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},s),!r);i++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=a[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function y(){throw new Error("Not implemented.")}function x(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=x(e[t]);return n}function b(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return o.parse=function(t,r){var s,l=(r=r||{}).dynamicTyping||!1;if(w(l)&&(r.dynamicTypingFunction=l,l={}),r.dynamicTyping=l,r.transform=!!w(r.transform)&&r.transform,!r.worker||!o.WORKERS_SUPPORTED)return l=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=65279!==(s=t).charCodeAt(0)?s:s.slice(1),l=new(r.download?c:u)(r)):!0===t.readable&&w(t.read)&&w(t.on)?l=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(l=new d(r)),l.stream(t);(l=(()=>{var t,r,s;return!!o.WORKERS_SUPPORTED&&(r=n.URL||n.webkitURL||null,s=e.toString(),t=o.BLOB_URL||(o.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",s,")();"],{type:"text/javascript"}))),(t=new n.Worker(t)).onmessage=g,t.id=i++,a[t.id]=t)})()).userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,l.postMessage({input:t,config:r,workerId:l.id})},o.unparse=function(e,t){var n=!1,r=!0,s=",",a="\r\n",i='"',l=i+i,c=!1,d=null,u=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+i),t.escapeFormulae instanceof RegExp?u=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(u=/^[=+\-@\t\r].*$/)}})(),new RegExp(f(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,c);if("object"==typeof e[0])return p(d||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var i="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&r){for(var c=0;c<e.length;c++)0<c&&(i+=s),i+=m(e[c],c);0<t.length&&(i+=a)}for(var d=0;d<t.length;d++){var u=(o?e:t[d]).length,h=!1,p=o?0===Object.keys(t[d]).length:0===t[d].length;if(n&&!o&&(h="greedy"===n?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===n&&o){for(var f=[],g=0;g<u;g++){var v=l?e[g]:g;f.push(t[d][v])}h=""===f.join("").trim()}if(!h){for(var y=0;y<u;y++){0<y&&!p&&(i+=s);var x=o&&l?e[y]:y;i+=m(t[d][x],y)}d<t.length-1&&(!n||0<u&&!p)&&(i+=a)}}return i}function m(e,t){var r,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,u&&"string"==typeof e&&u.test(e)&&(e="'"+e,a=!0),r=e.toString().replace(h,l),(a=a||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,o.BAD_DELIMITERS)||-1<r.indexOf(s)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=p,o.NetworkStreamer=c,o.FileStreamer=d,o.StringStreamer=u,o.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},s=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)s.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},r)})}),a(),this;function a(){if(0===s.length)w(e.complete)&&e.complete();else{var n,r,a,l,c=s[0];if(w(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return n="AbortError",r=c.file,a=c.inputElem,l=d.reason,void(w(e.error)&&e.error({name:n},r,a,l));if("skip"===d.action)return void i();"object"==typeof d.config&&(c.instanceConfig=t.extend(c.instanceConfig,d.config))}else if("skip"===d)return void i()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(e){w(u)&&u(e,c.file,c.inputElem),i()},o.parse(c.file,c.instanceConfig)}}function i(){s.splice(0,1),a()}}),s&&(n.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&n.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(h.prototype=Object.create(l.prototype)).constructor=h,o}();const D3=Kf(z3.exports),L3=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),F3=[.001,0,0,.001,0,0],B3=1.35,U3=1,W3=2,$3=4,V3=16,H3=32,q3=64,G3=128,K3=256,X3={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Y3="pdfjs_internal_editor_",J3={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Z3={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Q3=0,e5=1,t5=2,n5=3,r5=3,s5=4,a5={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},i5={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},o5=1,l5=2,c5=3,d5=4,u5=5,h5={ERRORS:0,WARNINGS:1,INFOS:5},p5={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},f5=0,m5=1,g5=2,v5=3;let y5=h5.WARNINGS;function x5(){return y5}function b5(e){y5>=h5.INFOS&&console.info(`Info: ${e}`)}function w5(e){y5>=h5.WARNINGS&&console.warn(`Warning: ${e}`)}function k5(e){throw new Error(e)}function S5(e,t){e||k5(t)}function j5(e,t=null,n=null){if(!e)return null;if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch{}}const r=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r)?r:null}function _5(e,t,n=!1){const r=URL.parse(e);return r?(r.hash=t,r.href):n&&j5(e,"http://example.com")?e.split("#",1)[0]+""+(t?`#${t}`:""):""}function A5(e,t,n,r=!1){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const E5=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class T5 extends E5{constructor(e,t){super(e,"PasswordException"),this.code=t}}class N5 extends E5{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class C5 extends E5{constructor(e){super(e,"InvalidPDFException")}}class P5 extends E5{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class R5 extends E5{constructor(e){super(e,"FormatError")}}class M5 extends E5{constructor(e){super(e,"AbortException")}}function I5(e){"object"==typeof e&&void 0!==(null==e?void 0:e.length)||k5("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let s=0;s<t;s+=n){const a=Math.min(s+n,t),i=e.subarray(s,a);r.push(String.fromCharCode.apply(null,i))}return r.join("")}function O5(e){"string"!=typeof e&&k5("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}class z5{static get isLittleEndian(){return A5(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return A5(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return A5(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return A5(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return A5(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return A5(this,"isCSSRoundSupported",null==(t=null==(e=globalThis.CSS)?void 0:e.supports)?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const D5=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class L5{static makeHexColor(e,t,n){return`#${D5[e]}${D5[t]}${D5[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const r=e[n],s=e[n+1];e[n]=r*t[0]+s*t[2]+t[4],e[n+1]=r*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],s=t[1],a=t[2],i=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*r+d*a+o,e[n+c+1]=t*s+d*i+l}}static applyInverseTransform(e,t){const n=e[0],r=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const r=t[0],s=t[1],a=t[2],i=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let p=r*c+o,f=p,m=r*u+o,g=m,v=i*d+l,y=v,x=i*h+l,b=x;if(0!==s||0!==a){const e=s*c,t=s*u,n=a*d,r=a*h;p+=n,g+=n,m+=r,f+=r,v+=e,b+=e,x+=t,y+=t}n[0]=Math.min(n[0],p,m,f,g),n[1]=Math.min(n[1],v,x,y,b),n[2]=Math.max(n[2],p,m,f,g),n[3]=Math.max(n[3],v,x,y,b)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],s=e[2],a=e[3],i=n**2+r**2,o=n*s+r*a,l=s**2+a**2,c=(i+l)/2,d=Math.sqrt(c**2-(i*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,r),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),Vf(this,s,a).call(this,e,n,i,l,t,r,o,c,3*(3*(n-i)-e+l),6*(e-2*n+i),3*(n-e),d),Vf(this,s,a).call(this,e,n,i,l,t,r,o,c,3*(3*(r-o)-t+c),6*(t-2*r+o),3*(r-t),d)}}n=new WeakSet,r=function(e,t,n,r,s,a,i,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,p=d*(d*(d*e+3*l*t)+3*u*n)+h*r,f=d*(d*(d*s+3*l*a)+3*u*i)+h*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)},s=new WeakSet,a=function(e,t,s,a,i,o,l,c,d,u,h,p){if(Math.abs(d)<1e-12)return void(Math.abs(u)>=1e-12&&Vf(this,n,r).call(this,e,t,s,a,i,o,l,c,-h/u,p));const f=u**2-4*h*d;if(f<0)return;const m=Math.sqrt(f),g=2*d;Vf(this,n,r).call(this,e,t,s,a,i,o,l,c,(-u+m)/g,p),Vf(this,n,r).call(this,e,t,s,a,i,o,l,c,(-u-m)/g,p)},Uf(L5,n),Uf(L5,s);let F5=null,B5=null;function U5(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),I5(e)}const W5="pdfjs_internal_id_";function $5(e,t,n){return Math.min(Math.max(e,t),n)}function V5(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(I5(e))}"function"!=typeof Promise.try&&(Promise.try=function(e,...t){return new Promise(n=>{n(e(...t))})}),"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});class H5{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var r;if(!n)return;let s=null;const a=n.name;if("#text"===a)s=n.value;else{if(!H5.shouldBuildText(a))return;(null==(r=null==n?void 0:n.attributes)?void 0:r.textContent)?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&t.push({str:s}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class q5{static setupStorage(e,t,n,r,s){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===s)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===s)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const e of n.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:s})})}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:a}=t,i=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${r}`);for(const[o,l]of Object.entries(a))if(null!=l)switch(o){case"class":l.length&&e.setAttribute(o,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!i||"href"!==o&&"newWindow"!==o)&&e.setAttribute(o,l)}i&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var t,n;const r=e.annotationStorage,s=e.linkService,a=e.xfaHtml,i=e.intent||"display",o=document.createElement(a.name);a.attributes&&this.setAttributes({html:o,element:a,intent:i,linkService:s});const l="richText"!==i,c=e.div;if(c.append(o),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=t}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(0===a.children.length){if(a.value){const e=document.createTextNode(a.value);o.append(e),l&&H5.shouldBuildText(a.name)&&d.push(e)}return{textDivs:d}}const u=[[a,-1,o]];for(;u.length>0;){const[e,a,o]=u.at(-1);if(a+1===e.children.length){u.pop();continue}const c=e.children[++u.at(-1)[1]];if(null===c)continue;const{name:h}=c;if("#text"===h){const e=document.createTextNode(c.value);d.push(e),o.append(e);continue}const p=(null==(t=null==c?void 0:c.attributes)?void 0:t.xmlns)?document.createElementNS(c.attributes.xmlns,h):document.createElement(h);if(o.append(p),c.attributes&&this.setAttributes({html:p,element:c,storage:r,intent:i,linkService:s}),(null==(n=c.children)?void 0:n.length)>0)u.push([c,-1,p]);else if(c.value){const e=document.createTextNode(c.value);l&&H5.shouldBuildText(h)&&d.push(e),p.append(e)}}for(const h of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const G5="http://www.w3.org/2000/svg",K5=class{};Lf(K5,"CSS",96),Lf(K5,"PDF",72),Lf(K5,"PDF_TO_CSS_UNITS",K5.CSS/K5.PDF);let X5=K5;async function Y5(e,t="text"){if(n6(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)r(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)})}class J5{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:i=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=a,n*=t;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,d,u,h,p,f,m,g;switch((r%=360)<0&&(r+=360),r){case 180:c=-1,d=0,u=0,h=1;break;case 90:c=0,d=1,u=1,h=0;break;case 270:c=0,d=-1,u=-1,h=0;break;case 0:c=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}i&&(u=-u,h=-h),0===c?(p=Math.abs(l-e[1])*n+s,f=Math.abs(o-e[0])*n+a,m=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(p=Math.abs(o-e[0])*n+s,f=Math.abs(l-e[1])*n+a,m=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[c*n,d*n,u*n,h*n,p-c*n*o-u*n*l,f-d*n*o-h*n*l],this.width=m,this.height=g}get rawDims(){const e=this.viewBox;return A5(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new J5({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return L5.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];L5.applyTransform(t,this.transform);const n=[e[2],e[3]];return L5.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return L5.applyInverseTransform(n,this.transform),n}}class Z5 extends E5{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Q5(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function e6(e){return"string"==typeof e&&/\.pdf$/i.test(e)}class t6{constructor(){Lf(this,"started",Object.create(null)),Lf(this,"times",[])}time(e){e in this.started&&w5(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||w5(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms\n`);return e.join("")}}function n6(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null==n?void 0:n.protocol)||"https:"===(null==n?void 0:n.protocol)}function r6(e){e.preventDefault()}function s6(e){e.preventDefault(),e.stopPropagation()}class a6{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!=typeof e)return null;Bf(this,i)||Wf(this,i,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Bf(this,i).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===c?(a+=d,o+=u):"+"===c&&(a-=d,o-=u),new Date(Date.UTC(n,r,s,a,o,l))}}function i6(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(w5(`Not a valid color format: "${e}"`),[0,0,0])}function o6(e){const{a:t,b:n,c:r,d:s,e:a,f:i}=e.getTransform();return[t,n,r,s,a,i]}function l6(e){const{a:t,b:n,c:r,d:s,e:a,f:i}=e.getTransform().invertSelf();return[t,n,r,s,a,i]}function c6(e,t,n=!1,r=!0){if(t instanceof J5){const{pageWidth:r,pageHeight:s}=t.rawDims,{style:a}=e,i=z5.isCSSRoundSupported,o=`var(--total-scale-factor) * ${r}px`,l=`var(--total-scale-factor) * ${s}px`,c=i?`round(down, ${o}, var(--scale-round-x))`:`calc(${o})`,d=i?`round(down, ${l}, var(--scale-round-y))`:`calc(${l})`;n&&t.rotation%180!=0?(a.width=d,a.height=c):(a.width=c,a.height=d)}r&&e.setAttribute("data-main-rotation",t.rotation)}i=new WeakMap,Uf(a6,i,void 0);class d6{constructor(){const{pixelRatio:e}=d6;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,s=-1){let a=1/0,i=1/0,o=1/0;(n=d6.capPixels(n,s))>0&&(a=Math.sqrt(n/(e*t))),-1!==r&&(i=r/e,o=r/t);const l=Math.min(a,i,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const u6=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class h6{static get isDarkMode(){var e;return A5(this,"isDarkMode",!!(null==(e=null==window?void 0:window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)").matches))}}function p6(e,t){const n=e[0]/255,r=e[1]/255,s=e[2]/255,a=Math.max(n,r,s),i=Math.min(n,r,s),o=(a+i)/2;if(a===i)t[0]=t[1]=0;else{const e=a-i;switch(t[1]=o<.5?e/(a+i):e/(2-a-i),a){case n:t[0]=60*((r-s)/e+(r<s?6:0));break;case r:t[0]=60*((s-n)/e+2);break;case s:t[0]=60*((n-r)/e+4)}}t[2]=o}function f6(e,t){const n=e[0],r=e[1],s=e[2],a=(1-Math.abs(2*s-1))*r,i=a*(1-Math.abs(n/60%2-1)),o=s-a/2;switch(Math.floor(n/60)){case 0:t[0]=a+o,t[1]=i+o,t[2]=o;break;case 1:t[0]=i+o,t[1]=a+o,t[2]=o;break;case 2:t[0]=o,t[1]=a+o,t[2]=i+o;break;case 3:t[0]=o,t[1]=i+o,t[2]=a+o;break;case 4:t[0]=i+o,t[1]=o,t[2]=a+o;break;case 5:case 6:t[0]=a+o,t[1]=o,t[2]=i+o}}function m6(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function g6(e,t,n){f6(e,n),n.map(m6);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];f6(t,n),n.map(m6);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const v6=new Map;function y6({html:e,dir:t,className:n},r){const s=document.createDocumentFragment();if("string"==typeof e){const n=document.createElement("p");n.dir=t||"auto";const r=e.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){const s=r[e];n.append(document.createTextNode(s)),e<t-1&&n.append(document.createElement("br"))}s.append(n)}else q5.render({xfaHtml:e,div:s,intent:"richText"});s.firstChild.classList.add("richText",n),r.append(s)}const x6=class e{constructor(t){Uf(this,y),Uf(this,b),Uf(this,k),Uf(this,j),Uf(this,o,null),Uf(this,l,null),Uf(this,c,void 0),Uf(this,d,null),Uf(this,u,null),Uf(this,h,null),Uf(this,p,null),Uf(this,f,null),Wf(this,c,t),Bf(e,m)||Wf(e,m,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=Wf(this,o,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=Bf(this,c)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(t.addEventListener("contextmenu",r6,{signal:n}),t.addEventListener("pointerdown",Vf(e,g,v),{signal:n}));const r=Wf(this,d,document.createElement("div"));r.className="buttons",t.append(r);const s=Bf(this,c).toolbarPosition;if(s){const{style:e}=t,n="ltr"===Bf(this,c)._uiManager.direction?1-s[0]:s[0];e.insetInlineEnd=100*n+"%",e.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return Bf(this,o)}hide(){var e;Bf(this,o).classList.add("hidden"),null==(e=Bf(this,l))||e.hideDropdown()}show(){var e,t;Bf(this,o).classList.remove("hidden"),null==(e=Bf(this,u))||e.shown(),null==(t=Bf(this,h))||t.shown()}addDeleteButton(){const{editorType:t,_uiManager:n}=Bf(this,c),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Bf(e,m)[t]),Vf(this,k,S).call(this,r)&&r.addEventListener("click",e=>{n.delete()},{signal:n._signal}),Bf(this,d).append(r)}async addAltText(e){const t=await e.render();Vf(this,k,S).call(this,t),Bf(this,d).append(t,Bf(this,j,_)),Wf(this,u,e)}addComment(e,t=null){if(Bf(this,h))return;const n=e.renderForToolbar();if(!n)return;Vf(this,k,S).call(this,n);const r=Wf(this,p,Bf(this,j,_));t?(Bf(this,d).insertBefore(n,t),Bf(this,d).insertBefore(r,t)):Bf(this,d).append(n,r),Wf(this,h,e),e.toolbar=this}addColorPicker(e){if(Bf(this,l))return;Wf(this,l,e);const t=e.renderButton();Vf(this,k,S).call(this,t),Bf(this,d).append(t,Bf(this,j,_))}async addEditSignatureButton(e){const t=Wf(this,f,await e.renderEditButton(Bf(this,c)));Vf(this,k,S).call(this,t),Bf(this,d).append(t,Bf(this,j,_))}removeButton(e){var t,n;if("comment"===e)null==(t=Bf(this,h))||t.removeToolbarCommentButton(),Wf(this,h,null),null==(n=Bf(this,p))||n.remove(),Wf(this,p,null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t)}}async addButtonBefore(e,t,n){const r=Bf(this,d).querySelector(n);r&&"comment"===e&&this.addComment(t,r)}updateEditSignatureButton(e){Bf(this,f)&&(Bf(this,f).title=e)}remove(){var e;Bf(this,o).remove(),null==(e=Bf(this,l))||e.destroy(),Wf(this,l,null)}};o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakSet,v=function(e){e.stopPropagation()},y=new WeakSet,x=function(e){Bf(this,c)._focusEventsAllowed=!1,s6(e)},b=new WeakSet,w=function(e){Bf(this,c)._focusEventsAllowed=!0,s6(e)},k=new WeakSet,S=function(e){const t=Bf(this,c)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",Vf(this,y,x).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Vf(this,b,w).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",r6,{signal:t}),!0)},j=new WeakSet,_=function(){const e=document.createElement("div");return e.className="divider",e},Uf(x6,g),Uf(x6,m,null);let b6=x6;class w6{constructor(e){Uf(this,N),Uf(this,P),Uf(this,M),Uf(this,A,null),Uf(this,E,null),Uf(this,T,void 0),Wf(this,T,e)}show(e,t,n){const[r,s]=Vf(this,P,R).call(this,t,n),{style:a}=Bf(this,E)||Wf(this,E,Vf(this,N,C).call(this));e.append(Bf(this,E)),a.insetInlineEnd=100*r+"%",a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){Bf(this,E).remove()}}function k6(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))}A=new WeakMap,E=new WeakMap,T=new WeakMap,N=new WeakSet,C=function(){const e=Wf(this,E,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=Bf(this,T)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",r6,{signal:t});const n=Wf(this,A,document.createElement("div"));return n.className="buttons",e.append(n),Bf(this,T).hasCommentManager()&&Vf(this,M,I).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Bf(this,T).commentSelection("floating_button")}),Vf(this,M,I).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Bf(this,T).highlightSelection("floating_button")}),e},P=new WeakSet,R=function(e,t){let n=0,r=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const a=s.x+(t?s.width:0);e>n?(r=a,n=e):t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]},M=new WeakSet,I=function(e,t,n,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const i=Bf(this,T)._signal;i instanceof AbortSignal&&!i.aborted&&(s.addEventListener("contextmenu",r6,{signal:i}),s.addEventListener("click",r,{signal:i})),Bf(this,A).append(s)};class S6{constructor(){Uf(this,O,0)}get id(){return`${Y3}${$f(this,O)._++}`}}O=new WeakMap;const j6=class{constructor(){Uf(this,F),Uf(this,z,U5()),Uf(this,D,0),Uf(this,L,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return A5(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return Vf(this,F,B).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return Vf(this,F,B).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Vf(this,F,B).call(this,e,n)}async getFromId(e){Bf(this,L)||Wf(this,L,new Map);const t=Bf(this,L).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){Bf(this,L)||Wf(this,L,new Map);let n=Bf(this,L).get(e);if(null==n?void 0:n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${Bf(this,z)}_${$f(this,D)._++}`,refCounter:1,isSvg:!1},Bf(this,L).set(e,n),Bf(this,L).set(n.id,n),n}getSvgUrl(e){const t=Bf(this,L).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){var t;Bf(this,L)||Wf(this,L,new Map);const n=Bf(this,L).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:r}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(r.width,r.height);e.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=e.convertToBlob()}null==(t=r.close)||t.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${Bf(this,z)}_`)}};z=new WeakMap,D=new WeakMap,L=new WeakMap,F=new WeakSet,B=async function(e,t){Bf(this,L)||Wf(this,L,new Map);let n=Bf(this,L).get(e);if(null===n)return null;if(null==n?void 0:n.bitmap)return n.refCounter+=1,n;try{let e;if(n||(n={bitmap:null,id:`image_${Bf(this,z)}_${$f(this,D)._++}`,refCounter:0,isSvg:!1}),"string"==typeof t?(n.url=t,e=await Y5(t,"blob")):t instanceof File?e=n.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=j6._isSVGFittingCanvas,r=new FileReader,s=new Image,a=new Promise((e,a)=>{s.onload=()=>{n.bitmap=s,n.isSvg=!0,e()},r.onload=async()=>{const e=n.svgUrl=r.result;s.src=await t?`${e}#svgView(preserveAspectRatio(none))`:e},s.onerror=r.onerror=a});r.readAsDataURL(e),await a}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(Vne){w5(Vne),n=null}return Bf(this,L).set(e,n),n&&Bf(this,L).set(n.id,n),n};let _6=j6;class A6{constructor(e=128){Uf(this,U,[]),Uf(this,W,!1),Uf(this,V,void 0),Uf(this,H,-1),Wf(this,V,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:i=!1}){if(r&&e(),Bf(this,W))return;const o={cmd:e,undo:t,post:n,type:s};if(-1===Bf(this,H))return Bf(this,U).length>0&&(Bf(this,U).length=0),Wf(this,H,0),void Bf(this,U).push(o);if(a&&Bf(this,U)[Bf(this,H)].type===s)return i&&(o.undo=Bf(this,U)[Bf(this,H)].undo),void(Bf(this,U)[Bf(this,H)]=o);const l=Bf(this,H)+1;l===Bf(this,V)?Bf(this,U).splice(0,1):(Wf(this,H,l),l<Bf(this,U).length&&Bf(this,U).splice(l)),Bf(this,U).push(o)}undo(){if(-1===Bf(this,H))return;Wf(this,W,!0);const{undo:e,post:t}=Bf(this,U)[Bf(this,H)];e(),null==t||t(),Wf(this,W,!1),Wf(this,H,Bf(this,H)-1)}redo(){if(Bf(this,H)<Bf(this,U).length-1){Wf(this,H,Bf(this,H)+1),Wf(this,W,!0);const{cmd:e,post:t}=Bf(this,U)[Bf(this,H)];e(),null==t||t(),Wf(this,W,!1)}}hasSomethingToUndo(){return-1!==Bf(this,H)}hasSomethingToRedo(){return Bf(this,H)<Bf(this,U).length-1}cleanType(e){if(-1!==Bf(this,H)){for(let t=Bf(this,H);t>=0;t--)if(Bf(this,U)[t].type!==e)return Bf(this,U).splice(t+1,Bf(this,H)-t),void Wf(this,H,t);Bf(this,U).length=0,Wf(this,H,-1)}}destroy(){Wf(this,U,null)}}U=new WeakMap,W=new WeakMap,V=new WeakMap,H=new WeakMap;class E6{constructor(e){Uf(this,q),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=z5.platform;for(const[n,r,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:s}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Vf(this,q,G).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:i=null}}=n;i&&!i(e,t)||(r.bind(e,...a,t)(),s||s6(t))}}q=new WeakSet,G=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const T6=class e{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,i6(r))}t.remove()}(e),A5(this,"_colors",e)}convert(t){const n=i6(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,s]of this._colors)if(s.every((e,t)=>e===n[t]))return e._colorsMapping.get(r);return n}getHexCode(e){const t=this._colors.get(e);return t?L5.makeHexColor(...t):e}};Lf(T6,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let N6=T6;const C6=class e{constructor(e,t,n,r,s,a,i,o,l,c,d,u,h,p,f,m){Uf(this,$e),Uf(this,He),Uf(this,Ge),Uf(this,Xe),Uf(this,Je),Uf(this,Qe),Uf(this,tt),Uf(this,rt),Uf(this,at),Uf(this,ot),Uf(this,ct),Uf(this,ut),Uf(this,pt),Uf(this,mt),Uf(this,vt),Uf(this,xt),Uf(this,wt),Uf(this,St),Uf(this,_t),Uf(this,Et),Uf(this,Nt),Uf(this,K,new AbortController),Uf(this,X,null),Uf(this,Y,null),Uf(this,J,new Map),Uf(this,Z,new Map),Uf(this,Q,null),Uf(this,ee,null),Uf(this,te,null),Uf(this,ne,new A6),Uf(this,re,null),Uf(this,se,null),Uf(this,ae,null),Uf(this,ie,0),Uf(this,oe,new Set),Uf(this,le,null),Uf(this,ce,null),Uf(this,de,new Set),Lf(this,"_editorUndoBar",null),Uf(this,ue,!1),Uf(this,he,!1),Uf(this,pe,!1),Uf(this,fe,null),Uf(this,me,null),Uf(this,ge,null),Uf(this,ve,null),Uf(this,ye,!1),Uf(this,xe,null),Uf(this,be,new S6),Uf(this,we,!1),Uf(this,ke,!1),Uf(this,Se,!1),Uf(this,je,null),Uf(this,_e,null),Uf(this,Ae,null),Uf(this,Ee,null),Uf(this,Te,null),Uf(this,Ne,J3.NONE),Uf(this,Ce,new Set),Uf(this,Pe,null),Uf(this,Re,null),Uf(this,Me,null),Uf(this,Ie,null),Uf(this,Oe,null),Uf(this,ze,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Uf(this,De,[0,0]),Uf(this,Le,null),Uf(this,Fe,null),Uf(this,Be,null),Uf(this,Ue,null),Uf(this,We,null);const g=this._signal=Bf(this,K).signal;Wf(this,Fe,e),Wf(this,Be,t),Wf(this,Ue,n),Wf(this,Q,r),Wf(this,re,s),Wf(this,Re,a),Wf(this,Oe,o),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:g}),window.addEventListener("pointerdown",()=>{Wf(this,ke,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{Wf(this,ke,!1)},{capture:!0,signal:g}),Vf(this,Qe,et).call(this),Vf(this,pt,ft).call(this),Vf(this,at,it).call(this),Wf(this,ee,o.annotationStorage),Wf(this,fe,o.filterFactory),Wf(this,Me,l),Wf(this,ve,c||null),Wf(this,ue,d),Wf(this,he,u),Wf(this,pe,h),Wf(this,Te,p||null),this.viewParameters={realScale:X5.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=!1!==m,null==s||s.setSidebarUiManager(this)}static get _keyboardManager(){const t=e.prototype,n=e=>Bf(e,Fe).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),r=(e,{target:t})=>{if(t instanceof HTMLInputElement){const{type:e}=t;return"text"!==e&&"number"!==e}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return A5(this,"_keyboardManager",new E6([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&Bf(e,Fe).contains(t)&&!e.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&Bf(e,Fe).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}]]))}destroy(){var e,t,n,r,s,a,i,o,l;null==(e=Bf(this,We))||e.resolve(),Wf(this,We,null),null==(t=Bf(this,K))||t.abort(),Wf(this,K,null),this._signal=null;for(const c of Bf(this,Z).values())c.destroy();Bf(this,Z).clear(),Bf(this,J).clear(),Bf(this,de).clear(),null==(n=Bf(this,Ee))||n.clear(),Wf(this,X,null),Bf(this,Ce).clear(),Bf(this,ne).destroy(),null==(r=Bf(this,Q))||r.destroy(),null==(s=Bf(this,re))||s.destroy(),null==(a=Bf(this,Re))||a.destroy(),null==(i=Bf(this,xe))||i.hide(),Wf(this,xe,null),null==(o=Bf(this,Ae))||o.destroy(),Wf(this,Ae,null),Wf(this,Y,null),Bf(this,me)&&(clearTimeout(Bf(this,me)),Wf(this,me,null)),Bf(this,Le)&&(clearTimeout(Bf(this,Le)),Wf(this,Le,null)),null==(l=this._editorUndoBar)||l.destroy(),Wf(this,Oe,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return Bf(this,Te)}get useNewAltTextFlow(){return Bf(this,he)}get useNewAltTextWhenAddingImage(){return Bf(this,pe)}get hcmFilter(){return A5(this,"hcmFilter",Bf(this,Me)?Bf(this,fe).addHCMFilter(Bf(this,Me).foreground,Bf(this,Me).background):"none")}get direction(){return A5(this,"direction",getComputedStyle(Bf(this,Fe)).direction)}get _highlightColors(){return A5(this,"_highlightColors",Bf(this,ve)?new Map(Bf(this,ve).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return A5(this,"highlightColors",null);const t=new Map,n=!!Bf(this,Me);for(const[r,s]of e){const e=r.endsWith("_HCM");n&&e?t.set(r.replace("_HCM",""),s):n||e||t.set(r,s)}return A5(this,"highlightColors",t)}get highlightColorNames(){return A5(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Wf(this,ae,e)}setMainHighlightColorPicker(e){Wf(this,Ae,e)}editAltText(e,t=!1){var n;null==(n=Bf(this,Q))||n.editAltText(this,e,t)}hasCommentManager(){return!!Bf(this,re)}editComment(e,t,n,r){var s;null==(s=Bf(this,re))||s.showDialog(this,e,t,n,r)}selectComment(e,t){const n=Bf(this,Z).get(e),r=null==n?void 0:n.getEditorByUID(t);null==r||r.toggleComment(!0,!0)}updateComment(e){var t;null==(t=Bf(this,re))||t.updateComment(e.getData())}updatePopupColor(e){var t;null==(t=Bf(this,re))||t.updatePopupColor(e)}removeComment(e){var t;null==(t=Bf(this,re))||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var r;null==(r=Bf(this,re))||r.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&(null==(n=Bf(this,re))?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return(null==(e=Bf(this,re))?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(Bf(this,Z).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=n=>{n.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;null==(t=Bf(this,Re))||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return Bf(this,Re)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){if("enableNewAltTextWhenAddingImage"===e)Wf(this,pe,t)}onPageChanging({pageNumber:e}){Wf(this,ie,e-1)}focusMainContainer(){Bf(this,Fe).focus()}findParent(e,t){for(const n of Bf(this,Z).values()){const{x:r,y:s,width:a,height:i}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+i)return n}return null}disableUserSelect(e=!1){Bf(this,Be).classList.toggle("noUserSelect",e)}addShouldRescale(e){Bf(this,de).add(e)}removeShouldRescale(e){Bf(this,de).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*X5.PDF_TO_CSS_UNITS;for(const n of Bf(this,de))n.onScaleChanging();null==(t=Bf(this,ae))||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:i}=n,o=n.toString(),l=Vf(this,$e,Ve).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const d=Vf(this,He,qe).call(this,l),u=Bf(this,Ne)===J3.NONE,h=()=>{const n=null==d?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:i,text:o});u&&this.showAllEditors("highlight",!0,!0),t&&(null==n||n.editComment())};u?this.switchToMode(J3.HIGHLIGHT,h):h()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!Bf(this,ee))return null;const t=`${Y3}${e}`,n=Bf(this,ee).getRawValue(t);return n&&Bf(this,ee).remove(t),n}addToAnnotationStorage(e){e.isEmpty()||!Bf(this,ee)||Bf(this,ee).has(e.id)||Bf(this,ee).setValue(e.id,e)}a11yAlert(e,t=null){const n=Bf(this,Ue);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Bf(this,ye)&&(Wf(this,ye,!1),Vf(this,Je,Ze).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of Bf(this,Ce))if(t.div.contains(e)){Wf(this,_e,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!Bf(this,_e))return;const[e,t]=Bf(this,_e);Wf(this,_e,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Vf(this,at,it).call(this),Vf(this,ct,dt).call(this)}removeEditListeners(){Vf(this,ot,lt).call(this),Vf(this,ut,ht).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of Bf(this,ce))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of Bf(this,ce))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null==(t=Bf(this,X))||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of Bf(this,Ce)){const e=r.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const e of Bf(this,ce))if(e.isHandlingMimeForPasting(a.type))return void e.paste(a,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void w5(`paste: "${s.message}".`)}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const a of n){const t=await r.deserialize(a);if(!t)return;e.push(t)}const t=()=>{for(const t of e)Vf(this,St,jt).call(this,t);Vf(this,Nt,Ct).call(this,e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){w5(`paste: "${s.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),Bf(this,Ne)===J3.NONE||this.isEditorHandlingKeyboard||e._keyboardManager.exec(this,t)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,Bf(this,ye)&&(Wf(this,ye,!1),Vf(this,Je,Ze).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(Vf(this,tt,nt).call(this),Vf(this,ct,dt).call(this),Vf(this,mt,gt).call(this,{isEditing:Bf(this,Ne)!==J3.NONE,isEmpty:Vf(this,Et,Tt).call(this),hasSomethingToUndo:Bf(this,ne).hasSomethingToUndo(),hasSomethingToRedo:Bf(this,ne).hasSomethingToRedo(),hasSelectedEditor:!1})):(Vf(this,rt,st).call(this),Vf(this,ut,ht).call(this),Vf(this,mt,gt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!Bf(this,ce)){Wf(this,ce,e);for(const e of Bf(this,ce))Vf(this,vt,yt).call(this,e.defaultPropertiesToUpdate)}}getId(){return Bf(this,be).id}get currentLayer(){return Bf(this,Z).get(Bf(this,ie))}getLayer(e){return Bf(this,Z).get(e)}get currentPageIndex(){return Bf(this,ie)}addLayer(e){Bf(this,Z).set(e.pageIndex,e),Bf(this,we)?e.enable():e.disable()}removeLayer(e){Bf(this,Z).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,s=!1){var a,i,o,l,c,d;if(Bf(this,Ne)!==e&&(!Bf(this,We)||(await Bf(this,We).promise,Bf(this,We)))){if(Wf(this,We,Promise.withResolvers()),null==(a=Bf(this,ae))||a.commitOrRemove(),Bf(this,Ne)===J3.POPUP&&(null==(i=Bf(this,re))||i.hideSidebar()),null==(o=Bf(this,re))||o.destroyPopup(),Wf(this,Ne,e),e===J3.NONE){this.setEditingState(!1),Vf(this,wt,kt).call(this);for(const e of Bf(this,J).values())e.hideStandaloneCommentButton();return null==(l=this._editorUndoBar)||l.hide(),this.toggleComment(null),void Bf(this,We).resolve()}for(const e of Bf(this,J).values())e.addStandaloneCommentButton();e===J3.SIGNATURE&&await(null==(c=Bf(this,Re))?void 0:c.loadSignatures()),this.setEditingState(!0),await Vf(this,xt,bt).call(this),this.unselectAll();for(const t of Bf(this,Z).values())t.updateMode(e);if(e===J3.POPUP){Bf(this,Y)||Wf(this,Y,await Bf(this,Oe).getAnnotationsByType(new Set(Bf(this,ce).map(e=>e._editorType))));const e=new Set,t=[];for(const n of Bf(this,J).values()){const{annotationElementId:r,hasComment:s,deleted:a}=n;r&&e.add(r),s&&!a&&t.push(n.getData())}for(const n of Bf(this,Y)){const{id:r,popupRef:s,contentsObj:a}=n;s&&(null==a?void 0:a.str)&&!e.has(r)&&!Bf(this,oe).has(r)&&t.push(n)}null==(d=Bf(this,re))||d.showSidebar(t)}if(!t)return n&&this.addNewEditorFromKeyboard(),void Bf(this,We).resolve();for(const e of Bf(this,J).values())e.uid===t?(this.setSelected(e),s?e.editComment():r?e.enterInEditMode():e.focus()):e.unselect();Bf(this,We).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==Bf(this,Ne)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(Bf(this,ce)){switch(e){case Z3.CREATE:return void this.currentLayer.addNewEditor(t);case Z3.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Bf(this,Ie)||Wf(this,Ie,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of Bf(this,Ce))n.updateParams(e,t);else for(const n of Bf(this,ce))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const s of Bf(this,J).values())s.editorType===e&&s.show(t);((null==(r=Bf(this,Ie))?void 0:r.get(Z3.HIGHLIGHT_SHOW_ALL))??!0)!==t&&Vf(this,vt,yt).call(this,[[Z3.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(Bf(this,Se)!==e){Wf(this,Se,e);for(const t of Bf(this,Z).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of Bf(this,J).values())t.pageIndex===e&&(yield t)}getEditor(e){return Bf(this,J).get(e)}addEditor(e){Bf(this,J).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(Bf(this,me)&&clearTimeout(Bf(this,me)),Wf(this,me,setTimeout(()=>{this.focusMainContainer(),Wf(this,me,null)},0))),Bf(this,J).delete(e.id),e.annotationElementId&&(null==(t=Bf(this,Ee))||t.delete(e.annotationElementId)),this.unselect(e),e.annotationElementId&&Bf(this,oe).has(e.annotationElementId)||null==(n=Bf(this,ee))||n.remove(e.id)}addDeletedAnnotationElement(e){Bf(this,oe).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return Bf(this,oe).has(e)}removeDeletedAnnotationElement(e){Bf(this,oe).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){Bf(this,X)!==e&&(Wf(this,X,e),e&&Vf(this,vt,yt).call(this,e.propertiesToUpdate))}updateUI(e){Bf(this,_t,At)===e&&Vf(this,vt,yt).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){Vf(this,vt,yt).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(Bf(this,Ce).has(e))return Bf(this,Ce).delete(e),e.unselect(),void Vf(this,mt,gt).call(this,{hasSelectedEditor:this.hasSelection});Bf(this,Ce).add(e),e.select(),Vf(this,vt,yt).call(this,e.propertiesToUpdate),Vf(this,mt,gt).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),null==(t=Bf(this,ae))||t.commitOrRemove();for(const n of Bf(this,Ce))n!==e&&n.unselect();Bf(this,Ce).clear(),Bf(this,Ce).add(e),e.select(),Vf(this,vt,yt).call(this,e.propertiesToUpdate),Vf(this,mt,gt).call(this,{hasSelectedEditor:!0})}isSelected(e){return Bf(this,Ce).has(e)}get firstSelectedEditor(){return Bf(this,Ce).values().next().value}unselect(e){e.unselect(),Bf(this,Ce).delete(e),Vf(this,mt,gt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Bf(this,Ce).size}get isEnterHandled(){return 1===Bf(this,Ce).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;Bf(this,ne).undo(),Vf(this,mt,gt).call(this,{hasSomethingToUndo:Bf(this,ne).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Vf(this,Et,Tt).call(this)}),null==(e=this._editorUndoBar)||e.hide()}redo(){Bf(this,ne).redo(),Vf(this,mt,gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Bf(this,ne).hasSomethingToRedo(),isEmpty:Vf(this,Et,Tt).call(this)})}addCommands(e){Bf(this,ne).add(e),Vf(this,mt,gt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Vf(this,Et,Tt).call(this)})}cleanUndoStack(e){Bf(this,ne).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null==(e=this.currentLayer)?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...Bf(this,Ce)],r=()=>{for(const e of n)Vf(this,St,jt).call(this,e)};this.addCommands({cmd:()=>{var e;null==(e=this._editorUndoBar)||e.show(r,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:r,mustExec:!0})}commitOrRemove(){var e;null==(e=Bf(this,X))||e.commitOrRemove()}hasSomethingToControl(){return Bf(this,X)||this.hasSelection}selectAll(){for(const e of Bf(this,Ce))e.commit();Vf(this,Nt,Ct).call(this,Bf(this,J).values())}unselectAll(){var e;if((!Bf(this,X)||(Bf(this,X).commitOrRemove(),Bf(this,Ne)===J3.NONE))&&!(null==(e=Bf(this,ae))?void 0:e.commitOrRemove())&&this.hasSelection){for(const e of Bf(this,Ce))e.unselect();Bf(this,Ce).clear(),Vf(this,mt,gt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;Bf(this,De)[0]+=e,Bf(this,De)[1]+=t;const[r,s]=Bf(this,De),a=[...Bf(this,Ce)];Bf(this,Le)&&clearTimeout(Bf(this,Le)),Wf(this,Le,setTimeout(()=>{Wf(this,Le,null),Bf(this,De)[0]=Bf(this,De)[1]=0,this.addCommands({cmd:()=>{for(const e of a)Bf(this,J).has(e.id)&&(e.translateInPage(r,s),e.translationDone())},undo:()=>{for(const e of a)Bf(this,J).has(e.id)&&(e.translateInPage(-r,-s),e.translationDone())},mustExec:!1})},1e3));for(const i of a)i.translateInPage(e,t),i.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Wf(this,le,new Map);for(const e of Bf(this,Ce))Bf(this,le).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Bf(this,le))return!1;this.disableUserSelect(!1);const e=Bf(this,le);Wf(this,le,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},i]of e)i.newX=r,i.newY=s,i.newPageIndex=a,t||(t=r!==i.savedX||s!==i.savedY||a!==i.savedPageIndex);if(!t)return!1;const n=(e,t,n,r)=>{if(Bf(this,J).has(e.id)){const s=Bf(this,Z).get(r);s?e._setParentAndPosition(s,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:s,newPageIndex:a}]of e)n(t,r,s,a)},undo:()=>{for(const[t,{savedX:r,savedY:s,savedPageIndex:a}]of e)n(t,r,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(Bf(this,le))for(const n of Bf(this,le).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===Bf(this,Ce).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return Bf(this,X)===e}getActive(){return Bf(this,X)}getMode(){return Bf(this,Ne)}isEditingMode(){return Bf(this,Ne)!==J3.NONE}get imageManager(){return A5(this,"imageManager",new _6)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:a}=e.getBoundingClientRect();let i;switch(e.getAttribute("data-main-rotation")){case"90":i=(e,t,i,o)=>({x:(t-r)/a,y:1-(e+i-n)/s,width:o/a,height:i/s});break;case"180":i=(e,t,i,o)=>({x:1-(e+i-n)/s,y:1-(t+o-r)/a,width:i/s,height:o/a});break;case"270":i=(e,t,i,o)=>({x:1-(t+o-r)/a,y:(e-n)/s,width:o/a,height:i/s});break;default:i=(e,t,i,o)=>({x:(e-n)/s,y:(t-r)/a,width:i/s,height:o/a})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:r,height:s}of e.getClientRects())0!==r&&0!==s&&o.push(i(t,n,r,s))}return 0===o.length?null:o}addChangedExistingAnnotation({annotationElementId:e,id:t}){(Bf(this,te)||Wf(this,te,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;null==(t=Bf(this,te))||t.delete(e)}renderAnnotationElement(e){var t;const n=null==(t=Bf(this,te))?void 0:t.get(e.data.id);if(!n)return;const r=Bf(this,ee).getRawValue(n);r&&(Bf(this,Ne)!==J3.NONE||r.hasBeenModified)&&r.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var r;const s=null==(r=Bf(this,Ee))?void 0:r.get(e);s&&(s.setCanvas(t,n),Bf(this,Ee).delete(e))}addMissingCanvas(e,t){(Bf(this,Ee)||Wf(this,Ee,new Map)).set(e,t)}};K=new WeakMap,X=new WeakMap,Y=new WeakMap,J=new WeakMap,Z=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,ae=new WeakMap,ie=new WeakMap,oe=new WeakMap,le=new WeakMap,ce=new WeakMap,de=new WeakMap,ue=new WeakMap,he=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ge=new WeakMap,ve=new WeakMap,ye=new WeakMap,xe=new WeakMap,be=new WeakMap,we=new WeakMap,ke=new WeakMap,Se=new WeakMap,je=new WeakMap,_e=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,Pe=new WeakMap,Re=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,ze=new WeakMap,De=new WeakMap,Le=new WeakMap,Fe=new WeakMap,Be=new WeakMap,Ue=new WeakMap,We=new WeakMap,$e=new WeakSet,Ve=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},He=new WeakSet,qe=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of Bf(this,Z).values())if(n.hasTextLayer(e))return n;return null},Ge=new WeakSet,Ke=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=Vf(this,$e,Ve).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(Bf(this,xe)||Wf(this,xe,new w6(this)),Bf(this,xe).show(t,n,"ltr"===this.direction))},Xe=new WeakSet,Ye=function(){var e,t,n;const r=document.getSelection();if(!r||r.isCollapsed)return void(Bf(this,Pe)&&(null==(e=Bf(this,xe))||e.hide(),Wf(this,Pe,null),Vf(this,mt,gt).call(this,{hasSelectedText:!1})));const{anchorNode:s}=r;if(s===Bf(this,Pe))return;const a=Vf(this,$e,Ve).call(this,r).closest(".textLayer");if(a){if(null==(n=Bf(this,xe))||n.hide(),Wf(this,Pe,s),Vf(this,mt,gt).call(this,{hasSelectedText:!0}),(Bf(this,Ne)===J3.HIGHLIGHT||Bf(this,Ne)===J3.NONE)&&(Bf(this,Ne)===J3.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Wf(this,ye,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=Bf(this,Ne)===J3.HIGHLIGHT?Vf(this,He,qe).call(this,a):null;if(null==e||e.toggleDrawing(),Bf(this,ke)){const t=new AbortController,n=this.combinedSignal(t),r=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null==e||e.toggleDrawing(!0),"pointerup"===n.type&&Vf(this,Je,Ze).call(this,"main_toolbar"))};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}else null==e||e.toggleDrawing(!0),Vf(this,Je,Ze).call(this,"main_toolbar")}}else Bf(this,Pe)&&(null==(t=Bf(this,xe))||t.hide(),Wf(this,Pe,null),Vf(this,mt,gt).call(this,{hasSelectedText:!1}))},Je=new WeakSet,Ze=function(e=""){Bf(this,Ne)===J3.HIGHLIGHT?this.highlightSelection(e):Bf(this,ue)&&Vf(this,Ge,Ke).call(this)},Qe=new WeakSet,et=function(){document.addEventListener("selectionchange",Vf(this,Xe,Ye).bind(this),{signal:this._signal})},tt=new WeakSet,nt=function(){if(Bf(this,ge))return;Wf(this,ge,new AbortController);const e=this.combinedSignal(Bf(this,ge));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rt=new WeakSet,st=function(){var e;null==(e=Bf(this,ge))||e.abort(),Wf(this,ge,null)},at=new WeakSet,it=function(){if(Bf(this,je))return;Wf(this,je,new AbortController);const e=this.combinedSignal(Bf(this,je));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ot=new WeakSet,lt=function(){var e;null==(e=Bf(this,je))||e.abort(),Wf(this,je,null)},ct=new WeakSet,dt=function(){if(Bf(this,se))return;Wf(this,se,new AbortController);const e=this.combinedSignal(Bf(this,se));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},ut=new WeakSet,ht=function(){var e;null==(e=Bf(this,se))||e.abort(),Wf(this,se,null)},pt=new WeakSet,ft=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},mt=new WeakSet,gt=function(e){Object.entries(e).some(([e,t])=>Bf(this,ze)[e]!==t)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Bf(this,ze),e)}),Bf(this,Ne)===J3.HIGHLIGHT&&!1===e.hasSelectedEditor&&Vf(this,vt,yt).call(this,[[Z3.HIGHLIGHT_FREE,!0]]))},vt=new WeakSet,yt=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},xt=new WeakSet,bt=async function(){if(!Bf(this,we)){Wf(this,we,!0);const e=[];for(const t of Bf(this,Z).values())e.push(t.enable());await Promise.all(e);for(const t of Bf(this,J).values())t.enable()}},wt=new WeakSet,kt=function(){if(this.unselectAll(),Bf(this,we)){Wf(this,we,!1);for(const e of Bf(this,Z).values())e.disable();for(const e of Bf(this,J).values())e.disable()}},St=new WeakSet,jt=function(e){const t=Bf(this,Z).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},_t=new WeakSet,At=function(){let e=null;for(e of Bf(this,Ce));return e},Et=new WeakSet,Tt=function(){if(0===Bf(this,J).size)return!0;if(1===Bf(this,J).size)for(const e of Bf(this,J).values())return e.isEmpty();return!1},Nt=new WeakSet,Ct=function(e){for(const t of Bf(this,Ce))t.unselect();Bf(this,Ce).clear();for(const t of e)t.isEmpty()||(Bf(this,Ce).add(t),t.select());Vf(this,mt,gt).call(this,{hasSelectedEditor:this.hasSelection})},Lf(C6,"TRANSLATE_SMALL",1),Lf(C6,"TRANSLATE_BIG",10);let P6=C6;const R6=class e{constructor(t){Uf(this,Vt),Uf(this,qt),Uf(this,Pt,null),Uf(this,Rt,!1),Uf(this,Mt,null),Uf(this,It,null),Uf(this,Ot,null),Uf(this,zt,null),Uf(this,Dt,!1),Uf(this,Lt,null),Uf(this,Ft,null),Uf(this,Bt,null),Uf(this,Ut,null),Uf(this,Wt,!1),Wf(this,Ft,t),Wf(this,Wt,t._uiManager.useNewAltTextFlow),Bf(e,$t)||Wf(e,$t,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){e._l10n??(e._l10n=t)}async render(){const t=Wf(this,Mt,document.createElement("button"));t.className="altText",t.tabIndex="0";const n=Wf(this,It,document.createElement("span"));t.append(n),Bf(this,Wt)?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bf(e,$t).missing),n.setAttribute("data-l10n-id",Bf(e,$t)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=Bf(this,Ft)._uiManager._signal;t.addEventListener("contextmenu",r6,{signal:r}),t.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:r});const s=e=>{e.preventDefault(),Bf(this,Ft)._uiManager.editAltText(Bf(this,Ft)),Bf(this,Wt)&&Bf(this,Ft)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Bf(this,Vt,Ht)}})};return t.addEventListener("click",s,{capture:!0,signal:r}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Wf(this,Dt,!0),s(e))},{signal:r}),await Vf(this,qt,Gt).call(this),t}finish(){Bf(this,Mt)&&(Bf(this,Mt).focus({focusVisible:Bf(this,Dt)}),Wf(this,Dt,!1))}isEmpty(){return Bf(this,Wt)?null===Bf(this,Pt):!Bf(this,Pt)&&!Bf(this,Rt)}hasData(){return Bf(this,Wt)?null!==Bf(this,Pt)||!!Bf(this,Bt):this.isEmpty()}get guessedText(){return Bf(this,Bt)}async setGuessedText(t){null===Bf(this,Pt)&&(Wf(this,Bt,t),Wf(this,Ut,await e._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),Vf(this,qt,Gt).call(this))}toggleAltTextBadge(e=!1){var t;if(!Bf(this,Wt)||Bf(this,Pt))return null==(t=Bf(this,Lt))||t.remove(),void Wf(this,Lt,null);if(!Bf(this,Lt)){const e=Wf(this,Lt,document.createElement("div"));e.className="noAltTextBadge",Bf(this,Ft).div.append(e)}Bf(this,Lt).classList.toggle("hidden",!e)}serialize(e){let t=Bf(this,Pt);return e||Bf(this,Bt)!==t||(t=Bf(this,Ut)),{altText:t,decorative:Bf(this,Rt),guessedText:Bf(this,Bt),textWithDisclaimer:Bf(this,Ut)}}get data(){return{altText:Bf(this,Pt),decorative:Bf(this,Rt)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(Wf(this,Bt,n),Wf(this,Ut,r)),Bf(this,Pt)===e&&Bf(this,Rt)===t||(s||(Wf(this,Pt,e),Wf(this,Rt,t)),Vf(this,qt,Gt).call(this))}toggle(e=!1){Bf(this,Mt)&&(!e&&Bf(this,zt)&&(clearTimeout(Bf(this,zt)),Wf(this,zt,null)),Bf(this,Mt).disabled=!e)}shown(){Bf(this,Ft)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Bf(this,Vt,Ht)}})}destroy(){var e,t;null==(e=Bf(this,Mt))||e.remove(),Wf(this,Mt,null),Wf(this,It,null),Wf(this,Ot,null),null==(t=Bf(this,Lt))||t.remove(),Wf(this,Lt,null)}};Pt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap,It=new WeakMap,Ot=new WeakMap,zt=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,Wt=new WeakMap,$t=new WeakMap,Vt=new WeakSet,Ht=function(){return(Bf(this,Pt)?"added":null===Bf(this,Pt)&&this.guessedText&&"review")||"missing"},qt=new WeakSet,Gt=async function(){var e,t,n;const r=Bf(this,Mt);if(!r)return;if(Bf(this,Wt)){if(r.classList.toggle("done",!!Bf(this,Pt)),r.setAttribute("data-l10n-id",Bf(R6,$t)[Bf(this,Vt,Ht)]),null==(e=Bf(this,It))||e.setAttribute("data-l10n-id",Bf(R6,$t)[`${Bf(this,Vt,Ht)}-label`]),!Bf(this,Pt))return void(null==(t=Bf(this,Ot))||t.remove())}else{if(!Bf(this,Pt)&&!Bf(this,Rt))return r.classList.remove("done"),void(null==(n=Bf(this,Ot))||n.remove());r.classList.add("done"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=Bf(this,Ot);if(!s){Wf(this,Ot,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id=`alt-text-tooltip-${Bf(this,Ft).id}`;const e=100,t=Bf(this,Ft)._uiManager._signal;t.addEventListener("abort",()=>{clearTimeout(Bf(this,zt)),Wf(this,zt,null)},{once:!0}),r.addEventListener("mouseenter",()=>{Wf(this,zt,setTimeout(()=>{Wf(this,zt,null),Bf(this,Ot).classList.add("show"),Bf(this,Ft)._reportTelemetry({action:"alt_text_tooltip"})},e))},{signal:t}),r.addEventListener("mouseleave",()=>{var e;Bf(this,zt)&&(clearTimeout(Bf(this,zt)),Wf(this,zt,null)),null==(e=Bf(this,Ot))||e.classList.remove("show")},{signal:t})}Bf(this,Rt)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=Bf(this,Pt)),s.parentNode||r.append(s);const a=Bf(this,Ft).getElementForAltText();null==a||a.setAttribute("aria-describedby",s.id)},Uf(R6,$t,null),Lf(R6,"_l10n",null);let M6=R6;class I6{constructor(e){Uf(this,sn),Uf(this,Kt,null),Uf(this,Xt,null),Uf(this,Yt,!1),Uf(this,Jt,null),Uf(this,Zt,null),Uf(this,Qt,null),Uf(this,en,null),Uf(this,tn,null),Uf(this,nn,!1),Uf(this,rn,null),Wf(this,Jt,e)}renderForToolbar(){const e=Wf(this,Xt,document.createElement("button"));return e.className="comment",Vf(this,sn,an).call(this,e,!1)}renderForStandalone(){const e=Wf(this,Kt,document.createElement("button"));e.className="annotationCommentButton";const t=Bf(this,Jt).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*("ltr"===Bf(this,Jt)._uiManager.direction?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=Bf(this,Jt).commentButtonColor;r&&(n.backgroundColor=r)}return Vf(this,sn,an).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;null==(e=Bf(this,Kt)??Bf(this,Xt))||e.focus()},0)}onUpdatedColor(){if(!Bf(this,Kt))return;const e=Bf(this,Jt).commentButtonColor;e&&(Bf(this,Kt).style.backgroundColor=e),Bf(this,Jt)._uiManager.updatePopupColor(Bf(this,Jt))}get commentButtonWidth(){var e;return((null==(e=Bf(this,Kt))?void 0:e.getBoundingClientRect().width)??0)/Bf(this,Jt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Bf(this,rn))return Bf(this,rn);if(!Bf(this,Kt))return null;const{x:e,y:t,height:n}=Bf(this,Kt).getBoundingClientRect(),{x:r,y:s,width:a,height:i}=Bf(this,Jt).parent.boundingClientRect;return[(e-r)/a,(t+n-s)/i]}set commentPopupPositionInLayer(e){Wf(this,rn,e)}hasDefaultPopupPosition(){return null===Bf(this,rn)}removeStandaloneCommentButton(){var e;null==(e=Bf(this,Kt))||e.remove(),Wf(this,Kt,null)}removeToolbarCommentButton(){var e;null==(e=Bf(this,Xt))||e.remove(),Wf(this,Xt,null)}setCommentButtonStates({selected:e,hasPopup:t}){Bf(this,Kt)&&(Bf(this,Kt).classList.toggle("selected",e),Bf(this,Kt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=Bf(this,Jt).commentButtonPosition;const{width:e,height:t,x:s,y:a}=Bf(this,Jt);n=s+n*e,r=a+r*t}const s=Bf(this,Jt).parent.boundingClientRect,{x:a,y:i,width:o,height:l}=s;Bf(this,Jt)._uiManager.editComment(Bf(this,Jt),a+n*o,i+r*l,{...e,parentDimensions:s})}finish(){Bf(this,Xt)&&(Bf(this,Xt).focus({focusVisible:Bf(this,Yt)}),Wf(this,Yt,!1))}isDeleted(){return Bf(this,nn)||""===Bf(this,en)}isEmpty(){return null===Bf(this,en)}hasBeenEdited(){return this.isDeleted()||Bf(this,en)!==Bf(this,Zt)}serialize(){return this.data}get data(){return{text:Bf(this,en),richText:Bf(this,Qt),date:Bf(this,tn),deleted:this.isDeleted()}}set data(e){if(e!==Bf(this,en)&&Wf(this,Qt,null),null===e)return Wf(this,en,""),void Wf(this,nn,!0);Wf(this,en,e),Wf(this,tn,new Date),Wf(this,nn,!1)}setInitialText(e,t=null){Wf(this,Zt,e),this.data=e,Wf(this,tn,null),Wf(this,Qt,t)}shown(){}destroy(){var e,t;null==(e=Bf(this,Xt))||e.remove(),Wf(this,Xt,null),null==(t=Bf(this,Kt))||t.remove(),Wf(this,Kt,null),Wf(this,en,""),Wf(this,Qt,null),Wf(this,tn,null),Wf(this,Jt,null),Wf(this,Yt,!1),Wf(this,nn,!1)}}Kt=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Qt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,sn=new WeakSet,an=function(e,t){if(!Bf(this,Jt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[Bf(this,Jt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=Bf(this,Jt)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",r6,{signal:n}),t&&(e.addEventListener("focusin",e=>{Bf(this,Jt)._focusEventsAllowed=!1,s6(e)},{capture:!0,signal:n}),e.addEventListener("focusout",e=>{Bf(this,Jt)._focusEventsAllowed=!0,s6(e)},{capture:!0,signal:n})),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const r=t=>{t.preventDefault(),e===Bf(this,Xt)?this.edit():Bf(this,Jt).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(Wf(this,Yt,!0),r(t))},{signal:n}),e.addEventListener("pointerenter",()=>{Bf(this,Jt).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{Bf(this,Jt).toggleComment(!1,!1)},{signal:n}),e};const O6=class{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:i}){Uf(this,xn),Uf(this,wn),Uf(this,Sn),Uf(this,on,void 0),Uf(this,ln,!1),Uf(this,cn,null),Uf(this,dn,void 0),Uf(this,un,void 0),Uf(this,hn,void 0),Uf(this,pn,void 0),Uf(this,fn,null),Uf(this,mn,void 0),Uf(this,gn,null),Uf(this,vn,void 0),Uf(this,yn,null),Wf(this,on,e),Wf(this,cn,n),Wf(this,dn,t),Wf(this,un,r),Wf(this,hn,s),Wf(this,pn,a),Wf(this,vn,new AbortController),Wf(this,mn,AbortSignal.any([i,Bf(this,vn).signal])),e.addEventListener("touchstart",Vf(this,xn,bn).bind(this),{passive:!1,signal:Bf(this,mn)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/d6.pixelRatio}destroy(){var e,t;null==(e=Bf(this,vn))||e.abort(),Wf(this,vn,null),null==(t=Bf(this,fn))||t.abort(),Wf(this,fn,null)}};on=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,un=new WeakMap,hn=new WeakMap,pn=new WeakMap,fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,vn=new WeakMap,yn=new WeakMap,xn=new WeakSet,bn=function(e){var t,n,r;if(null==(t=Bf(this,dn))?void 0:t.call(this))return;if(1===e.touches.length){if(Bf(this,fn))return;const e=Wf(this,fn,new AbortController),t=AbortSignal.any([Bf(this,mn),e.signal]),n=Bf(this,on),r={capture:!0,signal:t,passive:!1},s=e=>{var t;"touch"===e.pointerType&&(null==(t=Bf(this,fn))||t.abort(),Wf(this,fn,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(s6(e),s(e))},r),n.addEventListener("pointerup",s,r),void n.addEventListener("pointercancel",s,r)}if(!Bf(this,yn)){Wf(this,yn,new AbortController);const e=AbortSignal.any([Bf(this,mn),Bf(this,yn).signal]),t=Bf(this,on),r={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",Vf(this,wn,kn).bind(this),r);const s=Vf(this,Sn,jn).bind(this);t.addEventListener("touchend",s,r),t.addEventListener("touchcancel",s,r),r.capture=!0,t.addEventListener("pointerdown",s6,r),t.addEventListener("pointermove",s6,r),t.addEventListener("pointercancel",s6,r),t.addEventListener("pointerup",s6,r),null==(n=Bf(this,un))||n.call(this)}if(s6(e),2!==e.touches.length||(null==(r=Bf(this,cn))?void 0:r.call(this)))return void Wf(this,gn,null);let[s,a]=e.touches;s.identifier>a.identifier&&([s,a]=[a,s]),Wf(this,gn,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:a.screenX,touch1Y:a.screenY})},wn=new WeakSet,kn=function(e){var t;if(!Bf(this,gn)||2!==e.touches.length)return;s6(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:s,screenY:a}=n,{screenX:i,screenY:o}=r,l=Bf(this,gn),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,p=u-c,f=h-d,m=i-s,g=o-a,v=Math.hypot(m,g)||1,y=Math.hypot(p,f)||1;if(!Bf(this,ln)&&Math.abs(y-v)<=O6.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=a,l.touch1X=i,l.touch1Y=o,!Bf(this,ln))return void Wf(this,ln,!0);const x=[(s+i)/2,(a+o)/2];null==(t=Bf(this,hn))||t.call(this,x,y,v)},Sn=new WeakSet,jn=function(e){var t;e.touches.length>=2||(Bf(this,yn)&&(Bf(this,yn).abort(),Wf(this,yn,null),null==(t=Bf(this,pn))||t.call(this)),Bf(this,gn)&&(s6(e),Wf(this,gn,null),Wf(this,ln,!1)))};let z6=O6;const D6=class e{constructor(t){Uf(this,Jn),Uf(this,tr),Uf(this,rr),Uf(this,ar),Uf(this,or),Uf(this,cr),Uf(this,ur),Uf(this,pr),Uf(this,mr),Uf(this,vr),Uf(this,xr),Uf(this,wr),Uf(this,Sr),Uf(this,_r),Uf(this,Er),Uf(this,Nr),Uf(this,Pr),Uf(this,Mr),Uf(this,_n,null),Uf(this,An,null),Uf(this,En,null),Uf(this,Tn,null),Uf(this,Nn,null),Uf(this,Cn,!1),Uf(this,Pn,null),Uf(this,Rn,""),Uf(this,Mn,null),Uf(this,In,null),Uf(this,On,null),Uf(this,zn,null),Uf(this,Dn,null),Uf(this,Ln,""),Uf(this,Fn,!1),Uf(this,Bn,null),Uf(this,Un,!1),Uf(this,Wn,!1),Uf(this,$n,!1),Uf(this,Vn,null),Uf(this,Hn,0),Uf(this,qn,0),Uf(this,Gn,null),Uf(this,Kn,null),Lf(this,"isSelected",!1),Lf(this,"_isCopy",!1),Lf(this,"_editToolbar",null),Lf(this,"_initialOptions",Object.create(null)),Lf(this,"_initialData",null),Lf(this,"_isVisible",!0),Lf(this,"_uiManager",null),Lf(this,"_focusEventsAllowed",!0),Uf(this,Xn,!1),Uf(this,Yn,e._zIndex++),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:n,rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:i}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[a,i];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=e.prototype._resizeWithKeyboard,n=P6.TRANSLATE_SMALL,r=P6.TRANSLATE_BIG;return A5(this,"_resizerKeyboardManager",new E6([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,r]}],[["Escape","mac+Escape"],e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return A5(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new F6({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(t,n){if(e._l10n??(e._l10n=t),e._l10nResizer||(e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==e._borderLineWidth)return;const r=getComputedStyle(document.documentElement);e._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){k5("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Bf(this,Xn)}set _isDraggable(e){var t;Wf(this,Xn,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Bf(this,Yn)}setParent(e){var t;null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(Vf(this,Mr,Ir).call(this),null==(t=Bf(this,zn))||t.remove(),Wf(this,zn,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(Bf(this,Fn)?Wf(this,Fn,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;(null==n?void 0:n.closest(`#${this.id}`))||(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){Vf(this,Jn,Zn).call(this,this.parentDimensions,e,t)}translateInPage(e,t){Bf(this,Bn)||Wf(this,Bn,[this.x,this.y,this.width,this.height]),Vf(this,Jn,Zn).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){Bf(this,Bn)||Wf(this,Bn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:i}=this;const[o,l]=this.getBaseTranslation();a+=o,i+=l;const{style:c}=n;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*i).toFixed(2)}%`,this._onTranslating(a,i),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!Bf(this,Bn)&&(Bf(this,Bn)[0]!==this.x||Bf(this,Bn)[1]!==this.y)}get _hasBeenResized(){return!!Bf(this,Bn)&&(Bf(this,Bn)[2]!==this.width||Bf(this,Bn)[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:r}=e,s=r/t,a=r/n;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:s,y:a,width:i,height:o}=this;if(i*=n,o*=r,s*=n,a*=r,this._mustFixPosition)switch(e){case 0:s=$5(s,0,n-i),a=$5(a,0,r-o);break;case 90:s=$5(s,0,n-o),a=$5(a,i,r);break;case 180:s=$5(s,i,n),a=$5(a,o,r);break;case 270:s=$5(s,o,n),a=$5(a,0,r-i)}this.x=s/=n,this.y=a/=r;const[l,c]=this.getBaseTranslation();s+=l,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,n){var r;return Vf(r=e,Qn,er).call(r,t,n,this.parentRotation)}pageTranslationToScreen(t,n){var r;return Vf(r=e,Qn,er).call(r,t,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null==(e=Bf(this,En))||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Bf(this,Wn))return this._editToolbar;this._editToolbar=new b6(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;null==(e=this._editToolbar)||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;null==(e=this._editToolbar)||e.removeButton("comment")}removeEditToolbar(){var e,t;null==(e=this._editToolbar)||e.remove(),this._editToolbar=null,null==(t=Bf(this,En))||t.destroy()}addContainer(e){var t;const n=null==(t=this._editToolbar)?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Bf(this,En)||(M6.initialize(e._l10n),Wf(this,En,new M6(this)),Bf(this,_n)&&(Bf(this,En).data=Bf(this,_n),Wf(this,_n,null))),Bf(this,En)}get altTextData(){var e;return null==(e=Bf(this,En))?void 0:e.data}set altTextData(e){Bf(this,En)&&(Bf(this,En).data=e)}get guessedAltText(){var e;return null==(e=Bf(this,En))?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null==(t=Bf(this,En))?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null==(t=Bf(this,En))?void 0:t.serialize(e)}hasAltText(){return!!Bf(this,En)&&!Bf(this,En).isEmpty()}hasAltTextData(){var e;return(null==(e=Bf(this,En))?void 0:e.hasData())??!1}focusCommentButton(){var e;null==(e=Bf(this,Tn))||e.focusButton()}addCommentButton(){return Bf(this,Tn)||Wf(this,Tn,new I6(this))}addStandaloneCommentButton(){Bf(this,Nn)?this._uiManager.isEditingMode()&&Bf(this,Nn).classList.remove("hidden"):this.hasComment&&(Wf(this,Nn,Bf(this,Tn).renderForStandalone()),this.div.append(Bf(this,Nn)))}removeStandaloneCommentButton(){Bf(this,Tn).removeStandaloneCommentButton(),Wf(this,Nn,null)}hideStandaloneCommentButton(){var e;null==(e=Bf(this,Nn))||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:r}}=Bf(this,Tn);return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){Bf(this,Tn)||Wf(this,Tn,new I6(this)),Bf(this,Tn).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t)return;if(Bf(this,Tn)||Wf(this,Tn,new I6(this)),Bf(this,Tn).setInitialText(e,n),!this.annotationElementId)return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return null==(e=Bf(this,Tn))?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return null==(e=Bf(this,Tn))?void 0:e.isDeleted()}get hasComment(){return!!Bf(this,Tn)&&!Bf(this,Tn).isEmpty()&&!Bf(this,Tn).isDeleted()}async editComment(e){Bf(this,Tn)||Wf(this,Tn,new I6(this)),Bf(this,Tn).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){Bf(this,Tn).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,i=a+s+1,o=r-n,l=i+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[i,o,l,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){Bf(this,Tn).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=Bf(this,Cn)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),Vf(this,Sr,jr).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!=0&&(t.style.maxWidth=`${(100*r/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),k6(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Bf(this,Kn)||Wf(this,Kn,new z6({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Vf(this,pr,fr).bind(this),onPinching:Vf(this,mr,gr).bind(this),onPinchEnd:Vf(this,vr,yr).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null==(e=this._uiManager._editorUndoBar)||e.hide(),t}pointerdown(e){const{isMac:t}=z5.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(Wf(this,Fn,!0),this._isDraggable?Vf(this,wr,kr).call(this,e):Vf(this,xr,br).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Bf(this,Vn)&&clearTimeout(Bf(this,Vn)),Wf(this,Vn,setTimeout(()=>{var e;Wf(this,Vn,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[i,o]=this.pageTranslation,l=e/r,c=t/r,d=this.x*s,u=this.y*a,h=this.width*s,p=this.height*a;switch(n){case 0:return[d+l+i,a-u-c-p+o,d+l+h+i,a-u-c+o];case 90:return[d+c+i,a-u+l+o,d+c+p+i,a-u+l+h+o];case 180:return[d-l-h+i,a-u+c+o,d-l+i,a-u+c+p+o];case 270:return[d-c-p+i,a-u-l-h+o,d-c+i,a-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,a]=e,i=s-n,o=a-r;switch(this.rotation){case 0:return[n,t-a,i,o];case 90:return[n,t-r,o,i];case 180:return[s,t-r,i,o];case 270:return[s,t-a,o,i];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;null==(e=Bf(this,Tn))||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:s,richText:a},uid:i,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:i,pageIndex:o,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:l,modificationDate:n||c,popupRef:!s,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Wf(this,Wn,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Wf(this,Wn,!1),!0)}isInEditMode(){return Bf(this,Wn)}shouldGetKeyboardEvents(){return Bf(this,$n)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&n>0}rebuild(){Vf(this,Sr,jr).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(e=this._initialData)?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null==(n=this._initialData)?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,Wf(r,_n,e.accessibilityData),r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[i,o,l,c]=r.getRectInCurrentCoords(e.rect,a);return r.x=i/s,r.y=o/a,r.width=l/s,r.height=c/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null==(e=Bf(this,Dn))||e.abort(),Wf(this,Dn,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Bf(this,Vn)&&(clearTimeout(Bf(this,Vn)),Wf(this,Vn,null)),Vf(this,Mr,Ir).call(this),this.removeEditToolbar(),Bf(this,Gn)){for(const e of Bf(this,Gn).values())clearTimeout(e);Wf(this,Gn,null)}this.parent=null,null==(t=Bf(this,Kn))||t.destroy(),Wf(this,Kn,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Vf(this,rr,sr).call(this),Bf(this,Mn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,n]}=this,[r,s,a,i]=this.getPDFRect();return[e._round(r+(a-r)*t),e._round(s+(i-s)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Bf(this,Tn).commentPopupPositionInLayer}set commentPopupPosition(e){Bf(this,Tn).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return Bf(this,Tn).hasDefaultPopupPosition()}get commentButtonWidth(){return Bf(this,Tn).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){Bf(this,Tn).setCommentButtonStates(e)}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),Wf(this,On,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=Bf(this,Mn).children;if(!Bf(this,An)){Wf(this,An,Array.from(n));const t=Vf(this,_r,Ar).bind(this),r=Vf(this,Er,Tr).bind(this),s=this._uiManager._signal;for(const n of Bf(this,An)){const a=n.getAttribute("data-resizer-name");n.setAttribute("role","spinbutton"),n.addEventListener("keydown",t,{signal:s}),n.addEventListener("blur",r,{signal:s}),n.addEventListener("focus",Vf(this,Nr,Cr).bind(this,a),{signal:s}),n.setAttribute("data-l10n-id",e._l10nResizer[a])}}const r=Bf(this,An)[0];let s=0;for(const e of n){if(e===r)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(Bf(this,An).length/4);if(a!==s){if(a<s)for(let e=0;e<s-a;e++)Bf(this,Mn).append(Bf(this,Mn).firstChild);else if(a>s)for(let e=0;e<a-s;e++)Bf(this,Mn).firstChild.before(Bf(this,Mn).lastChild);let t=0;for(const r of n){const n=Bf(this,An)[t++].getAttribute("data-resizer-name");r.setAttribute("data-l10n-id",e._l10nResizer[n])}}Vf(this,Pr,Rr).call(this,0),Wf(this,$n,!0),Bf(this,Mn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(e,t){Bf(this,$n)&&Vf(this,ur,hr).call(this,Bf(this,Ln),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){Vf(this,Mr,Ir).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),this._editToolbar?(null==(t=this._editToolbar)||t.show(),null==(n=Bf(this,En))||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))&&(null==(t=this._editToolbar)||t.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return null==(e=this.div)?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,s;this.isSelected&&(this.isSelected=!1,null==(e=Bf(this,Mn))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(n=this.div)?void 0:n.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(r=this._editToolbar)||r.hide(),null==(s=Bf(this,En))||s.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Bf(this,Un)}set isEditing(e){Wf(this,Un,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){Bf(this,Gn)||Wf(this,Gn,new Map);const{action:n}=t;let r=Bf(this,Gn).get(n);return r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),Bf(this,Gn).delete(n),0===Bf(this,Gn).size&&Wf(this,Gn,null)},e._telemetryTimeout),void Bf(this,Gn).set(n,r)}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Wf(this,Cn,!1)}disable(){this.div&&(this.div.tabIndex=-1),Wf(this,Cn,!0)}updateFakeAnnotationElement(e){if(Bf(this,zn)||this.deleted)return this.deleted?(Bf(this,zn).remove(),void Wf(this,zn,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Bf(this,zn).updateEdited({rect:this.getPDFRect(),popup:this.comment}));Wf(this,zn,e.addFakeAnnotation(this))}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null==t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}};_n=new WeakMap,An=new WeakMap,En=new WeakMap,Tn=new WeakMap,Nn=new WeakMap,Cn=new WeakMap,Pn=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,In=new WeakMap,On=new WeakMap,zn=new WeakMap,Dn=new WeakMap,Ln=new WeakMap,Fn=new WeakMap,Bn=new WeakMap,Un=new WeakMap,Wn=new WeakMap,$n=new WeakMap,Vn=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Jn=new WeakSet,Zn=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Qn=new WeakSet,er=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},tr=new WeakSet,nr=function(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}},rr=new WeakSet,sr=function(){if(Bf(this,Mn))return;Wf(this,Mn,document.createElement("div")),Bf(this,Mn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");Bf(this,Mn).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",Vf(this,ar,ir).bind(this,n),{signal:t}),e.addEventListener("contextmenu",r6,{signal:t}),e.tabIndex=-1}this.div.prepend(Bf(this,Mn))},ar=new WeakSet,ir=function(e,t){var n;t.preventDefault();const{isMac:r}=z5.platform;if(0!==t.button||t.ctrlKey&&r)return;null==(n=Bf(this,En))||n.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,Wf(this,In,[t.screenX,t.screenY]);const a=new AbortController,i=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Vf(this,ur,hr).bind(this,e),{passive:!0,capture:!0,signal:i}),window.addEventListener("touchmove",s6,{passive:!1,signal:i}),window.addEventListener("contextmenu",r6,{signal:i}),Wf(this,On,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;a.abort(),this.parent.togglePointerEvents(!0),null==(e=Bf(this,En))||e.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,Vf(this,cr,dr).call(this)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},or=new WeakSet,lr=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},cr=new WeakSet,dr=function(){if(!Bf(this,On))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=Bf(this,On);Wf(this,On,null);const s=this.x,a=this.y,i=this.width,o=this.height;s===e&&a===t&&i===n&&o===r||this.addCommands({cmd:Vf(this,or,lr).bind(this,s,a,i,o),undo:Vf(this,or,lr).bind(this,e,t,n,r),mustExec:!0})},ur=new WeakSet,hr=function(e,t){const[n,r]=this.parentDimensions,s=this.x,a=this.y,i=this.width,o=this.height,l=D6.MIN_SIZE/n,c=D6.MIN_SIZE/r,d=Vf(this,tr,nr).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=Vf(this,tr,nr).call(this,360-this.rotation);let p,f,m=!1,g=!1;switch(e){case"topLeft":m=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":m=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":g=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":m=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":m=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":g=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(i,o),y=f(i,o);let x=u(...y);const b=D6._round(s+x[0]),w=D6._round(a+x[1]);let k,S,j=1,_=1;if(t.fromKeyboard)({deltaX:k,deltaY:S}=t);else{const{screenX:e,screenY:n}=t,[r,s]=Bf(this,In);[k,S]=this.screenToPageTranslation(e-r,n-s),Bf(this,In)[0]=e,Bf(this,In)[1]=n}var A,E;if([k,S]=(A=k/n,E=S/r,[h[0]*A+h[2]*E,h[1]*A+h[3]*E]),m){const e=Math.hypot(i,o);j=_=Math.max(Math.min(Math.hypot(y[0]-v[0]-k,y[1]-v[1]-S)/e,1/i,1/o),l/i,c/o)}else g?j=$5(Math.abs(y[0]-v[0]-k),l,1)/i:_=$5(Math.abs(y[1]-v[1]-S),c,1)/o;const T=D6._round(i*j),N=D6._round(o*_);x=u(...f(T,N));const C=b-x[0],P=w-x[1];Bf(this,Bn)||Wf(this,Bn,[this.x,this.y,this.width,this.height]),this.width=T,this.height=N,this.x=C,this.y=P,this.setDims(),this.fixAndSetPosition(),this._onResizing()},pr=new WeakSet,fr=function(){var e;Wf(this,On,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(e=Bf(this,En))||e.toggle(!1),this.parent.togglePointerEvents(!1)},mr=new WeakSet,gr=function(e,t,n){let r=n/t*.7+1-.7;if(1===r)return;const s=Vf(this,tr,nr).call(this,this.rotation),a=(e,t)=>[s[0]*e+s[2]*t,s[1]*e+s[3]*t],[i,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=D6.MIN_SIZE/i,p=D6.MIN_SIZE/o;r=Math.max(Math.min(r,1/d,1/u),h/d,p/u);const f=D6._round(d*r),m=D6._round(u*r);if(f===d&&m===u)return;Bf(this,Bn)||Wf(this,Bn,[l,c,d,u]);const g=a(d/2,u/2),v=D6._round(l+g[0]),y=D6._round(c+g[1]),x=a(f/2,m/2);this.x=v-x[0],this.y=y-x[1],this.width=f,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},vr=new WeakSet,yr=function(){var e;null==(e=Bf(this,En))||e.toggle(!0),this.parent.togglePointerEvents(!0),Vf(this,cr,dr).call(this)},xr=new WeakSet,br=function(e){const{isMac:t}=z5.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},wr=new WeakSet,kr=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},i=e=>{r.abort(),Wf(this,Pn,null),Wf(this,Fn,!1),this._uiManager.endDragSession()||Vf(this,xr,br).call(this,e),n&&this._onStopDragging()};t&&(Wf(this,Hn,e.clientX),Wf(this,qn,e.clientY),Wf(this,Pn,e.pointerId),Wf(this,Rn,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:t,clientY:r,pointerId:s}=e;if(s!==Bf(this,Pn))return void s6(e);const[a,i]=this.screenToPageTranslation(t-Bf(this,Hn),r-Bf(this,qn));Wf(this,Hn,t),Wf(this,qn,r),this._uiManager.dragSelectedEditors(a,i)},a),window.addEventListener("touchmove",s6,a),window.addEventListener("pointerdown",e=>{e.pointerType===Bf(this,Rn)&&(Bf(this,Kn)||e.isPrimary)&&i(e),s6(e)},a));const o=e=>{Bf(this,Pn)&&Bf(this,Pn)!==e.pointerId?s6(e):i(e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})},Sr=new WeakSet,jr=function(){if(Bf(this,Dn)||!this.div)return;Wf(this,Dn,new AbortController);const e=this._uiManager.combinedSignal(Bf(this,Dn));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},_r=new WeakSet,Ar=function(e){D6._resizerKeyboardManager.exec(this,e)},Er=new WeakSet,Tr=function(e){var t;Bf(this,$n)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==Bf(this,Mn)&&Vf(this,Mr,Ir).call(this)},Nr=new WeakSet,Cr=function(e){Wf(this,Ln,Bf(this,$n)?e:"")},Pr=new WeakSet,Rr=function(e){if(Bf(this,An))for(const t of Bf(this,An))t.tabIndex=e},Mr=new WeakSet,Ir=function(){Wf(this,$n,!1),Vf(this,Pr,Rr).call(this,-1),Vf(this,cr,dr).call(this)},Uf(D6,Qn),Lf(D6,"_l10n",null),Lf(D6,"_l10nResizer",null),Lf(D6,"_borderLineWidth",-1),Lf(D6,"_colorManager",new N6),Lf(D6,"_zIndex",1),Lf(D6,"_telemetryTimeout",1e3);let L6=D6;class F6 extends L6{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const B6=3285377520,U6=4294901760,W6=65535;class $6{constructor(e){this.h1=e?4294967295&e:B6,this.h2=e?4294967295&e:B6}update(e){let t,n;if("string"==typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,s=e.length;r<s;r++){const s=e.charCodeAt(r);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const r=n>>2,s=n-4*r,a=new Uint32Array(t.buffer,0,r);let i=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,p=13715;for(let f=0;f<r;f++)1&f?(i=a[f],i=i*d&U6|i*h&W6,i=i<<15|i>>>17,i=i*u&U6|i*p&W6,l^=i,l=l<<13|l>>>19,l=5*l+3864292196):(o=a[f],o=o*d&U6|o*h&W6,o=o<<15|o>>>17,o=o*u&U6|o*p&W6,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(i=0,s){case 3:i^=t[4*r+2]<<16;case 2:i^=t[4*r+1]<<8;case 1:i^=t[4*r],i=i*d&U6|i*h&W6,i=i<<15|i>>>17,i=i*u&U6|i*p&W6,1&r?l^=i:c^=i}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&U6|36045*e&W6,t=4283543511*t&U6|(2950163797*(t<<16|e>>>16)&U6)>>>16,e^=t>>>1,e=444984403*e&U6|60499*e&W6,t=3301882366*t&U6|(3120437893*(t<<16|e>>>16)&U6)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const V6=Object.freeze({map:null,hash:"",transfer:void 0});class H6{constructor(){Uf(this,Fr),Uf(this,Or,!1),Uf(this,zr,null),Uf(this,Dr,null),Uf(this,Lr,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=Bf(this,Lr).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return Bf(this,Lr).get(e)}remove(e){const t=Bf(this,Lr).get(e);if(void 0!==t&&(t instanceof L6&&Bf(this,Dr).delete(t.annotationElementId),Bf(this,Lr).delete(e),0===Bf(this,Lr).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor)){for(const e of Bf(this,Lr).values())if(e instanceof L6)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=Bf(this,Lr).get(e);let r=!1;if(void 0!==n)for(const[s,a]of Object.entries(t))n[s]!==a&&(r=!0,n[s]=a);else r=!0,Bf(this,Lr).set(e,t);r&&Vf(this,Fr,Br).call(this),t instanceof L6&&((Bf(this,Dr)||Wf(this,Dr,new Map)).set(t.annotationElementId,t),"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return Bf(this,Lr).has(e)}get size(){return Bf(this,Lr).size}resetModified(){Bf(this,Or)&&(Wf(this,Or,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new q6(this)}get serializable(){if(0===Bf(this,Lr).size)return V6;const e=new Map,t=new $6,n=[],r=Object.create(null);let s=!1;for(const[a,i]of Bf(this,Lr)){const n=i instanceof L6?i.serialize(!1,r):i;n&&(e.set(a,n),t.update(`${a}:${JSON.stringify(n)}`),s||(s=!!n.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:V6}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const s of Bf(this,Lr).values()){if(!(s instanceof L6)){s.popup&&(s.popup.deleted?r+=1:n+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:i}=a;t.has(i)||t.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[e,t]of Object.entries(a)){if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const r=n.get(t)??0;n.set(t,r+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){Wf(this,zr,null)}updateEditor(e,t){var n;const r=null==(n=Bf(this,Dr))?void 0:n.get(e);return!!r&&(r.updateFromAnnotationLayer(t),!0)}getEditor(e){var t;return(null==(t=Bf(this,Dr))?void 0:t.get(e))||null}get modifiedIds(){if(Bf(this,zr))return Bf(this,zr);const e=[];if(Bf(this,Dr))for(const t of Bf(this,Dr).values())t.serialize()&&e.push(t.annotationElementId);return Wf(this,zr,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return Bf(this,Lr).entries()}}Or=new WeakMap,zr=new WeakMap,Dr=new WeakMap,Lr=new WeakMap,Fr=new WeakSet,Br=function(){Bf(this,Or)||(Wf(this,Or,!0),"function"==typeof this.onSetModified&&this.onSetModified())};class q6 extends H6{constructor(e){super(),Uf(this,Ur,void 0);const{map:t,hash:n,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);Wf(this,Ur,{map:s,hash:n,transfer:r})}get print(){k5("Should not call PrintAnnotationStorage.print")}get serializable(){return Bf(this,Ur)}get modifiedIds(){return A5(this,"modifiedIds",{ids:new Set,hash:""})}}Ur=new WeakMap;class G6{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){Uf(this,Wr,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),Bf(this,Wr).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(e&&!Bf(this,Wr).has(e.loadedName)){if(S5(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:r,style:s}=e,a=new FontFace(t,r,s);this.addNativeFontFace(a);try{await a.load(),Bf(this,Wr).add(t),null==n||n(e)}catch{w5(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}k5("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(await this.loadSystemFont(e));if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw w5(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return A5(this,"isFontLoadingAPISupported",!!(null==(e=this._document)?void 0:e.fonts))}get isSyncFontLoadingSupported(){return A5(this,"isSyncFontLoadingSupported",L3||z5.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(S5(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return A5(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let s,a;const i=this._document.createElement("canvas");i.width=1,i.height=1;const o=i.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=r(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(s=0,a=c.length-3;s<a;s+=4)h=h-u+n(c,s)|0;var p;s<c.length&&(h=h-u+n(c+"XXX",s)|0),d=r(d,16,4,(p=h,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${c}";src:${`url(data:font/opentype;base64,${btoa(d)});`}}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const g of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=g,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return w5("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}Wr=new WeakMap;class K6{constructor(e,t=null,n,r){Uf(this,$r,void 0),this.compiledGlyphs=Object.create(null),Wf(this,$r,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${V5(this.data)});`;let n;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return null==(e=this._inspectFont)||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){w5(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}get black(){return Bf(this,$r).black}get bold(){return Bf(this,$r).bold}get disableFontFace(){return Bf(this,$r).disableFontFace??!1}get fontExtraProperties(){return Bf(this,$r).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Bf(this,$r).isInvalidPDFjsFont}get isType3Font(){return Bf(this,$r).isType3Font}get italic(){return Bf(this,$r).italic}get missingFile(){return Bf(this,$r).missingFile}get remeasure(){return Bf(this,$r).remeasure}get vertical(){return Bf(this,$r).vertical}get ascent(){return Bf(this,$r).ascent}get defaultWidth(){return Bf(this,$r).defaultWidth}get descent(){return Bf(this,$r).descent}get bbox(){return Bf(this,$r).bbox}get fontMatrix(){return Bf(this,$r).fontMatrix}get fallbackName(){return Bf(this,$r).fallbackName}get loadedName(){return Bf(this,$r).loadedName}get mimetype(){return Bf(this,$r).mimetype}get name(){return Bf(this,$r).name}get data(){return Bf(this,$r).data}clearData(){Bf(this,$r).clearData()}get cssFontInfo(){return Bf(this,$r).cssFontInfo}get systemFontInfo(){return Bf(this,$r).systemFontInfo}get defaultVMetrics(){return Bf(this,$r).defaultVMetrics}}function X6(e){if("string"!=typeof e)return null;if(e.endsWith("/"))return e;throw new Error(`Invalid factory url: "${e}" must include trailing slash.`)}$r=new WeakMap;const Y6=e=>"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0,J6=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,s,...a]=n;if(!e(r)&&!Number.isInteger(r))return!1;if(!t(s))return!1;const i=a.length;let o=!0;switch(s.name){case"XYZ":if(i<2||i>3)return!1;break;case"Fit":case"FitB":return 0===i;case"FitH":case"FitBH":case"FitV":case"FitBV":if(i>1)return!1;break;case"FitR":if(4!==i)return!1;o=!1;break;default:return!1}for(const l of a)if(!("number"==typeof l||o&&null===l))return!1;return!0}.bind(null,Y6,e=>"object"==typeof e&&"string"==typeof(null==e?void 0:e.name));class Z6{constructor(){Uf(this,Vr,new Map),Uf(this,Hr,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};Bf(this,Hr).then(()=>{for(const[e]of Bf(this,Vr))e.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((null==n?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return void w5("LoopbackPort - cannot use an `aborted` signal.");const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}Bf(this,Vr).set(t,r)}removeEventListener(e,t){const n=Bf(this,Vr).get(t);null==n||n(),Bf(this,Vr).delete(t)}terminate(){for(const[,e]of Bf(this,Vr))null==e||e();Bf(this,Vr).clear()}}Vr=new WeakMap,Hr=new WeakMap;const Q6=1,e8=2,t8=1,n8=2,r8=3,s8=4,a8=5,i8=6,o8=7,l8=8;function c8(){}function d8(e){if(e instanceof M5||e instanceof C5||e instanceof T5||e instanceof P5||e instanceof N5)return e;switch(e instanceof Error||"object"==typeof e&&null!==e||k5('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new M5(e.message);case"InvalidPDFException":return new C5(e.message);case"PasswordException":return new T5(e.message,e.code);case"ResponseException":return new P5(e.message,e.status,e.missing);case"UnknownErrorException":return new N5(e.message,e.details)}return new N5(e.message,e.toString())}class u8{constructor(e,t,n){Uf(this,Gr),Uf(this,Xr),Uf(this,Jr),Uf(this,Qr),Uf(this,qr,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Vf(this,Gr,Kr).bind(this),{signal:Bf(this,qr).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,a=this.sourceName,i=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:a,targetName:i,action:e,streamId:s,data:t,desiredSize:n.desiredSize},r),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:a,targetName:i,stream:i8,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{S5(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:a,targetName:i,stream:t8,streamId:s,reason:d8(e)}),t.promise}},n)}destroy(){var e;null==(e=Bf(this,qr))||e.abort(),Wf(this,qr,null)}}qr=new WeakMap,Gr=new WeakSet,Kr=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream)return void Vf(this,Jr,Zr).call(this,e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===Q6)n.resolve(e.data);else{if(e.callback!==e8)throw new Error("Unexpected callback case");n.reject(d8(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;return void Promise.try(t,e.data).then(function(t){s.postMessage({sourceName:n,targetName:r,callback:Q6,callbackId:e.callbackId,data:t})},function(t){s.postMessage({sourceName:n,targetName:r,callback:e8,callbackId:e.callbackId,reason:d8(t)})})}e.streamId?Vf(this,Xr,Yr).call(this,e):t(e.data)},Xr=new WeakSet,Yr=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this,i=this.actionHandler[e.action],o={enqueue(e,a=1,i){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=a,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:s8,streamId:t,chunk:e},i)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:r8,streamId:t}),delete a.streamSinks[t])},error(e){S5(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:a8,streamId:t,reason:d8(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(i,e.data,o).then(function(){s.postMessage({sourceName:n,targetName:r,stream:l8,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:r,stream:l8,streamId:t,reason:d8(e)})})},Jr=new WeakSet,Zr=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],i=this.streamSinks[t];switch(e.stream){case l8:e.success?a.startCall.resolve():a.startCall.reject(d8(e.reason));break;case o8:e.success?a.pullCall.resolve():a.pullCall.reject(d8(e.reason));break;case i8:if(!i){s.postMessage({sourceName:n,targetName:r,stream:o8,streamId:t,success:!0});break}i.desiredSize<=0&&e.desiredSize>0&&i.sinkCapability.resolve(),i.desiredSize=e.desiredSize,Promise.try(i.onPull||c8).then(function(){s.postMessage({sourceName:n,targetName:r,stream:o8,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:r,stream:o8,streamId:t,reason:d8(e)})});break;case s8:if(S5(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case r8:if(S5(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),Vf(this,Qr,es).call(this,a,t);break;case a8:S5(a,"error should have stream controller"),a.controller.error(d8(e.reason)),Vf(this,Qr,es).call(this,a,t);break;case n8:e.success?a.cancelCall.resolve():a.cancelCall.reject(d8(e.reason)),Vf(this,Qr,es).call(this,a,t);break;case t8:if(!i)break;const o=d8(e.reason);Promise.try(i.onCancel||c8,o).then(function(){s.postMessage({sourceName:n,targetName:r,stream:n8,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:r,stream:n8,streamId:t,reason:d8(e)})}),i.sinkCapability.reject(o),i.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Qr=new WeakSet,es=async function(e,t){var n,r,s;await Promise.allSettled([null==(n=e.startCall)?void 0:n.promise,null==(r=e.pullCall)?void 0:r.promise,null==(s=e.cancelCall)?void 0:s.promise]),delete this.streamControllers[t]};class h8{constructor({enableHWA:e=!1}){Uf(this,ts,!1),Wf(this,ts,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Bf(this,ts)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){k5("Abstract method `_createCanvas` called.")}}ts=new WeakMap;class p8 extends h8{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class f8{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){k5("Abstract method `_fetch` called.")}}class m8 extends f8{async _fetch(e){const t=await Y5(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):O5(t)}}class g8{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}class v8 extends g8{constructor({docId:e,ownerDocument:t=globalThis.document}){super(),Uf(this,cs),Uf(this,us),Uf(this,ps),Uf(this,ms),Uf(this,vs),Uf(this,xs),Uf(this,ws),Uf(this,Ss),Uf(this,_s),Uf(this,Es),Uf(this,Ns),Uf(this,Ps),Uf(this,ns,void 0),Uf(this,rs,void 0),Uf(this,ss,void 0),Uf(this,as,void 0),Uf(this,is,void 0),Uf(this,os,void 0),Uf(this,ls,0),Wf(this,as,e),Wf(this,is,t)}addFilter(e){if(!e)return"none";let t=Bf(this,cs,ds).get(e);if(t)return t;const[n,r,s]=Vf(this,ms,gs).call(this,e),a=1===e.length?n:`${n}${r}${s}`;if(t=Bf(this,cs,ds).get(a),t)return Bf(this,cs,ds).set(e,t),t;const i=`g_${Bf(this,as)}_transfer_map_${$f(this,ls)._++}`,o=Vf(this,vs,ys).call(this,i);Bf(this,cs,ds).set(e,o),Bf(this,cs,ds).set(a,o);const l=Vf(this,Ss,js).call(this,i);return Vf(this,Es,Ts).call(this,n,r,s,l),o}addHCMFilter(e,t){var n;const r=`${e}-${t}`,s="base";let a=Bf(this,us,hs).get(s);if((null==a?void 0:a.key)===r)return a.url;if(a?(null==(n=a.filter)||n.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},Bf(this,us,hs).set(s,a)),!e||!t)return a.url;const i=Vf(this,Ps,Rs).call(this,e);e=L5.makeHexColor(...i);const o=Vf(this,Ps,Rs).call(this,t);if(t=L5.makeHexColor(...o),Bf(this,ps,fs).style.color="","#000000"===e&&"#ffffff"===t||e===t)return a.url;const l=new Array(256);for(let p=0;p<=255;p++){const e=p/255;l[p]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const c=l.join(","),d=`g_${Bf(this,as)}_hcm_filter`,u=a.filter=Vf(this,Ss,js).call(this,d);Vf(this,Es,Ts).call(this,c,c,c,u),Vf(this,ws,ks).call(this,u);const h=(e,t)=>{const n=i[e]/255,r=o[e]/255,s=new Array(t+1);for(let a=0;a<=t;a++)s[a]=n+a/t*(r-n);return s.join(",")};return Vf(this,Es,Ts).call(this,h(0,5),h(1,5),h(2,5),u),a.url=Vf(this,vs,ys).call(this,d),a.url}addAlphaFilter(e){let t=Bf(this,cs,ds).get(e);if(t)return t;const[n]=Vf(this,ms,gs).call(this,[e]),r=`alpha_${n}`;if(t=Bf(this,cs,ds).get(r),t)return Bf(this,cs,ds).set(e,t),t;const s=`g_${Bf(this,as)}_alpha_map_${$f(this,ls)._++}`,a=Vf(this,vs,ys).call(this,s);Bf(this,cs,ds).set(e,a),Bf(this,cs,ds).set(r,a);const i=Vf(this,Ss,js).call(this,s);return Vf(this,Ns,Cs).call(this,n,i),a}addLuminosityFilter(e){let t,n,r=Bf(this,cs,ds).get(e||"luminosity");if(r)return r;if(e?([t]=Vf(this,ms,gs).call(this,[e]),n=`luminosity_${t}`):n="luminosity",r=Bf(this,cs,ds).get(n),r)return Bf(this,cs,ds).set(e,r),r;const s=`g_${Bf(this,as)}_luminosity_map_${$f(this,ls)._++}`,a=Vf(this,vs,ys).call(this,s);Bf(this,cs,ds).set(e,a),Bf(this,cs,ds).set(n,a);const i=Vf(this,Ss,js).call(this,s);return Vf(this,xs,bs).call(this,i),e&&Vf(this,Ns,Cs).call(this,t,i),a}addHighlightHCMFilter(e,t,n,r,s){var a;const i=`${t}-${n}-${r}-${s}`;let o=Bf(this,us,hs).get(e);if((null==o?void 0:o.key)===i)return o.url;if(o?(null==(a=o.filter)||a.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},Bf(this,us,hs).set(e,o)),!t||!n)return o.url;const[l,c]=[t,n].map(Vf(this,Ps,Rs).bind(this));let d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,p]=[r,s].map(Vf(this,Ps,Rs).bind(this));u<d&&([d,u,h,p]=[u,d,p,h]),Bf(this,ps,fs).style.color="";const f=(e,t,n)=>{const r=new Array(256),s=(u-d)/n,a=e/255,i=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(d+l*s),t=a+l*i;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},m=`g_${Bf(this,as)}_hcm_${e}_filter`,g=o.filter=Vf(this,Ss,js).call(this,m);return Vf(this,ws,ks).call(this,g),Vf(this,Es,Ts).call(this,f(h[0],p[0],5),f(h[1],p[1],5),f(h[2],p[2],5),g),o.url=Vf(this,vs,ys).call(this,m),o.url}destroy(e=!1){var t,n,r,s;e&&(null==(t=Bf(this,os))?void 0:t.size)||(null==(n=Bf(this,ss))||n.parentNode.parentNode.remove(),Wf(this,ss,null),null==(r=Bf(this,rs))||r.clear(),Wf(this,rs,null),null==(s=Bf(this,os))||s.clear(),Wf(this,os,null),Wf(this,ls,0))}}ns=new WeakMap,rs=new WeakMap,ss=new WeakMap,as=new WeakMap,is=new WeakMap,os=new WeakMap,ls=new WeakMap,cs=new WeakSet,ds=function(){return Bf(this,rs)||Wf(this,rs,new Map)},us=new WeakSet,hs=function(){return Bf(this,os)||Wf(this,os,new Map)},ps=new WeakSet,fs=function(){if(!Bf(this,ss)){const e=Bf(this,is).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=Bf(this,is).createElementNS(G5,"svg");n.setAttribute("width",0),n.setAttribute("height",0),Wf(this,ss,Bf(this,is).createElementNS(G5,"defs")),e.append(n),n.append(Bf(this,ss)),Bf(this,is).body.append(e)}return Bf(this,ss)},ms=new WeakSet,gs=function(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const r=n.join(",");return[r,r,r]}const[t,n,r]=e,s=new Array(256),a=new Array(256),i=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,a[o]=n[o]/255,i[o]=r[o]/255;return[s.join(","),a.join(","),i.join(",")]},vs=new WeakSet,ys=function(e){if(void 0===Bf(this,ns)){Wf(this,ns,"");const e=Bf(this,is).URL;e!==Bf(this,is).baseURI&&(Q5(e)?w5('#createUrl: ignore "data:"-URL for performance reasons.'):Wf(this,ns,_5(e,"")))}return`url(${Bf(this,ns)}#${e})`},xs=new WeakSet,bs=function(e){const t=Bf(this,is).createElementNS(G5,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)},ws=new WeakSet,ks=function(e){const t=Bf(this,is).createElementNS(G5,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)},Ss=new WeakSet,js=function(e){const t=Bf(this,is).createElementNS(G5,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),Bf(this,ps,fs).append(t),t},_s=new WeakSet,As=function(e,t,n){const r=Bf(this,is).createElementNS(G5,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},Es=new WeakSet,Ts=function(e,t,n,r){const s=Bf(this,is).createElementNS(G5,"feComponentTransfer");r.append(s),Vf(this,_s,As).call(this,s,"feFuncR",e),Vf(this,_s,As).call(this,s,"feFuncG",t),Vf(this,_s,As).call(this,s,"feFuncB",n)},Ns=new WeakSet,Cs=function(e,t){const n=Bf(this,is).createElementNS(G5,"feComponentTransfer");t.append(n),Vf(this,_s,As).call(this,n,"feFuncA",e)},Ps=new WeakSet,Rs=function(e){return Bf(this,ps,fs).style.color=e,i6(getComputedStyle(Bf(this,ps,fs)).getPropertyValue("color"))};class y8{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(e=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){k5("Abstract method `_fetch` called.")}}class x8 extends y8{async _fetch(e){const t=await Y5(e,"arraybuffer");return new Uint8Array(t)}}class b8{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(e=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){k5("Abstract method `_fetch` called.")}}class w8 extends b8{async _fetch(e){const t=await Y5(e,"arraybuffer");return new Uint8Array(t)}}async function k8(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}L3&&w5("Please use the `legacy` build in Node.js environments.");class S8 extends g8{}class j8 extends h8{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class _8 extends f8{async _fetch(e){return k8(e)}}class A8 extends y8{async _fetch(e){return k8(e)}}class E8 extends b8{async _fetch(e){return k8(e)}}const T8="__forcedDependency",{floor:N8,ceil:C8}=Math;function P8(e,t,n,r,s,a){e[4*t+0]=Math.min(e[4*t+0],n),e[4*t+1]=Math.min(e[4*t+1],r),e[4*t+2]=Math.max(e[4*t+2],s),e[4*t+3]=Math.max(e[4*t+3],a)}const R8=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class M8{constructor(e,t){Uf(this,Ms,void 0),Uf(this,Is,void 0),Wf(this,Ms,e),Wf(this,Is,t)}get length(){return Bf(this,Ms).length}isEmpty(e){return Bf(this,Ms)[e]===R8}minX(e){return Bf(this,Is)[4*e+0]/256}minY(e){return Bf(this,Is)[4*e+1]/256}maxX(e){return(Bf(this,Is)[4*e+2]+1)/256}maxY(e){return(Bf(this,Is)[4*e+3]+1)/256}}Ms=new WeakMap,Is=new WeakMap;const I8=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n};class O8{constructor(e,t,n=!1){Uf(this,Zs),Uf(this,Os,{__proto__:null}),Uf(this,zs,{__proto__:null,transform:[],moveText:[],sameLineText:[],[T8]:[]}),Uf(this,Ds,new Map),Uf(this,Ls,[]),Uf(this,Fs,[]),Uf(this,Bs,[[1,0,0,1,0,0]]),Uf(this,Us,[-1/0,-1/0,1/0,1/0]),Uf(this,Ws,new Float64Array([1/0,1/0,-1/0,-1/0])),Uf(this,$s,-1),Uf(this,Vs,new Set),Uf(this,Hs,new Map),Uf(this,qs,new Map),Uf(this,Gs,void 0),Uf(this,Ks,void 0),Uf(this,Xs,void 0),Uf(this,Ys,void 0),Uf(this,Js,void 0),Wf(this,Gs,e.width),Wf(this,Ks,e.height),Vf(this,Zs,Qs).call(this,t),n&&Wf(this,Js,new Map)}growOperationsCount(e){e>=Bf(this,Ys).length&&Vf(this,Zs,Qs).call(this,e,Bf(this,Ys))}save(e){return Wf(this,Os,{__proto__:Bf(this,Os)}),Wf(this,zs,{__proto__:Bf(this,zs),transform:{__proto__:Bf(this,zs).transform},moveText:{__proto__:Bf(this,zs).moveText},sameLineText:{__proto__:Bf(this,zs).sameLineText},[T8]:{__proto__:Bf(this,zs)[T8]}}),Wf(this,Us,{__proto__:Bf(this,Us)}),Bf(this,Ls).push(e),this}restore(e){var t;const n=Object.getPrototypeOf(Bf(this,Os));if(null===n)return this;Wf(this,Os,n),Wf(this,zs,Object.getPrototypeOf(Bf(this,zs))),Wf(this,Us,Object.getPrototypeOf(Bf(this,Us)));const r=Bf(this,Ls).pop();return void 0!==r&&(null==(t=I8(Bf(this,Js),e))||t.dependencies.add(r),Bf(this,Ys)[e]=Bf(this,Ys)[r]),this}recordOpenMarker(e){return Bf(this,Ls).push(e),this}getOpenMarker(){return 0===Bf(this,Ls).length?null:Bf(this,Ls).at(-1)}recordCloseMarker(e){var t;const n=Bf(this,Ls).pop();return void 0!==n&&(null==(t=I8(Bf(this,Js),e))||t.dependencies.add(n),Bf(this,Ys)[e]=Bf(this,Ys)[n]),this}beginMarkedContent(e){return Bf(this,Fs).push(e),this}endMarkedContent(e){var t;const n=Bf(this,Fs).pop();return void 0!==n&&(null==(t=I8(Bf(this,Js),e))||t.dependencies.add(n),Bf(this,Ys)[e]=Bf(this,Ys)[n]),this}pushBaseTransform(e){return Bf(this,Bs).push(L5.multiplyByDOMMatrix(Bf(this,Bs).at(-1),e.getTransform())),this}popBaseTransform(){return Bf(this,Bs).length>1&&Bf(this,Bs).pop(),this}recordSimpleData(e,t){return Bf(this,Os)[e]=t,this}recordIncrementalData(e,t){return Bf(this,zs)[e].push(t),this}resetIncrementalData(e,t){return Bf(this,zs)[e].length=0,this}recordNamedData(e,t){return Bf(this,Ds).set(e,t),this}recordSimpleDataFromNamed(e,t,n){Bf(this,Os)[e]=Bf(this,Ds).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(T8,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in Bf(this,Os)&&this.recordFutureForcedDependency(t,Bf(this,Os)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of Bf(this,Vs))this.recordFutureForcedDependency(T8,e);return this}resetBBox(e){return Bf(this,$s)!==e&&(Wf(this,$s,e),Bf(this,Ws)[0]=1/0,Bf(this,Ws)[1]=1/0,Bf(this,Ws)[2]=-1/0,Bf(this,Ws)[3]=-1/0),this}recordClipBox(e,t,n,r,s,a){const i=L5.multiplyByDOMMatrix(Bf(this,Bs).at(-1),t.getTransform()),o=[1/0,1/0,-1/0,-1/0];L5.axialAlignedBoundingBox([n,s,r,a],i,o);const l=L5.intersect(Bf(this,Us),o);return l?(Bf(this,Us)[0]=l[0],Bf(this,Us)[1]=l[1],Bf(this,Us)[2]=l[2],Bf(this,Us)[3]=l[3]):(Bf(this,Us)[0]=Bf(this,Us)[1]=1/0,Bf(this,Us)[2]=Bf(this,Us)[3]=-1/0),this}recordBBox(e,t,n,r,s,a){const i=Bf(this,Us);if(i[0]===1/0)return this;const o=L5.multiplyByDOMMatrix(Bf(this,Bs).at(-1),t.getTransform());if(i[0]===-1/0)return L5.axialAlignedBoundingBox([n,s,r,a],o,Bf(this,Ws)),this;const l=[1/0,1/0,-1/0,-1/0];return L5.axialAlignedBoundingBox([n,s,r,a],o,l),Bf(this,Ws)[0]=Math.min(Bf(this,Ws)[0],Math.max(l[0],i[0])),Bf(this,Ws)[1]=Math.min(Bf(this,Ws)[1],Math.max(l[1],i[1])),Bf(this,Ws)[2]=Math.max(Bf(this,Ws)[2],Math.min(l[2],i[2])),Bf(this,Ws)[3]=Math.max(Bf(this,Ws)[3],Math.min(l[3],i[3])),this}recordCharacterBBox(e,t,n,r=1,s=0,a=0,i){const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&Bf(this,qs).get(n),!1!==l&&(c=[0,0,0,0],L5.axialAlignedBoundingBox(o,n.fontMatrix,c),1===r&&0===s&&0===a||L5.scaleMinMax([r,0,0,-r,s,a],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!i)return this.recordFullPageBBox(e);const d=i();return o&&c&&void 0===l&&(l=c[0]<=s-d.actualBoundingBoxLeft&&c[2]>=s+d.actualBoundingBoxRight&&c[1]<=a-d.actualBoundingBoxAscent&&c[3]>=a+d.actualBoundingBoxDescent,Bf(this,qs).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,a-d.actualBoundingBoxAscent,a+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return Bf(this,Ws)[0]=Math.max(0,Bf(this,Us)[0]),Bf(this,Ws)[1]=Math.max(0,Bf(this,Us)[1]),Bf(this,Ws)[2]=Math.min(Bf(this,Gs),Bf(this,Us)[2]),Bf(this,Ws)[3]=Math.min(Bf(this,Ks),Bf(this,Us)[3]),this}getSimpleIndex(e){return Bf(this,Os)[e]}recordDependencies(e,t){const n=Bf(this,Vs),r=Bf(this,Os),s=Bf(this,zs);for(const a of t)a in Bf(this,Os)?n.add(r[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return Bf(this,Ds).has(t)&&Bf(this,Vs).add(Bf(this,Ds).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[T8]),Bf(this,Js)){const t=I8(Bf(this,Js),e),{dependencies:n}=t;Bf(this,Vs).forEach(n.add,n),Bf(this,Ls).forEach(n.add,n),Bf(this,Fs).forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(Bf(this,$s)===e){const n=N8(256*Bf(this,Ws)[0]/Bf(this,Gs)),r=N8(256*Bf(this,Ws)[1]/Bf(this,Ks)),s=C8(256*Bf(this,Ws)[2]/Bf(this,Gs)),a=C8(256*Bf(this,Ws)[3]/Bf(this,Ks));P8(Bf(this,Xs),e,n,r,s,a);for(const t of Bf(this,Vs))t!==e&&P8(Bf(this,Xs),t,n,r,s,a);for(const t of Bf(this,Ls))t!==e&&P8(Bf(this,Xs),t,n,r,s,a);for(const t of Bf(this,Fs))t!==e&&P8(Bf(this,Xs),t,n,r,s,a);t||(Bf(this,Vs).clear(),Wf(this,$s,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(Bf(this,Vs));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return Bf(this,$s)===e&&(Wf(this,$s,-1),Bf(this,Us)[0]=Math.max(Bf(this,Us)[0],Bf(this,Ws)[0]),Bf(this,Us)[1]=Math.max(Bf(this,Us)[1],Bf(this,Ws)[1]),Bf(this,Us)[2]=Math.min(Bf(this,Us)[2],Bf(this,Ws)[2]),Bf(this,Us)[3]=Math.min(Bf(this,Us)[3],Bf(this,Ws)[3]),t||Bf(this,Vs).clear()),this}_takePendingDependencies(){const e=Bf(this,Vs);return Wf(this,Vs,new Set),e}_extractOperation(e){const t=Bf(this,Hs).get(e);return Bf(this,Hs).delete(e),t}_pushPendingDependencies(e){for(const t of e)Bf(this,Vs).add(t)}take(){return Bf(this,qs).clear(),new M8(Bf(this,Ys),Bf(this,Xs))}takeDebugMetadata(){return Bf(this,Js)}}Os=new WeakMap,zs=new WeakMap,Ds=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,Bs=new WeakMap,Us=new WeakMap,Ws=new WeakMap,$s=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,qs=new WeakMap,Gs=new WeakMap,Ks=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Js=new WeakMap,Zs=new WeakSet,Qs=function(e,t){const n=new ArrayBuffer(4*e);Wf(this,Xs,new Uint8ClampedArray(n)),Wf(this,Ys,new Uint32Array(n)),t&&t.length>0?(Bf(this,Ys).set(t),Bf(this,Ys).fill(R8,t.length)):Bf(this,Ys).fill(R8)};ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ra=new WeakMap,sa=new WeakMap;let z8=class e{constructor(t,n,r){if(Uf(this,ea,void 0),Uf(this,ta,void 0),Uf(this,na,void 0),Uf(this,ra,0),Uf(this,sa,0),t instanceof e&&Bf(t,na)===!!r)return t;Wf(this,ea,t),Wf(this,ta,n),Wf(this,na,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return $f(this,sa)._++,Bf(this,ea).save(Bf(this,ta)),this}restore(e){return Bf(this,sa)>0&&(Bf(this,ea).restore(Bf(this,ta)),$f(this,sa)._--),this}recordOpenMarker(e){return $f(this,ra)._++,this}getOpenMarker(){return Bf(this,ra)>0?Bf(this,ta):Bf(this,ea).getOpenMarker()}recordCloseMarker(e){return $f(this,ra)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return Bf(this,ea).pushBaseTransform(e),this}popBaseTransform(){return Bf(this,ea).popBaseTransform(),this}recordSimpleData(e,t){return Bf(this,ea).recordSimpleData(e,Bf(this,ta)),this}recordIncrementalData(e,t){return Bf(this,ea).recordIncrementalData(e,Bf(this,ta)),this}resetIncrementalData(e,t){return Bf(this,ea).resetIncrementalData(e,Bf(this,ta)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return Bf(this,ea).recordSimpleDataFromNamed(e,t,Bf(this,ta)),this}recordFutureForcedDependency(e,t){return Bf(this,ea).recordFutureForcedDependency(e,Bf(this,ta)),this}inheritSimpleDataAsFutureForcedDependencies(e){return Bf(this,ea).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Bf(this,ea).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return Bf(this,na)||Bf(this,ea).resetBBox(Bf(this,ta)),this}recordClipBox(e,t,n,r,s,a){return Bf(this,na)||Bf(this,ea).recordClipBox(Bf(this,ta),t,n,r,s,a),this}recordBBox(e,t,n,r,s,a){return Bf(this,na)||Bf(this,ea).recordBBox(Bf(this,ta),t,n,r,s,a),this}recordCharacterBBox(e,t,n,r,s,a,i){return Bf(this,na)||Bf(this,ea).recordCharacterBBox(Bf(this,ta),t,n,r,s,a,i),this}recordFullPageBBox(e){return Bf(this,na)||Bf(this,ea).recordFullPageBBox(Bf(this,ta)),this}getSimpleIndex(e){return Bf(this,ea).getSimpleIndex(e)}recordDependencies(e,t){return Bf(this,ea).recordDependencies(Bf(this,ta),t),this}recordNamedDependency(e,t){return Bf(this,ea).recordNamedDependency(Bf(this,ta),t),this}recordOperation(e){return Bf(this,ea).recordOperation(Bf(this,ta),!0),this}recordShowTextOperation(e){return Bf(this,ea).recordShowTextOperation(Bf(this,ta),!0),this}bboxToClipBoxDropOperation(e){return Bf(this,na)||Bf(this,ea).bboxToClipBoxDropOperation(Bf(this,ta),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};const D8=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],L8=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],F8=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],B8=["filter","fillColor","fillAlpha"],U8=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],W8=["transform"],$8=["transform","fillColor"],V8="Fill",H8="Stroke",q8="Shading";function G8(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,r),e.clip(s)}class K8{isModifyingCurrentTransform(){return!1}getPattern(){k5("Abstract method `getPattern` called.")}}class X8 extends K8{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===H8||r===V8){const a=t.current.getClippedPathBoundingBox(r,o6(e))||[0,0,0,0],i=Math.ceil(a[2]-a[0])||1,o=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",i,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=L5.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),G8(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);s.setTransform(d)}else G8(e,this._bbox),s=this._createGradient(e);return s}}function Y8(e,t,n,r,s,a,i,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=i,i=h),l[r+1]>l[s+1]&&(h=r,r=s,s=h,h=i,i=o,o=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=a,a=i,i=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,y=(l[s+1]+t.offsetY)*t.scaleY;if(f>=y)return;const x=c[a],b=c[a+1],w=c[a+2],k=c[i],S=c[i+1],j=c[i+2],_=c[o],A=c[o+1],E=c[o+2],T=Math.round(f),N=Math.round(y);let C,P,R,M,I,O,z,D;for(let L=T;L<=N;L++){if(L<g){const e=L<f?0:(f-L)/(f-g);C=p-(p-m)*e,P=x-(x-k)*e,R=b-(b-S)*e,M=w-(w-j)*e}else{let e;e=L>y?1:g===y?0:(g-L)/(g-y),C=m-(m-v)*e,P=k-(k-_)*e,R=S-(S-A)*e,M=j-(j-E)*e}let e;e=L<f?0:L>y?1:(f-L)/(f-y),I=p-(p-v)*e,O=x-(x-_)*e,z=b-(b-A)*e,D=w-(w-E)*e;const t=Math.round(Math.min(C,I)),n=Math.round(Math.max(C,I));let r=u*L+4*t;for(let s=t;s<=n;s++)e=(C-s)/(C-I),e<0?e=0:e>1&&(e=1),d[r++]=P-(P-O)*e|0,d[r++]=R-(R-z)*e|0,d[r++]=M-(M-D)*e|0,d[r++]=255}}function J8(e,t,n){const r=t.coords,s=t.colors;let a,i;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(a=0;a<l;a++){let t=a*o;for(let a=0;a<c;a++,t++)Y8(e,n,r[t],r[t+1],r[t+o],s[t],s[t+1],s[t+o]),Y8(e,n,r[t+o+1],r[t+1],r[t+o],s[t+o+1],s[t+1],s[t+o])}break;case"triangles":for(a=0,i=r.length;a<i;a+=3)Y8(e,n,r[a],r[a+1],r[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class Z8 extends K8{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,i=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(i*e[1]*1.1)),3e3),c=a/o,d=i/l,u={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-s,scaleX:1/c,scaleY:1/d},h=o+4,p=l+4,f=n.getCanvas("mesh",h,p),m=f.context,g=m.createImageData(o,l);if(t){const e=g.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)J8(g,v,u);m.putImageData(g,2,2);return{canvas:f.canvas,offsetX:r-2*c,offsetY:s-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){G8(e,this._bbox);const s=new Float32Array(2);if(r===q8)L5.singularValueDecompose2dScale(o6(e),s);else if(this.matrix){L5.singularValueDecompose2dScale(this.matrix,s);const[e,n]=s;L5.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=e,s[1]*=n}else L5.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,r===q8?null:this._background,t.cachedCanvases);return r!==q8&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Q8 extends K8{getPattern(){return"hotpink"}}const e7=1,t7=2,n7=class e{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var n,r;const{bbox:s,operatorList:a,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:u}=this;d=Math.abs(d),u=Math.abs(u),b5("TilingType: "+o);const h=s[0],p=s[1],f=s[2],m=s[3],g=f-h,v=m-p,y=new Float32Array(2);L5.singularValueDecompose2dScale(this.matrix,y);const[x,b]=y;L5.singularValueDecompose2dScale(this.baseTransform,y);const w=x*y[0],k=b*y[1];let S=g,j=v,_=!1,A=!1;const E=Math.ceil(d*w),T=Math.ceil(u*k);E>=Math.ceil(g*w)?S=d:_=!0,T>=Math.ceil(v*k)?j=u:A=!0;const N=this.getSizeAndScale(S,this.ctx.canvas.width,w),C=this.getSizeAndScale(j,this.ctx.canvas.height,k),P=e.cachedCanvases.getCanvas("pattern",N.size,C.size),R=P.context,M=c.createCanvasGraphics(R,t);if(M.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(M,i,l),R.translate(-N.scale*h,-C.scale*p),M.transform(0,N.scale,0,0,C.scale,0,0),R.save(),null==(n=M.dependencyTracker)||n.save(),this.clipBbox(M,h,p,f,m),M.baseTransform=o6(M.ctx),M.executeOperatorList(a),M.endDrawing(),null==(r=M.dependencyTracker)||r.restore(),R.restore(),_||A){const t=P.canvas;_&&(S=d),A&&(j=u);const n=this.getSizeAndScale(S,this.ctx.canvas.width,w),r=this.getSizeAndScale(j,this.ctx.canvas.height,k),s=n.size,a=r.size,i=e.cachedCanvases.getCanvas("pattern-workaround",s,a),o=i.context,l=_?Math.floor(g/d):0,c=A?Math.floor(v/u):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)o.drawImage(t,s*e,a*n,s,a,0,0,s,a);return{canvas:i.canvas,scaleX:n.scale,scaleY:r.scale,offsetX:h,offsetY:p}}return{canvas:P.canvas,scaleX:N.scale,scaleY:C.scale,offsetX:h,offsetY:p}}getSizeAndScale(t,n,r){const s=Math.max(e.MAX_PATTERN_SIZE,n);let a=Math.ceil(t*r);return a>=s?a=s:r=a/t,{scale:r,size:a}}clipBbox(e,t,n,r,s){const a=r-t,i=s-n;e.ctx.rect(t,n,a,i),L5.axialAlignedBoundingBox([t,n,r,s],o6(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case e7:const{fillStyle:e,strokeStyle:a}=this.ctx;r.fillStyle=s.fillColor=e,r.strokeStyle=s.strokeColor=a;break;case t7:r.fillStyle=r.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new R5(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,s){let a=n;r!==q8&&(a=L5.transform(a,t.baseTransform),this.matrix&&(a=L5.transform(a,this.matrix)));const i=this.createPatternCanvas(t,s);let o=new DOMMatrix(a);o=o.translate(i.offsetX,i.offsetY),o=o.scale(1/i.scaleX,1/i.scaleY);const l=e.createPattern(i.canvas,"repeat");return l.setTransform(o),l}};Lf(n7,"MAX_PATTERN_SIZE",3e3);let r7=n7;function s7({src:e,srcPos:t=0,dest:n,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:i=!1}){const o=z5.isLittleEndian?4278190080:255,[l,c]=i?[a,o]:[o,a],d=r>>3,u=7&r,h=e.length;n=new Uint32Array(n.buffer);let p=0;for(let f=0;f<s;f++){for(const s=t+d;t<s;t++){const r=t<h?e[t]:255;n[p++]=128&r?c:l,n[p++]=64&r?c:l,n[p++]=32&r?c:l,n[p++]=16&r?c:l,n[p++]=8&r?c:l,n[p++]=4&r?c:l,n[p++]=2&r?c:l,n[p++]=1&r?c:l}if(0===u)continue;const r=t<h?e[t++]:255;for(let e=0;e<u;e++)n[p++]=r&1<<7-e?c:l}return{srcPos:t,destPos:p}}const a7=16,i7=new DOMMatrix,o7=new Float32Array(2),l7=new Float32Array([1/0,1/0,-1/0,-1/0]);class c7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function d7(e,t,n,r,s,a,i,o,l,c){const[d,u,h,p,f,m]=o6(e);if(0===u&&0===h){const g=i*d+f,v=Math.round(g),y=o*p+m,x=Math.round(y),b=(i+l)*d+f,w=Math.abs(Math.round(b)-v)||1,k=(o+c)*p+m,S=Math.abs(Math.round(k)-x)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(p),v,x),e.drawImage(t,n,r,s,a,0,0,w,S),e.setTransform(d,u,h,p,f,m),[w,S]}if(0===d&&0===p){const g=o*h+f,v=Math.round(g),y=i*u+m,x=Math.round(y),b=(o+c)*h+f,w=Math.abs(Math.round(b)-v)||1,k=(i+l)*u+m,S=Math.abs(Math.round(k)-x)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,x),e.drawImage(t,n,r,s,a,0,0,S,w),e.setTransform(d,u,h,p,f,m),[S,w]}e.drawImage(t,n,r,s,a,i,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,p)*c]}class u7{constructor(e,t,n){Lf(this,"alphaIsShape",!1),Lf(this,"fontSize",0),Lf(this,"fontSizeScale",1),Lf(this,"textMatrix",null),Lf(this,"textMatrixScale",1),Lf(this,"fontMatrix",F3),Lf(this,"leading",0),Lf(this,"x",0),Lf(this,"y",0),Lf(this,"lineX",0),Lf(this,"lineY",0),Lf(this,"charSpacing",0),Lf(this,"wordSpacing",0),Lf(this,"textHScale",1),Lf(this,"textRenderingMode",Q3),Lf(this,"textRise",0),Lf(this,"fillColor","#000000"),Lf(this,"strokeColor","#000000"),Lf(this,"patternFill",!1),Lf(this,"patternStroke",!1),Lf(this,"fillAlpha",1),Lf(this,"strokeAlpha",1),Lf(this,"lineWidth",1),Lf(this,"activeSMask",null),Lf(this,"transferMaps","none"),null==n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=l7.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=V8,t=null){const n=this.minMax.slice();if(e===H8){t||k5("Stroke bounding box must include transform."),L5.singularValueDecompose2dScale(t,o7);const e=o7[0]*this.lineWidth/2,r=o7[1]*this.lineWidth/2;n[0]-=e,n[1]-=r,n[2]+=e,n[3]+=r}return n}updateClipFromPath(){const e=L5.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(l7,0)}getClippedPathBoundingBox(e=V8,t=null){return L5.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function h7(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,r=t.width,s=n%a7,a=(n-s)/a7,i=0===s?a:a+1,o=e.createImageData(r,a7);let l,c=0;const d=t.data,u=o.data;let h,p,f,m;if(t.kind===a5.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),m=n.length,g=r+7>>3,v=4294967295,y=z5.isLittleEndian?4278190080:255;for(h=0;h<i;h++){for(f=h<a?a7:s,l=0,p=0;p<f;p++){const e=t-c;let s=0;const a=e>g?r:8*e-7,i=-8&a;let o=0,u=0;for(;s<i;s+=8)u=d[c++],n[l++]=128&u?v:y,n[l++]=64&u?v:y,n[l++]=32&u?v:y,n[l++]=16&u?v:y,n[l++]=8&u?v:y,n[l++]=4&u?v:y,n[l++]=2&u?v:y,n[l++]=1&u?v:y;for(;s<a;s++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:y,o>>=1}for(;l<m;)n[l++]=0;e.putImageData(o,0,h*a7)}}else if(t.kind===a5.RGBA_32BPP){for(p=0,m=r*a7*4,h=0;h<a;h++)u.set(d.subarray(c,c+m)),c+=m,e.putImageData(o,0,p),p+=a7;h<i&&(m=r*s*4,u.set(d.subarray(c,c+m)),e.putImageData(o,0,p))}else{if(t.kind!==a5.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);for(f=a7,m=r*f,h=0;h<i;h++){for(h>=a&&(f=s,m=r*f),l=0,p=m;p--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*a7)}}}function p7(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,s=n%a7,a=(n-s)/a7,i=0===s?a:a+1,o=e.createImageData(r,a7);let l=0;const c=t.data,d=o.data;for(let u=0;u<i;u++){const t=u<a?a7:s;({srcPos:l}=s7({src:c,srcPos:l,dest:d,width:r,height:t,nonBlackColor:0})),e.putImageData(o,0,u*a7)}}function f7(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function m7(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function g7(e,t){if(t)return!0;L5.singularValueDecompose2dScale(e,o7);const n=Math.fround(d6.pixelRatio*X5.PDF_TO_CSS_UNITS);return o7[0]<=n&&o7[1]<=n}const v7=["butt","round","square"],y7=["miter","round","bevel"],x7={},b7={};aa=new WeakSet,ia=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},oa=new WeakSet,la=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ca=new WeakSet,da=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let w7=class e{constructor(e,t,n,r,s,{optionalContentConfig:a,markedContentStack:i=null},o,l,c){Uf(this,aa),Uf(this,oa),Uf(this,ca),this.ctx=e,this.current=new u7(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=i||[],this.optionalContentConfig=a,this.cachedCanvases=new c7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,n=null){var r;return"string"==typeof t?(null==(r=this.dependencyTracker)||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,i=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=i,n){const e=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...o6(this.compositeCtx))}this.ctx.save(),m7(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=o6(this.ctx)}executeOperatorList(e,t,n,r,s){var a;const i=e.argsArray,o=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const d=c-l>10&&"function"==typeof n,u=d?Date.now()+15:0;let h=0;const p=this.commonObjs,f=this.objs;let m,g;for(;;){if(void 0!==r&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(!s||s(l))if(m=o[l],g=i[l]??null,m!==p5.dependency)null===g?this[m](l):this[m](l,...g);else for(const e of g){null==(a=this.dependencyTracker)||a.recordNamedData(e,l);const t=e.startsWith("g_")?p:f;if(!t.has(e))return t.get(e,n),l}if(l++,l===c)return l;if(d&&++h>10){if(Date.now()>u)return n(),l;h=0}}}endDrawing(){Vf(this,aa,ia).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Vf(this,oa,la).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s,a,i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,d="prescale1";for(;i>2&&l>1||o>2&&c>1;){let t=l,n=c;i>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/t),o>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/n),s=this.cachedCanvases.getCanvas(d,t,n),a=s.context,a.clearRect(0,0,t,n),a.drawImage(e,0,0,l,c,0,0,t,n),e=s.canvas,l=t,c=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var n,r;const s=this.ctx,{width:a,height:i}=t,o=this.current.fillColor,l=this.current.patternFill,c=o6(s);let d,u,h,p;if((t.bitmap||t.data)&&t.count>1){const r=t.bitmap||t.data.buffer;u=JSON.stringify(l?c:[c.slice(0,4),o]),d=this._cachedBitmapsMap.get(r),d||(d=new Map,this._cachedBitmapsMap.set(r,d));const s=d.get(u);if(s&&!l){const t=Math.round(Math.min(c[0],c[2])+c[4]),r=Math.round(Math.min(c[1],c[3])+c[5]);return null==(n=this.dependencyTracker)||n.recordDependencies(e,$8),{canvas:s,offsetX:t,offsetY:r}}h=s}h||(p=this.cachedCanvases.getCanvas("maskCanvas",a,i),p7(p.context,t));let f=L5.transform(c,[1/a,0,0,-1/i,0,0]);f=L5.transform(f,[1,0,0,1,0,-i]);const m=l7.slice();L5.axialAlignedBoundingBox([0,0,a,i],f,m);const[g,v,y,x]=m,b=Math.round(y-g)||1,w=Math.round(x-v)||1,k=this.cachedCanvases.getCanvas("fillCanvas",b,w),S=k.context,j=g,_=v;S.translate(-j,-_),S.transform(...f),h||(h=this._scaleImage(p.canvas,l6(S)),h=h.img,d&&l&&d.set(u,h)),S.imageSmoothingEnabled=g7(o6(S),t.interpolate),d7(S,h,0,0,h.width,h.height,0,0,a,i),S.globalCompositeOperation="source-in";const A=L5.transform(l6(S),[1,0,0,1,-j,-_]);return S.fillStyle=l?o.getPattern(s,this,A,V8,e):o,S.fillRect(0,0,a,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(u,k.canvas)),null==(r=this.dependencyTracker)||r.recordDependencies(e,$8),{canvas:k.canvas,offsetX:Math.round(j),offsetY:Math.round(_)}}setLineWidth(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("lineCap",e),this.ctx.lineCap=v7[t]}setLineJoin(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=y7[t]}setMiterLimit(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var r;null==(r=this.dependencyTracker)||r.recordSimpleData("dash",e);const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,s,a,i;for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null==(n=this.dependencyTracker)||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null==(r=this.dependencyTracker)||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null==(s=this.dependencyTracker)||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null==(a=this.dependencyTracker)||a.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null==(i=this.dependencyTracker)||i.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),f7(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,s,a,i){t.transform(e,n,r,s,a,i),this.__originalTransform(e,n,r,s,a,i)},e.setTransform=function(e,n,r,s,a,i){t.setTransform(e,n,r,s,a,i),this.__originalSetTransform(e,n,r,s,a,i)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,s,a,i){t.bezierCurveTo(e,n,r,s,a,i),this.__originalBezierCurveTo(e,n,r,s,a,i)},e.rect=function(e,n,r,s){t.rect(e,n,r,s),this.__originalRect(e,n,r,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f7(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],a=r[1],i=r[2]-s,o=r[3]-a;0!==i&&0!==o&&(this.genericComposeSMask(t.context,n,i,o,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,a,i,o,l,c,d){let u=e.canvas,h=o-c,p=l-d;if(a)if(h<0||p<0||h+n>u.width||p+r>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,r),t=e.context;t.drawImage(u,-h,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(0,0,n,r),t.globalCompositeOperation="source-over",u=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,p,n,r),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(h,p,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&i?t.filter=this.filterFactory.addAlphaFilter(i):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(i));const f=new Path2D;f.rect(o,l,n,r),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,h,p,n,r,o,l,n,r),t.restore()}save(e){var t;this.inSMaskMode&&f7(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null==(t=this.dependencyTracker)||t.save(e)}restore(e){var t;null==(t=this.dependencyTracker)||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&f7(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,r,s,a,i){var o;null==(o=this.dependencyTracker)||o.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,s,a,i),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[s]=n;if(!r)return s||(s=n[0]=new Path2D),void this[t](e,s);if(null!==this.dependencyTracker){const n=t===p5.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-n,r[2]+n,r[1]-n,r[3]+n).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const e=n[0]=new Path2D;for(let t=0,n=s.length;t<n;)switch(s[t++]){case f5:e.moveTo(s[t++],s[t++]);break;case m5:e.lineTo(s[t++],s[t++]);break;case g5:e.bezierCurveTo(s[t++],s[t++],s[t++],s[t++],s[t++],s[t++]);break;case v5:e.closePath();break;default:w5(`Unrecognized drawing path operator: ${s[t-1]}`)}s=e}L5.axialAlignedBoundingBox(r,o6(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var r;const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof a&&(null==a?void 0:a.getPattern)){const n=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,l6(s),H8,e),n){const e=new Path2D;e.addPath(t,s.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);null==(r=this.dependencyTracker)||r.recordDependencies(e,D8),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(H8,o6(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var r,s,a;const i=this.ctx,o=this.current.fillColor;let l=!1;if(this.current.patternFill){const n=o.isModifyingCurrentTransform()?i.getTransform():null;if(null==(r=this.dependencyTracker)||r.save(e),i.save(),i.fillStyle=o.getPattern(i,this,l6(i),V8,e),n){const e=new Path2D;e.addPath(t,i.getTransform().invertSelf().multiplySelf(n)),t=e}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==c&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),null==(s=this.dependencyTracker)||s.recordDependencies(e,L8),l&&(i.restore(),null==(a=this.dependencyTracker)||a.restore(e)),n&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null==(n=this.dependencyTracker)||n.recordDependencies(e,B8).recordOperation(e)}clip(e){var t;null==(t=this.dependencyTracker)||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=x7}eoClip(e){var t;null==(t=this.dependencyTracker)||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=b7}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null==(t=this.dependencyTracker)||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,r=n.getTransform().invertSelf();for(const{transform:n,x:s,y:a,fontSize:i,path:o}of t)o&&e.addPath(o,new DOMMatrix(n).preMultiplySelf(r).translate(s,a).scale(i,-i));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var r,s;null==(r=this.dependencyTracker)||r.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const a=this.commonObjs.get(t),i=this.current;if(!a)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=a.fontMatrix||F3,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||w5("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const o=a.loadedName||"sans-serif",l=(null==(s=a.systemFontInfo)?void 0:s.css)||`"${o}", ${a.fallbackName}`;let c="normal";a.black?c="900":a.bold&&(c="bold");const d=a.italic?"italic":"normal";let u=n;n<16?u=16:n>100&&(u=100),this.current.fontSizeScale=n/u,this.ctx.font=`${d} ${c} ${u}px ${l}`}setTextRenderingMode(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;null==(r=this.dependencyTracker)||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),null==(t=this.dependencyTracker)||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,r,s,a){var i,o,l,c;const d=this.ctx,u=this.current,h=u.font,p=u.textRenderingMode,f=u.fontSize/u.fontSizeScale,m=p&r5,g=!!(p&s5),v=u.patternFill&&!h.missingFile,y=u.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||g||v||y)&&!h.missingFile&&(x=h.getPathGenerator(this.commonObjs,t)),x&&(h.disableFontFace||v||y)){let t;if(d.save(),d.translate(n,r),d.scale(f,-f),null==(i=this.dependencyTracker)||i.recordCharacterBBox(e,d,h),m===Q3||m===t5)if(s){t=d.getTransform(),d.setTransform(...s);const e=Vf(this,ca,da).call(this,x,t,s);d.fill(e)}else d.fill(x);if(m===e5||m===t5)if(a){t||(t=d.getTransform()),d.setTransform(...a);const{a:e,b:n,c:r,d:s}=t,i=L5.inverseTransform(a),o=L5.transform([e,n,r,s,0,0],i);L5.singularValueDecompose2dScale(o,o7),d.lineWidth*=Math.max(o7[0],o7[1])/f,d.stroke(Vf(this,ca,da).call(this,x,t,a))}else d.lineWidth/=f,d.stroke(x);d.restore()}else m!==Q3&&m!==t5||(d.fillText(t,n,r),null==(o=this.dependencyTracker)||o.recordCharacterBBox(e,d,h,f,n,r,()=>d.measureText(t))),m!==e5&&m!==t5||(this.dependencyTracker&&(null==(l=this.dependencyTracker)||l.recordCharacterBBox(e,d,h,f,n,r,()=>d.measureText(t)).recordDependencies(e,D8)),d.strokeText(t,n,r));if(g){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o6(d),x:n,y:r,fontSize:f,path:x}),null==(c=this.dependencyTracker)||c.recordCharacterBBox(e,d,h,f,n,r)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return A5(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n,r,s,a;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,U8).resetBBox(e),this.current.textRenderingMode&s5&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,o=i.font;if(o.isType3Font)return this.showType3Text(e,t),void(null==(n=this.dependencyTracker)||n.recordShowTextOperation(e));const l=i.fontSize;if(0===l)return void(null==(r=this.dependencyTracker)||r.recordOperation(e));const c=this.ctx,d=i.fontSizeScale,u=i.charSpacing,h=i.wordSpacing,p=i.fontDirection,f=i.textHScale*p,m=t.length,g=o.vertical,v=g?1:-1,y=o.defaultVMetrics,x=l*i.fontMatrix[0],b=i.textRenderingMode===Q3&&!o.disableFontFace&&!i.patternFill;let w,k;if(c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),p>0?c.scale(f,-1):c.scale(f,1),i.patternFill){c.save();const t=i.fillColor.getPattern(c,this,l6(c),V8,e);w=o6(c),c.restore(),c.fillStyle=t}if(i.patternStroke){c.save();const t=i.strokeColor.getPattern(c,this,l6(c),H8,e);k=o6(c),c.restore(),c.strokeStyle=t}let S=i.lineWidth;const j=i.textMatrixScale;if(0===j||0===S){const e=i.textRenderingMode&r5;e!==e5&&e!==t5||(S=this.getSinglePixelWidth())}else S/=j;if(1!==d&&(c.scale(d,d),S/=d),c.lineWidth=S,o.isInvalidPDFjsFont){const n=[];let r=0;for(const e of t)n.push(e.unicode),r+=e.width;const s=n.join("");if(c.fillText(s,0,0),null!==this.dependencyTracker){const t=c.measureText(s);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}return i.x+=r*x*f,c.restore(),void this.compose()}let _,A=0;for(_=0;_<m;++_){const n=t[_];if("number"==typeof n){A+=v*n*l/1e3;continue}let r=!1;const a=(n.isSpace?h:0)+u,i=n.fontChar,f=n.accent;let m,S,j,E=n.width;if(g){const e=n.vmetric||y,t=-(n.vmetric?e[1]:.5*E)*x,r=e[2]*x;E=e?-e[0]:E,m=t/d,S=(A+r)/d}else m=A/d,S=0;if(o.remeasure&&E>0){j=c.measureText(i);const e=1e3*j.width/l*d;if(E<e&&this.isFontSubpixelAAEnabled){const t=E/e;r=!0,c.save(),c.scale(t,1),m/=t}else E!==e&&(m+=(E-e)/2e3*l/d)}if(this.contentVisible&&(n.isInFont||o.missingFile))if(b&&!f)c.fillText(i,m,S),null==(s=this.dependencyTracker)||s.recordCharacterBBox(e,c,j?{bbox:null}:o,l/d,m,S,()=>j??c.measureText(i));else if(this.paintChar(e,i,m,S,w,k),f){const t=m+l*f.offset.x/d,n=S-l*f.offset.y/d;this.paintChar(e,f.fontChar,t,n,w,k)}A+=g?E*x-a*p:E*x+a*p,r&&c.restore()}g?i.y-=A:i.x+=A*f,c.restore(),this.compose(),null==(a=this.dependencyTracker)||a.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,s=r.font,a=r.fontSize,i=r.fontDirection,o=s.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,d=r.textHScale*i,u=r.fontMatrix||F3,h=t.length;let p,f,m,g;if(r.textRenderingMode===n5||0===a)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(d,i);const v=this.dependencyTracker;for(this.dependencyTracker=v?new z8(v,e):null,p=0;p<h;++p){if(f=t[p],"number"==typeof f){g=o*f*a/1e3,this.ctx.translate(g,0),r.x+=g*d;continue}const e=(f.isSpace?c:0)+l,i=s.charProcOperatorList[f.operatorListId];i?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...u),this.executeOperatorList(i),this.restore()):w5(`Type3 character "${f.operatorListId}" is not available.`);const h=[f.width,0];L5.applyTransform(h,u),m=h[0]*a+e,n.translate(m,0),r.x+=m*d}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,s,a,i){var o;const l=new Path2D;l.rect(r,s,a-r,i-s),this.ctx.clip(l),null==(o=this.dependencyTracker)||o.recordBBox(e,this.ctx,r,a,s,i).recordClipBox(e,this.ctx,r,a,s,i),this.endPath(e)}getColorN_Pattern(t,n){let r;if("TilingPattern"===n[0]){const t=this.baseTransform||o6(this.ctx),s={createCanvasGraphics:(t,n)=>new e(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new z8(this.dependencyTracker,n,!0):null)};r=new r7(n,this.ctx,s,t)}else r=this._getPattern(t,n[1],n[2]);return r}setStrokeColorN(e,...t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null==(t=this.dependencyTracker)||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null==(n=this.dependencyTracker)||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null==(t=this.dependencyTracker)||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=function(e){switch(e[0]){case"RadialAxial":return new X8(e);case"Mesh":return new Z8(e);case"Dummy":return new Q8}throw new Error(`Unknown IR type: ${e[0]}`)}(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){var n;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,l6(r),q8,e);const a=l6(r);if(a){const{width:e,height:t}=r.canvas,n=l7.slice();L5.axialAlignedBoundingBox([0,0,e,t],a,n);const[s,i,o,l]=n;this.ctx.fillRect(s,i,o-s,l-i)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null==(n=this.dependencyTracker)||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,W8).recordDependencies(e,L8).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){k5("Should not call beginInlineImage")}beginImageData(){k5("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=o6(this.ctx),n)){L5.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,s,a,i]=n,o=new Path2D;o.rect(t,s,a-t,i-s),this.ctx.clip(o),null==(r=this.dependencyTracker)||r.recordClipBox(e,this.ctx,t,a,s,i),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||b5("TODO: Support non-isolated groups."),t.knockout&&w5("Knockout groups not supported.");const s=o6(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=l7.slice();L5.axialAlignedBoundingBox(t.bbox,o6(r),a);const i=[0,0,r.canvas.width,r.canvas.height];a=L5.intersect(a,i)||[0,0,0,0];const o=Math.floor(a[0]),l=Math.floor(a[1]),c=Math.max(Math.ceil(a[2])-o,1),d=Math.max(Math.ceil(a[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,c,d),p=h.context;p.translate(-o,-l),p.transform(...s);let f=new Path2D;const[m,g,v,y]=t.bbox;if(f.rect(m,g,v-m,y-g),t.matrix){const e=new Path2D;e.addPath(f,new DOMMatrix(t.matrix)),f=e}p.clip(f),t.smask&&this.smaskStack.push({canvas:h.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),f7(r,p),this.ctx=p,null==(n=this.dependencyTracker)||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,null==(n=this.dependencyTracker)||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=o6(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=l7.slice();L5.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],t,n),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,s,a){if(Vf(this,aa,ia).call(this),m7(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const s=n[2]-n[0],i=n[3]-n[1];if(a&&this.annotationCanvasMap){(r=r.slice())[4]-=n[0],r[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=s,n[3]=i,L5.singularValueDecompose2dScale(o6(this.ctx),o7);const{viewportScale:e}=this,a=Math.ceil(s*this.outputScaleX*e),o=Math.ceil(i*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(o7[0],0,0,-o7[1],0,i*o7[1]),m7(this.ctx)}else{m7(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],s,i),this.ctx.clip(t)}}this.current=new u7(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),Vf(this,oa,la).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const r=t.count;(t=this.getObject(e,t.data,t)).count=r;const s=this.ctx,a=this._createMaskCanvas(e,t),i=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(i,a.offsetX,a.offsetY),null==(n=this.dependencyTracker)||n.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+i.width,a.offsetY,a.offsetY+i.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,s=0,a,i){var o,l,c;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const u=o6(d);d.transform(n,r,s,a,0,0);const h=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),null==(o=this.dependencyTracker)||o.resetBBox(e);for(let p=0,f=i.length;p<f;p+=2){const t=L5.transform(u,[n,r,s,a,i[p],i[p+1]]);d.drawImage(h.canvas,t[4],t[5]),null==(l=this.dependencyTracker)||l.recordBBox(e,this.ctx,t[4],t[4]+h.canvas.width,t[5],t[5]+h.canvas.height)}d.restore(),this.compose(),null==(c=this.dependencyTracker)||c.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,r,s;if(!this.contentVisible)return;const a=this.ctx,i=this.current.fillColor,o=this.current.patternFill;null==(n=this.dependencyTracker)||n.resetBBox(e).recordDependencies(e,$8);for(const l of t){const{data:t,width:n,height:s,transform:c}=l,d=this.cachedCanvases.getCanvas("maskCanvas",n,s),u=d.context;u.save();p7(u,this.getObject(e,t,l)),u.globalCompositeOperation="source-in",u.fillStyle=o?i.getPattern(u,this,l6(a),V8,e):i,u.fillRect(0,0,n,s),u.restore(),a.save(),a.transform(...c),a.scale(1,-1),d7(a,d.canvas,0,0,n,s,0,-1,1,1),null==(r=this.dependencyTracker)||r.recordBBox(e,a,0,n,0,s),a.restore()}this.compose(),null==(s=this.dependencyTracker)||s.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):w5("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,r,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a)return void w5("Dependent image isn't ready yet");const i=a.width,o=a.height,l=[];for(let c=0,d=s.length;c<d;c+=2)l.push({transform:[n,0,0,r,s[c],s[c+1]],x:0,y:0,w:i,h:o});this.paintInlineImageXObjectGroup(e,a,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const r=t.width,s=t.height,a=this.ctx;this.save(e);const{filter:i}=a;let o;if("none"!==i&&""!==i&&(a.filter="none"),a.scale(1/r,-1/s),t.bitmap)o=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",r,s).context;h7(e,t),o=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(o,l6(a));a.imageSmoothingEnabled=g7(o6(a),t.interpolate),null==(n=this.dependencyTracker)||n.resetBBox(e).recordBBox(e,a,0,r,-s,0).recordDependencies(e,F8).recordOperation(e),d7(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var r,s,a;if(!this.contentVisible)return;const i=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const e=t.width,n=t.height,r=this.cachedCanvases.getCanvas("inlineImage",e,n).context;h7(r,t),o=this.applyTransferMapsToCanvas(r)}null==(r=this.dependencyTracker)||r.resetBBox(e);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),d7(i,o,l.x,l.y,l.w,l.h,0,-1,1,1),null==(s=this.dependencyTracker)||s.recordBBox(e,i,0,1,-1,0),i.restore();null==(a=this.dependencyTracker)||a.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null==(t=this.dependencyTracker)||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,L8).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null==(n=this.dependencyTracker)||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;null==(r=this.dependencyTracker)||r.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null==(t=this.dependencyTracker)||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var r,s;const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(a||(this.pendingClip===b7?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,null==(r=this.dependencyTracker)||r.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null==(s=this.dependencyTracker)||s.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=o6(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let a,i;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(s);if(n===r)if(0===e)a=i=1/n;else{const t=n*e;a=i=t<1?1/t:1}else if(0===e)a=1/n,i=1/r;else{const t=n*e,s=r*e;a=t<1?1/t:1,i=s<1?1/s:1}}else{const o=Math.abs(t*s-n*r),l=Math.hypot(t,n),c=Math.hypot(r,s);if(0===e)a=c/o,i=l/o;else{const t=e*o;a=c>t?c/t:1,i=l>t?l/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=i}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a)return n.lineWidth=(r||1)*s,void n.stroke(e);const i=n.getLineDash();t&&n.save(),n.scale(s,a),i7.a=1/s,i7.d=1/a;const o=new Path2D;if(o.addPath(e,i7),i.length>0){const e=Math.max(s,a);n.setLineDash(i.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=r||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(const $ in p5)void 0!==w7.prototype[$]&&(w7.prototype[p5[$]]=w7.prototype[$]);const k7=class e{constructor(e){Uf(this,fa),Uf(this,ua,void 0),Uf(this,ha,void 0),Uf(this,pa,void 0),Wf(this,ua,e),Wf(this,ha,new DataView(Bf(this,ua))),Wf(this,pa,new TextDecoder)}static write(t){const n=new TextEncoder,r={};let s=0;for(const c of e.strings){const e=n.encode(t[c]);r[c]=e,s+=4+e.length}const a=new ArrayBuffer(s),i=new Uint8Array(a),o=new DataView(a);let l=0;for(const c of e.strings){const e=r[c],t=e.length;o.setUint32(l,t),i.set(e,l+4),l+=4+t}return S5(l===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return Vf(this,fa,ma).call(this,0)}get fontWeight(){return Vf(this,fa,ma).call(this,1)}get italicAngle(){return Vf(this,fa,ma).call(this,2)}};ua=new WeakMap,ha=new WeakMap,pa=new WeakMap,fa=new WeakSet,ma=function(e){S5(e<k7.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=Bf(this,ha).getUint32(t)+4;const n=Bf(this,ha).getUint32(t);return Bf(this,pa).decode(new Uint8Array(Bf(this,ua),t+4,n))},Lf(k7,"strings",["fontFamily","fontWeight","italicAngle"]);let S7=k7;const j7=class e{constructor(e){Uf(this,xa),Uf(this,ga,void 0),Uf(this,va,void 0),Uf(this,ya,void 0),Wf(this,ga,e),Wf(this,va,new DataView(Bf(this,ga))),Wf(this,ya,new TextDecoder)}static write(t){const n=new TextEncoder,r={};let s=0;for(const h of e.strings){const e=n.encode(t[h]);r[h]=e,s+=4+e.length}s+=4;let a,i,o=1+s;t.style&&(a=n.encode(t.style.style),i=n.encode(t.style.weight),o+=4+a.length+4+i.length);const l=new ArrayBuffer(o),c=new Uint8Array(l),d=new DataView(l);let u=0;d.setUint8(u++,t.guessFallback?1:0),d.setUint32(u,0),u+=4,s=0;for(const h of e.strings){const e=r[h],t=e.length;s+=4+t,d.setUint32(u,t),c.set(e,u+4),u+=4+t}return d.setUint32(u-s-4,s),t.style&&(d.setUint32(u,a.length),c.set(a,u+4),u+=4+a.length,d.setUint32(u,i.length),c.set(i,u+4),u+=4+i.length),S5(u<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(u)}get guessFallback(){return 0!==Bf(this,va).getUint8(0)}get css(){return Vf(this,xa,ba).call(this,0)}get loadedName(){return Vf(this,xa,ba).call(this,1)}get baseFontName(){return Vf(this,xa,ba).call(this,2)}get src(){return Vf(this,xa,ba).call(this,3)}get style(){let e=1;e+=4+Bf(this,va).getUint32(e);const t=Bf(this,va).getUint32(e),n=Bf(this,ya).decode(new Uint8Array(Bf(this,ga),e+4,t));e+=4+t;const r=Bf(this,va).getUint32(e);return{style:n,weight:Bf(this,ya).decode(new Uint8Array(Bf(this,ga),e+4,r))}}};ga=new WeakMap,va=new WeakMap,ya=new WeakMap,xa=new WeakSet,ba=function(e){S5(e<j7.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=Bf(this,va).getUint32(t)+4;const n=Bf(this,va).getUint32(t);return Bf(this,ya).decode(new Uint8Array(Bf(this,ga),t+4,n))},Lf(j7,"strings",["css","loadedName","baseFontName","src"]);let _7=j7;const A7=class e{constructor({data:e,extra:t}){Uf(this,Na),Uf(this,Pa),Uf(this,Ma),Uf(this,Aa,void 0),Uf(this,Ea,void 0),Uf(this,Ta,void 0),Wf(this,Aa,e),Wf(this,Ea,new TextDecoder),Wf(this,Ta,new DataView(Bf(this,Aa))),t&&Object.assign(this,t)}get black(){return Vf(this,Na,Ca).call(this,0)}get bold(){return Vf(this,Na,Ca).call(this,1)}get disableFontFace(){return Vf(this,Na,Ca).call(this,2)}get fontExtraProperties(){return Vf(this,Na,Ca).call(this,3)}get isInvalidPDFjsFont(){return Vf(this,Na,Ca).call(this,4)}get isType3Font(){return Vf(this,Na,Ca).call(this,5)}get italic(){return Vf(this,Na,Ca).call(this,6)}get missingFile(){return Vf(this,Na,Ca).call(this,7)}get remeasure(){return Vf(this,Na,Ca).call(this,8)}get vertical(){return Vf(this,Na,Ca).call(this,9)}get ascent(){return Vf(this,Pa,Ra).call(this,0)}get defaultWidth(){return Vf(this,Pa,Ra).call(this,1)}get descent(){return Vf(this,Pa,Ra).call(this,2)}get bbox(){let t=Bf(e,ka);if(0===Bf(this,Ta).getUint8(t))return;t+=1;const n=[];for(let e=0;e<4;e++)n.push(Bf(this,Ta).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=Bf(e,Sa);if(0===Bf(this,Ta).getUint8(t))return;t+=1;const n=[];for(let e=0;e<6;e++)n.push(Bf(this,Ta).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=Bf(e,ja);if(0===Bf(this,Ta).getUint8(t))return;t+=1;const n=[];for(let e=0;e<3;e++)n.push(Bf(this,Ta).getInt16(t,!0)),t+=2;return n}get fallbackName(){return Vf(this,Ma,Ia).call(this,0)}get loadedName(){return Vf(this,Ma,Ia).call(this,1)}get mimetype(){return Vf(this,Ma,Ia).call(this,2)}get name(){return Vf(this,Ma,Ia).call(this,3)}get data(){let t=Bf(e,_a);t+=4+Bf(this,Ta).getUint32(t);t+=4+Bf(this,Ta).getUint32(t);t+=4+Bf(this,Ta).getUint32(t);const n=Bf(this,Ta).getUint32(t);if(0!==n)return new Uint8Array(Bf(this,Aa),t+4,n)}clearData(){let t=Bf(e,_a);t+=4+Bf(this,Ta).getUint32(t);t+=4+Bf(this,Ta).getUint32(t);t+=4+Bf(this,Ta).getUint32(t);const n=Bf(this,Ta).getUint32(t);new Uint8Array(Bf(this,Aa),t+4,n).fill(0),Bf(this,Ta).setUint32(t,0)}get cssFontInfo(){let t=Bf(e,_a);t+=4+Bf(this,Ta).getUint32(t);t+=4+Bf(this,Ta).getUint32(t);const n=Bf(this,Ta).getUint32(t);if(0===n)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(Bf(this,Aa),t+4,n)),new S7(r.buffer)}get systemFontInfo(){let t=Bf(e,_a);t+=4+Bf(this,Ta).getUint32(t);const n=Bf(this,Ta).getUint32(t);if(0===n)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(Bf(this,Aa),t+4,n)),new _7(r.buffer)}static write(t){const n=t.systemFontInfo?_7.write(t.systemFontInfo):null,r=t.cssFontInfo?S7.write(t.cssFontInfo):null,s=new TextEncoder,a={};let i=0;for(const m of e.strings)a[m]=s.encode(t[m]),i+=4+a[m].length;const o=Bf(e,_a)+4+i+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(t.data?t.data.length:0),l=new ArrayBuffer(o),c=new Uint8Array(l),d=new DataView(l);let u=0;const h=e.bools.length;let p=0,f=0;for(let m=0;m<h;m++){const n=t[e.bools[m]];p|=(void 0===n?0:n?2:1)<<f,f+=2,8!==f&&m!==h-1||(d.setUint8(u++,p),p=0,f=0)}S5(u===Bf(e,wa),"FontInfo.write: Boolean properties offset mismatch");for(const m of e.numbers)d.setFloat64(u,t[m]),u+=8;if(S5(u===Bf(e,ka),"FontInfo.write: Number properties offset mismatch"),t.bbox){d.setUint8(u++,4);for(const e of t.bbox)d.setInt16(u,e,!0),u+=2}else d.setUint8(u++,0),u+=8;if(S5(u===Bf(e,Sa),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){d.setUint8(u++,6);for(const e of t.fontMatrix)d.setFloat64(u,e,!0),u+=8}else d.setUint8(u++,0),u+=48;if(S5(u===Bf(e,ja),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){d.setUint8(u++,1);for(const e of t.defaultVMetrics)d.setInt16(u,e,!0),u+=2}else d.setUint8(u++,0),u+=6;S5(u===Bf(e,_a),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(Bf(e,_a),0),u+=4;for(const m of e.strings){const e=a[m],t=e.length;d.setUint32(u,t),c.set(e,u+4),u+=4+t}if(d.setUint32(Bf(e,_a),u-Bf(e,_a)-4),n){const e=n.byteLength;d.setUint32(u,e),S5(u+4+e<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(n),u+4),u+=4+e}else d.setUint32(u,0),u+=4;if(r){const e=r.byteLength;d.setUint32(u,e),S5(u+4+e<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),u+4),u+=4+e}else d.setUint32(u,0),u+=4;return void 0===t.data?(d.setUint32(u,0),u+=4):(d.setUint32(u,t.data.length),c.set(t.data,u+4),u+=4+t.data.length),S5(u<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(u)}};wa=new WeakMap,ka=new WeakMap,Sa=new WeakMap,ja=new WeakMap,_a=new WeakMap,Aa=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,Na=new WeakSet,Ca=function(e){S5(e<A7.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=2*e%8,r=Bf(this,Ta).getUint8(t)>>n&3;return 0===r?void 0:2===r},Pa=new WeakSet,Ra=function(e){return S5(e<A7.numbers.length,"Invalid number index"),Bf(this,Ta).getFloat64(Bf(A7,wa)+8*e)},Ma=new WeakSet,Ia=function(e){S5(e<A7.strings.length,"Invalid string index");let t=Bf(A7,_a)+4;for(let s=0;s<e;s++)t+=Bf(this,Ta).getUint32(t)+4;const n=Bf(this,Ta).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(Bf(this,Aa),t+4,n)),Bf(this,Ea).decode(r)},Lf(A7,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Lf(A7,"numbers",["ascent","defaultWidth","descent"]),Lf(A7,"strings",["fallbackName","loadedName","mimetype","name"]),Uf(A7,wa,Math.ceil(2*A7.bools.length/8)),Uf(A7,ka,Bf(A7,wa)+8*A7.numbers.length),Uf(A7,Sa,Bf(A7,ka)+1+8),Uf(A7,ja,Bf(A7,Sa)+1+48),Uf(A7,_a,Bf(A7,ja)+1+6);let E7=A7;class T7{static get workerPort(){return Bf(this,Oa)}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Wf(this,Oa,e)}static get workerSrc(){return Bf(this,za)}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");Wf(this,za,e)}}Oa=new WeakMap,za=new WeakMap,Uf(T7,Oa,null),Uf(T7,za,"");class N7{constructor({parsedData:e,rawData:t}){Uf(this,Da,void 0),Uf(this,La,void 0),Wf(this,Da,e),Wf(this,La,t)}getRaw(){return Bf(this,La)}get(e){return Bf(this,Da).get(e)??null}[Symbol.iterator](){return Bf(this,Da).entries()}}Da=new WeakMap,La=new WeakMap;const C7=Symbol("INTERNAL");class P7{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){Uf(this,Fa,!1),Uf(this,Ba,!1),Uf(this,Ua,!1),Uf(this,Wa,!0),Wf(this,Fa,!!(e&W3)),Wf(this,Ba,!!(e&$3)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(Bf(this,Ua))return Bf(this,Wa);if(!Bf(this,Wa))return!1;const{print:e,view:t}=this.usage;return Bf(this,Fa)?"OFF"!==(null==t?void 0:t.viewState):!Bf(this,Ba)||"OFF"!==(null==e?void 0:e.printState)}_setVisible(e,t,n=!1){e!==C7&&k5("Internal method `_setVisible` called."),Wf(this,Ua,n),Wf(this,Wa,t)}}Fa=new WeakMap,Ba=new WeakMap,Ua=new WeakMap,Wa=new WeakMap;class R7{constructor(e,t=W3){if(Uf(this,Ga),Uf(this,$a,null),Uf(this,Va,new Map),Uf(this,Ha,null),Uf(this,qa,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,Wf(this,qa,e.order);for(const n of e.groups)Bf(this,Va).set(n.id,new P7(t,n));if("OFF"===e.baseState)for(const e of Bf(this,Va).values())e._setVisible(C7,!1);for(const t of e.on)Bf(this,Va).get(t)._setVisible(C7,!0);for(const t of e.off)Bf(this,Va).get(t)._setVisible(C7,!1);Wf(this,Ha,this.getHash())}}isVisible(e){if(0===Bf(this,Va).size)return!0;if(!e)return b5("Optional content group not defined."),!0;if("OCG"===e.type)return Bf(this,Va).has(e.id)?Bf(this,Va).get(e.id).visible:(w5(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return Vf(this,Ga,Ka).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!Bf(this,Va).has(t))return w5(`Optional content group not found: ${t}`),!0;if(Bf(this,Va).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!Bf(this,Va).has(t))return w5(`Optional content group not found: ${t}`),!0;if(!Bf(this,Va).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!Bf(this,Va).has(t))return w5(`Optional content group not found: ${t}`),!0;if(!Bf(this,Va).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!Bf(this,Va).has(t))return w5(`Optional content group not found: ${t}`),!0;if(Bf(this,Va).get(t).visible)return!1}return!0}return w5(`Unknown optional content policy ${e.policy}.`),!0}return w5(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const s=Bf(this,Va).get(e);if(s){if(n&&t&&s.rbGroups.length)for(const t of s.rbGroups)for(const n of t)n!==e&&(null==(r=Bf(this,Va).get(n))||r._setVisible(C7,!1,!0));s._setVisible(C7,!!t,!0),Wf(this,$a,null)}else w5(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const e=Bf(this,Va).get(r);if(e)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!e.visible,t)}}Wf(this,$a,null)}get hasInitialVisibility(){return null===Bf(this,Ha)||this.getHash()===Bf(this,Ha)}getOrder(){return Bf(this,Va).size?Bf(this,qa)?Bf(this,qa).slice():[...Bf(this,Va).keys()]:null}getGroup(e){return Bf(this,Va).get(e)||null}getHash(){if(null!==Bf(this,$a))return Bf(this,$a);const e=new $6;for(const[t,n]of Bf(this,Va))e.update(`${t}:${n.visible}`);return Wf(this,$a,e.hexdigest())}[Symbol.iterator](){return Bf(this,Va).entries()}}$a=new WeakMap,Va=new WeakMap,Ha=new WeakMap,qa=new WeakMap,Ga=new WeakSet,Ka=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const t=e[r];let s;if(Array.isArray(t))s=Vf(this,Ga,Ka).call(this,t);else{if(!Bf(this,Va).has(t))return w5(`Optional content group not found: ${t}`),!0;s=Bf(this,Va).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n};class M7{constructor(e,{disableRange:t=!1,disableStream:n=!1}){S5(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:i}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=i,(null==s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{S5(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;void 0===e.total?null==(n=null==(t=this._rangeReaders[0])?void 0:t.onProgress)||n.call(t,{loaded:e.loaded}):null==(s=null==(r=this._fullRequestReader)?void 0:r.onProgress)||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){S5(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new I7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new O7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class I7{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=e6(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O7{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function z7(e,t){const n=new Headers;if(!e||!t||"object"!=typeof t)return n;for(const r in t){const e=t[r];void 0!==e&&n.append(r,e)}return n}function D7(e){var t;return(null==(t=URL.parse(e))?void 0:t.origin)??null}function L7({responseHeaders:e,isHttp:t,rangeChunkSize:n,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*n)return s;if(r||!t)return s;if("bytes"!==e.get("Accept-Ranges"))return s;return"identity"!==(e.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function F7(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){n=n[1];let e=i(n);return e=unescape(e),e=o(e),e=l(e),a(e)}if(n=function(e){const t=[];let n;const s=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,r,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,s]}const a=[];for(let r=0;r<t.length&&r in t;++r){let[e,n]=t[r];n=i(n),e&&(n=unescape(n),0===r&&(n=o(n))),a.push(n)}return a.join("")}(e),n)return a(l(n));if(n=r("filename","i").exec(e),n){n=n[1];let e=i(n);return e=l(e),a(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(e,{fatal:!0}),s=O5(n);n=r.decode(s),t=!1}catch{}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function i(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,r){if("q"===n||"Q"===n)return s(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{r=atob(r)}catch{}return s(t,r)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(e6(e))return e}return null}function B7(e,t){return new P5(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e,404===e||0===e&&t.startsWith("file:"))}function U7(e){return 200===e||206===e}function W7(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function $7(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(w5(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class V7{constructor(e){Lf(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=z7(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return S5(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new H7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new q7(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class H7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,W7(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=D7(t.url),!U7(t.status))throw B7(t.status,r);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:s,suggestedLength:a}=L7({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=F7(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new M5("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$7(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}class q7{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,W7(s,this._withCredentials,this._abortController)).then(t=>{const n=D7(t.url);if(n!==e._responseOrigin)throw new Error(`Expected range response-origin "${n}" to match "${e._responseOrigin}".`);if(!U7(t.status))throw B7(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:$7(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}class G7{constructor({url:e,httpHeaders:t,withCredentials:n}){Lf(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=z7(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",S5(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const r=this.pendingRequests[e];r&&(null==(n=r.onProgress)||n.call(r,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void n.onError(r.status);const s=r.status||200;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void n.onError(r.status);const a=function(e){const t=e.response;return"string"!=typeof t?t:O5(t).buffer}(r);if(206===s){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:a}):(w5('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class K7{constructor(e){this._source=e,this._manager=new G7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return S5(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new X7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Y7(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class X7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=D7(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=L7({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=F7(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=B7(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Y7{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=D7(null==(e=this._manager.getRequestXhr(this._requestId))?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=B7(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const J7=/^[a-z][a-z0-9\-+.]+:/i;class Z7{constructor(e){this.source=e,this.url=function(e){if(J7.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),S5("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return S5(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Q7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new e9(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Q7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=B7(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new M5("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class e9{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const t9=Symbol("INITIAL_DATA");class n9{constructor(){Uf(this,Ya),Uf(this,Xa,Object.create(null))}get(e,t=null){if(t){const n=Vf(this,Ya,Ja).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=Bf(this,Xa)[e];if(!n||n.data===t9)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=Bf(this,Xa)[e];return!!t&&t.data!==t9}delete(e){const t=Bf(this,Xa)[e];return!(!t||t.data===t9)&&(delete Bf(this,Xa)[e],!0)}resolve(e,t=null){const n=Vf(this,Ya,Ja).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in Bf(this,Xa)){const{data:n}=Bf(this,Xa)[t];null==(e=null==n?void 0:n.bitmap)||e.close()}Wf(this,Xa,Object.create(null))}*[Symbol.iterator](){for(const e in Bf(this,Xa)){const{data:t}=Bf(this,Xa)[e];t!==t9&&(yield[e,t])}}}Xa=new WeakMap,Ya=new WeakSet,Ja=function(e){var t;return(t=Bf(this,Xa))[e]||(t[e]={...Promise.withResolvers(),data:t9})};const r9=class e{constructor({textContentSource:t,container:n,viewport:r}){var s;if(Uf(this,ki),Uf(this,ji),Uf(this,Ai),Uf(this,Qa,Promise.withResolvers()),Uf(this,ei,null),Uf(this,ti,!1),Uf(this,ni,!!(null==(Za=globalThis.FontInspector)?void 0:Za.enabled)),Uf(this,ri,null),Uf(this,si,null),Uf(this,ai,0),Uf(this,ii,0),Uf(this,oi,null),Uf(this,li,null),Uf(this,ci,0),Uf(this,di,0),Uf(this,ui,Object.create(null)),Uf(this,hi,[]),Uf(this,pi,null),Uf(this,fi,[]),Uf(this,mi,new WeakMap),Uf(this,gi,null),t instanceof ReadableStream)Wf(this,pi,t);else{if("object"!=typeof t)throw new Error('No "textContentSource" parameter specified.');Wf(this,pi,new ReadableStream({start(e){e.enqueue(t),e.close()}}))}Wf(this,ei,Wf(this,li,n)),Wf(this,di,r.scale*d6.pixelRatio),Wf(this,ci,r.rotation),Wf(this,si,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:i,pageX:o,pageY:l}=r.rawDims;Wf(this,gi,[1,0,0,-1,-o,l+i]),Wf(this,ii,a),Wf(this,ai,i),Vf(s=e,Ri,Mi).call(s),c6(n,r),Bf(this,Qa).promise.finally(()=>{Bf(e,wi).delete(this),Wf(this,si,null),Wf(this,ui,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=z5.platform;return A5(this,"fontFamilyMap",new Map([["sans-serif",(e&&t?"Calibri, ":"")+"sans-serif"],["monospace",(e&&t?"Lucida Console, ":"")+"monospace"]]))}render(){const t=()=>{Bf(this,oi).read().then(({value:e,done:n})=>{n?Bf(this,Qa).resolve():(Bf(this,ri)??Wf(this,ri,e.lang),Object.assign(Bf(this,ui),e.styles),Vf(this,ki,Si).call(this,e.items),t())},Bf(this,Qa).reject)};return Wf(this,oi,Bf(this,pi).getReader()),Bf(e,wi).add(this),t(),Bf(this,Qa).promise}update({viewport:t,onBefore:n=null}){var r;const s=t.scale*d6.pixelRatio,a=t.rotation;if(a!==Bf(this,ci)&&(null==n||n(),Wf(this,ci,a),c6(Bf(this,li),{rotation:a})),s!==Bf(this,di)){null==n||n(),Wf(this,di,s);const t={div:null,properties:null,ctx:Vf(r=e,Ti,Ni).call(r,Bf(this,ri))};for(const e of Bf(this,fi))t.properties=Bf(this,mi).get(e),t.div=e,Vf(this,Ai,Ei).call(this,t)}}cancel(){var e;const t=new M5("TextLayer task cancelled.");null==(e=Bf(this,oi))||e.cancel(t).catch(()=>{}),Wf(this,oi,null),Bf(this,Qa).reject(t)}get textDivs(){return Bf(this,fi)}get textContentItemsStr(){return Bf(this,hi)}static cleanup(){if(!(Bf(this,wi).size>0)){Bf(this,vi).clear();for(const{canvas:e}of Bf(this,yi).values())e.remove();Bf(this,yi).clear()}}};Qa=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,ri=new WeakMap,si=new WeakMap,ai=new WeakMap,ii=new WeakMap,oi=new WeakMap,li=new WeakMap,ci=new WeakMap,di=new WeakMap,ui=new WeakMap,hi=new WeakMap,pi=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,yi=new WeakMap,xi=new WeakMap,bi=new WeakMap,wi=new WeakMap,ki=new WeakSet,Si=function(e){var t,n;if(Bf(this,ti))return;(n=Bf(this,si)).ctx??(n.ctx=Vf(t=r9,Ti,Ni).call(t,Bf(this,ri)));const r=Bf(this,fi),s=Bf(this,hi);for(const a of e){if(r.length>1e5)return w5("Ignoring additional textDivs for performance reasons."),void Wf(this,ti,!0);if(void 0!==a.str)s.push(a.str),Vf(this,ji,_i).call(this,a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const e=Bf(this,ei);Wf(this,ei,document.createElement("span")),Bf(this,ei).classList.add("markedContent"),a.id&&Bf(this,ei).setAttribute("id",`${a.id}`),e.append(Bf(this,ei))}else"endMarkedContent"===a.type&&Wf(this,ei,Bf(this,ei).parentNode)}},ji=new WeakSet,_i=function(e){var t;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};Bf(this,fi).push(n);const s=L5.transform(Bf(this,gi),e.transform);let a=Math.atan2(s[1],s[0]);const i=Bf(this,ui)[e.fontName];i.vertical&&(a+=Math.PI/2);let o=Bf(this,ni)&&i.fontSubstitution||i.fontFamily;o=r9.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),c=l*Vf(t=r9,Ii,Oi).call(t,o,i,Bf(this,ri));let d,u;0===a?(d=s[4],u=s[5]-c):(d=s[4]+c*Math.sin(a),u=s[5]-c*Math.cos(a));const h="calc(var(--total-scale-factor) *",p=n.style;Bf(this,ei)===Bf(this,li)?(p.left=`${(100*d/Bf(this,ii)).toFixed(2)}%`,p.top=`${(100*u/Bf(this,ai)).toFixed(2)}%`):(p.left=`${h}${d.toFixed(2)}px)`,p.top=`${h}${u.toFixed(2)}px)`),p.fontSize=`${h}${(Bf(r9,bi)*l).toFixed(2)}px)`,p.fontFamily=o,r.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,Bf(this,ni)&&(n.dataset.fontName=i.fontSubstitutionLoadedName||e.fontName),0!==a&&(r.angle=a*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(f=!0)}if(f&&(r.canvasWidth=i.vertical?e.height:e.width),Bf(this,mi).set(n,r),Bf(this,si).div=n,Bf(this,si).properties=r,Vf(this,Ai,Ei).call(this,Bf(this,si)),r.hasText&&Bf(this,ei).append(n),r.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),Bf(this,ei).append(e)}},Ai=new WeakSet,Ei=function(e){var t;const{div:n,properties:r,ctx:s}=e,{style:a}=n;let i="";if(Bf(r9,bi)>1&&(i=`scale(${1/Bf(r9,bi)})`),0!==r.canvasWidth&&r.hasText){const{fontFamily:e}=a,{canvasWidth:o,fontSize:l}=r;Vf(t=r9,Ci,Pi).call(t,s,l*Bf(this,di),e);const{width:c}=s.measureText(n.textContent);c>0&&(i=`scaleX(${o*Bf(this,di)/c}) ${i}`)}0!==r.angle&&(i=`rotate(${r.angle}deg) ${i}`),i.length>0&&(a.transform=i)},Ti=new WeakSet,Ni=function(e=null){let t=Bf(this,yi).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Bf(this,yi).set(e,t),Bf(this,xi).set(t,{size:0,family:""})}return t},Ci=new WeakSet,Pi=function(e,t,n){const r=Bf(this,xi).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},Ri=new WeakSet,Mi=function(){if(null!==Bf(this,bi))return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Wf(this,bi,e.getBoundingClientRect().height),e.remove()},Ii=new WeakSet,Oi=function(e,t,n){const r=Bf(this,vi).get(e);if(r)return r;const s=Vf(this,Ti,Ni).call(this,n);s.canvas.width=s.canvas.height=30,Vf(this,Ci,Pi).call(this,s,30,e);const a=s.measureText(""),i=a.fontBoundingBoxAscent,o=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let l=.8;return i?l=i/(i+o):(z5.platform.isFirefox&&w5("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),Bf(this,vi).set(e,l),l},Uf(r9,Ti),Uf(r9,Ci),Uf(r9,Ri),Uf(r9,Ii),Uf(r9,vi,new Map),Uf(r9,yi,new Map),Uf(r9,xi,new WeakMap),Uf(r9,bi,null),Uf(r9,wi,new Set);let s9=r9;function a9(e={}){"string"==typeof e||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t=new o9,{docId:n}=t,r=e.url?function(e){if(e instanceof URL)return e.href;if("string"==typeof e){if(L3)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(e.url):null,s=e.data?function(e){if(L3&&"undefined"!=typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return O5(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(e.data):null,a=e.httpHeaders||null,i=!0===e.withCredentials,o=e.password??null,l=e.range instanceof l9?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:65536;let d=e.worker instanceof h9?e.worker:null;const u=e.verbosity,h="string"!=typeof e.docBaseUrl||Q5(e.docBaseUrl)?null:e.docBaseUrl,p=X6(e.cMapUrl),f=!1!==e.cMapPacked,m=e.CMapReaderFactory||(L3?_8:m8),g=X6(e.iccUrl),v=X6(e.standardFontDataUrl),y=e.StandardFontDataFactory||(L3?A8:x8),x=X6(e.wasmUrl),b=e.WasmFactory||(L3?E8:w8),w=!0!==e.stopAtErrors,k=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,S=!1!==e.isEvalSupported,j="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!L3,_="boolean"==typeof e.isImageDecoderSupported?e.isImageDecoderSupported:!L3&&(z5.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,E="boolean"==typeof e.disableFontFace?e.disableFontFace:L3,T=!0===e.fontExtraProperties,N=!0===e.enableXfa,C=e.ownerDocument||globalThis.document,P=!0===e.disableRange,R=!0===e.disableStream,M=!0===e.disableAutoFetch,I=!0===e.pdfBug,O=e.CanvasFactory||(L3?j8:p8),z=e.FilterFactory||(L3?S8:v8),D=!0===e.enableHWA,L=!1!==e.useWasm,F=l?l.length:e.length??NaN,B="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!L3&&!E,U="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:!!(m===m8&&y===x8&&b===w8&&p&&v&&x&&n6(p,document.baseURI)&&n6(v,document.baseURI)&&n6(x,document.baseURI));var W;W=u,Number.isInteger(W)&&(y5=W);const $={canvasFactory:new O({ownerDocument:C,enableHWA:D}),filterFactory:new z({docId:n,ownerDocument:C}),cMapReaderFactory:U?null:new m({baseUrl:p,isCompressed:f}),standardFontDataFactory:U?null:new y({baseUrl:v}),wasmFactory:U?null:new b({baseUrl:x})};d||(d=h9.create({verbosity:u,port:T7.workerPort}),t._worker=d);const V={docId:n,apiVersion:"5.4.296",data:s,password:o,disableAutoFetch:M,rangeChunkSize:c,length:F,docBaseUrl:h,enableXfa:N,evaluatorOptions:{maxImageSize:k,disableFontFace:E,ignoreErrors:w,isEvalSupported:S,isOffscreenCanvasSupported:j,isImageDecoderSupported:_,canvasMaxAreaInBytes:A,fontExtraProperties:T,useSystemFonts:B,useWasm:L,useWorkerFetch:U,cMapUrl:p,iccUrl:g,standardFontDataUrl:v,wasmUrl:x}},H={ownerDocument:C,pdfBug:I,styleElement:null,loadingParams:{disableAutoFetch:M,enableXfa:N}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const e=d.messageHandler.sendWithPromise("GetDocRequest",V,s?[s.buffer]:null);let o;if(l)o=new M7(l,{disableRange:P,disableStream:R});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const e=n6(r)?V7:L3?Z7:K7;o=new e({url:r,length:F,httpHeaders:a,withCredentials:i,rangeChunkSize:c,disableRange:P,disableStream:R})}return e.then(e=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const r=new u8(n,e,d.port),s=new p9(r,t,o,H,$,D);t._transport=s,r.send("Ready",null)})}).catch(t._capability.reject),t}const i9=class e{constructor(){Lf(this,"_capability",Promise.withResolvers()),Lf(this,"_transport",null),Lf(this,"_worker",null),Lf(this,"docId","d"+$f(e,zi)._++),Lf(this,"destroyed",!1),Lf(this,"onPassword",null),Lf(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(null==(e=this._worker)?void 0:e.port)&&(this._worker._pendingDestroy=!0),await(null==(t=this._transport)?void 0:t.destroy())}catch(s){throw(null==(n=this._worker)?void 0:n.port)&&delete this._worker._pendingDestroy,s}this._transport=null,null==(r=this._worker)||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};zi=new WeakMap,Uf(i9,zi,0);let o9=i9;class l9{constructor(e,t,n=!1,r=null){Uf(this,Di,Promise.withResolvers()),Uf(this,Li,[]),Uf(this,Fi,[]),Uf(this,Bi,[]),Uf(this,Ui,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){Bf(this,Ui).push(e)}addProgressListener(e){Bf(this,Bi).push(e)}addProgressiveReadListener(e){Bf(this,Fi).push(e)}addProgressiveDoneListener(e){Bf(this,Li).push(e)}onDataRange(e,t){for(const n of Bf(this,Ui))n(e,t)}onDataProgress(e,t){Bf(this,Di).promise.then(()=>{for(const n of Bf(this,Bi))n(e,t)})}onDataProgressiveRead(e){Bf(this,Di).promise.then(()=>{for(const t of Bf(this,Fi))t(e)})}onDataProgressiveDone(){Bf(this,Di).promise.then(()=>{for(const e of Bf(this,Li))e()})}transportReady(){Bf(this,Di).resolve()}requestDataRange(e,t){k5("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Di=new WeakMap,Li=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,Ui=new WeakMap;class c9{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return A5(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class d9{constructor(e,t,n,r=!1){Uf(this,$i),Uf(this,Wi,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new t6:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new n9,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new J5({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return A5(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:s=X3.ENABLE,transform:a=null,background:i=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:u=!1,recordOperations:h=!1,operationsFilter:p=null}){var f,m,g;null==(f=this._stats)||f.time("Overall");const v=this._transport.getRenderingIntent(r,s,d,u),{renderingIntent:y,cacheKey:x}=v;Wf(this,Wi,!1),o||(o=this._transport.getOptionalContentConfig(y));let b=this._intentStates.get(x);b||(b=Object.create(null),this._intentStates.set(x,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const w=!!(y&$3);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(m=this._stats)||m.time("Page Request"),this._pumpOperatorList(v));const k=Boolean(this._pdfBug&&(null==(g=globalThis.StepperManager)?void 0:g.enabled)),S=!this.recordedBBoxes&&(h||k),j=e=>{var t,n;if(b.renderTasks.delete(_),S){const e=null==(t=_.gfx)?void 0:t.dependencyTracker.take();e&&(_.stepper&&_.stepper.setOperatorBBoxes(e,_.gfx.dependencyTracker.takeDebugMetadata()),h&&(this.recordedBBoxes=e))}w&&Wf(this,Wi,!0),Vf(this,$i,Vi).call(this),e?(_.capability.reject(e),this._abortOperatorList({intentState:b,reason:e instanceof Error?e:new Error(e)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(n=globalThis.Stats)?void 0:n.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new g9({callback:j,params:{canvas:t,canvasContext:e,dependencyTracker:S?new O8(t,b.operatorList.length,k):null,viewport:n,transform:a,background:i},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(b.renderTasks||(b.renderTasks=new Set)).add(_);const A=_.task;return Promise.all([b.displayReadyCapability.promise,o]).then(([e,t])=>{var n;if(this.destroyed)j();else{if(null==(n=this._stats)||n.time("Rendering"),!(t.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:e,optionalContentConfig:t}),_.operatorListChanged()}}).catch(j),A}getOperatorList({intent:e="display",annotationMode:t=X3.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var s;const a=this._transport.getRenderingIntent(e,t,n,r,!0);let i,o=this._intentStates.get(a.cacheKey);return o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o)),o.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(i))},o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(i),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>H5.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const r=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){r.read().then(function({value:n,done:r}){r?e(s):(s.lang??(s.lang=n.lang),Object.assign(s.styles,n.styles),s.items.push(...n.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Wf(this,Wi,!1),Promise.all(e)}cleanup(e=!1){Wf(this,Wi,!0);const t=Vf(this,$i,Vi).call(this);return e&&t&&this._stats&&(this._stats=new t6),t}_startRenderPage(e,t){var n,r;const s=this._intentStates.get(t);s&&(null==(n=this._stats)||n.timeEnd("Page Request"),null==(r=s.displayReadyCapability)||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Vf(this,$i,Vi).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:a}=n,i=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),o=this._intentStates.get(t);o.streamReader=i;const l=()=>{i.read().then(({value:e,done:t})=>{t?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,o),l())},e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const e of o.renderTasks)e.operatorListChanged();Vf(this,$i,Vi).call(this)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else{if(!o.opListReadCapability)throw e;o.opListReadCapability.reject(e)}}})};l()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Z5){let n=100;return t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n))}}if(e.streamReader.cancel(new M5(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}Wi=new WeakMap,$i=new WeakSet,Vi=function(){if(!Bf(this,Wi)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Wf(this,Wi,!1),!0};const u9=class e{constructor({name:t=null,port:n=null,verbosity:r=x5()}={}){if(Uf(this,Zi),Uf(this,eo),Uf(this,no),Uf(this,so),Uf(this,Hi,Promise.withResolvers()),Uf(this,qi,null),Uf(this,Gi,null),Uf(this,Ki,null),this.name=t,this.destroyed=!1,this.verbosity=r,n){if(Bf(e,Ji).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Bf(e,Ji).set(n,this),Vf(this,eo,to).call(this,n)}else Vf(this,no,ro).call(this)}get promise(){return Bf(this,Hi).promise}get port(){return Bf(this,Gi)}get messageHandler(){return Bf(this,qi)}destroy(){var t,n;this.destroyed=!0,null==(t=Bf(this,Ki))||t.terminate(),Wf(this,Ki,null),Bf(e,Ji).delete(Bf(this,Gi)),Wf(this,Gi,null),null==(n=Bf(this,qi))||n.destroy(),Wf(this,qi,null)}static create(t){const n=Bf(this,Ji).get(null==t?void 0:t.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new e(t)}static get workerSrc(){if(T7.workerSrc)return T7.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return A5(this,"_setupFakeWorkerGlobal",(async()=>{if(Bf(this,io,oo))return Bf(this,io,oo);return(await Gf(()=>import(this.workerSrc),[])).WorkerMessageHandler})())}};Hi=new WeakMap,qi=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,Zi=new WeakSet,Qi=function(){Bf(this,Hi).resolve(),Bf(this,qi).send("configure",{verbosity:this.verbosity})},eo=new WeakSet,to=function(e){Wf(this,Gi,e),Wf(this,qi,new u8("main","worker",e)),Bf(this,qi).on("ready",()=>{}),Vf(this,Zi,Qi).call(this)},no=new WeakSet,ro=function(){if(Bf(u9,Yi)||Bf(u9,io,oo))return void Vf(this,so,ao).call(this);let{workerSrc:e}=u9;try{u9._isSameOrigin(window.location,e)||(e=u9._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new u8("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?Bf(this,Hi).reject(new Error("Worker was destroyed")):Vf(this,so,ao).call(this)},s=new AbortController;t.addEventListener("error",()=>{Bf(this,Ki)||r()},{signal:s.signal}),n.on("test",e=>{s.abort(),!this.destroyed&&e?(Wf(this,qi,n),Wf(this,Gi,t),Wf(this,Ki,t),Vf(this,Zi,Qi).call(this)):r()}),n.on("ready",e=>{if(s.abort(),this.destroyed)r();else try{a()}catch{Vf(this,so,ao).call(this)}});const a=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void a()}catch{b5("The worker has been disabled.")}Vf(this,so,ao).call(this)},so=new WeakSet,ao=function(){Bf(u9,Yi)||(w5("Setting up fake worker."),Wf(u9,Yi,!0)),u9._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void Bf(this,Hi).reject(new Error("Worker was destroyed"));const t=new Z6;Wf(this,Gi,t);const n="fake"+$f(u9,Xi)._++,r=new u8(n+"_worker",n,t);e.setup(r,t),Wf(this,qi,new u8(n,n+"_worker",t)),Vf(this,Zi,Qi).call(this)}).catch(e=>{Bf(this,Hi).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},io=new WeakSet,oo=function(){var e;try{return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch{return null}},Uf(u9,io),Uf(u9,Xi,0),Uf(u9,Yi,!1),Uf(u9,Ji,new WeakMap),L3&&(Wf(u9,Yi,!0),T7.workerSrc||(T7.workerSrc="./pdf.worker.mjs")),u9._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(null==n?void 0:n.origin)||"null"===n.origin)return!1;const r=new URL(t,n);return n.origin===r.origin},u9._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},u9.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),!(null==e?void 0:e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return u9.create(e)};let h9=u9;class p9{constructor(e,t,n,r,s,a){Uf(this,fo),Uf(this,lo,new Map),Uf(this,co,new Map),Uf(this,uo,new Map),Uf(this,ho,new Map),Uf(this,po,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new n9,this.fontLoader=new G6({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return A5(this,"annotationStorage",new H6)}getRenderingIntent(e,t=X3.ENABLE,n=null,r=!1,s=!1){let a=W3,i=V6;switch(e){case"any":a=U3;break;case"display":break;case"print":a=$3;break;default:w5(`getRenderingIntent - invalid intent: ${e}`)}const o=a&$3&&n instanceof q6?n:this.annotationStorage;switch(t){case X3.DISABLE:a+=q3;break;case X3.ENABLE:break;case X3.ENABLE_FORMS:a+=V3;break;case X3.ENABLE_STORAGE:a+=H3,i=o.serializable;break;default:w5(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=G3),s&&(a+=K3);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:a,cacheKey:[a,i.hash,c].join("_"),annotationStorageSerializable:i,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=Bf(this,po))||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of Bf(this,co).values())t.push(r._destroy());Bf(this,co).clear(),Bf(this,uo).clear(),Bf(this,ho).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),Bf(this,lo).clear(),this.filterFactory.destroy(),s9.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new M5("Worker was terminated.")),null==(t=this.messageHandler)||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{S5(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function({value:e,done:n}){n?t.close():(S5(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{var n;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return r&&s||(this._lastProgress&&(null==(n=t.onProgress)||n.call(t,this._lastProgress)),this._fullReader.onProgress=e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(e,t)=>{S5(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function({value:e,done:n}){n?t.close():(S5(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new c9(e,this))}),e.on("DocException",e=>{t._capability.reject(d8(e))}),e.on("PasswordRequest",e=>{Wf(this,po,Promise.withResolvers());try{if(!t.onPassword)throw d8(e);const n=e=>{e instanceof Error?Bf(this,po).reject(e):Bf(this,po).resolve({password:e})};t.onPassword(n,e.code)}catch(n){Bf(this,po).reject(n)}return Bf(this,po).promise}),e.on("DataLoaded",e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;Bf(this,co).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",([t,n,r])=>{var s;if(this.destroyed)return null;if(this.commonObjs.has(t))return null;switch(n){case"Font":if("error"in r){const e=r.error;w5(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}const a=new E7(r),i=this._params.pdfBug&&(null==(s=globalThis.FontInspector)?void 0:s.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new K6(a,i,r.extra,r.charProcOperatorList);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:t})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(t,o)});break;case"CopyLocalImage":const{imageRef:l}=r;S5(l,"The imageRef must be defined.");for(const e of Bf(this,co).values())for(const[,n]of e.objs)if((null==n?void 0:n.ref)===l)return n.dataLen?(this.commonObjs.resolve(t,structuredClone(n)),n.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(t,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([e,t,n,r])=>{var s;if(this.destroyed)return;const a=Bf(this,co).get(t);if(!a.objs.has(e))if(0!==a._intentStates.size)switch(n){case"Image":case"Pattern":a.objs.resolve(e,r);break;default:throw new Error(`Got unknown object type ${n}`)}else null==(s=null==r?void 0:r.bitmap)||s.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error(`${e.type} not initialized, see the \`useWorkerFetch\` parameter.`);return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;this.annotationStorage.size<=0&&w5("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:(null==(e=this._fullReader)?void 0:e.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=Bf(this,uo).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&Bf(this,ho).set(n.refStr,e);const r=new d9(t,n,this,this._params.pdfBug);return Bf(this,co).set(t,r),r});return Bf(this,uo).set(t,r),r}getPageIndex(e){return Y6(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Vf(this,fo,mo).call(this,"GetFieldObjects")}hasJSActions(){return Vf(this,fo,mo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return Vf(this,fo,mo).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Vf(this,fo,mo).call(this,"GetOptionalContentConfig").then(t=>new R7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=Bf(this,lo).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n;return{info:e[0],metadata:e[1]?new N7(e[1]):null,contentDispositionFilename:(null==(t=this._fullReader)?void 0:t.filename)??null,contentLength:(null==(n=this._fullReader)?void 0:n.contentLength)??null}});return Bf(this,lo).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of Bf(this,co).values()){if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`)}this.commonObjs.clear(),e||this.fontLoader.clear(),Bf(this,lo).clear(),this.filterFactory.destroy(!0),s9.cleanup()}}cachedPageNumber(e){if(!Y6(e))return null;const t=0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`;return Bf(this,ho).get(t)??null}}lo=new WeakMap,co=new WeakMap,uo=new WeakMap,ho=new WeakMap,po=new WeakMap,fo=new WeakSet,mo=function(e,t=null){const n=Bf(this,lo).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return Bf(this,lo).set(e,r),r};class f9{constructor(e){Uf(this,go,null),Lf(this,"onContinue",null),Lf(this,"onError",null),Wf(this,go,e)}get promise(){return Bf(this,go).capability.promise}cancel(e=0){Bf(this,go).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=Bf(this,go).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=Bf(this,go);return e.form||e.canvas&&(null==t?void 0:t.size)>0}}go=new WeakMap;const m9=class e{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:i,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null,enableHWA:h=!1,operationsFilter:p=null}){Uf(this,vo,null),this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=i,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new f9(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=h,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){var r,s;if(this.cancelled)return;if(this._canvas){if(Bf(e,yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Bf(e,yo).add(this._canvas)}this._pdfBug&&(null==(r=globalThis.StepperManager)?void 0:r.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:a,transform:i,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new w7(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null==(s=this.graphicsReadyCallback)||s.call(this)}cancel(t=null,n=0){var r,s,a;this.running=!1,this.cancelled=!0,null==(r=this.gfx)||r.endDrawing(),Bf(this,vo)&&(window.cancelAnimationFrame(Bf(this,vo)),Wf(this,vo,null)),Bf(e,yo).delete(this._canvas),t||(t=new Z5(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(t),null==(a=(s=this.task).onError)||a.call(s,t)}operatorListChanged(){var e,t;this.graphicsReady?(null==(e=this.gfx.dependencyTracker)||e.growOperationsCount(this.operatorList.fnArray.length),null==(t=this.stepper)||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Wf(this,vo,window.requestAnimationFrame(()=>{Wf(this,vo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Bf(e,yo).delete(this._canvas),this.callback())))}};vo=new WeakMap,yo=new WeakMap,Uf(m9,yo,new WeakSet);let g9=m9;const v9="5.4.296",y9=class e{constructor({editor:t=null,uiManager:n=null}){var r,s;Uf(this,Co),Uf(this,Ro),Uf(this,Io),Uf(this,zo),Uf(this,Lo),Uf(this,Bo),Uf(this,xo,null),Uf(this,bo,null),Uf(this,wo,void 0),Uf(this,ko,null),Uf(this,So,!1),Uf(this,jo,!1),Uf(this,_o,null),Uf(this,Ao,void 0),Uf(this,Eo,null),Uf(this,To,null),t?(Wf(this,jo,!1),Wf(this,_o,t)):Wf(this,jo,!0),Wf(this,To,(null==t?void 0:t._uiManager)||n),Wf(this,Ao,Bf(this,To)._eventBus),Wf(this,wo,(null==(r=null==t?void 0:t.color)?void 0:r.toUpperCase())||(null==(s=Bf(this,To))?void 0:s.highlightColors.values().next().value)||"#FFFF98"),Bf(e,No)||Wf(e,No,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return A5(this,"_keyboardManager",new E6([[["Escape","mac+Escape"],e.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],e.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],e.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],e.prototype._moveToPrevious],[["Home","mac+Home"],e.prototype._moveToBeginning],[["End","mac+End"],e.prototype._moveToEnd]]))}renderButton(){const e=Wf(this,xo,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",Bf(this,_o)&&(e.ariaControls=`${Bf(this,_o).id}_colorpicker_dropdown`);const t=Bf(this,To)._signal;e.addEventListener("click",Vf(this,zo,Do).bind(this),{signal:t}),e.addEventListener("keydown",Vf(this,Io,Oo).bind(this),{signal:t});const n=Wf(this,bo,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=Bf(this,wo),e.append(n),e}renderMainDropdown(){const e=Wf(this,ko,Vf(this,Co,Po).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===Bf(this,xo))return void Vf(this,zo,Do).call(this,e);const t=e.target.getAttribute("data-color");t&&Vf(this,Ro,Mo).call(this,t,e)}_moveToNext(e){var t,n;Bf(this,Bo,Uo)?e.target!==Bf(this,xo)?null==(n=e.target.nextSibling)||n.focus():null==(t=Bf(this,ko).firstChild)||t.focus():Vf(this,zo,Do).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null==(t=Bf(this,ko))?void 0:t.firstChild)&&e.target!==Bf(this,xo)?(Bf(this,Bo,Uo)||Vf(this,zo,Do).call(this,e),null==(n=e.target.previousSibling)||n.focus()):Bf(this,Bo,Uo)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;Bf(this,Bo,Uo)?null==(t=Bf(this,ko).firstChild)||t.focus():Vf(this,zo,Do).call(this,e)}_moveToEnd(e){var t;Bf(this,Bo,Uo)?null==(t=Bf(this,ko).lastChild)||t.focus():Vf(this,zo,Do).call(this,e)}hideDropdown(){var e,t;null==(e=Bf(this,ko))||e.classList.add("hidden"),Bf(this,xo).ariaExpanded="false",null==(t=Bf(this,Eo))||t.abort(),Wf(this,Eo,null)}_hideDropdownFromKeyboard(){var e;Bf(this,jo)||(Bf(this,Bo,Uo)?(this.hideDropdown(),Bf(this,xo).focus({preventScroll:!0,focusVisible:Bf(this,So)})):null==(e=Bf(this,_o))||e.unselect())}updateColor(e){if(Bf(this,bo)&&(Bf(this,bo).style.backgroundColor=e),!Bf(this,ko))return;const t=Bf(this,To).highlightColors.values();for(const n of Bf(this,ko).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null==(e=Bf(this,xo))||e.remove(),Wf(this,xo,null),Wf(this,bo,null),null==(t=Bf(this,ko))||t.remove(),Wf(this,ko,null)}};xo=new WeakMap,bo=new WeakMap,wo=new WeakMap,ko=new WeakMap,So=new WeakMap,jo=new WeakMap,_o=new WeakMap,Ao=new WeakMap,Eo=new WeakMap,To=new WeakMap,No=new WeakMap,Co=new WeakSet,Po=function(){const e=document.createElement("div"),t=Bf(this,To)._signal;e.addEventListener("contextmenu",r6,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Bf(this,_o)&&(e.id=`${Bf(this,_o).id}_colorpicker_dropdown`);for(const[n,r]of Bf(this,To).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",Bf(y9,No)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===Bf(this,wo),s.addEventListener("click",Vf(this,Ro,Mo).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",Vf(this,Io,Oo).bind(this),{signal:t}),e},Ro=new WeakSet,Mo=function(e,t){t.stopPropagation(),Bf(this,Ao).dispatch("switchannotationeditorparams",{source:this,type:Z3.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Io=new WeakSet,Oo=function(e){y9._keyboardManager.exec(this,e)},zo=new WeakSet,Do=function(e){if(Bf(this,Bo,Uo))return void this.hideDropdown();if(Wf(this,So,0===e.detail),Bf(this,Eo)||(Wf(this,Eo,new AbortController),window.addEventListener("pointerdown",Vf(this,Lo,Fo).bind(this),{signal:Bf(this,To).combinedSignal(Bf(this,Eo))})),Bf(this,xo).ariaExpanded="true",Bf(this,ko))return void Bf(this,ko).classList.remove("hidden");const t=Wf(this,ko,Vf(this,Co,Po).call(this));Bf(this,xo).append(t)},Lo=new WeakSet,Fo=function(e){var t;(null==(t=Bf(this,ko))?void 0:t.contains(e.target))||this.hideDropdown()},Bo=new WeakSet,Uo=function(){return Bf(this,ko)&&!Bf(this,ko).classList.contains("hidden")},Uf(y9,No,null);let x9=y9;const b9=class e{constructor(t){Uf(this,Wo,null),Uf(this,$o,null),Uf(this,Vo,null),Wf(this,$o,t),Wf(this,Vo,t._uiManager),Bf(e,Ho)||Wf(e,Ho,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Bf(this,Wo))return Bf(this,Wo);const{editorType:t,colorType:n,colorValue:r}=Bf(this,$o),s=Wf(this,Wo,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Bf(e,Ho)[t]),s.addEventListener("input",()=>{Bf(this,Vo).updateParams(n,s.value)},{signal:Bf(this,Vo)._signal}),s}update(e){Bf(this,Wo)&&(Bf(this,Wo).value=e)}destroy(){var e;null==(e=Bf(this,Wo))||e.remove(),Wf(this,Wo,null)}hideDropdown(){}};Wo=new WeakMap,$o=new WeakMap,Vo=new WeakMap,Ho=new WeakMap,Uf(b9,Ho,null);let w9=b9;function k9(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function S9(e){return Math.max(0,Math.min(255,255*e))}class j9{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=S9(e),e,e]}static G_HTML([e]){const t=k9(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(S9)}static RGB_HTML(e){return`#${e.map(k9).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[S9(1-Math.min(1,e+r)),S9(1-Math.min(1,n+r)),S9(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,a=1-n;return["CMYK",r,s,a,Math.min(r,s,a)]}}class _9{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){k5("Abstract method `_createSVG` called.")}}class A9 extends _9{_createSVG(e){return document.createElementNS(G5,e)}}const E9=new WeakSet,T9=60*(new Date).getTimezoneOffset()*1e3;class N9{static create(e){switch(e.data.annotationType){case i5.LINK:return new R9(e);case i5.TEXT:return new M9(e);case i5.WIDGET:switch(e.data.fieldType){case"Tx":return new O9(e);case"Btn":return e.data.radioButton?new L9(e):e.data.checkBox?new D9(e):new F9(e);case"Ch":return new B9(e);case"Sig":return new z9(e)}return new I9(e);case i5.POPUP:return new U9(e);case i5.FREETEXT:return new $9(e);case i5.LINE:return new V9(e);case i5.SQUARE:return new H9(e);case i5.CIRCLE:return new q9(e);case i5.POLYLINE:return new G9(e);case i5.CARET:return new X9(e);case i5.INK:return new Y9(e);case i5.POLYGON:return new K9(e);case i5.HIGHLIGHT:return new J9(e);case i5.UNDERLINE:return new Z9(e);case i5.SQUIGGLY:return new Q9(e);case i5.STRIKEOUT:return new eee(e);case i5.STAMP:return new tee(e);case i5.FILEATTACHMENT:return new nee(e);default:return new C9(e)}}}qo=new WeakMap,Go=new WeakMap,Ko=new WeakMap,Xo=new WeakSet,Yo=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:i,pageY:o}}}}=this;null==n||n.splice(0,4,...e),t.left=100*(e[0]-i)/s+"%",t.top=100*(a-e[3]+o)/a+"%",0===r?(t.width=100*(e[2]-e[0])/s+"%",t.height=100*(e[3]-e[1])/a+"%"):this.setRotation(r)};let C9=class e{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){Uf(this,Xo),Uf(this,qo,null),Uf(this,Go,!1),Uf(this,Ko,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!(!(null==e?void 0:e.str)&&!(null==t?void 0:t.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return e._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var e;const{data:t}=this,n=null==(e=this.annotationStorage)?void 0:e.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var e;const t=null==(e=this.annotationStorage)?void 0:e.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:s}=this.data;let a=-1/0,i=-1/0;if((null==n?void 0:n.length)>=8){for(let e=0;e<n.length;e+=8)n[e+1]>i?(i=n[e+1],a=n[e+2]):n[e+1]===i&&(a=Math.max(a,n[e+2]));return[a,i]}if((null==r?void 0:r.length)>=1){for(const e of r)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>i?(i=e[t+1],a=e[t]):e[t+1]===i&&(a=Math.max(a,e[t]));if(a!==1/0)return[a,i]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-a)/r,e}get commentText(){var e,t,n;const{data:r}=this;return(null==(t=null==(e=this.annotationStorage.getRawValue(`${Y3}${r.id}`))?void 0:e.popup)?void 0:t.contents)||(null==(n=r.contentsObj)?void 0:n.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${Y3}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;null==(t=(null==(e=Bf(this,Ko))?void 0:e.popup)||this.popup)||t.remove(),Wf(this,Ko,this.popup=null)}updateEdited(e){var t;if(!this.container)return;e.rect&&(Bf(this,qo)||Wf(this,qo,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&Vf(this,Xo,Yo).call(this,n);let s=(null==(t=Bf(this,Ko))?void 0:t.popup)||this.popup;!s&&(null==r?void 0:r.text)&&(this._createPopup(r),s=Bf(this,Ko).popup),s&&(s.updateEdited(e),(null==r?void 0:r.deleted)&&(s.remove(),Wf(this,Ko,null),this.popup=null))}resetEdited(){var e;Bf(this,qo)&&(Vf(this,Xo,Yo).call(this,Bf(this,qo).rect),null==(e=Bf(this,Ko))||e.popup.resetEdited(),Wf(this,qo,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof I9||this instanceof R9||(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof U9){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:i,height:o}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t=`calc(${e}px * var(--total-scale-factor)) / calc(${n}px * var(--total-scale-factor))`;a.borderRadius=t}else if(this instanceof L9){const e=`calc(${i}px * var(--total-scale-factor)) / calc(${o}px * var(--total-scale-factor))`;a.borderRadius=e}switch(t.borderStyle.style){case o5:a.borderStyle="solid";break;case l5:a.borderStyle="dashed";break;case c5:w5("Unimplemented border style: beveled");break;case d5:w5("Unimplemented border style: inset");break;case u5:a.borderBottomStyle="solid"}const r=t.borderColor||null;r?(Wf(this,Go,!0),a.borderColor=L5.makeHexColor(0|r[0],0|r[1],0|r[2])):a.borderWidth=0}const l=L5.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=r.rawDims;a.left=100*(l[0]-u)/c+"%",a.top=100*(l[1]-h)/d+"%";const{rotation:p}=t;return t.hasOwnCanvas||0===p?(a.width=100*i/c+"%",a.height=100*o/d+"%"):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!=0&&([s,a]=[a,s]),t.style.width=100*s/n+"%",t.style.height=100*a/r+"%",t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],s=r[0],a=r.slice(1);n.target.style[t]=j9[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[t]:j9[`${s}_rgb`](a)})};return A5(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];null==s||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const a=n[r];if(a){a({detail:{[r]:s},target:e}),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[a,i,o,l]=e.subarray(2,6);if(r===a&&s===i&&t===o&&n===l)return}const{style:a}=this.container;let i;if(Bf(this,Go)){const{borderColor:e,borderWidth:t}=a;a.borderWidth=0,i=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${e}" stroke-width="${t}">`],this.container.classList.add("hasBorder")}const o=r-t,l=s-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p=`clippath_${this.data.id}`;h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,m=e.length;f<m;f+=8){const n=e[f],r=e[f+1],a=e[f+2],d=e[f+3],u=c.createElement("rect"),p=(a-t)/o,m=(s-r)/l,g=(n-a)/o,v=(r-d)/l;u.setAttribute("x",p),u.setAttribute("y",m),u.setAttribute("width",g),u.setAttribute("height",v),h.append(u),null==i||i.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${m}" width="${g}" height="${v}"/>`)}Bf(this,Go)&&(i.push("</g></svg>')"),a.backgroundImage=i.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const s=Wf(this,Ko,new U9({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(Bf(this,Ko)||this.popup||this.data.popupRef)}get extraPopupElement(){return Bf(this,Ko)}render(){k5("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:s,exportValues:a}of r){if(-1===e)continue;if(s===t)continue;const r="string"==typeof a?a:null,i=document.querySelector(`[data-element-id="${s}"]`);!i||E9.has(i)?n.push({id:s,exportValue:r,domElement:i}):w5(`_getElementsByName - element not allowed: ${s}`)}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,s=r.getAttribute("data-element-id");s!==t&&(E9.has(r)&&n.push({id:s,exportValue:e,domElement:r}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null==(n=this.linkService.eventBus)||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};class P9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class R9 extends C9{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),Uf(this,Jo),Uf(this,Qo),Uf(this,tl),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),r=!0):e.attachment?(Vf(this,Qo,el).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(Vf(this,tl,nl).call(this,n,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&Vf(this,Jo,Zo).call(this),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),Vf(this,Jo,Zo).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const s=n.get(r);s&&(e[s]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),Vf(this,Jo,Zo).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),Vf(this,Jo,Zo).call(this),!this._fieldObjects)return w5('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{var e;null==n||n();const{fields:r,refs:s,include:a}=t,i=[];if(0!==r.length||0!==s.length){const e=new Set(s);for(const t of r){const n=this._fieldObjects[t]||[];for(const{id:t}of n)e.add(t)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===a&&i.push(n)}else for(const t of Object.values(this._fieldObjects))i.push(...t);const o=this.annotationStorage,l=[];for(const t of i){const{id:e}=t;switch(l.push(e),t.type){case"text":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;o.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";o.setValue(e,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${e}"]`);n&&(E9.has(n)?n.dispatchEvent(new Event("resetform")):w5(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&(null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}Jo=new WeakSet,Zo=function(){this.container.setAttribute("data-internal-link","")},Qo=new WeakSet,el=function(e,t,n="",r=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,r),!1},Vf(this,Jo,Zo).call(this)},tl=new WeakSet,nl=function(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),Vf(this,Jo,Zo).call(this)};class M9 extends C9{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class I9 extends C9{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null==(t=e.previousSibling)?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return z5.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var a;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(e)}}))})}_setEventListeners(e,t,n,r){var s,a,i;for(const[o,l]of n)("Action"===l||(null==(s=this.data.actions)?void 0:s[l]))&&("Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||(null==(a=this.data.actions)?void 0:a.Blur)?"Blur"!==l||(null==(i=this.data.actions)?void 0:i.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":L5.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let a;const i=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(B3*r))||1);a=Math.min(r,i(t/B3))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(r,i(e/B3))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=L5.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class O9 extends I9{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[r]:n})}render(){var e,t;const n=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=n.getValue(r,{value:this.data.fieldValue});let i=a.value||"";const o=n.getValue(r,{charLimit:this.data.maxLen}).charLimit;o&&i.length>o&&(i=i.slice(0,o));let l=a.formattedValue||(null==(e=this.data.textContent)?void 0:e.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:i,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=l??i,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",l??i),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),E9.add(s),s.setAttribute("data-element-id",r),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:d,datetimeType:u,timeStep:h}=this.data,p=!!u&&this.enableScripting;d&&(s.title=d),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",e=>{n.setValue(r,{value:e.target.value}),this.setPropertyOnSiblings(s,"value",e.target.value,"value"),c.formattedValue=null}),s.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue??"";s.value=c.userValue=t,c.formattedValue=null});let f=e=>{const{formattedValue:t}=c;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=u,h&&(n.step=h)),c.userValue){const e=c.userValue;if(p)if("time"===u){const t=new Date(e),r=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=r.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-T9).toISOString().split("date"===u?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,(null==(t=this.data.actions)?void 0:t.Focus)||(c.focused=!0)}),s.addEventListener("updatefromsandbox",e=>{this.showElementAndHideCanvas(e.target);const t={value(e){c.userValue=e.detail.value??"",p||n.setValue(r,{value:c.userValue.toString()}),e.target.value=c.userValue},formattedValue(e){const{formattedValue:t}=e.detail;c.formattedValue=t,null!=t&&e.target!==document.activeElement&&(e.target.value=t);const s={formattedValue:t};p&&(s.value=t),n.setValue(r,s)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:e=>{var t;const{charLimit:s}=e.detail,{target:a}=e;if(0===s)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",s);let i=c.userValue;!i||i.length<=s||(i=i.slice(0,s),a.value=c.userValue=i,n.setValue(r,{value:i}),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}};this._dispatchEventFromSandbox(t,e)}),s.addEventListener("keydown",e=>{var t;c.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):n=2,-1===n)return;const{value:s}=e.target;c.lastCommittedValue!==s&&(c.lastCommittedValue=s,c.userValue=s,null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:s,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const e=f;f=null,s.addEventListener("blur",t=>{var n,s;if(!c.focused||!t.relatedTarget)return;(null==(n=this.data.actions)?void 0:n.Blur)||(c.focused=!1);const{target:a}=t;let{value:i}=a;if(p){if(i&&"time"===u){const e=i.split(":").map(e=>parseInt(e,10));i=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),a.step=""}else i.includes("T")||(i=`${i}T00:00`),i=new Date(i).valueOf();a.type="text"}c.userValue=i,c.lastCommittedValue!==i&&(null==(s=this.linkService.eventBus)||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:i,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),e(t)}),(null==(t=this.data.actions)?void 0:t.Keystroke)&&s.addEventListener("beforeinput",e=>{var t;c.lastCommittedValue=null;const{data:n,target:s}=e,{value:a,selectionStart:i,selectionEnd:o}=s;let l=i,d=o;switch(e.inputType){case"deleteWordBackward":{const e=a.substring(0,i).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=a.substring(i).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":i===o&&(l-=1);break;case"deleteContentForward":i===o&&(d+=1)}e.preventDefault(),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:a,change:n||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(s,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${e}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class z9 extends I9{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class D9 extends I9{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return E9.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",r=>{const{name:s,checked:a}=r.target;for(const i of this._getElementsByName(s,n)){const n=a&&i.exportValue===t.exportValue;i.domElement&&(i.domElement.checked=n),e.setValue(i.id,{value:n})}e.setValue(n,{value:a})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class L9 extends I9{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(E9.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",t=>{const{name:r,checked:s}=t.target;for(const a of this._getElementsByName(r,n))e.setValue(a.id,{value:!1});e.setValue(n,{value:s})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!=n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;s.addEventListener("updatefromsandbox",t=>{const s={value:t=>{const s=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=s&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class F9 extends R9{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class B9 extends I9{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");E9.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),s=!1),r.append(e)}let a=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const i=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=r;return s?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=i(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",n=>{const s={value(n){null==a||a();const s=n.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const e of r.options)e.selected=l.has(e.value);e.setValue(t,{value:i(!0)}),o=i(!1)},multipleSelection(e){r.multiple=!0},remove(n){const s=r.options,a=n.detail.remove;if(s[a].selected=!1,r.remove(a),s.length>0){-1===Array.prototype.findIndex.call(s,e=>e.selected)&&(s[0].selected=!0)}e.setValue(t,{value:i(!0),items:l(n)}),o=i(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=i(!1)},insert(n){const{index:s,displayValue:a,exportValue:c}=n.detail.insert,d=r.children[s],u=document.createElement("option");u.textContent=a,u.value=c,d?d.before(u):r.append(u),e.setValue(t,{value:i(!0),items:l(n)}),o=i(!1)},items(n){const{items:s}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,r.append(s)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:i(!0),items:l(n)}),o=i(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:i(!0)}),o=i(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)}),r.addEventListener("input",n=>{var r;const s=i(!0),a=i(!1);e.setValue(t,{value:s}),n.preventDefault(),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:a,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):r.addEventListener("input",function(n){e.setValue(t,{value:i(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class U9 extends C9{constructor(e){const{data:t,elements:n,parent:r}=e,s=!!r._commentManager;if(super(e,{isRenderable:!s&&C9._hasPopupData(t)}),Uf(this,rl),this.elements=n,s&&C9._hasPopupData(t)){const e=this.popup=Vf(this,rl,sl).call(this);for(const t of n)t.popup=e}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=Vf(this,rl,sl).call(this),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>`${W5}${e}`).join(",")),this.container}}rl=new WeakSet,sl=function(){return new W9({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};class W9{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:i,parent:o,rect:l,parentRect:c,open:d,commentManager:u=null}){Uf(this,Pl),Uf(this,Ml),Uf(this,Ol),Uf(this,Dl),Uf(this,Fl),Uf(this,Ul),Uf(this,$l),Uf(this,Hl),Uf(this,Gl),Uf(this,Xl),Uf(this,Jl),Uf(this,Ql),Uf(this,tc),Uf(this,al,null),Uf(this,il,Vf(this,Gl,Kl).bind(this)),Uf(this,ol,Vf(this,tc,nc).bind(this)),Uf(this,ll,Vf(this,Ql,ec).bind(this)),Uf(this,cl,Vf(this,Jl,Zl).bind(this)),Uf(this,dl,null),Uf(this,ul,null),Uf(this,hl,null),Uf(this,pl,null),Uf(this,fl,null),Uf(this,ml,null),Uf(this,gl,null),Uf(this,vl,!1),Uf(this,yl,null),Uf(this,xl,null),Uf(this,bl,null),Uf(this,wl,null),Uf(this,kl,null),Uf(this,Sl,null),Uf(this,jl,null),Uf(this,_l,null),Uf(this,Al,null),Uf(this,El,null),Uf(this,Tl,!1),Uf(this,Nl,null),Uf(this,Cl,null),Wf(this,ul,e),Wf(this,Al,r),Wf(this,hl,a),Wf(this,_l,i),Wf(this,ml,o),Wf(this,dl,t),Wf(this,jl,l),Wf(this,gl,c),Wf(this,fl,n),Wf(this,al,u),Wf(this,Nl,n[0]),Wf(this,pl,a6.toDateObject(s)),this.trigger=n.flatMap(e=>e.getElementsToTriggerPopup()),u?this.renderCommentButton():(Vf(this,Pl,Rl).call(this),Bf(this,ul).hidden=!0,d&&Vf(this,Jl,Zl).call(this))}renderCommentButton(){if(Bf(this,wl))return;if(Bf(this,kl)||Vf(this,Ml,Il).call(this),!Bf(this,kl))return;const{signal:e}=Wf(this,xl,new AbortController),t=!!Bf(this,Nl).extraPopupElement,n=()=>{Bf(this,al).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{Bf(this,al).toggleCommentPopup(this,!1,!0,!t)},s=()=>{Bf(this,al).toggleCommentPopup(this,!1,!1)};if(t){Wf(this,wl,Bf(this,Nl).container);for(const t of this.trigger)t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.addEventListener("keydown",Bf(this,il),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",r,{signal:e}),t.addEventListener("pointerleave",s,{signal:e}),t.classList.add("popupTriggerArea")}else{const t=Wf(this,wl,document.createElement("button"));t.className="annotationCommentButton";const a=Bf(this,Nl).container;t.style.zIndex=a.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Vf(this,Dl,Ll).call(this),Vf(this,Ol,zl).call(this),t.addEventListener("keydown",Bf(this,il),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",r,{signal:e}),t.addEventListener("pointerleave",s,{signal:e}),a.after(t)}}get commentButtonColor(){const{color:e,opacity:t}=Bf(this,Nl).commentData;return e?Bf(this,ml)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;null==(e=Bf(this,wl))||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:s}=Bf(this,Nl).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:s}}get elementBeforePopup(){return Bf(this,wl)}get comment(){return Bf(this,Cl)||Wf(this,Cl,Bf(this,Nl).commentText),Bf(this,Cl)}set comment(e){e!==this.comment&&(Bf(this,Nl).commentText=Wf(this,Cl,e))}get parentBoundingClientRect(){return Bf(this,Nl).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){Bf(this,wl)&&(Bf(this,wl).classList.toggle("selected",e),Bf(this,wl).ariaExpanded=t)}setSelectedCommentButton(e){Bf(this,wl).classList.toggle("selected",e)}get commentPopupPosition(){if(Bf(this,Sl))return Bf(this,Sl);const{x:e,y:t,height:n}=Bf(this,wl).getBoundingClientRect(),{x:r,y:s,width:a,height:i}=Bf(this,Nl).layer.getBoundingClientRect();return[(e-r)/a,(t+n-s)/i]}set commentPopupPosition(e){Wf(this,Sl,e)}hasDefaultPopupPosition(){return null===Bf(this,Sl)}get commentButtonPosition(){return Bf(this,kl)}get commentButtonWidth(){return Bf(this,wl).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=Bf(this,Sl)||this.commentButtonPosition.map(e=>e/100),r=this.parentBoundingClientRect,{x:s,y:a,width:i,height:o}=r;Bf(this,al).showDialog(null,this,s+t*i,a+n*o,{...e,parentDimensions:r})}render(){var e,t;if(Bf(this,yl))return;const n=Wf(this,yl,document.createElement("div"));if(n.className="popup",Bf(this,dl)){const e=n.style.outlineColor=L5.makeHexColor(...Bf(this,dl));n.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`}const r=document.createElement("span");if(r.className="header",null==(e=Bf(this,Al))?void 0:e.str){const e=document.createElement("span");e.className="title",r.append(e),({dir:e.dir,str:e.textContent}=Bf(this,Al))}if(n.append(r),Bf(this,pl)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:Bf(this,pl).valueOf()})),e.dateTime=Bf(this,pl).toISOString(),r.append(e)}y6({html:Bf(this,Fl,Bl)||Bf(this,hl).str,dir:null==(t=Bf(this,hl))?void 0:t.dir,className:"popupContent"},n),Bf(this,ul).append(n)}updateEdited({rect:e,popup:t,deleted:n}){var r;if(Bf(this,al))return n?(this.remove(),Wf(this,Cl,null)):t&&(t.deleted?this.remove():(Vf(this,Dl,Ll).call(this),Wf(this,Cl,t.text))),void(e&&(Wf(this,kl,null),Vf(this,Ml,Il).call(this),Vf(this,Ol,zl).call(this)));n||(null==t?void 0:t.deleted)?this.remove():(Vf(this,Pl,Rl).call(this),Bf(this,El)||Wf(this,El,{contentsObj:Bf(this,hl),richText:Bf(this,_l)}),e&&Wf(this,bl,null),t&&t.text&&(Wf(this,_l,Vf(this,Hl,ql).call(this,t.text)),Wf(this,pl,a6.toDateObject(t.date)),Wf(this,hl,null)),null==(r=Bf(this,yl))||r.remove(),Wf(this,yl,null))}resetEdited(){var e;Bf(this,El)&&(({contentsObj:$f(this,hl)._,richText:$f(this,_l)._}=Bf(this,El)),Wf(this,El,null),null==(e=Bf(this,yl))||e.remove(),Wf(this,yl,null),Wf(this,bl,null))}remove(){var e,t,n;if(null==(e=Bf(this,xl))||e.abort(),Wf(this,xl,null),null==(t=Bf(this,yl))||t.remove(),Wf(this,yl,null),Wf(this,Tl,!1),Wf(this,vl,!1),null==(n=Bf(this,wl))||n.remove(),Wf(this,wl,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){Wf(this,Tl,this.isVisible),Bf(this,Tl)&&(Bf(this,ul).hidden=!0)}maybeShow(){Bf(this,al)||(Vf(this,Pl,Rl).call(this),Bf(this,Tl)&&(Bf(this,yl)||Vf(this,Ql,ec).call(this),Wf(this,Tl,!1),Bf(this,ul).hidden=!1))}get isVisible(){return!Bf(this,al)&&!1===Bf(this,ul).hidden}}al=new WeakMap,il=new WeakMap,ol=new WeakMap,ll=new WeakMap,cl=new WeakMap,dl=new WeakMap,ul=new WeakMap,hl=new WeakMap,pl=new WeakMap,fl=new WeakMap,ml=new WeakMap,gl=new WeakMap,vl=new WeakMap,yl=new WeakMap,xl=new WeakMap,bl=new WeakMap,wl=new WeakMap,kl=new WeakMap,Sl=new WeakMap,jl=new WeakMap,_l=new WeakMap,Al=new WeakMap,El=new WeakMap,Tl=new WeakMap,Nl=new WeakMap,Cl=new WeakMap,Pl=new WeakSet,Rl=function(){var e;if(Bf(this,xl))return;Wf(this,xl,new AbortController);const{signal:t}=Bf(this,xl);for(const n of this.trigger)n.addEventListener("click",Bf(this,cl),{signal:t}),n.addEventListener("pointerenter",Bf(this,ll),{signal:t}),n.addEventListener("pointerleave",Bf(this,ol),{signal:t}),n.classList.add("popupTriggerArea");for(const n of Bf(this,fl))null==(e=n.container)||e.addEventListener("keydown",Bf(this,il),{signal:t})},Ml=new WeakSet,Il=function(){const e=Bf(this,fl).find(e=>e.hasCommentButton);e&&Wf(this,kl,e._normalizePoint(e.commentButtonPosition))},Ol=new WeakSet,zl=function(){if(Bf(this,Nl).extraPopupElement&&!Bf(this,Nl).editor)return;this.renderCommentButton();const[e,t]=Bf(this,kl),{style:n}=Bf(this,wl);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},Dl=new WeakSet,Ll=function(){Bf(this,Nl).extraPopupElement||(this.renderCommentButton(),Bf(this,wl).style.backgroundColor=this.commentButtonColor||"")},Fl=new WeakSet,Bl=function(){const e=Bf(this,_l),t=Bf(this,hl);return!(null==e?void 0:e.str)||(null==t?void 0:t.str)&&t.str!==e.str?null:Bf(this,_l).html||null},Ul=new WeakSet,Wl=function(){var e,t,n;return(null==(n=null==(t=null==(e=Bf(this,Fl,Bl))?void 0:e.attributes)?void 0:t.style)?void 0:n.fontSize)||0},$l=new WeakSet,Vl=function(){var e,t,n;return(null==(n=null==(t=null==(e=Bf(this,Fl,Bl))?void 0:e.attributes)?void 0:t.style)?void 0:n.color)||null},Hl=new WeakSet,ql=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:Bf(this,$l,Vl),fontSize:Bf(this,Ul,Wl)?`calc(${Bf(this,Ul,Wl)}px * var(--total-scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:r});return n},Gl=new WeakSet,Kl=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&Bf(this,vl))&&Vf(this,Jl,Zl).call(this)},Xl=new WeakSet,Yl=function(){if(null!==Bf(this,bl))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=Bf(this,ml);let a=!!Bf(this,gl),i=Bf(this,a?gl:jl);for(const h of Bf(this,fl))if(!i||null!==L5.intersect(h.data.rect,i)){i=h.data.rect,a=!0;break}const o=L5.normalizeRect([i[0],e[3]-i[1]+e[1],i[2],e[3]-i[3]+e[1]]),l=a?i[2]-i[0]+5:0,c=o[0]+l,d=o[1];Wf(this,bl,[100*(c-r)/t,100*(d-s)/n]);const{style:u}=Bf(this,ul);u.left=`${Bf(this,bl)[0]}%`,u.top=`${Bf(this,bl)[1]}%`},Jl=new WeakSet,Zl=function(){Bf(this,al)?Bf(this,al).toggleCommentPopup(this,!1):(Wf(this,vl,!Bf(this,vl)),Bf(this,vl)?(Vf(this,Ql,ec).call(this),Bf(this,ul).addEventListener("click",Bf(this,cl)),Bf(this,ul).addEventListener("keydown",Bf(this,il))):(Vf(this,tc,nc).call(this),Bf(this,ul).removeEventListener("click",Bf(this,cl)),Bf(this,ul).removeEventListener("keydown",Bf(this,il))))},Ql=new WeakSet,ec=function(){Bf(this,yl)||this.render(),this.isVisible?Bf(this,vl)&&Bf(this,ul).classList.add("focused"):(Vf(this,Xl,Yl).call(this),Bf(this,ul).hidden=!1,Bf(this,ul).style.zIndex=parseInt(Bf(this,ul).style.zIndex)+1e3)},tc=new WeakSet,nc=function(){Bf(this,ul).classList.remove("focused"),!Bf(this,vl)&&this.isVisible&&(Bf(this,ul).hidden=!0,Bf(this,ul).style.zIndex=parseInt(Bf(this,ul).style.zIndex)-1e3)};class $9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=J3.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class V9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Uf(this,rc,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),s=Wf(this,rc,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Bf(this,rc)}addHighlightArea(){this.container.classList.add("highlightArea")}}rc=new WeakMap;class H9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Uf(this,sc,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=Wf(this,sc,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",n-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Bf(this,sc)}addHighlightArea(){this.container.classList.add("highlightArea")}}sc=new WeakMap;class q9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Uf(this,ac,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=Wf(this,ac,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",n/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Bf(this,ac)}addHighlightArea(){this.container.classList.add("highlightArea")}}ac=new WeakMap;class G9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Uf(this,ic,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:s,height:a}=this;if(!t)return this.container;const i=this.svgFactory.create(s,a,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],r=e[3]-t[c+1];o.push(`${n},${r}`)}o=o.join(" ");const l=Wf(this,ic,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Bf(this,ic)}addHighlightArea(){this.container.classList.add("highlightArea")}}ic=new WeakMap;class K9 extends G9{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Y9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Uf(this,cc),Uf(this,oc,null),Uf(this,lc,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?J3.HIGHLIGHT:J3.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:s}}=this,{transform:a,width:i,height:o}=Vf(this,cc,dc).call(this,t,e),l=this.svgFactory.create(i,o,!0),c=Wf(this,oc,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",a);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);Bf(this,lc).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:r}=e,s=Bf(this,oc);if(t>=0&&s.setAttribute("stroke-width",t||1),n)for(let a=0,i=Bf(this,lc).length;a<i;a++)Bf(this,lc)[a].setAttribute("points",n[a].join(","));if(r){const{transform:e,width:t,height:n}=Vf(this,cc,dc).call(this,this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("transform",e)}}getElementsToTriggerPopup(){return Bf(this,lc)}addHighlightArea(){this.container.classList.add("highlightArea")}}oc=new WeakMap,lc=new WeakMap,cc=new WeakSet,dc=function(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}};class J9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=J3.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Z9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Q9 extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class eee extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class tee extends C9{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=J3.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class nee extends C9{constructor(e){var t;super(e,{isRenderable:!0}),Uf(this,hc),Uf(this,uc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),n.addEventListener("dblclick",Vf(this,hc,pc).bind(this)),Wf(this,uc,n);const{isMac:r}=z5.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&Vf(this,hc,pc).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return Bf(this,uc)}addHighlightArea(){this.container.classList.add("highlightArea")}}uc=new WeakMap,hc=new WeakSet,pc=function(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)};fc=new WeakMap,mc=new WeakMap,gc=new WeakMap,vc=new WeakMap,yc=new WeakMap,xc=new WeakMap,bc=new WeakSet,wc=async function(e,t,n){var r,s;const a=e.firstChild||e,i=a.id=`${W5}${t}`,o=await(null==(r=Bf(this,yc))?void 0:r.getAriaAttributes(i));if(o)for(const[l,c]of o)a.setAttribute(l,c);n?n.at(-1).container.after(e):(this.div.append(e),null==(s=Bf(this,fc))||s.moveElementInDOM(this.div,e,a,!1))},kc=new WeakSet,Sc=function(){var e;if(!Bf(this,mc))return;const t=this.div;for(const[n,r]of Bf(this,mc)){const s=t.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?"CANVAS"===a.nodeName?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const i=Bf(this,vc).get(n);i&&(i._hasNoCanvas?(null==(e=this._annotationEditorUIManager)||e.setMissingCanvas(n,s.id,r),i._hasNoCanvas=!1):i.canvas=r)}Bf(this,mc).clear()};let ree=class e{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:i,commentManager:o,linkService:l,annotationStorage:c}){Uf(this,bc),Uf(this,kc),Uf(this,fc,null),Uf(this,mc,null),Uf(this,gc,null),Uf(this,vc,new Map),Uf(this,yc,null),Uf(this,xc,null),this.div=e,Wf(this,fc,t),Wf(this,mc,n),Wf(this,yc,i||null),Wf(this,xc,l||null),Wf(this,gc,c||new H6),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=o||null}hasEditableAnnotations(){return Bf(this,vc).size>0}async render(e){var t,n,r;const{annotations:s}=e,a=this.div;c6(a,this.viewport);const i=new Map,o={data:null,layer:a,linkService:Bf(this,xc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new A9,annotationStorage:Bf(this,gc),enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of s){if(l.noHTML)continue;const e=l.annotationType===i5.POPUP;if(e){const e=i.get(l.id);if(!e)continue;o.elements=e}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const s=N9.create(o);if(!s.isRenderable)continue;if(!e&&l.popupRef){const e=i.get(l.popupRef);e?e.push(s):i.set(l.popupRef,[s])}const a=s.render();l.hidden&&(a.style.visibility="hidden"),await Vf(this,bc,wc).call(this,a,l.id,o.elements),null==(n=null==(t=s.extraPopupElement)?void 0:t.popup)||n.renderCommentButton(),s._isEditable&&(Bf(this,vc).set(s.data.id,s),null==(r=this._annotationEditorUIManager)||r.renderAnnotationElement(s))}Vf(this,kc,Sc).call(this)}async addLinkAnnotations(t){const n={data:null,layer:this.div,linkService:Bf(this,xc),svgFactory:new A9,parent:this};for(const r of t){r.borderStyle||(r.borderStyle=e._defaultBorderStyle),n.data=r;const t=N9.create(n);if(!t.isRenderable)continue;const s=t.render();await Vf(this,bc,wc).call(this,s,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,c6(t,{rotation:e.rotation}),Vf(this,kc,Sc).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(Bf(this,vc).values())}getEditableAnnotation(e){return Bf(this,vc).get(e)}addFakeAnnotation(e){var t;const{div:n}=this,{id:r,rotation:s}=e,a=new P9({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:Bf(this,xc),annotationStorage:Bf(this,gc)}),i=a.render();return n.append(i),null==(t=Bf(this,fc))||t.moveElementInDOM(n,i,i,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return A5(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:o5,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const see=/\r\n?|\n/g,aee=class e extends L6{constructor(t){super({...t,name:"freeTextEditor"}),Uf(this,Tc),Uf(this,Cc),Uf(this,Rc),Uf(this,Ic),Uf(this,Lc),Uf(this,Bc),Uf(this,Vc),Uf(this,jc,""),Uf(this,_c,`${this.id}-editor`),Uf(this,Ac,null),Uf(this,Ec,void 0),Lf(this,"_colorPicker",null),this.color=t.color||e._defaultColor||L6._defaultLineColor,Wf(this,Ec,t.fontSize||e._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=e.prototype,n=e=>e.isEmpty(),r=P6.TRANSLATE_SMALL,s=P6.TRANSLATE_BIG;return A5(this,"_keyboardManager",new E6([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(e,t){L6.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Z3.FREETEXT_SIZE:e._defaultFontSize=n;break;case Z3.FREETEXT_COLOR:e._defaultColor=n}}updateParams(e,t){switch(e){case Z3.FREETEXT_SIZE:Vf(this,Tc,Nc).call(this,t);break;case Z3.FREETEXT_COLOR:Vf(this,Cc,Pc).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Z3.FREETEXT_SIZE,e._defaultFontSize],[Z3.FREETEXT_COLOR,e._defaultColor||L6._defaultLineColor]]}get propertiesToUpdate(){return[[Z3.FREETEXT_SIZE,Bf(this,Ec)],[Z3.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new w9(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Z3.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,null==(e=this._colorPicker)||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+Bf(this,Ec))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Wf(this,Ac,new AbortController);const e=this._uiManager.combinedSignal(Bf(this,Ac));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Bf(this,_c)),this._isDraggable=!0,null==(e=Bf(this,Ac))||e.abort(),Wf(this,Ac,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(null==(t=this._initialOptions)?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=Bf(this,jc),t=Wf(this,jc,Vf(this,Rc,Mc).call(this).trimEnd());if(e===t)return;const n=e=>{Wf(this,jc,e),e?(Vf(this,Lc,Fc).call(this),this._uiManager.rebuild(this),Vf(this,Ic,Oc).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),Vf(this,Ic,Oc).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(t){e._keyboardManager.exec(this,t)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Bf(this,_c)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${Bf(this,Ec)}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[a,i]=this.getInitialTranslation();[a,i]=this.pageTranslationToScreen(a,i);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(s[0]-c)/o,h=t+this.height-(s[1]-d)/l;break;case 90:u=e+(s[0]-c)/o,h=t-(s[1]-d)/l,[a,i]=[i,-a];break;case 180:u=e-this.width+(s[0]-c)/o,h=t-(s[1]-d)/l,[a,i]=[-a,-i];break;case 270:u=e+(s[0]-c-this.height*l)/o,h=t+(s[1]-d-this.width*o)/l,[a,i]=[-i,a]}this.setAt(u*n,h*r,a,i)}else this._moveAfterPaste(e,t);Vf(this,Lc,Fc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var n,r,s;const a=t.clipboardData||window.clipboardData,{types:i}=a;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const o=Vf(n=e,Wc,$c).call(n,a.getData("text")||"").replaceAll(see,"\n");if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!o.includes("\n"))return c.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),void l.collapseToStart();const{startContainer:d,startOffset:u}=c,h=[],p=[];if(d.nodeType===Node.TEXT_NODE){const t=d.parentElement;if(p.push(d.nodeValue.slice(u).replaceAll(see,"")),t!==this.editorDiv){let n=h;for(const s of this.editorDiv.childNodes)s!==t?n.push(Vf(r=e,zc,Dc).call(r,s)):n=p}h.push(d.nodeValue.slice(0,u).replaceAll(see,""))}else if(d===this.editorDiv){let t=h,n=0;for(const r of this.editorDiv.childNodes)n++===u&&(t=p),t.push(Vf(s=e,zc,Dc).call(s,r))}Wf(this,jc,`${h.join("\n")}${o}${p.join("\n")}`),Vf(this,Lc,Fc).call(this);const f=new Range;let m=Math.sumPrecise(h.map(e=>e.length));for(const{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue.length;if(m<=t){f.setStart(e,m),f.setEnd(e,m);break}m-=t}l.removeAllRanges(),l.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=e._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){var s;let a=null;if(t instanceof $9){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:r,rotation:s,id:i,popupRef:o,richText:l,contentsObj:c,creationDate:d,modificationDate:u},textContent:h,textPosition:p,parent:{page:{pageNumber:f}}}=t;if(!h||0===h.length)return null;a=t={annotationType:J3.FREETEXT,color:Array.from(n),fontSize:e,value:h.join("\n"),position:p,pageIndex:f-1,rect:r.slice(0),rotation:s,annotationElementId:i,id:i,deleted:!1,popupRef:o,comment:(null==c?void 0:c.str)||null,richText:l,creationDate:d,modificationDate:u}}const i=await super.deserialize(t,n,r);return Wf(i,Ec,t.fontSize),i.color=L5.makeHexColor(...t.color),Wf(i,jc,Vf(s=e,Wc,$c).call(s,t.value)),i._initialData=a,t.comment&&i.setCommentData(t),i}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=L6._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:Bf(this,Ec),value:Vf(this,Bc,Uc).call(this)});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!Vf(this,Vc,Hc).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${Bf(this,Ec)}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const r of Bf(this,jc).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Bf(this,jc)}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};jc=new WeakMap,_c=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Tc=new WeakSet,Nc=function(e){const t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--total-scale-factor))`,this.translate(0,-(e-Bf(this,Ec))*this.parentScale),Wf(this,Ec,e),Vf(this,Ic,Oc).call(this)},n=Bf(this,Ec);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z3.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Cc=new WeakSet,Pc=function(e){const t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z3.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Rc=new WeakSet,Mc=function(){var e;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(null==n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===r.nodeName||(t.push(Vf(e=aee,zc,Dc).call(e,r)),n=r);return t.join("\n")},Ic=new WeakSet,Oc=function(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle("hidden",s)}this.rotation%180==this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()},zc=new WeakSet,Dc=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(see,"")},Lc=new WeakSet,Fc=function(){if(this.editorDiv.replaceChildren(),Bf(this,jc))for(const e of Bf(this,jc).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}},Bc=new WeakSet,Uc=function(){return Bf(this,jc).replaceAll(" "," ")},Wc=new WeakSet,$c=function(e){return e.replaceAll(" "," ")},Vc=new WeakSet,Hc=function(e){const{value:t,fontSize:n,color:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==r[t])||e.pageIndex!==s},Uf(aee,zc),Uf(aee,Wc),Lf(aee,"_freeTextDefaultContent",""),Lf(aee,"_internalPadding",0),Lf(aee,"_defaultColor",null),Lf(aee,"_defaultFontSize",10),Lf(aee,"_type","freetext"),Lf(aee,"_editorType",J3.FREETEXT);let iee=aee;class oee{toSVGPath(){k5("Abstract method `toSVGPath` must be implemented.")}get box(){k5("Abstract getter `box` must be implemented.")}serialize(e,t){k5("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)a[i]=t+e[i]*r,a[i+1]=n+e[i+1]*s;return a}static _rescaleAndSwap(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)a[i]=t+e[i+1]*r,a[i+1]=n+e[i]*s;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=n+e[s+1];return r}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,r,s){switch(s){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,s,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+s)/6,(5*r+a)/6,(n+s)/2,(r+a)/2]}}Lf(oee,"PRECISION",1e-4);const lee=class e{constructor({x:t,y:n},r,s,a,i,o=0){Uf(this,ld),Uf(this,dd),Uf(this,hd),Uf(this,fd),Uf(this,gd),Uf(this,yd),Uf(this,bd),Uf(this,qc,void 0),Uf(this,Gc,[]),Uf(this,Kc,void 0),Uf(this,Xc,void 0),Uf(this,Yc,[]),Uf(this,Jc,new Float32Array(18)),Uf(this,Zc,void 0),Uf(this,Qc,void 0),Uf(this,ed,void 0),Uf(this,td,void 0),Uf(this,nd,void 0),Uf(this,rd,void 0),Uf(this,sd,[]),Wf(this,qc,r),Wf(this,rd,a*s),Wf(this,Xc,i),Bf(this,Jc).set([NaN,NaN,NaN,NaN,t,n],6),Wf(this,Kc,o),Wf(this,td,Bf(e,ad)*s),Wf(this,ed,Bf(e,od)*s),Wf(this,nd,s),Bf(this,sd).push(t,n)}isEmpty(){return isNaN(Bf(this,Jc)[8])}add({x:e,y:t}){var n;Wf(this,Zc,e),Wf(this,Qc,t);const[r,s,a,i]=Bf(this,qc);let[o,l,c,d]=Bf(this,Jc).subarray(8,12);const u=e-c,h=t-d,p=Math.hypot(u,h);if(p<Bf(this,ed))return!1;const f=p-Bf(this,td),m=f/p,g=m*u,v=m*h;let y=o,x=l;o=c,l=d,c+=g,d+=v,null==(n=Bf(this,sd))||n.push(e,t);const b=g/f,w=-v/f*Bf(this,rd),k=b*Bf(this,rd);if(Bf(this,Jc).set(Bf(this,Jc).subarray(2,8),0),Bf(this,Jc).set([c+w,d+k],4),Bf(this,Jc).set(Bf(this,Jc).subarray(14,18),12),Bf(this,Jc).set([c-w,d-k],16),isNaN(Bf(this,Jc)[6]))return 0===Bf(this,Yc).length&&(Bf(this,Jc).set([o+w,l+k],2),Bf(this,Yc).push(NaN,NaN,NaN,NaN,(o+w-r)/a,(l+k-s)/i),Bf(this,Jc).set([o-w,l-k],14),Bf(this,Gc).push(NaN,NaN,NaN,NaN,(o-w-r)/a,(l-k-s)/i)),Bf(this,Jc).set([y,x,o,l,c,d],6),!this.isEmpty();Bf(this,Jc).set([y,x,o,l,c,d],6);return Math.abs(Math.atan2(x-l,y-o)-Math.atan2(v,g))<Math.PI/2?([o,l,c,d]=Bf(this,Jc).subarray(2,6),Bf(this,Yc).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/a,((l+d)/2-s)/i),[o,l,y,x]=Bf(this,Jc).subarray(14,18),Bf(this,Gc).push(NaN,NaN,NaN,NaN,((y+o)/2-r)/a,((x+l)/2-s)/i),!0):([y,x,o,l,c,d]=Bf(this,Jc).subarray(0,6),Bf(this,Yc).push(((y+5*o)/6-r)/a,((x+5*l)/6-s)/i,((5*o+c)/6-r)/a,((5*l+d)/6-s)/i,((o+c)/2-r)/a,((l+d)/2-s)/i),[c,d,o,l,y,x]=Bf(this,Jc).subarray(12,18),Bf(this,Gc).push(((y+5*o)/6-r)/a,((x+5*l)/6-s)/i,((5*o+c)/6-r)/a,((5*l+d)/6-s)/i,((o+c)/2-r)/a,((l+d)/2-s)/i),!0)}toSVGPath(){if(this.isEmpty())return"";const e=Bf(this,Yc),t=Bf(this,Gc);if(isNaN(Bf(this,Jc)[6])&&!this.isEmpty())return Vf(this,dd,ud).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);Vf(this,fd,md).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return Vf(this,hd,pd).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,a){return new dee(e,t,n,r,s,a)}getOutlines(){var e;const t=Bf(this,Yc),n=Bf(this,Gc),r=Bf(this,Jc),[s,a,i,o]=Bf(this,qc),l=new Float32Array(((null==(e=Bf(this,sd))?void 0:e.length)??0)+2);for(let u=0,h=l.length-2;u<h;u+=2)l[u]=(Bf(this,sd)[u]-s)/i,l[u+1]=(Bf(this,sd)[u+1]-a)/o;if(l[l.length-2]=(Bf(this,Zc)-s)/i,l[l.length-1]=(Bf(this,Qc)-a)/o,isNaN(r[6])&&!this.isEmpty())return Vf(this,gd,vd).call(this,l);const c=new Float32Array(Bf(this,Yc).length+24+Bf(this,Gc).length);let d=t.length;for(let u=0;u<d;u+=2)isNaN(t[u])?c[u]=c[u+1]=NaN:(c[u]=t[u],c[u+1]=t[u+1]);d=Vf(this,bd,wd).call(this,c,d);for(let u=n.length-6;u>=6;u-=6)for(let e=0;e<6;e+=2)isNaN(n[u+e])?(c[d]=c[d+1]=NaN,d+=2):(c[d]=n[u+e],c[d+1]=n[u+e+1],d+=2);return Vf(this,yd,xd).call(this,c,d),this.newFreeDrawOutline(c,l,Bf(this,qc),Bf(this,nd),Bf(this,Kc),Bf(this,Xc))}};qc=new WeakMap,Gc=new WeakMap,Kc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,Qc=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,rd=new WeakMap,sd=new WeakMap,ad=new WeakMap,id=new WeakMap,od=new WeakMap,ld=new WeakSet,cd=function(){const e=Bf(this,Jc).subarray(4,6),t=Bf(this,Jc).subarray(16,18),[n,r,s,a]=Bf(this,qc);return[(Bf(this,Zc)+(e[0]-t[0])/2-n)/s,(Bf(this,Qc)+(e[1]-t[1])/2-r)/a,(Bf(this,Zc)+(t[0]-e[0])/2-n)/s,(Bf(this,Qc)+(t[1]-e[1])/2-r)/a]},dd=new WeakSet,ud=function(){const[e,t,n,r]=Bf(this,qc),[s,a,i,o]=Vf(this,ld,cd).call(this);return`M${(Bf(this,Jc)[2]-e)/n} ${(Bf(this,Jc)[3]-t)/r} L${(Bf(this,Jc)[4]-e)/n} ${(Bf(this,Jc)[5]-t)/r} L${s} ${a} L${i} ${o} L${(Bf(this,Jc)[16]-e)/n} ${(Bf(this,Jc)[17]-t)/r} L${(Bf(this,Jc)[14]-e)/n} ${(Bf(this,Jc)[15]-t)/r} Z`},hd=new WeakSet,pd=function(e){const t=Bf(this,Gc);e.push(`L${t[4]} ${t[5]} Z`)},fd=new WeakSet,md=function(e){const[t,n,r,s]=Bf(this,qc),a=Bf(this,Jc).subarray(4,6),i=Bf(this,Jc).subarray(16,18),[o,l,c,d]=Vf(this,ld,cd).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/s} L${o} ${l} L${c} ${d} L${(i[0]-t)/r} ${(i[1]-n)/s}`)},gd=new WeakSet,vd=function(e){const t=Bf(this,Jc),[n,r,s,a]=Bf(this,qc),[i,o,l,c]=Vf(this,ld,cd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,i,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(d,e,Bf(this,qc),Bf(this,nd),Bf(this,Kc),Bf(this,Xc))},yd=new WeakSet,xd=function(e,t){const n=Bf(this,Gc);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6},bd=new WeakSet,wd=function(e,t){const n=Bf(this,Jc).subarray(4,6),r=Bf(this,Jc).subarray(16,18),[s,a,i,o]=Bf(this,qc),[l,c,d,u]=Vf(this,ld,cd).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/i,(n[1]-a)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(r[0]-s)/i,(r[1]-a)/o],t),t+24},Uf(lee,ad,8),Uf(lee,id,2),Uf(lee,od,Bf(lee,ad)+Bf(lee,id));let cee=lee;class dee extends oee{constructor(e,t,n,r,s,a){super(),Uf(this,Nd),Uf(this,kd,void 0),Uf(this,Sd,new Float32Array(4)),Uf(this,jd,void 0),Uf(this,_d,void 0),Uf(this,Ad,void 0),Uf(this,Ed,void 0),Uf(this,Td,void 0),Wf(this,Td,e),Wf(this,Ad,t),Wf(this,kd,n),Wf(this,Ed,r),Wf(this,jd,s),Wf(this,_d,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Vf(this,Nd,Cd).call(this,a);const[i,o,l,c]=Bf(this,Sd);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-i)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-i)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=[`M${Bf(this,Td)[4]} ${Bf(this,Td)[5]}`];for(let t=6,n=Bf(this,Td).length;t<n;t+=6)isNaN(Bf(this,Td)[t])?e.push(`L${Bf(this,Td)[t+4]} ${Bf(this,Td)[t+5]}`):e.push(`C${Bf(this,Td)[t]} ${Bf(this,Td)[t+1]} ${Bf(this,Td)[t+2]} ${Bf(this,Td)[t+3]} ${Bf(this,Td)[t+4]} ${Bf(this,Td)[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,n,r],s){const a=n-e,i=r-t;let o,l;switch(s){case 0:o=oee._rescale(Bf(this,Td),e,r,a,-i),l=oee._rescale(Bf(this,Ad),e,r,a,-i);break;case 90:o=oee._rescaleAndSwap(Bf(this,Td),e,t,a,i),l=oee._rescaleAndSwap(Bf(this,Ad),e,t,a,i);break;case 180:o=oee._rescale(Bf(this,Td),n,t,-a,i),l=oee._rescale(Bf(this,Ad),n,t,-a,i);break;case 270:o=oee._rescaleAndSwap(Bf(this,Td),n,r,-a,-i),l=oee._rescaleAndSwap(Bf(this,Ad),n,r,-a,-i)}return{outline:Array.from(o),points:[Array.from(l)]}}get box(){return Bf(this,Sd)}newOutliner(e,t,n,r,s,a=0){return new cee(e,t,n,r,s,a)}getNewOutline(e,t){const[n,r,s,a]=Bf(this,Sd),[i,o,l,c]=Bf(this,kd),d=s*l,u=a*c,h=n*l+i,p=r*c+o,f=this.newOutliner({x:Bf(this,Ad)[0]*d+h,y:Bf(this,Ad)[1]*u+p},Bf(this,kd),Bf(this,Ed),e,Bf(this,_d),t??Bf(this,jd));for(let m=2;m<Bf(this,Ad).length;m+=2)f.add({x:Bf(this,Ad)[m]*d+h,y:Bf(this,Ad)[m+1]*u+p});return f.getOutlines()}}kd=new WeakMap,Sd=new WeakMap,jd=new WeakMap,_d=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Td=new WeakMap,Nd=new WeakSet,Cd=function(e){const t=Bf(this,Td);let n=t[4],r=t[5];const s=[n,r,n,r];let a=n,i=r,o=n,l=r;const c=e?Math.max:Math.min,d=new Float32Array(4);for(let h=6,p=t.length;h<p;h+=6){const e=t[h+4],u=t[h+5];isNaN(t[h])?(L5.pointBoundingBox(e,u,s),i>u?(a=e,i=u):i===u&&(a=c(a,e)),l<u?(o=e,l=u):l===u&&(o=c(o,e))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,L5.bezierBoundingBox(n,r,...t.slice(h,h+6),d),L5.rectBoundingBox(d[0],d[1],d[2],d[3],s),i>d[1]?(a=d[0],i=d[1]):i===d[1]&&(a=c(a,d[0])),l<d[3]?(o=d[2],l=d[3]):l===d[3]&&(o=c(o,d[2]))),n=e,r=u}const u=Bf(this,Sd);u[0]=s[0]-Bf(this,jd),u[1]=s[1]-Bf(this,jd),u[2]=s[2]-s[0]+2*Bf(this,jd),u[3]=s[3]-s[1]+2*Bf(this,jd),this.firstPoint=[a,i],this.lastPoint=[o,l]};class uee{constructor(e,t=0,n=0,r=!0){Uf(this,zd),Uf(this,Ld),Uf(this,Bd),Uf(this,Wd),Uf(this,Vd),Uf(this,Pd,void 0),Uf(this,Rd,void 0),Uf(this,Md,void 0),Uf(this,Id,[]),Uf(this,Od,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:f,y:m,width:g,height:v}of e){const e=Math.floor((f-t)/a)*a,n=Math.ceil((f+g+t)/a)*a,r=Math.floor((m-t)/a)*a,i=Math.ceil((m+v+t)/a)*a,o=[e,r,i,!0],l=[n,r,i,!1];Bf(this,Id).push(o,l),L5.rectBoundingBox(e,r,n,i,s)}const i=s[2]-s[0]+2*n,o=s[3]-s[1]+2*n,l=s[0]-n,c=s[1]-n;let d=r?-1/0:1/0,u=1/0;const h=Bf(this,Id).at(r?-1:-2),p=[h[0],h[2]];for(const f of Bf(this,Id)){const[e,t,n,s]=f;!s&&r?t<u?(u=t,d=e):t===u&&(d=Math.max(d,e)):s&&!r&&(t<u?(u=t,d=e):t===u&&(d=Math.min(d,e))),f[0]=(e-l)/i,f[1]=(t-c)/o,f[2]=(n-c)/o}Wf(this,Pd,new Float32Array([l,c,i,o])),Wf(this,Rd,[d,u]),Wf(this,Md,p)}getOutlines(){Bf(this,Id).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of Bf(this,Id))t[3]?(e.push(...Vf(this,Vd,Hd).call(this,t)),Vf(this,Bd,Ud).call(this,t)):(Vf(this,Wd,$d).call(this,t),e.push(...Vf(this,Vd,Hd).call(this,t)));return Vf(this,zd,Dd).call(this,e)}}Pd=new WeakMap,Rd=new WeakMap,Md=new WeakMap,Id=new WeakMap,Od=new WeakMap,zd=new WeakSet,Dd=function(e){const t=[],n=new Set;for(const a of e){const[e,n,r]=a;t.push([e,n,a],[e,r,a])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let a=0,i=t.length;a<i;a+=2){const e=t[a][2],r=t[a+1][2];e.push(r),r.push(e),n.add(e),n.add(r)}const r=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,a,i,o,l]=e;n.delete(e);let c=t,d=a;for(s=[t,i],r.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,a,i,o,l]=e,c!==t&&(s.push(c,d,t,d===a?a:i),c=t),d=d===a?i:a}s.push(c,d)}return new hee(r,Bf(this,Pd),Bf(this,Rd),Bf(this,Md))},Ld=new WeakSet,Fd=function(e){const t=Bf(this,Od);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:r=s-1}return r+1},Bd=new WeakSet,Ud=function([,e,t]){const n=Vf(this,Ld,Fd).call(this,e);Bf(this,Od).splice(n,0,[e,t])},Wd=new WeakSet,$d=function([,e,t]){const n=Vf(this,Ld,Fd).call(this,e);for(let r=n;r<Bf(this,Od).length;r++){const[n,s]=Bf(this,Od)[r];if(n!==e)break;if(n===e&&s===t)return void Bf(this,Od).splice(r,1)}for(let r=n-1;r>=0;r--){const[n,s]=Bf(this,Od)[r];if(n!==e)break;if(n===e&&s===t)return void Bf(this,Od).splice(r,1)}},Vd=new WeakSet,Hd=function(e){const[t,n,r]=e,s=[[t,n,r]],a=Vf(this,Ld,Fd).call(this,r);for(let i=0;i<a;i++){const[e,n]=Bf(this,Od)[i];for(let r=0,a=s.length;r<a;r++){const[,i,o]=s[r];if(!(n<=i||o<=e))if(i>=e)if(o>n)s[r][1]=n;else{if(1===a)return[];s.splice(r,1),r--,a--}else s[r][2]=e,o>n&&s.push([t,n,o])}}return s};class hee extends oee{constructor(e,t,n,r){super(),Uf(this,qd,void 0),Uf(this,Gd,void 0),Wf(this,Gd,e),Wf(this,qd,t),this.firstPoint=n,this.lastPoint=r}toSVGPath(){const e=[];for(const t of Bf(this,Gd)){let[n,r]=t;e.push(`M${n} ${r}`);for(let s=2;s<t.length;s+=2){const a=t[s],i=t[s+1];a===n?(e.push(`V${i}`),r=i):i===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],s){const a=[],i=n-e,o=r-t;for(const l of Bf(this,Gd)){const t=new Array(l.length);for(let n=0;n<l.length;n+=2)t[n]=e+l[n]*i,t[n+1]=r-l[n+1]*o;a.push(t)}return a}get box(){return Bf(this,qd)}get classNamesForOutlining(){return["highlightOutline"]}}qd=new WeakMap,Gd=new WeakMap;class pee extends cee{newFreeDrawOutline(e,t,n,r,s,a){return new fee(e,t,n,r,s,a)}}class fee extends dee{newOutliner(e,t,n,r,s,a=0){return new pee(e,t,n,r,s,a)}}const mee=class e extends L6{constructor(t){super({...t,name:"highlightEditor"}),Uf(this,hu),Uf(this,fu),Uf(this,gu),Uf(this,yu),Uf(this,bu),Uf(this,ku),Uf(this,ju),Uf(this,Tu),Uf(this,Cu),Uf(this,Ru),Uf(this,Iu),Uf(this,zu),Uf(this,Wu),Uf(this,Kd,null),Uf(this,Xd,0),Uf(this,Yd,void 0),Uf(this,Jd,null),Uf(this,Zd,null),Uf(this,Qd,null),Uf(this,eu,null),Uf(this,tu,0),Uf(this,nu,null),Uf(this,ru,null),Uf(this,su,null),Uf(this,au,!1),Uf(this,iu,null),Uf(this,ou,null),Uf(this,lu,null),Uf(this,cu,""),Uf(this,du,void 0),Uf(this,uu,""),this.color=t.color||e._defaultColor,Wf(this,du,t.thickness||e._defaultThickness),this.opacity=t.opacity||e._defaultOpacity,Wf(this,Yd,t.boxes||null),Wf(this,uu,t.methodOfCreation||""),Wf(this,cu,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(Wf(this,au,!0),Vf(this,fu,mu).call(this,t),Vf(this,ju,_u).call(this)):Bf(this,Yd)&&(Wf(this,Kd,t.anchorNode),Wf(this,Xd,t.anchorOffset),Wf(this,eu,t.focusNode),Wf(this,tu,t.focusOffset),Vf(this,hu,pu).call(this),Vf(this,ju,_u).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=e.prototype;return A5(this,"_keyboardManager",new E6([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Bf(this,au)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Bf(this,du),methodOfCreation:Bf(this,uu)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(t,n){var r;L6.initialize(t,n),e._defaultColor||(e._defaultColor=(null==(r=n.highlightColors)?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Z3.HIGHLIGHT_COLOR:e._defaultColor=n;break;case Z3.HIGHLIGHT_THICKNESS:e._defaultThickness=n}}translateInPage(e,t){}get toolbarPosition(){return Bf(this,ou)}get commentButtonPosition(){return Bf(this,iu)}updateParams(e,t){switch(e){case Z3.HIGHLIGHT_COLOR:Vf(this,gu,vu).call(this,t);break;case Z3.HIGHLIGHT_THICKNESS:Vf(this,yu,xu).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Z3.HIGHLIGHT_COLOR,e._defaultColor],[Z3.HIGHLIGHT_THICKNESS,e._defaultThickness]]}get propertiesToUpdate(){return[[Z3.HIGHLIGHT_COLOR,this.color||e._defaultColor],[Z3.HIGHLIGHT_THICKNESS,Bf(this,du)||e._defaultThickness],[Z3.HIGHLIGHT_FREE,Bf(this,au)]]}onUpdatedColor(){var e,t;null==(e=this.parent)||e.drawLayer.updateProperties(Bf(this,su),{root:{fill:this.color,"fill-opacity":this.opacity}}),null==(t=Bf(this,Zd))||t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",Wf(this,Zd,new x9({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Vf(this,Ru,Mu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,Vf(this,Ru,Mu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){Vf(this,ku,Su).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Vf(this,ju,_u).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var t;let n=!1;this.parent&&!e?Vf(this,ku,Su).call(this):e&&(Vf(this,ju,_u).call(this,e),n=!this.parent&&(null==(t=this.div)?void 0:t.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(t){var n,r,s;const{drawLayer:a}=this.parent;let i;Bf(this,au)?(t=(t-this.rotation+360)%360,i=Vf(n=e,Au,Eu).call(n,Bf(this,ru).box,t)):i=Vf(r=e,Au,Eu).call(r,[this.x,this.y,this.width,this.height],t),a.updateProperties(Bf(this,su),{bbox:i,root:{"data-main-rotation":t}}),a.updateProperties(Bf(this,lu),{bbox:Vf(s=e,Au,Eu).call(s,Bf(this,Qd).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const e=super.render();Bf(this,cu)&&(e.setAttribute("aria-label",Bf(this,cu)),e.setAttribute("role","mark")),Bf(this,au)?e.classList.add("free"):this.div.addEventListener("keydown",Vf(this,Tu,Nu).bind(this),{signal:this._uiManager._signal});const t=Wf(this,nu,document.createElement("div"));return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=Bf(this,Jd),this.setDims(this.width,this.height),k6(this,Bf(this,nu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||null==(e=this.parent)||e.drawLayer.updateProperties(Bf(this,lu),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||null==(e=this.parent)||e.drawLayer.updateProperties(Bf(this,lu),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:Vf(this,Cu,Pu).call(this,!0);break;case 1:case 3:Vf(this,Cu,Pu).call(this,!1)}}select(){var e;super.select(),Bf(this,lu)&&(null==(e=this.parent)||e.drawLayer.updateProperties(Bf(this,lu),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),Bf(this,lu)&&(null==(e=this.parent)||e.drawLayer.updateProperties(Bf(this,lu),{rootClass:{selected:!1}}),Bf(this,au)||Vf(this,Cu,Pu).call(this,!1))}get _mustFixPosition(){return!Bf(this,au)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(Bf(this,su),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(Bf(this,lu),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,{target:n,x:r,y:s}){const{x:a,y:i,width:o,height:l}=n.getBoundingClientRect(),c=new AbortController,d=e.combinedSignal(c),u=t=>{c.abort(),Vf(this,Bu,Uu).call(this,e,t)};window.addEventListener("blur",u,{signal:d}),window.addEventListener("pointerup",u,{signal:d}),window.addEventListener("pointerdown",s6,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",r6,{signal:d}),n.addEventListener("pointermove",Vf(this,Lu,Fu).bind(this,e),{signal:d}),this._freeHighlight=new pee({x:r,y:s},[a,i,o,l],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){var r,s,a,i;let o=null;if(e instanceof J9){const{data:{quadPoints:t,rect:n,rotation:r,id:s,color:a,opacity:i,popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;o=e={annotationType:J3.HIGHLIGHT,color:Array.from(a),opacity:i,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null==d?void 0:d.str)||null,creationDate:u,modificationDate:h}}else if(e instanceof Y9){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:i},popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;o=e={annotationType:J3.HIGHLIGHT,color:Array.from(a),thickness:i,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null==d?void 0:d.str)||null,creationDate:u,modificationDate:h}}const{color:l,quadPoints:c,inkLists:d,opacity:u}=e,h=await super.deserialize(e,t,n);h.color=L5.makeHexColor(...l),h.opacity=u||1,d&&Wf(h,du,e.thickness),h._initialData=o,e.comment&&h.setCommentData(e);const[p,f]=h.pageDimensions,[m,g]=h.pageTranslation;if(c){const e=Wf(h,Yd,[]);for(let t=0;t<c.length;t+=8)e.push({x:(c[t]-m)/p,y:1-(c[t+1]-g)/f,width:(c[t+2]-c[t])/p,height:(c[t+1]-c[t+5])/f});Vf(r=h,hu,pu).call(r),Vf(s=h,ju,_u).call(s),h.rotate(h.rotation)}else if(d){Wf(h,au,!0);const e=d[0],n={x:e[0]-m,y:f-(e[1]-g)},r=new pee(n,[0,0,p,f],1,Bf(h,du)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-m,n.y=f-(e[t+1]-g),r.add(n);const{id:s,clipPathId:o}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:r.toSVGPath()}},!0,!0);Vf(a=h,fu,mu).call(a,{highlightOutlines:r.getOutlines(),highlightId:s,clipPathId:o}),Vf(i=h,ju,_u).call(i),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=L6._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:Bf(this,du),quadPoints:Vf(this,Iu,Ou).call(this),outlines:Vf(this,zu,Du).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!Vf(this,Wu,$u).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Kd=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,Qd=new WeakMap,eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,ru=new WeakMap,su=new WeakMap,au=new WeakMap,iu=new WeakMap,ou=new WeakMap,lu=new WeakMap,cu=new WeakMap,du=new WeakMap,uu=new WeakMap,hu=new WeakSet,pu=function(){const e=new uee(Bf(this,Yd),.001);Wf(this,ru,e.getOutlines()),[this.x,this.y,this.width,this.height]=Bf(this,ru).box;const t=new uee(Bf(this,Yd),.0025,.001,"ltr"===this._uiManager.direction);Wf(this,Qd,t.getOutlines());const{firstPoint:n}=Bf(this,ru);Wf(this,iu,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:r}=Bf(this,Qd);Wf(this,ou,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},fu=new WeakSet,mu=function({highlightOutlines:e,highlightId:t,clipPathId:n}){var r,s;Wf(this,ru,e);if(Wf(this,Qd,e.getNewOutline(Bf(this,du)/2+1.5,.0025)),t>=0)Wf(this,su,t),Wf(this,Jd,n),this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),Wf(this,lu,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Bf(this,Qd).box,path:{d:Bf(this,Qd).toSVGPath()}},!0));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Bf(this,su),{bbox:Vf(r=mee,Au,Eu).call(r,Bf(this,ru).box,(t-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(Bf(this,lu),{bbox:Vf(s=mee,Au,Eu).call(s,Bf(this,Qd).box,t),path:{d:Bf(this,Qd).toSVGPath()}})}const[a,i,o,l]=e.box;switch(this.rotation){case 0:this.x=a,this.y=i,this.width=o,this.height=l;break;case 90:{const[e,t]=this.parentDimensions;this.x=i,this.y=1-a,this.width=o*t/e,this.height=l*e/t;break}case 180:this.x=1-a,this.y=1-i,this.width=o,this.height=l;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-i,this.y=a,this.width=o*t/e,this.height=l*e/t;break}}const{firstPoint:c}=e;Wf(this,iu,[(c[0]-a)/o,(c[1]-i)/l]);const{lastPoint:d}=Bf(this,Qd);Wf(this,ou,[(d[0]-a)/o,(d[1]-i)/l])},gu=new WeakSet,vu=function(e){const t=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:t.bind(this,e,mee._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z3.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},yu=new WeakSet,xu=function(e){const t=Bf(this,du),n=e=>{Wf(this,du,e),Vf(this,bu,wu).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z3.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},bu=new WeakSet,wu=function(e){Bf(this,au)&&(Vf(this,fu,mu).call(this,{highlightOutlines:Bf(this,ru).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},ku=new WeakSet,Su=function(){null!==Bf(this,su)&&this.parent&&(this.parent.drawLayer.remove(Bf(this,su)),Wf(this,su,null),this.parent.drawLayer.remove(Bf(this,lu)),Wf(this,lu,null))},ju=new WeakSet,_u=function(e=this.parent){null===Bf(this,su)&&(({id:$f(this,su)._,clipPathId:$f(this,Jd)._}=e.drawLayer.draw({bbox:Bf(this,ru).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Bf(this,au)},path:{d:Bf(this,ru).toSVGPath()}},!1,!0)),Wf(this,lu,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Bf(this,au)},bbox:Bf(this,Qd).box,path:{d:Bf(this,Qd).toSVGPath()}},Bf(this,au))),Bf(this,nu)&&(Bf(this,nu).style.clipPath=Bf(this,Jd)))},Au=new WeakSet,Eu=function([e,t,n,r],s){switch(s){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]},Tu=new WeakSet,Nu=function(e){mee._keyboardManager.exec(this,e)},Cu=new WeakSet,Pu=function(e){if(!Bf(this,Kd))return;const t=window.getSelection();e?t.setPosition(Bf(this,Kd),Bf(this,Xd)):t.setPosition(Bf(this,eu),Bf(this,tu))},Ru=new WeakSet,Mu=function(){return Bf(this,au)?this.rotation:0},Iu=new WeakSet,Ou=function(){if(Bf(this,au))return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,s=Bf(this,Yd),a=new Float32Array(8*s.length);let i=0;for(const{x:o,y:l,width:c,height:d}of s){const s=o*e+n,u=(1-l)*t+r;a[i]=a[i+4]=s,a[i+1]=a[i+3]=u,a[i+2]=a[i+6]=s+c*e,a[i+5]=a[i+7]=u-d*t,i+=8}return a},zu=new WeakSet,Du=function(e){return Bf(this,ru).serialize(e,Vf(this,Ru,Mu).call(this))},Lu=new WeakSet,Fu=function(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Bu=new WeakSet,Uu=function(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Wu=new WeakSet,$u=function(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])},Uf(mee,Au),Uf(mee,Lu),Uf(mee,Bu),Lf(mee,"_defaultColor",null),Lf(mee,"_defaultOpacity",1),Lf(mee,"_defaultThickness",12),Lf(mee,"_type","highlight"),Lf(mee,"_editorType",J3.HIGHLIGHT),Lf(mee,"_freeHighlightId",-1),Lf(mee,"_freeHighlight",null),Lf(mee,"_freeHighlightClipId","");let gee=mee;class vee{constructor(){Uf(this,Vu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){Bf(this,Vu)[e]=t}toSVGProperties(){const e=Bf(this,Vu);return Wf(this,Vu,Object.create(null)),{root:e}}reset(){Wf(this,Vu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){k5("Not implemented")}}Vu=new WeakMap;const yee=class e extends L6{constructor(e){super(e),Uf(this,eh),Uf(this,nh),Uf(this,sh),Uf(this,ih),Uf(this,lh),Uf(this,dh),Uf(this,hh),Uf(this,fh),Uf(this,Hu,null),Uf(this,qu,void 0),Lf(this,"_colorPicker",null),Lf(this,"_drawId",null),Wf(this,qu,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;null==(e=this._colorPicker)||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(Vf(this,eh,th).call(this,e),Vf(this,ih,oh).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[r,s]of Object.entries(t))n.has(r)?Object.assign(e[r],s):e[r]=s;return e}static getDefaultDrawingOptions(e){k5("Not implemented")}static get typesMap(){k5("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(Bf(e,Gu).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){const r=this._drawingOptions,s=r[t],a=n=>{var s;r.updateProperty(t,n);const a=Bf(this,Hu).updateProperty(t,n);a&&Vf(this,hh,ph).call(this,a),null==(s=this.parent)||s.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;null==(t=this.parent)||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(Bf(this,Hu).getPathResizingSVGProperties(Vf(this,dh,uh).call(this)),{bbox:Vf(this,fh,mh).call(this)}))}_onResized(){var t;null==(t=this.parent)||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(Bf(this,Hu).getPathResizedSVGProperties(Vf(this,dh,uh).call(this)),{bbox:Vf(this,fh,mh).call(this)}))}_onTranslating(e,t){var n;null==(n=this.parent)||n.drawLayer.updateProperties(this._drawId,{bbox:Vf(this,fh,mh).call(this)})}_onTranslated(){var t;null==(t=this.parent)||t.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(Bf(this,Hu).getPathTranslatedSVGProperties(Vf(this,dh,uh).call(this),this.parentDimensions),{bbox:Vf(this,fh,mh).call(this)}))}_onStartDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Bf(this,qu)&&(Wf(this,qu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){Vf(this,sh,ah).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Vf(this,ih,oh).call(this),Vf(this,hh,ph).call(this,Bf(this,Hu).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var t;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),Vf(this,sh,ah).call(this)):e&&(this._uiManager.addShouldRescale(this),Vf(this,ih,oh).call(this,e),n=!this.parent&&(null==(t=this.div)?void 0:t.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties({bbox:Vf(this,fh,mh).call(this)},Bf(this,Hu).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Vf(this,hh,ph).call(this,Bf(this,Hu).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,r,s){k5("Not implemented")}static startDrawing(t,n,r,s){var a;const{target:i,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=s;if(Bf(e,Ju)&&Bf(e,Ju)!==d)return;const{viewport:{rotation:u}}=t,{width:h,height:p}=i.getBoundingClientRect(),f=Wf(e,Ku,new AbortController),m=t.combinedSignal(f);Bf(e,Yu)||Wf(e,Yu,c),Bf(e,Ju)??Wf(e,Ju,d),window.addEventListener("pointerup",t=>{var n;Bf(e,Yu)===t.pointerId?this._endDraw(t):null==(n=Bf(e,Zu))||n.delete(t.pointerId)},{signal:m}),window.addEventListener("pointercancel",t=>{var n;Bf(e,Yu)===t.pointerId?this._currentParent.endDrawingSession():null==(n=Bf(e,Zu))||n.delete(t.pointerId)},{signal:m}),window.addEventListener("pointerdown",t=>{Bf(e,Ju)===t.pointerType&&((Bf(e,Zu)||Wf(e,Zu,new Set)).add(t.pointerId),Bf(e,Gu).isCancellable()&&(Bf(e,Gu).removeLastElement(),Bf(e,Gu).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",r6,{signal:m}),i.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),i.addEventListener("touchmove",t=>{t.timeStamp===Bf(e,Qu)&&s6(t)},{signal:m}),t.toggleDrawing(),null==(a=n._editorUndoBar)||a.hide(),Bf(e,Gu)?t.drawLayer.updateProperties(this._currentDrawId,Bf(e,Gu).startNew(o,l,h,p,u)):(n.updateUIForDefaultProperties(this),Wf(e,Gu,this.createDrawerInstance(o,l,h,p,u)),Wf(e,Xu,this.getDefaultDrawingOptions()),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Bf(e,Xu).toSVGProperties(),Bf(e,Gu).defaultSVGProperties),!0,!1)))}static _drawMove(t){var n;if(Wf(e,Qu,-1),!Bf(e,Gu))return;const{offsetX:r,offsetY:s,pointerId:a}=t;Bf(e,Yu)===a&&((null==(n=Bf(e,Zu))?void 0:n.size)>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,Bf(e,Gu).add(r,s)),Wf(e,Qu,t.timeStamp),s6(t)))}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Wf(e,Gu,null),Wf(e,Xu,null),Wf(e,Ju,null),Wf(e,Qu,NaN)),Bf(e,Ku)&&(Bf(e,Ku).abort(),Wf(e,Ku,null),Wf(e,Yu,NaN),Wf(e,Zu,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(null==t?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,Bf(e,Gu).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const t=Bf(e,Gu),r=this._currentDrawId,s=t.getLastElement();return void n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,t.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(r,t.removeLastElement())},mustExec:!1,type:Z3.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Z3.DRAW_STEP),!Bf(e,Gu).isEmpty()){const{pageDimensions:[r,s],scale:a}=n,i=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Bf(e,Gu).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:Bf(e,Xu),mustBeCommitted:!t});return this._cleanup(!0),i}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,s,a){k5("Not implemented")}static async deserialize(e,t,n){var r,s;const{rawDims:{pageWidth:a,pageHeight:i,pageX:o,pageY:l}}=t.viewport,c=this.deserializeDraw(o,l,a,i,this._INNER_MARGIN,e),d=await super.deserialize(e,t,n);return d.createDrawingOptions(e),Vf(r=d,eh,th).call(r,{drawOutlines:c}),Vf(s=d,ih,oh).call(s),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[t,n]=this.pageTranslation,[r,s]=this.pageDimensions;return Bf(this,Hu).serialize([t,n,r,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Hu=new WeakMap,qu=new WeakMap,Gu=new WeakMap,Ku=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,Qu=new WeakMap,eh=new WeakSet,th=function({drawOutlines:e,drawId:t,drawingOptions:n}){Wf(this,Hu,e),this._drawingOptions||(this._drawingOptions=n),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=Vf(this,nh,rh).call(this,e,this.parent),Vf(this,hh,ph).call(this,e.box)},nh=new WeakSet,rh=function(e,t){const{id:n}=t.drawLayer.draw(yee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n},sh=new WeakSet,ah=function(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ih=new WeakSet,oh=function(e=this.parent){null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=Vf(this,nh,rh).call(this,Bf(this,Hu),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))},lh=new WeakSet,ch=function([e,t,n,r]){const{parentDimensions:[s,a],rotation:i}=this;switch(i){case 90:return[t,1-e,n*(a/s),r*(s/a)];case 180:return[1-e,1-t,n,r];case 270:return[1-t,e,n*(a/s),r*(s/a)];default:return[e,t,n,r]}},dh=new WeakSet,uh=function(){const{x:e,y:t,width:n,height:r,parentDimensions:[s,a],rotation:i}=this;switch(i){case 90:return[1-t,e,n*(s/a),r*(a/s)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(s/a),r*(a/s)];default:return[e,t,n,r]}},hh=new WeakSet,ph=function(e){[this.x,this.y,this.width,this.height]=Vf(this,lh,ch).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},fh=new WeakSet,mh=function(){const{x:e,y:t,width:n,height:r,rotation:s,parentRotation:a,parentDimensions:[i,o]}=this;switch((4*s+a)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(i/o),r*(o/i),n*(i/o)];case 5:return[1-t,e,n*(i/o),r*(o/i)];case 6:return[1-e-r*(o/i),1-t,r*(o/i),n*(i/o)];case 7:return[t-n*(i/o),1-e-r*(o/i),n*(i/o),r*(o/i)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(o/i),t,r*(o/i),n*(i/o)];case 13:return[1-t-n*(i/o),e-r*(o/i),n*(i/o),r*(o/i)];case 14:return[1-e,1-t-n*(i/o),r*(o/i),n*(i/o)];case 15:return[t,1-e,n*(i/o),r*(o/i)];default:return[e,t,n,r]}},Lf(yee,"_currentDrawId",-1),Lf(yee,"_currentParent",null),Uf(yee,Gu,null),Uf(yee,Ku,null),Uf(yee,Xu,null),Uf(yee,Yu,NaN),Uf(yee,Ju,null),Uf(yee,Zu,null),Uf(yee,Qu,NaN),Lf(yee,"_INNER_MARGIN",3);let xee=yee;class bee{constructor(e,t,n,r,s,a){Uf(this,Eh),Uf(this,gh,new Float64Array(6)),Uf(this,vh,void 0),Uf(this,yh,void 0),Uf(this,xh,void 0),Uf(this,bh,void 0),Uf(this,wh,void 0),Uf(this,kh,""),Uf(this,Sh,0),Uf(this,jh,new wee),Uf(this,_h,void 0),Uf(this,Ah,void 0),Wf(this,_h,n),Wf(this,Ah,r),Wf(this,xh,s),Wf(this,bh,a),[e,t]=Vf(this,Eh,Th).call(this,e,t);const i=Wf(this,vh,[NaN,NaN,NaN,NaN,e,t]);Wf(this,wh,[e,t]),Wf(this,yh,[{line:i,points:Bf(this,wh)}]),Bf(this,gh).set(i,0)}updateProperty(e,t){"stroke-width"===e&&Wf(this,bh,t)}isEmpty(){return!Bf(this,yh)||0===Bf(this,yh).length}isCancellable(){return Bf(this,wh).length<=10}add(e,t){[e,t]=Vf(this,Eh,Th).call(this,e,t);const[n,r,s,a]=Bf(this,gh).subarray(2,6),i=e-s,o=t-a;return Math.hypot(Bf(this,_h)*i,Bf(this,Ah)*o)<=2?null:(Bf(this,wh).push(e,t),isNaN(n)?(Bf(this,gh).set([s,a,e,t],2),Bf(this,vh).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(Bf(this,gh)[0])&&Bf(this,vh).splice(6,6),Bf(this,gh).set([n,r,s,a,e,t],0),Bf(this,vh).push(...oee.createBezierPoints(n,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===Bf(this,wh).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){Wf(this,_h,n),Wf(this,Ah,r),Wf(this,xh,s),[e,t]=Vf(this,Eh,Th).call(this,e,t);const a=Wf(this,vh,[NaN,NaN,NaN,NaN,e,t]);Wf(this,wh,[e,t]);const i=Bf(this,yh).at(-1);return i&&(i.line=new Float32Array(i.line),i.points=new Float32Array(i.points)),Bf(this,yh).push({line:a,points:Bf(this,wh)}),Bf(this,gh).set(a,0),Wf(this,Sh,0),this.toSVGPath(),null}getLastElement(){return Bf(this,yh).at(-1)}setLastElement(e){return Bf(this,yh)?(Bf(this,yh).push(e),Wf(this,vh,e.line),Wf(this,wh,e.points),Wf(this,Sh,0),{path:{d:this.toSVGPath()}}):Bf(this,jh).setLastElement(e)}removeLastElement(){if(!Bf(this,yh))return Bf(this,jh).removeLastElement();Bf(this,yh).pop(),Wf(this,kh,"");for(let e=0,t=Bf(this,yh).length;e<t;e++){const{line:t,points:n}=Bf(this,yh)[e];Wf(this,vh,t),Wf(this,wh,n),Wf(this,Sh,0),this.toSVGPath()}return{path:{d:Bf(this,kh)}}}toSVGPath(){const e=oee.svgRound(Bf(this,vh)[4]),t=oee.svgRound(Bf(this,vh)[5]);if(2===Bf(this,wh).length)return Wf(this,kh,`${Bf(this,kh)} M ${e} ${t} Z`),Bf(this,kh);if(Bf(this,wh).length<=6){const n=Bf(this,kh).lastIndexOf("M");Wf(this,kh,`${Bf(this,kh).slice(0,n)} M ${e} ${t}`),Wf(this,Sh,6)}if(4===Bf(this,wh).length){const e=oee.svgRound(Bf(this,vh)[10]),t=oee.svgRound(Bf(this,vh)[11]);return Wf(this,kh,`${Bf(this,kh)} L ${e} ${t}`),Wf(this,Sh,12),Bf(this,kh)}const n=[];0===Bf(this,Sh)&&(n.push(`M ${e} ${t}`),Wf(this,Sh,6));for(let r=Bf(this,Sh),s=Bf(this,vh).length;r<s;r+=6){const[e,t,s,a,i,o]=Bf(this,vh).slice(r,r+6).map(oee.svgRound);n.push(`C${e} ${t} ${s} ${a} ${i} ${o}`)}return Wf(this,kh,Bf(this,kh)+n.join(" ")),Wf(this,Sh,Bf(this,vh).length),Bf(this,kh)}getOutlines(e,t,n,r){const s=Bf(this,yh).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),Bf(this,jh).build(Bf(this,yh),e,t,n,Bf(this,xh),Bf(this,bh),r),Wf(this,gh,null),Wf(this,vh,null),Wf(this,yh,null),Wf(this,kh,null),Bf(this,jh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}gh=new WeakMap,vh=new WeakMap,yh=new WeakMap,xh=new WeakMap,bh=new WeakMap,wh=new WeakMap,kh=new WeakMap,Sh=new WeakMap,jh=new WeakMap,_h=new WeakMap,Ah=new WeakMap,Eh=new WeakSet,Th=function(e,t){return oee._normalizePoint(e,t,Bf(this,_h),Bf(this,Ah),Bf(this,xh))};class wee extends oee{constructor(){super(...arguments),Uf(this,Lh),Uf(this,Bh),Uf(this,Wh),Uf(this,Vh),Uf(this,Nh,void 0),Uf(this,Ch,0),Uf(this,Ph,void 0),Uf(this,Rh,void 0),Uf(this,Mh,void 0),Uf(this,Ih,void 0),Uf(this,Oh,void 0),Uf(this,zh,void 0),Uf(this,Dh,void 0)}build(e,t,n,r,s,a,i){Wf(this,Mh,t),Wf(this,Ih,n),Wf(this,Oh,r),Wf(this,zh,s),Wf(this,Dh,a),Wf(this,Ph,i??0),Wf(this,Rh,e),Vf(this,Wh,$h).call(this)}get thickness(){return Bf(this,Dh)}setLastElement(e){return Bf(this,Rh).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return Bf(this,Rh).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of Bf(this,Rh))if(e.push(`M${oee.svgRound(t[4])} ${oee.svgRound(t[5])}`),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push(`L${oee.svgRound(t[10])} ${oee.svgRound(t[11])}`);else for(let n=6,r=t.length;n<r;n+=6){const[r,s,a,i,o,l]=t.subarray(n,n+6).map(oee.svgRound);e.push(`C${r} ${s} ${a} ${i} ${o} ${l}`)}else e.push("Z");return e.join("")}serialize([e,t,n,r],s){const a=[],i=[],[o,l,c,d]=Vf(this,Bh,Uh).call(this);let u,h,p,f,m,g,v,y,x;switch(Bf(this,zh)){case 0:x=oee._rescale,u=e,h=t+r,p=n,f=-r,m=e+o*n,g=t+(1-l-d)*r,v=e+(o+c)*n,y=t+(1-l)*r;break;case 90:x=oee._rescaleAndSwap,u=e,h=t,p=n,f=r,m=e+l*n,g=t+o*r,v=e+(l+d)*n,y=t+(o+c)*r;break;case 180:x=oee._rescale,u=e+n,h=t,p=-n,f=r,m=e+(1-o-c)*n,g=t+l*r,v=e+(1-o)*n,y=t+(l+d)*r;break;case 270:x=oee._rescaleAndSwap,u=e+n,h=t+r,p=-n,f=-r,m=e+(1-l-d)*n,g=t+(1-o-c)*r,v=e+(1-l)*n,y=t+(1-o)*r}for(const{line:b,points:w}of Bf(this,Rh))a.push(x(b,u,h,p,f,s?new Array(b.length):null)),i.push(x(w,u,h,p,f,s?new Array(w.length):null));return{lines:a,points:i,rect:[m,g,v,y]}}static deserialize(e,t,n,r,s,{paths:{lines:a,points:i},rotation:o,thickness:l}){const c=[];let d,u,h,p,f;switch(o){case 0:f=oee._rescale,d=-e/n,u=t/r+1,h=1/n,p=-1/r;break;case 90:f=oee._rescaleAndSwap,d=-t/r,u=-e/n,h=1/r,p=1/n;break;case 180:f=oee._rescale,d=e/n+1,u=-t/r,h=-1/n,p=1/r;break;case 270:f=oee._rescaleAndSwap,d=t/r+1,u=e/n+1,h=-1/r,p=-1/n}if(!a){a=[];for(const e of i){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[r,s,i,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,r,s],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(oee.createBezierPoints(r,s,i,o,t,l),3*(a-2)),[r,s,i,o]=[i,o,t,l]}}}for(let g=0,v=a.length;g<v;g++)c.push({line:f(a[g].map(e=>e??NaN),d,u,h,p),points:f(i[g].map(e=>e??NaN),d,u,h,p)});const m=new this.prototype.constructor;return m.build(c,n,r,1,o,l,s),m}get box(){return Bf(this,Nh)}updateProperty(e,t){return"stroke-width"===e?Vf(this,Vh,Hh).call(this,t):null}updateParentDimensions([e,t],n){const[r,s]=Vf(this,Lh,Fh).call(this);Wf(this,Mh,e),Wf(this,Ih,t),Wf(this,Oh,n);const[a,i]=Vf(this,Lh,Fh).call(this),o=a-r,l=i-s,c=Bf(this,Nh);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c}updateRotation(e){return Wf(this,Ch,e),{path:{transform:this.rotationTransform}}}get viewBox(){return Bf(this,Nh).map(oee.svgRound).join(" ")}get defaultProperties(){const[e,t]=Bf(this,Nh);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${oee.svgRound(e)} ${oee.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=Bf(this,Nh);let n=0,r=0,s=0,a=0,i=0,o=0;switch(Bf(this,Ch)){case 90:r=t/e,s=-e/t,i=e;break;case 180:n=-1,a=-1,i=e,o=t;break;case 270:r=-t/e,s=e/t,o=t;break;default:return""}return`matrix(${n} ${r} ${s} ${a} ${oee.svgRound(i)} ${oee.svgRound(o)})`}getPathResizingSVGProperties([e,t,n,r]){const[s,a]=Vf(this,Lh,Fh).call(this),[i,o,l,c]=Bf(this,Nh);if(Math.abs(l-s)<=oee.PRECISION||Math.abs(c-a)<=oee.PRECISION){const s=e+n/2-(i+l/2),a=t+r/2-(o+c/2);return{path:{"transform-origin":`${oee.svgRound(e)} ${oee.svgRound(t)}`,transform:`${this.rotationTransform} translate(${s} ${a})`}}}const d=(n-2*s)/(l-2*s),u=(r-2*a)/(c-2*a),h=l/n,p=c/r;return{path:{"transform-origin":`${oee.svgRound(i)} ${oee.svgRound(o)}`,transform:`${this.rotationTransform} scale(${h} ${p}) translate(${oee.svgRound(s)} ${oee.svgRound(a)}) scale(${d} ${u}) translate(${oee.svgRound(-s)} ${oee.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,n,r]){const[s,a]=Vf(this,Lh,Fh).call(this),i=Bf(this,Nh),[o,l,c,d]=i;if(i[0]=e,i[1]=t,i[2]=n,i[3]=r,Math.abs(c-s)<=oee.PRECISION||Math.abs(d-a)<=oee.PRECISION){const s=e+n/2-(o+c/2),a=t+r/2-(l+d/2);for(const{line:e,points:t}of Bf(this,Rh))oee._translate(e,s,a,e),oee._translate(t,s,a,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${oee.svgRound(e)} ${oee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const u=(n-2*s)/(c-2*s),h=(r-2*a)/(d-2*a),p=-u*(o+s)+e+s,f=-h*(l+a)+t+a;if(1!==u||1!==h||0!==p||0!==f)for(const{line:m,points:g}of Bf(this,Rh))oee._rescale(m,p,f,u,h,m),oee._rescale(g,p,f,u,h,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${oee.svgRound(e)} ${oee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[r,s]=n,a=Bf(this,Nh),i=e-a[0],o=t-a[1];if(Bf(this,Mh)===r&&Bf(this,Ih)===s)for(const{line:l,points:c}of Bf(this,Rh))oee._translate(l,i,o,l),oee._translate(c,i,o,c);else{const e=Bf(this,Mh)/r,t=Bf(this,Ih)/s;Wf(this,Mh,r),Wf(this,Ih,s);for(const{line:n,points:r}of Bf(this,Rh))oee._rescale(n,i,o,e,t,n),oee._rescale(r,i,o,e,t,r);a[2]*=e,a[3]*=t}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${oee.svgRound(e)} ${oee.svgRound(t)}`}}}get defaultSVGProperties(){const e=Bf(this,Nh);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${oee.svgRound(e[0])} ${oee.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Nh=new WeakMap,Ch=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,Ih=new WeakMap,Oh=new WeakMap,zh=new WeakMap,Dh=new WeakMap,Lh=new WeakSet,Fh=function(e=Bf(this,Dh)){const t=Bf(this,Ph)+e/2*Bf(this,Oh);return Bf(this,zh)%180==0?[t/Bf(this,Mh),t/Bf(this,Ih)]:[t/Bf(this,Ih),t/Bf(this,Mh)]},Bh=new WeakSet,Uh=function(){const[e,t,n,r]=Bf(this,Nh),[s,a]=Vf(this,Lh,Fh).call(this,0);return[e+s,t+a,n-2*s,r-2*a]},Wh=new WeakSet,$h=function(){const e=Wf(this,Nh,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of Bf(this,Rh)){if(r.length<=12){for(let t=4,n=r.length;t<n;t+=6)L5.pointBoundingBox(r[t],r[t+1],e);continue}let t=r[4],n=r[5];for(let s=6,a=r.length;s<a;s+=6){const[a,i,o,l,c,d]=r.subarray(s,s+6);L5.bezierBoundingBox(t,n,a,i,o,l,c,d,e),t=c,n=d}}const[t,n]=Vf(this,Lh,Fh).call(this);e[0]=$5(e[0]-t,0,1),e[1]=$5(e[1]-n,0,1),e[2]=$5(e[2]+t,0,1),e[3]=$5(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]},Vh=new WeakSet,Hh=function(e){const[t,n]=Vf(this,Lh,Fh).call(this);Wf(this,Dh,e);const[r,s]=Vf(this,Lh,Fh).call(this),[a,i]=[r-t,s-n],o=Bf(this,Nh);return o[0]-=a,o[1]-=i,o[2]+=2*a,o[3]+=2*i,o};class kee extends vee{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:L6._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new kee(this._viewParameters);return e.updateAll(this),e}}const See=class e extends xee{constructor(e){super({...e,name:"inkEditor"}),Uf(this,qh),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){L6.initialize(e,t),this._defaultDrawingOptions=new kee(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return A5(this,"typesMap",new Map([[Z3.INK_THICKNESS,"stroke-width"],[Z3.INK_COLOR,"stroke"],[Z3.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,s){return new bee(e,t,n,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,s,a){return wee.deserialize(e,t,n,r,s,a)}static async deserialize(e,t,n){let r=null;if(e instanceof Y9){const{data:{inkLists:t,rect:n,rotation:s,id:a,color:i,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:d,contentsObj:u,creationDate:h,modificationDate:p},parent:{page:{pageNumber:f}}}=e;r=e={annotationType:J3.INK,color:Array.from(i),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:c,richText:d,comment:(null==u?void 0:u.str)||null,creationDate:h,modificationDate:p}}const s=await super.deserialize(e,t,n);return s._initialData=r,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new w9(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Z3.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=e.getDefaultDrawingOptions({stroke:L5.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,i=Object.assign(super.serialize(e),{color:L6._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:t,points:n}});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!Vf(this,qh,Gh).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}};qh=new WeakSet,Gh=function(e){const{color:t,thickness:n,opacity:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==r||e.pageIndex!==s},Lf(See,"_type","ink"),Lf(See,"_editorType",J3.INK),Lf(See,"_defaultDrawingOptions",null);let jee=See;class _ee extends wee{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class Aee{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},s,a,i,o){let l=new OffscreenCanvas(1,1),c=l.getContext("2d",{alpha:!1});const d=c.font=`${n} ${r} 200px ${t}`,{actualBoundingBoxLeft:u,actualBoundingBoxRight:h,actualBoundingBoxAscent:p,actualBoundingBoxDescent:f,fontBoundingBoxAscent:m,fontBoundingBoxDescent:g,width:v}=c.measureText(e),y=1.5,x=Math.ceil(Math.max(Math.abs(u)+Math.abs(h)||0,v)*y),b=Math.ceil(Math.max(Math.abs(p)+Math.abs(f)||200,Math.abs(m)+Math.abs(g)||200)*y);l=new OffscreenCanvas(x,b),c=l.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,x,b),c.fillStyle="black",c.fillText(e,.5*x/2,1.5*b/2);const w=Vf(this,hp,pp).call(this,c.getImageData(0,0,x,b).data),k=Vf(this,dp,up).call(this,w),S=Vf(this,fp,mp).call(this,k),j=Vf(this,np,rp).call(this,w,x,b,S);return this.processDrawnLines({lines:{curves:j,width:x,height:b},pageWidth:s,pageHeight:a,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,s){const[a,i,o]=Vf(this,gp,vp).call(this,e),[l,c]=Vf(this,lp,cp).call(this,a,i,o,Math.hypot(i,o)*Bf(this,Kh).sigmaSFactor,Bf(this,Kh).sigmaR,Bf(this,Kh).kernelSize),d=Vf(this,fp,mp).call(this,c),u=Vf(this,np,rp).call(this,l,i,o,d);return this.processDrawnLines({lines:{curves:u,width:i,height:o},pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:a,areContours:i}){r%180!=0&&([t,n]=[n,t]);const{curves:o,width:l,height:c}=e,d=e.thickness??0,u=[],h=Math.min(t/l,n/c),p=h/t,f=h/n,m=[];for(const{points:v}of o){const e=a?Vf(this,ip,op).call(this,v):v;if(!e)continue;m.push(e);const t=e.length,n=new Float32Array(t),r=new Float32Array(3*(2===t?2:t-2));if(u.push({line:r,points:n}),2===t){n[0]=e[0]*p,n[1]=e[1]*f,r.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[s,i,o,l]=e;s*=p,i*=f,o*=p,l*=f,n.set([s,i,o,l],0),r.set([NaN,NaN,NaN,NaN,s,i],0);for(let a=4;a<t;a+=2){const t=n[a]=e[a]*p,c=n[a+1]=e[a+1]*f;r.set(oee.createBezierPoints(s,i,o,l,t,c),3*(a-2)),[s,i,o,l]=[o,l,t,c]}}if(0===u.length)return null;const g=i?new _ee:new wee;return g.build(u,t,n,1,r,i?0:d,s),{outline:g,newCurves:m,areContours:i,thickness:d,width:l,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:s}){let a,i=1/0,o=-1/0,l=0;for(const v of e){l+=v.length;for(let e=2,t=v.length;e<t;e++){const t=v[e]-v[e-2];i=Math.min(i,t),o=Math.max(o,t)}}a=i>=-128&&o<=127?Int8Array:i>=-32768&&o<=32767?Int16Array:Int32Array;const c=e.length,d=8+3*c,u=new Uint32Array(d);let h=0;u[h++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*a.BYTES_PER_ELEMENT,u[h++]=0,u[h++]=r,u[h++]=s,u[h++]=t?0:1,u[h++]=Math.max(0,Math.floor(n??0)),u[h++]=c,u[h++]=a.BYTES_PER_ELEMENT;for(const v of e)u[h++]=v.length-2,u[h++]=v[0],u[h++]=v[1];const p=new CompressionStream("deflate-raw"),f=p.writable.getWriter();await f.ready,f.write(u);const m=a.prototype.constructor;for(const v of e){const e=new m(v.length-2);for(let t=2,n=v.length;t<n;t++)e[t-2]=v[t]-v[t-2];f.write(e)}f.close();const g=await new Response(p.readable).arrayBuffer();return V5(new Uint8Array(g))}static async decompressSignature(e){try{const n=(t=e,Uint8Array.fromBase64?Uint8Array.fromBase64(t):O5(atob(t))),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(n).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let i=null,o=0;for await(const e of r)i||(i=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),i.set(e,o),o+=e.length;const l=new Uint32Array(i.buffer,0,i.length>>2),c=l[1];if(0!==c)throw new Error(`Invalid version: ${c}`);const d=l[2],u=l[3],h=0===l[4],p=l[5],f=l[6],m=l[7],g=[],v=(8+3*f)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(m){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(i.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(i.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(i.buffer,v)}o=0;for(let e=0;e<f;e++){const t=l[3*e+8],n=new Float32Array(t+2);g.push(n);for(let r=0;r<2;r++)n[r]=l[3*e+8+r+1];for(let e=0;e<t;e++)n[e+2]=n[e]+y[o++]}return{areContours:h,thickness:p,outlines:g,width:d,height:u}}catch(Vne){return w5(`decompressSignature: ${Vne}`),null}var t}}Kh=new WeakMap,Xh=new WeakSet,Yh=function(e,t,n,r){return r-=t,0===(n-=e)?r>0?0:4:1===n?r+6:2-r},Jh=new WeakMap,Zh=new WeakSet,Qh=function(e,t,n,r,s,a,i){const o=Vf(this,Xh,Yh).call(this,n,r,s,a);for(let l=0;l<8;l++){const s=(-l+o-i+16)%8;if(0!==e[(n+Bf(this,Jh)[2*s])*t+(r+Bf(this,Jh)[2*s+1])])return s}return-1},ep=new WeakSet,tp=function(e,t,n,r,s,a,i){const o=Vf(this,Xh,Yh).call(this,n,r,s,a);for(let l=0;l<8;l++){const s=(l+o+i+16)%8;if(0!==e[(n+Bf(this,Jh)[2*s])*t+(r+Bf(this,Jh)[2*s+1])])return s}return-1},np=new WeakSet,rp=function(e,t,n,r){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=r?1:0;for(let c=1;c<n-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*n-1-c]=0;let i,o=1;const l=[];for(let c=1;c<n-1;c++){i=1;for(let e=1;e<t-1;e++){const n=c*t+e,r=a[n];if(0===r)continue;let s=c,d=e;if(1===r&&0===a[n-1])o+=1,d-=1;else{if(!(r>=1&&0===a[n+1])){1!==r&&(i=Math.abs(r));continue}o+=1,d+=1,r>1&&(i=r)}const u=[e,c],h=d===e+1,p={isHole:h,points:u,id:o,parent:0};let f;l.push(p);for(const e of l)if(e.id===i){f=e;break}f?f.isHole?p.parent=h?f.parent:i:p.parent=h?i:f.parent:p.parent=h?i:0;const m=Vf(this,Zh,Qh).call(this,a,t,c,e,s,d,0);if(-1===m){a[n]=-o,1!==a[n]&&(i=Math.abs(a[n]));continue}let g=Bf(this,Jh)[2*m],v=Bf(this,Jh)[2*m+1];const y=c+g,x=e+v;s=y,d=x;let b=c,w=e;for(;;){const r=Vf(this,ep,tp).call(this,a,t,b,w,s,d,1);g=Bf(this,Jh)[2*r],v=Bf(this,Jh)[2*r+1];const l=b+g,h=w+v;u.push(h,l);const p=b*t+w;if(0===a[p+1]?a[p]=-o:1===a[p]&&(a[p]=o),l===c&&h===e&&b===y&&w===x){1!==a[n]&&(i=Math.abs(a[n]));break}s=b,d=w,b=l,w=h}}}return l},sp=new WeakSet,ap=function(e,t,n,r){if(n-t<=4){for(let s=t;s<n-2;s+=2)r.push(e[s],e[s+1]);return}const s=e[t],a=e[t+1],i=e[n-4]-s,o=e[n-3]-a,l=Math.hypot(i,o),c=i/l,d=o/l,u=c*a-d*s,h=o/i,p=1/l,f=Math.atan(h),m=Math.cos(f),g=Math.sin(f),v=p*(Math.abs(m)+Math.abs(g)),y=p*(1-v+v**2),x=Math.max(Math.atan(Math.abs(g+m)*y),Math.atan(Math.abs(g-m)*y));let b=0,w=t;for(let k=t+2;k<n-2;k+=2){const t=Math.abs(u-c*e[k+1]+d*e[k]);t>b&&(w=k,b=t)}b>(l*x)**2?(Vf(this,sp,ap).call(this,e,t,w+2,r),Vf(this,sp,ap).call(this,e,w,n,r)):r.push(s,a)},ip=new WeakSet,op=function(e){const t=[],n=e.length;return Vf(this,sp,ap).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},lp=new WeakSet,cp=function(e,t,n,r,s,a){const i=new Float32Array(a**2),o=-2*r**2,l=a>>1;for(let f=0;f<a;f++){const e=(f-l)**2;for(let t=0;t<a;t++)i[f*a+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*s**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/d);const u=e.length,h=new Uint8Array(u),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let r=0;r<t;r++){const s=f*t+r,o=e[s];let d=0,u=0;for(let h=0;h<a;h++){const s=f+h-l;if(!(s<0||s>=n))for(let n=0;n<a;n++){const p=r+n-l;if(p<0||p>=t)continue;const f=e[s*t+p],m=i[h*a+n]*c[Math.abs(f-o)];d+=f*m,u+=m}}p[h[s]=Math.round(d/u)]++}return[h,p]},dp=new WeakSet,up=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},hp=new WeakSet,pp=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,s=1/0;for(let i=0,o=n.length;i<o;i++){const t=n[i]=e[i<<2];r=Math.max(r,t),s=Math.min(s,t)}const a=255/(r-s);for(let i=0,o=n.length;i<o;i++)n[i]=(n[i]-s)*a;return n},fp=new WeakSet,mp=function(e){let t,n=-1/0,r=-1/0;const s=e.findIndex(e=>0!==e);let a=s,i=s;for(t=s;t<256;t++){const s=e[t];s>n&&(t-a>r&&(r=t-a,i=t-1),n=s,a=t)}for(t=i-1;t>=0&&!(e[t]>e[t+1]);t--);return t},gp=new WeakSet,vp=function(e){const t=e,{width:n,height:r}=e,{maxDim:s}=Bf(this,Kh);let a=n,i=r;if(n>s||r>s){let o=n,l=r,c=Math.log2(Math.max(n,r)/s);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){a=Math.ceil(o/2),i=Math.ceil(l/2);const n=new OffscreenCanvas(a,i);n.getContext("2d").drawImage(e,0,0,o,l,0,0,a,i),o=a,l=i,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(s/a,s/i);a=Math.round(a*u),i=Math.round(i*u)}const o=new OffscreenCanvas(a,i).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,a,i),o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,a,i);const l=o.getImageData(0,0,a,i).data;return[Vf(this,hp,pp).call(this,l),a,i]},Uf(Aee,Xh),Uf(Aee,Zh),Uf(Aee,ep),Uf(Aee,np),Uf(Aee,sp),Uf(Aee,ip),Uf(Aee,lp),Uf(Aee,dp),Uf(Aee,hp),Uf(Aee,fp),Uf(Aee,gp),Uf(Aee,Kh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),Uf(Aee,Jh,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Eee extends vee{constructor(){super(),super.updateProperties({fill:L6._defaultLineColor,"stroke-width":0})}clone(){const e=new Eee;return e.updateAll(this),e}}class Tee extends kee{constructor(e){super(e),super.updateProperties({stroke:L6._defaultLineColor,"stroke-width":1})}clone(){const e=new Tee(this._viewParameters);return e.updateAll(this),e}}const Nee=class e extends xee{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),Uf(this,yp,!1),Uf(this,xp,null),Uf(this,bp,null),Uf(this,wp,null),this._willKeepAspectRatio=!0,Wf(this,bp,e.signatureData||null),Wf(this,xp,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){L6.initialize(e,t),this._defaultDrawingOptions=new Eee,this._defaultDrawnSignatureOptions=new Tee(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return A5(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Bf(this,xp)}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),null===this._drawId)if(Bf(this,bp)){const{lines:t,mustSmooth:n,areContours:r,description:s,uuid:a,heightInPage:i}=Bf(this,bp),{rawDims:{pageWidth:o,pageHeight:l},rotation:c}=this.parent.viewport,d=Aee.processDrawnLines({lines:t,pageWidth:o,pageHeight:l,rotation:c,innerMargin:e._INNER_MARGIN,mustSmooth:n,areContours:r});this.addSignature(d,i,s,a)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Bf(this,xp)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(e){Wf(this,wp,e),this.addEditToolbar()}getUuid(){return Bf(this,wp)}get description(){return Bf(this,xp)}set description(e){Wf(this,xp,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null==t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:r,height:s}=Bf(this,bp),a=Math.max(r,s);return{areContours:t,outline:Aee.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:r,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,s){const{x:a,y:i}=this,{outline:o}=Wf(this,bp,t);let l;Wf(this,yp,o instanceof _ee),this.description=r,Bf(this,yp)?l=e.getDefaultDrawingOptions():(l=e._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:l});const[,c]=this.pageDimensions;let d=n/c;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=a,this.y=i,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Aee.process(t,n,r,s,e._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return Aee.extractContoursFromText(t,n,r,s,a,e._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Aee.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:s,innerMargin:e._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=e.getDefaultDrawingOptions():(this._drawingOptions=e._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:Bf(this,yp),color:[0,0,0],thickness:Bf(this,yp)?0:r});return this.addComment(s),e?(s.paths={lines:t,points:n},s.uuid=Bf(this,wp),s.isCopy=!0):s.lines=t,Bf(this,xp)&&(s.accessibilityData={type:"Figure",alt:Bf(this,xp)}),s}static deserializeDraw(e,t,n,r,s,a){return a.areContours?_ee.deserialize(e,t,n,r,s,a):wee.deserialize(e,t,n,r,s,a)}static async deserialize(e,t,n){var r;const s=await super.deserialize(e,t,n);return Wf(s,yp,e.areContours),s.description=(null==(r=e.accessibilityData)?void 0:r.alt)||"",Wf(s,wp,e.uuid),s}};yp=new WeakMap,xp=new WeakMap,bp=new WeakMap,wp=new WeakMap,Lf(Nee,"_type","signature"),Lf(Nee,"_editorType",J3.SIGNATURE),Lf(Nee,"_defaultDrawingOptions",null);let Cee=Nee;class Pee extends L6{constructor(e){super({...e,name:"stampEditor"}),Uf(this,Mp),Uf(this,Op),Uf(this,Dp),Uf(this,Fp),Uf(this,Up),Uf(this,$p),Uf(this,Hp),Uf(this,Gp),Uf(this,kp,null),Uf(this,Sp,null),Uf(this,jp,null),Uf(this,_p,null),Uf(this,Ap,null),Uf(this,Ep,""),Uf(this,Tp,null),Uf(this,Np,!1),Uf(this,Cp,null),Uf(this,Pp,!1),Uf(this,Rp,!1),Wf(this,_p,e.bitmapUrl),Wf(this,Ap,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){L6.initialize(e,t)}static isHandlingMimeForPasting(e){return u6.includes(e)}static paste(e,t){t.pasteEditor({mode:J3.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!(null==(e=this.altTextData)?void 0:e.altText)}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(await n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:r,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,i=await n.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!i)throw new Error("No response from the AI service.");if(i.error)throw new Error("Error from the AI service.");if(i.cancel)return null;if(!i.output)throw new Error("No valid response from the AI service.");const o=i.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;Bf(this,Sp)&&(Wf(this,kp,null),this._uiManager.imageManager.deleteId(Bf(this,Sp)),null==(e=Bf(this,Tp))||e.remove(),Wf(this,Tp,null),Bf(this,Cp)&&(clearTimeout(Bf(this,Cp)),Wf(this,Cp,null))),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Bf(this,Sp)&&null===Bf(this,Tp)&&Vf(this,Dp,Lp).call(this),this.isAttachedToDOM||this.parent.add(this))):Bf(this,Sp)&&Vf(this,Dp,Lp).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(Bf(this,jp)||Bf(this,kp)||Bf(this,_p)||Bf(this,Ap)||Bf(this,Sp)||Bf(this,Np))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Bf(this,Np)||(Bf(this,kp)?Vf(this,Fp,Bp).call(this):Vf(this,Dp,Lp).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(Wf(this,Sp,n),r&&Wf(this,kp,r),Wf(this,Np,!1),Vf(this,Fp,Bp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==Bf(this,Cp)&&clearTimeout(Bf(this,Cp));Wf(this,Cp,setTimeout(()=>{Wf(this,Cp,null),Vf(this,$p,Vp).call(this)},200))}copyCanvas(e,t,n=!1){e||(e=224);const{width:r,height:s}=Bf(this,kp),a=new d6;let i=Bf(this,kp),o=r,l=s,c=null;if(t){if(r>t||s>t){const e=Math.min(t/r,t/s);o=Math.floor(r*e),l=Math.floor(s*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*a.sx),n=c.height=Math.ceil(l*a.sy);Bf(this,Pp)||(i=Vf(this,Up,Wp).call(this,e,n));const d=c.getContext("2d");d.filter=this._uiManager.hcmFilter;let u="white",h="#cfcfd8";"none"!==this._uiManager.hcmFilter?h="black":h6.isDarkMode&&(u="#8f8f9d",h="#42414d");const p=15,f=p*a.sx,m=p*a.sy,g=new OffscreenCanvas(2*f,2*m),v=g.getContext("2d");v.fillStyle=u,v.fillRect(0,0,2*f,2*m),v.fillStyle=h,v.fillRect(0,0,f,m),v.fillRect(f,m,f,m),d.fillStyle=d.createPattern(g,"repeat"),d.fillRect(0,0,e,n),d.drawImage(i,0,0,i.width,i.height,0,0,e,n)}let d=null;if(n){let t,n;if(a.symmetric&&i.width<e&&i.height<e)t=i.width,n=i.height;else if(i=Bf(this,kp),r>e||s>e){const a=Math.min(e/r,e/s);t=Math.floor(r*a),n=Math.floor(s*a),Bf(this,Pp)||(i=Vf(this,Up,Wp).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(i,0,0,i.width,i.height,0,0,t,n),d={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:d}}static async deserialize(e,t,n){var r;let s=null,a=!1;if(e instanceof tee){const{data:{rect:i,rotation:o,id:l,structParent:c,popupRef:d,richText:u,contentsObj:h,creationDate:p,modificationDate:f},container:m,parent:{page:{pageNumber:g}},canvas:v}=e;let y,x;v?(delete e.canvas,({id:y,bitmap:x}=n.imageManager.getFromCanvas(m.id,v)),v.remove()):(a=!0,e._hasNoCanvas=!0);const b=(null==(r=await t._structTree.getAriaAttributes(`${W5}${l}`))?void 0:r.get("aria-label"))||"";s=e={annotationType:J3.STAMP,bitmapId:y,bitmap:x,pageIndex:g-1,rect:i.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:b},isSvg:!1,structParent:c,popupRef:d,richText:u,comment:(null==h?void 0:h.str)||null,creationDate:p,modificationDate:f}}const i=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;a?(n.addMissingCanvas(e.id,i),Wf(i,Np,!0)):d&&n.imageManager.isValidId(d)?(Wf(i,Sp,d),l&&Wf(i,kp,l)):Wf(i,_p,c),Wf(i,Pp,u);const[p,f]=i.pageDimensions;return i.width=(o[2]-o[0])/p,i.height=(o[3]-o[1])/f,h&&(i.altTextData=h),i._initialData=s,e.comment&&i.setCommentData(e),Wf(i,Rp,!!s),i}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:Bf(this,Sp),isSvg:Bf(this,Pp)});if(this.addComment(n),e)return n.bitmapUrl=Vf(this,Hp,qp).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const e=Vf(this,Gp,Kp).call(this,n);return e.isSame?null:(e.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(null===t)return n;t.stamps||(t.stamps=new Map);const a=Bf(this,Pp)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(Bf(this,Sp))){if(Bf(this,Pp)){const e=t.stamps.get(Bf(this,Sp));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=Vf(this,Hp,qp).call(this,!1))}}else t.stamps.set(Bf(this,Sp),{area:a,serialized:n}),n.bitmap=Vf(this,Hp,qp).call(this,!1);return n}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}kp=new WeakMap,Sp=new WeakMap,jp=new WeakMap,_p=new WeakMap,Ap=new WeakMap,Ep=new WeakMap,Tp=new WeakMap,Np=new WeakMap,Cp=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,Mp=new WeakSet,Ip=function(e,t=!1){e?(Wf(this,kp,e.bitmap),t||(Wf(this,Sp,e.id),Wf(this,Pp,e.isSvg)),e.file&&Wf(this,Ep,e.file.name),Vf(this,Fp,Bp).call(this)):this.remove()},Op=new WeakSet,zp=function(){if(Wf(this,jp,null),this._uiManager.enableWaiting(!1),Bf(this,Tp))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Bf(this,kp))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Bf(this,kp)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Dp=new WeakSet,Lp=function(){if(Bf(this,Sp))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Bf(this,Sp)).then(e=>Vf(this,Mp,Ip).call(this,e,!0)).finally(()=>Vf(this,Op,zp).call(this));if(Bf(this,_p)){const e=Bf(this,_p);return Wf(this,_p,null),this._uiManager.enableWaiting(!0),void Wf(this,jp,this._uiManager.imageManager.getFromUrl(e).then(e=>Vf(this,Mp,Ip).call(this,e)).finally(()=>Vf(this,Op,zp).call(this)))}if(Bf(this,Ap)){const e=Bf(this,Ap);return Wf(this,Ap,null),this._uiManager.enableWaiting(!0),void Wf(this,jp,this._uiManager.imageManager.getFromFile(e).then(e=>Vf(this,Mp,Ip).call(this,e)).finally(()=>Vf(this,Op,zp).call(this)))}const e=document.createElement("input");e.type="file",e.accept=u6.join(",");const t=this._uiManager._signal;Wf(this,jp,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Vf(this,Mp,Ip).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>Vf(this,Op,zp).call(this))),e.click()},Fp=new WeakSet,Bp=function(){var e;const{div:t}=this;let{width:n,height:r}=Bf(this,kp);const[s,a]=this.pageDimensions,i=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>i*s||r>i*a){const e=Math.min(i*s/n,i*a/r);n*=e,r*=e}this._uiManager.enableWaiting(!1);const o=Wf(this,Tp,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/s,this.height=r/a,this.setDims(),(null==(e=this._initialOptions)?void 0:e.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),Vf(this,$p,Vp).call(this),Bf(this,Rp)||(this.parent.addUndoableEditor(this),Wf(this,Rp,!0)),this._reportTelemetry({action:"inserted_image"}),Bf(this,Ep)&&this.div.setAttribute("aria-description",Bf(this,Ep)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Up=new WeakSet,Wp=function(e,t){const{width:n,height:r}=Bf(this,kp);let s=n,a=r,i=Bf(this,kp);for(;s>2*e||a>2*t;){const n=s,r=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const o=new OffscreenCanvas(s,a);o.getContext("2d").drawImage(i,0,0,n,r,0,0,s,a),i=o.transferToImageBitmap()}return i},$p=new WeakSet,Vp=function(){const[e,t]=this.parentDimensions,{width:n,height:r}=this,s=new d6,a=Math.ceil(n*e*s.sx),i=Math.ceil(r*t*s.sy),o=Bf(this,Tp);if(!o||o.width===a&&o.height===i)return;o.width=a,o.height=i;const l=Bf(this,Pp)?Bf(this,kp):Vf(this,Up,Wp).call(this,a,i),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,a,i)},Hp=new WeakSet,qp=function(e){if(e){if(Bf(this,Pp)){const e=this._uiManager.imageManager.getSvgUrl(Bf(this,Sp));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=Bf(this,kp));return e.getContext("2d").drawImage(Bf(this,kp),0,0),e.toDataURL()}if(Bf(this,Pp)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*X5.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*X5.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,r);return s.getContext("2d").drawImage(Bf(this,kp),0,0,Bf(this,kp).width,Bf(this,kp).height,0,0,n,r),s.transferToImageBitmap()}return structuredClone(Bf(this,kp))},Gp=new WeakSet,Kp=function(e){var t;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=e.pageIndex===n,a=((null==(t=e.accessibilityData)?void 0:t.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Lf(Pee,"_type","stamp"),Lf(Pee,"_editorType",J3.STAMP);const Ree=class e{constructor({uiManager:t,pageIndex:n,div:r,structTreeLayer:s,accessibilityManager:a,annotationLayer:i,drawLayer:o,textLayer:l,viewport:c,l10n:d}){Uf(this,pf),Uf(this,mf),Uf(this,vf),Uf(this,xf),Uf(this,wf),Uf(this,Sf),Uf(this,Xp,void 0),Uf(this,Yp,!1),Uf(this,Jp,null),Uf(this,Zp,null),Uf(this,Qp,null),Uf(this,ef,new Map),Uf(this,tf,!1),Uf(this,nf,!1),Uf(this,rf,!1),Uf(this,sf,null),Uf(this,af,null),Uf(this,of,null),Uf(this,lf,null),Uf(this,cf,null),Uf(this,df,-1),Uf(this,uf,void 0);const u=[...Bf(e,hf).values()];if(!e._initialized){e._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),Wf(this,uf,t),this.pageIndex=n,this.div=r,Wf(this,Xp,a),Wf(this,Jp,i),this.viewport=c,Wf(this,of,l),this.drawLayer=o,this._structTree=s,Bf(this,uf).addLayer(this)}get isEmpty(){return 0===Bf(this,ef).size}get isInvisible(){return this.isEmpty&&Bf(this,uf).getMode()===J3.NONE}updateToolbar(e){Bf(this,uf).updateToolbar(e)}updateMode(t=Bf(this,uf).getMode()){switch(Vf(this,Sf,jf).call(this),t){case J3.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case J3.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case J3.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),t===J3.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of Bf(e,hf).values())n.toggle(`${r._type}Editing`,t===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=Bf(this,of))?void 0:t.div)}setEditingState(e){Bf(this,uf).setEditingState(e)}addCommands(e){Bf(this,uf).addCommands(e)}cleanUndoStack(e){Bf(this,uf).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;null==(t=Bf(this,Jp))||t.div.classList.toggle("disabled",!e)}async enable(){var e;Wf(this,rf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null==(e=Bf(this,cf))||e.abort(),Wf(this,cf,null);const t=new Set;for(const r of Bf(this,pf,ff))r.enableEditing(),r.show(!0),r.annotationElementId&&(Bf(this,uf).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const n=Bf(this,Jp);if(n)for(const r of n.getEditableAnnotations()){if(r.hide(),Bf(this,uf).isDeletedAnnotationElement(r.data.id))continue;if(t.has(r.data.id))continue;const e=await this.deserialize(r);e&&(this.addOrRebuild(e),e.enableEditing())}Wf(this,rf,!1),Bf(this,uf)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var t;if(Wf(this,nf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Bf(this,of)&&!Bf(this,cf)){Wf(this,cf,new AbortController);const e=Bf(this,uf).combinedSignal(Bf(this,cf));Bf(this,of).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:r}=e;if(r-Bf(this,df)>500)return void Wf(this,df,r);Wf(this,df,-1);const{classList:s}=this.div;s.toggle("getElements",!0);const a=document.elementsFromPoint(t,n);if(s.toggle("getElements",!1),!this.div.contains(a[0]))return;let i;const o=new RegExp(`^${Y3}[0-9]+$`);for(const c of a)if(o.test(c.id)){i=c.id;break}if(!i)return;const l=Bf(this,ef).get(i);null===(null==l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick(e))},{signal:e,capture:!0})}const n=Bf(this,Jp);if(n){const e=new Map,r=new Map;for(const a of Bf(this,pf,ff))a.disableEditing(),a.annotationElementId?null===a.serialize()?(r.set(a.annotationElementId,a),null==(t=this.getEditableAnnotation(a.annotationElementId))||t.show(),a.remove()):e.set(a.annotationElementId,a):a.updateFakeAnnotationElement(n);const s=n.getEditableAnnotations();for(const t of s){const{id:n}=t.data;if(Bf(this,uf).isDeletedAnnotationElement(n)){t.updateEdited({deleted:!0});continue}let s=r.get(n);s?(s.resetAnnotationElement(t),s.show(!1),t.show()):(s=e.get(n),s&&(Bf(this,uf).addChangedExistingAnnotation(s),s.renderAnnotationElement(t)&&s.show(!1)),t.show())}}Vf(this,Sf,jf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of Bf(e,hf).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Wf(this,nf,!1)}getEditableAnnotation(e){var t;return(null==(t=Bf(this,Jp))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){Bf(this,uf).getActive()!==e&&Bf(this,uf).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(null==(e=Bf(this,of))?void 0:e.div)&&!Bf(this,lf)){Wf(this,lf,new AbortController);const e=Bf(this,uf).combinedSignal(Bf(this,lf));Bf(this,of).div.addEventListener("pointerdown",Vf(this,mf,gf).bind(this),{signal:e}),Bf(this,of).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(null==(e=Bf(this,of))?void 0:e.div)&&Bf(this,lf)&&(Bf(this,lf).abort(),Wf(this,lf,null),Bf(this,of).div.classList.remove("highlighting"))}enableClick(){if(Bf(this,Zp))return;Wf(this,Zp,new AbortController);const e=Bf(this,uf).combinedSignal(Bf(this,Zp));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null==(e=Bf(this,Zp))||e.abort(),Wf(this,Zp,null)}attach(e){Bf(this,ef).set(e.id,e);const{annotationElementId:t}=e;t&&Bf(this,uf).isDeletedAnnotationElement(t)&&Bf(this,uf).removeDeletedAnnotationElement(e)}detach(e){var t;Bf(this,ef).delete(e.id),null==(t=Bf(this,Xp))||t.removePointerInTextLayer(e.contentDiv),!Bf(this,nf)&&e.annotationElementId&&Bf(this,uf).addDeletedAnnotationElement(e)}remove(e){this.detach(e),Bf(this,uf).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(Bf(this,uf).addDeletedAnnotationElement(e.annotationElementId),L6.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),Bf(this,uf).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!Bf(this,rf)),Bf(this,uf).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!Bf(this,Qp)&&(e._focusEventsAllowed=!1,Wf(this,Qp,setTimeout(()=>{Wf(this,Qp,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:Bf(this,uf)._signal}),n.focus())},0))),e._structTreeParentId=null==(t=Bf(this,Xp))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(const t of Bf(this,ef).values())if(t.uid===e)return t;return null}getNextId(){return Bf(this,uf).getId()}combinedSignal(e){return Bf(this,uf).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null==(e=Bf(this,vf,yf))?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await Bf(this,uf).updateMode(e.mode);const{offsetX:n,offsetY:r}=Vf(this,wf,kf).call(this),s=this.getNextId(),a=Vf(this,xf,bf).call(this,{parent:this,id:s,x:n,y:r,uiManager:Bf(this,uf),isCentered:!0,...t});a&&this.add(a)}async deserialize(t){var n;return await(null==(n=Bf(e,hf).get(t.annotationType??t.annotationEditorType))?void 0:n.deserialize(t,this,Bf(this,uf)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=Vf(this,xf,bf).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:Bf(this,uf),isCentered:t,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(Vf(this,wf,kf).call(this),!0,e)}setSelected(e){Bf(this,uf).setSelected(e)}toggleSelected(e){Bf(this,uf).toggleSelected(e)}unselect(e){Bf(this,uf).unselect(e)}pointerup(e){var t;const{isMac:n}=z5.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!Bf(this,tf))return;if(Wf(this,tf,!1),(null==(t=Bf(this,vf,yf))?void 0:t.isDrawer)&&Bf(this,vf,yf).supportMultipleDrawings)return;if(!Bf(this,Yp))return void Wf(this,Yp,!0);const r=Bf(this,uf).getMode();r!==J3.STAMP&&r!==J3.SIGNATURE?this.createAndAddNewEditor(e,!1):Bf(this,uf).unselectAll()}pointerdown(e){var t;if(Bf(this,uf).getMode()===J3.HIGHLIGHT&&this.enableTextSelection(),Bf(this,tf))return void Wf(this,tf,!1);const{isMac:n}=z5.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(Wf(this,tf,!0),null==(t=Bf(this,vf,yf))?void 0:t.isDrawer)return void this.startDrawingSession(e);const r=Bf(this,uf).getActive();Wf(this,Yp,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),Bf(this,sf))return void Bf(this,vf,yf).startDrawing(this,Bf(this,uf),!1,e);Bf(this,uf).setCurrentDrawingSession(this),Wf(this,sf,new AbortController);const t=Bf(this,uf).combinedSignal(Bf(this,sf));this.div.addEventListener("blur",({relatedTarget:e})=>{e&&!this.div.contains(e)&&(Wf(this,af,null),this.commitOrRemove())},{signal:t}),Bf(this,vf,yf).startDrawing(this,Bf(this,uf),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&Wf(this,af,e))}Bf(this,af)&&setTimeout(()=>{var e;null==(e=Bf(this,af))||e.focus(),Wf(this,af,null)},0)}endDrawingSession(e=!1){return Bf(this,sf)?(Bf(this,uf).setCurrentDrawingSession(null),Bf(this,sf).abort(),Wf(this,sf,null),Wf(this,af,null),Bf(this,vf,yf).endDrawing(e)):null}findNewParent(e,t,n){const r=Bf(this,uf).findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}commitOrRemove(){return!!Bf(this,sf)&&(this.endDrawingSession(),!0)}onScaleChanging(){Bf(this,sf)&&Bf(this,vf,yf).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),(null==(e=Bf(this,uf).getActive())?void 0:e.parent)===this&&(Bf(this,uf).commitOrRemove(),Bf(this,uf).setActiveEditor(null)),Bf(this,Qp)&&(clearTimeout(Bf(this,Qp)),Wf(this,Qp,null));for(const n of Bf(this,ef).values())null==(t=Bf(this,Xp))||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,Bf(this,ef).clear(),Bf(this,uf).removeLayer(this)}render({viewport:e}){this.viewport=e,c6(this.div,e);for(const t of Bf(this,uf).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){Bf(this,uf).commitOrRemove(),Vf(this,Sf,jf).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,c6(this.div,{rotation:n}),t!==n)for(const r of Bf(this,ef).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return Bf(this,uf).viewParameters.realScale}};Xp=new WeakMap,Yp=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,Qp=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap,cf=new WeakMap,df=new WeakMap,uf=new WeakMap,hf=new WeakMap,pf=new WeakSet,ff=function(){return 0!==Bf(this,ef).size?Bf(this,ef).values():Bf(this,uf).getEditors(this.pageIndex)},mf=new WeakSet,gf=function(e){Bf(this,uf).unselectAll();const{target:t}=e;if(t===Bf(this,of).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&Bf(this,of).div.contains(t)){const{isMac:t}=z5.platform;if(0!==e.button||e.ctrlKey&&t)return;Bf(this,uf).showAllEditors("highlight",!0,!0),Bf(this,of).div.classList.add("free"),this.toggleDrawing(),gee.startHighlighting(this,"ltr"===Bf(this,uf).direction,{target:Bf(this,of).div,x:e.x,y:e.y}),Bf(this,of).div.addEventListener("pointerup",()=>{Bf(this,of).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Bf(this,uf)._signal}),e.preventDefault()}},vf=new WeakSet,yf=function(){return Bf(Ree,hf).get(Bf(this,uf).getMode())},xf=new WeakSet,bf=function(e){const t=Bf(this,vf,yf);return t?new t.prototype.constructor(e):null},wf=new WeakSet,kf=function(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),i=(s+Math.min(window.innerWidth,e+n))/2-e,o=(a+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180==0?[i,o]:[o,i];return{offsetX:l,offsetY:c}},Sf=new WeakSet,jf=function(){for(const e of Bf(this,ef).values())e.isEmpty()&&e.remove()},Lf(Ree,"_initialized",!1),Uf(Ree,hf,new Map([iee,jee,Pee,gee,Cee].map(e=>[e._editorType,e])));let Mee=Ree;const Iee=class e{constructor({pageIndex:e}){Uf(this,Pf),Uf(this,Mf),Uf(this,Of),Uf(this,_f,null),Uf(this,Af,new Map),Uf(this,Ef,new Map),this.pageIndex=e}setParent(e){if(Bf(this,_f)){if(Bf(this,_f)!==e){if(Bf(this,Af).size>0)for(const t of Bf(this,Af).values())t.remove(),e.append(t);Wf(this,_f,e)}}else Wf(this,_f,e)}static get _svgFactory(){return A5(this,"_svgFactory",new A9)}draw(t,n=!1,r=!1){const s=$f(e,Tf)._++,a=Vf(this,Pf,Rf).call(this),i=e._svgFactory.createElement("defs");a.append(i);const o=e._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),n&&Bf(this,Ef).set(s,o);const c=r?Vf(this,Mf,If).call(this,i,l):null,d=e._svgFactory.createElement("use");return a.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(a,t),Bf(this,Af).set(s,a),{id:s,clipPathId:`url(#${c})`}}drawOutline(t,n){const r=$f(e,Tf)._++,s=Vf(this,Pf,Rf).call(this),a=e._svgFactory.createElement("defs");s.append(a);const i=e._svgFactory.createElement("path");a.append(i);const o=`path_p${this.pageIndex}_${r}`;let l;if(i.setAttribute("id",o),i.setAttribute("vector-effect","non-scaling-stroke"),n){const t=e._svgFactory.createElement("mask");a.append(t),l=`mask_p${this.pageIndex}_${r}`,t.setAttribute("id",l),t.setAttribute("maskUnits","objectBoundingBox");const n=e._svgFactory.createElement("rect");t.append(n),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("fill","white");const s=e._svgFactory.createElement("use");t.append(s),s.setAttribute("href",`#${o}`),s.setAttribute("stroke","none"),s.setAttribute("fill","black"),s.setAttribute("fill-rule","nonzero"),s.classList.add("mask")}const c=e._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const d=c.cloneNode();return s.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,t),Bf(this,Af).set(r,s),r}finalizeDraw(e,t){Bf(this,Ef).delete(e),this.updateProperties(e,t)}updateProperties(t,n){var r;if(!n)return;const{root:s,bbox:a,rootClass:i,path:o}=n,l="number"==typeof t?Bf(this,Af).get(t):t;if(l){if(s&&Vf(this,Of,zf).call(this,l,s),a&&Vf(r=e,Nf,Cf).call(r,l,a),i){const{classList:e}=l;for(const[t,n]of Object.entries(i))e.toggle(t,n)}if(o){const e=l.firstChild.firstChild;Vf(this,Of,zf).call(this,e,o)}}}updateParent(e,t){if(t===this)return;const n=Bf(this,Af).get(e);n&&(Bf(t,_f).append(n),Bf(this,Af).delete(e),Bf(t,Af).set(e,n))}remove(e){Bf(this,Ef).delete(e),null!==Bf(this,_f)&&(Bf(this,Af).get(e).remove(),Bf(this,Af).delete(e))}destroy(){Wf(this,_f,null);for(const e of Bf(this,Af).values())e.remove();Bf(this,Af).clear(),Bf(this,Ef).clear()}};_f=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Tf=new WeakMap,Nf=new WeakSet,Cf=function(e,[t,n,r,s]){const{style:a}=e;a.top=100*n+"%",a.left=100*t+"%",a.width=100*r+"%",a.height=100*s+"%"},Pf=new WeakSet,Rf=function(){const e=Iee._svgFactory.create(1,1,!0);return Bf(this,_f).append(e),e.setAttribute("aria-hidden",!0),e},Mf=new WeakSet,If=function(e,t){const n=Iee._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Iee._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},Of=new WeakSet,zf=function(e,t){for(const[n,r]of Object.entries(t))null===r?e.removeAttribute(n):e.setAttribute(n,r)},Uf(Iee,Nf),Uf(Iee,Tf,0);let Oee=Iee;globalThis._pdfjsTestingUtils={HighlightOutliner:uee},globalThis.pdfjsLib={AbortException:M5,AnnotationEditorLayer:Mee,AnnotationEditorParamsType:Z3,AnnotationEditorType:J3,AnnotationEditorUIManager:P6,AnnotationLayer:ree,AnnotationMode:X3,AnnotationType:i5,applyOpacity:function(e,t,n,r){const s=255*(1-(r=Math.min(Math.max(r??1,0),1)));return[e=Math.round(e*r+s),t=Math.round(t*r+s),n=Math.round(n*r+s)]},build:"f56dc8601",ColorPicker:x9,createValidAbsoluteUrl:j5,CSSConstants:class{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),A5(this,"commentForegroundColor",i6(n))}},DOMSVGFactory:A9,DrawLayer:Oee,FeatureTest:z5,fetchData:Y5,findContrastColor:function(e,t){const n=e[0]+256*e[1]+65536*e[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2];let r=v6.get(n);if(r)return r;const s=new Float32Array(9),a=s.subarray(0,3),i=s.subarray(3,6);p6(e,i);const o=s.subarray(6,9);p6(t,o);const l=o[2]<.5,c=l?12:4.5;if(i[2]=l?Math.sqrt(i[2]):1-Math.sqrt(1-i[2]),g6(i,o,a)<c){let e,t;l?(e=i[2],t=1):(e=0,t=i[2]);const n=.005;for(;t-e>n;){const n=i[2]=(e+t)/2;l===g6(i,o,a)<c?e=n:t=n}i[2]=l?t:e}return f6(i,a),r=L5.makeHexColor(Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])),v6.set(n,r),r},getDocument:a9,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e,t="document.pdf"){if("string"!=typeof e)return t;if(Q5(e))return w5('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch{try{return new URL(decodeURIComponent(e))}catch{try{return new URL(e,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch{return null}}}}})(e);if(!n)return t;const r=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch{return e}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return r(a);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(s.test(n))return r(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(s.test(n))return r(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return r(e[0])}return t},getRGB:i6,getUuid:U5,getXfaPageViewport:function(e,{scale:t=1,rotation:n=0}){const{width:r,height:s}=e.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new J5({viewBox:a,userUnit:1,scale:t,rotation:n})},GlobalWorkerOptions:T7,ImageKind:a5,InvalidPDFException:C5,isDataScheme:Q5,isPdfFile:e6,isValidExplicitDest:J6,MathClamp:$5,noContextMenu:r6,normalizeUnicode:function(e){return F5||(F5=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,B5=new Map([["ﬅ","ſt"]])),e.replaceAll(F5,(e,t,n)=>t?t.normalize("NFKC"):B5.get(n))},OPS:p5,OutputScale:d6,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:l9,PDFDateString:a6,PDFWorker:h9,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:X5,RenderingCancelledException:Z5,renderRichText:y6,ResponseException:P5,setLayerDimensions:c6,shadow:A5,SignatureExtractor:Aee,stopEvent:s6,SupportedImageMimeTypes:u6,TextLayer:s9,TouchManager:z6,updateUrlHash:_5,Util:L5,VerbosityLevel:h5,version:v9,XfaLayer:q5},T7.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${v9}/pdf.worker.min.js`;const zee={columnMapping:{name:"nazwa",category:"kategoria",price:"cena",quantity:"ilosc",description:"opis",sku:"sku",unit:"jednostka",brand:"marka"},options:{skipEmptyRows:!0,skipHeaderRow:!0,maxRows:1e4,encoding:"utf-8"}};const Dee=new class{constructor(e={}){Lf(this,"config"),this.config={...zee,...e}}async parseFile(e,t){console.log("ParserService: Rozpoczynanie parsowania pliku:",e.name,e.type,e.size);const n={fileId:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fileName:e.name,status:"parsing",products:[],progress:0,metadata:{totalRows:0,validRows:0,invalidRows:0,columns:[],fileSize:e.size,fileType:e.type}};try{if(null==t||t(10,"Rozpoczynanie parsowania..."),console.log("ParserService: Postęp 10% - Rozpoczynanie parsowania"),await new Promise(e=>setTimeout(e,100)),console.log("ParserService: Określanie typu pliku:",e.type,e.name),e.type.includes("spreadsheet")||e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))console.log("ParserService: Parsowanie jako XLSX"),n.products=await this.parseXLSX(e,t);else if("text/csv"===e.type||e.name.endsWith(".csv"))console.log("ParserService: Parsowanie jako CSV"),n.products=await this.parseCSV(e,t);else{if("application/pdf"!==e.type&&!e.name.endsWith(".pdf"))throw console.error("ParserService: Nieobsługiwany typ pliku:",e.type),new Error(`Nieobsługiwany format pliku: ${e.type}`);console.log("ParserService: Parsowanie jako PDF"),n.products=await this.parsePDF(e,t)}console.log("ParserService: Parsowanie zakończone, znaleziono produktów:",n.products.length),null==t||t(90,"Finalizowanie wyników..."),n.metadata.totalRows=n.products.length,n.metadata.validRows=n.products.filter(e=>e.name&&e.name.trim()).length,n.metadata.invalidRows=n.metadata.totalRows-n.metadata.validRows,n.metadata.columns=this.extractColumns(n.products),n.status="success",n.progress=100,n.parsedAt=new Date,null==t||t(100,"Parsowanie zakończone")}catch(r){console.error("ParserService: Błąd parsowania:",r),n.status="error",n.error=r instanceof Error?r.message:"Nieznany błąd parsowania",n.progress=0}return console.log("ParserService: Zwracanie wyniku:",n.status,n.products.length,"produktów"),n}async parseXLSX(e,t){return null==t||t(20,"Wczytywanie pliku Excel..."),new Promise((n,r)=>{const s=new FileReader;s.onload=s=>{var a;try{null==t||t(40,"Parsowanie arkusza...");const r=j3(new Uint8Array(null==(a=s.target)?void 0:a.result),{type:"array"}),i=r.SheetNames[0],o=r.Sheets[i];null==t||t(60,"Konwersja danych...");const l=O3.sheet_to_json(o,{header:1});null==t||t(80,"Normalizacja danych...");const c=this.normalizeData(l,e.name);n(c)}catch(i){r(i)}},s.onerror=()=>r(new Error("Błąd odczytu pliku")),s.readAsArrayBuffer(e)})}async parseCSV(e,t){return null==t||t(20,"Wczytywanie pliku CSV..."),new Promise((n,r)=>{D3.parse(e,{header:!0,skipEmptyLines:this.config.options.skipEmptyRows,encoding:this.config.options.encoding,delimiter:this.config.options.delimiter,complete:s=>{try{null==t||t(60,"Normalizacja danych...");const r=s.data.map(e=>Object.values(e));s.meta.fields&&r.unshift(s.meta.fields);const a=this.normalizeData(r,e.name);n(a)}catch(a){r(a)}},error:e=>{r(new Error(`Błąd parsowania CSV: ${e.message}`))}})})}async parsePDF(e,t){null==t||t(20,"Wczytywanie pliku PDF...");try{const n=await e.arrayBuffer();null==t||t(40,"Parsowanie PDF...");const r=await a9({data:n}).promise,s=r.numPages;let a="";for(let e=1;e<=s;e++){null==t||t(40+e/s*30,`Parsowanie strony ${e}/${s}...`);const n=await r.getPage(e),i=await n.getTextContent();a+=i.items.map(e=>e.str).join(" ")+"\n"}null==t||t(80,"Normalizacja danych...");return this.extractTableDataFromText(a,e.name)}catch(n){throw new Error(`Błąd parsowania PDF: ${n instanceof Error?n.message:"Nieznany błąd"}`)}}normalizeData(e,t){if(!e||0===e.length)return[];const n=[];let r=0,s=0;for(let o=0;o<Math.min(5,e.length);o++){const t=e[o];if(!t)continue;const n=t.filter(e=>"string"==typeof e&&e.trim().length>0).length;console.log(`🔍 Wiersz ${o}: ${n} stringów, pierwsze 3:`,t.slice(0,3)),n>s&&(s=n,r=o)}console.log(`✅ Wybrano wiersz ${r} jako nagłówki (${s} stringów)`);const a=e[r];console.log("🔄 normalizeData started with headers:",a),console.log("📊 Headers types in normalizeData:",a.map(e=>({value:e,type:typeof e})));const i=this.createColumnMap(a);for(let o=r+1;o<e.length;o++){const r=e[o];if(!r||0===r.length)continue;const s={id:`${t}-${o}-${Date.now()}`,name:"",source:t,rowIndex:o,rawData:{}};a.forEach((e,t)=>{const n=r[t];if(!e||"string"!=typeof e)return console.warn(`⚠️ Nieprawidłowy header w normalizeData [${t}]:`,e,typeof e),console.warn("⚠️ Row data:",r),void console.warn("⚠️ Headers:",a);s.rawData[e]=n;const o=e.toLowerCase();i.name&&o.includes(i.name.toLowerCase())&&(s.name=String(n||"").trim()),i.category&&o.includes(i.category.toLowerCase())&&(s.category=String(n||"").trim()),i.price&&o.includes(i.price.toLowerCase())&&(s.price=this.parsePrice(String(n||""))),i.quantity&&o.includes(i.quantity.toLowerCase())&&(s.quantity=this.parseQuantity(String(n||""))),i.description&&o.includes(i.description.toLowerCase())&&(s.description=String(n||"").trim()),i.sku&&o.includes(i.sku.toLowerCase())&&(s.sku=String(n||"").trim()),i.unit&&o.includes(i.unit.toLowerCase())&&(s.unit=String(n||"").trim()),i.brand&&o.includes(i.brand.toLowerCase())&&(s.brand=String(n||"").trim()),"Paleta"===e&&(s.paletaId=String(n||"").trim()),"Foto"===e&&(s.foto=String(n||"").trim()),"EAN"===e&&(s.ean=String(n||"").trim()),"Kod 1"===e&&(s.code1=String(n||"").trim()),"Kod 2"===e&&(s.code2=String(n||"").trim()),"PackId"===e&&(s.packId=String(n||"").trim()),"FCSku"===e&&(s.fcSku=String(n||"").trim()),"Link"===e&&(s.link=String(n||"").trim()),"PCS"===e&&(s.quantity=this.parseQuantity(String(n||""))),"Cena regularna brutto"===e&&(s.priceGross=this.parsePrice(String(n||""))),"Cena sprzedaży netto"===e&&(s.priceNet=this.parsePrice(String(n||""))),(o.includes("waluta")||"currency"===o)&&(s.currency=String(n||"PLN").trim())}),s.name&&(n.length<3&&console.log(`✅ Produkt ${n.length+1}:`,{name:s.name,category:s.category,quantity:s.quantity,priceGross:s.priceGross,priceNet:s.priceNet,paletaId:s.paletaId,ean:s.ean}),n.push(s))}return console.log(`✅ normalizeData zakończone: ${n.length} produktów`),n}createColumnMap(e){const t={};return console.log("🔍 Parsing headers:",e),console.log("📊 Headers types:",e.map(e=>({value:e,type:typeof e}))),e.forEach((e,n)=>{if(!e||"string"!=typeof e)return void console.warn(`⚠️ Nieprawidłowy header [${n}]:`,e,typeof e);const r=e.toLowerCase();(r.includes("nazwa")||r.includes("name")||r.includes("produkt"))&&(t.name=e),(r.includes("kategoria")||r.includes("category")||r.includes("typ"))&&(t.category=e),(r.includes("cena")||r.includes("price")||r.includes("koszt"))&&(t.price=e),(r.includes("ilosc")||r.includes("quantity")||r.includes("sztuk"))&&(t.quantity=e),(r.includes("opis")||r.includes("description")||r.includes("uwagi"))&&(t.description=e),(r.includes("sku")||r.includes("kod")||r.includes("id"))&&(t.sku=e),(r.includes("jednostka")||r.includes("unit")||r.includes("miara"))&&(t.unit=e),(r.includes("marka")||r.includes("brand")||r.includes("producent"))&&(t.brand=e)}),console.log("✅ Column map created:",t),t}parsePrice(e){if(!e)return;const t=e.replace(/[^\d.,]/g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?void 0:n}parseQuantity(e){if(!e)return;const t=parseInt(e.replace(/[^\d]/g,""));return isNaN(t)?void 0:t}extractTableDataFromText(e,t){const n=[],r=e.split("\n").filter(e=>e.trim());let s=0;for(const a of r){const e=a.trim();if(!e)continue;const r=e.split(/\s+/);if(r.length>=2){const a=r.slice(0,-1).join(" "),i=r[r.length-1],o=this.parsePrice(i);a&&a.length>2&&(n.push({id:`${t}-${s}-${Date.now()}`,name:a.trim(),price:o,source:t,rowIndex:s,rawData:{line:e}}),s++)}}return n}extractColumns(e){const t=new Set;return e.forEach(e=>{e.rawData&&Object.keys(e.rawData).forEach(e=>t.add(e))}),Array.from(t)}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}};const Lee=new class{constructor(){Lf(this,"supabase",PG)}async getClient(){return PG}async getAnalyses(e){const t=await this.getClient();console.log("🔍 SupabaseAnalysisService.getAnalyses called for userId:",e);const{data:n,error:r}=await t.from("analyses").select("\n        *,\n        analysis_files (*)\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw console.error("❌ Error fetching analyses:",r),new Error(`Failed to fetch analyses: ${r.message}`);console.log("📊 Raw data from Supabase:",n),console.log("📈 Number of analyses found:",(null==n?void 0:n.length)||0);const s=this.mapRowsToAnalyses(n||[]);return console.log("✅ Mapped analyses:",s),s}async getAnalysis(e,t){const n=await this.getClient(),{data:r,error:s}=await n.from("analyses").select("\n            *,\n            analysis_files (*)\n          ").eq("id",e).eq("user_id",t).single();if(s){if("PGRST116"===s.code)return null;throw console.error("Error fetching analysis:",s),new Error(`Failed to fetch analysis: ${s.message}`)}return this.mapRowToAnalysis(r)}async createAnalysis(e,t){var n;const r=await this.getClient();console.log("🔍 SupabaseAnalysisService.createAnalysis called:",{analysis:e.name,userId:t});const s={user_id:t,name:e.name,description:e.description||null,type:e.type,status:e.status,total_products:e.totalProducts,valid_products:e.validProducts,invalid_products:e.invalidProducts,average_score:e.averageScore,stats:e.stats,metadata:e.metadata,completed_at:(null==(n=e.completedAt)?void 0:n.toISOString())||null};console.log("💾 Inserting analysis data:",s);const{data:a,error:i}=await r.from("analyses").insert(s).select().single();if(i)throw console.error("Error creating analysis:",i),new Error(`Failed to create analysis: ${i.message}`);return e.files&&e.files.length>0?(console.log("📁 Dodawanie plików do analizy:",e.files.length),await this.addFilesToAnalysis(a.id,e.files,t),console.log("✅ Pliki dodane do analizy")):console.log("⚠️ Brak plików do dodania"),this.mapRowToAnalysis(a)}async updateAnalysis(e,t,n){var r;const s=await this.getClient(),a={name:t.name,description:t.description||null,status:t.status,total_products:t.totalProducts,valid_products:t.validProducts,invalid_products:t.invalidProducts,average_score:t.averageScore,stats:t.stats,metadata:t.metadata,completed_at:(null==(r=t.completedAt)?void 0:r.toISOString())||null,updated_at:(new Date).toISOString()},i=Object.fromEntries(Object.entries(a).filter(([e,t])=>null!=t)),{error:o}=await s.from("analyses").update(i).eq("id",e).eq("user_id",n);if(o)throw console.error("Error updating analysis:",o),new Error(`Failed to update analysis: ${o.message}`)}async deleteAnalysis(e,t){const n=await this.getClient(),{error:r}=await n.from("analyses").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting analysis:",r),new Error(`Failed to delete analysis: ${r.message}`)}async addFilesToAnalysis(e,t,n){const r=await this.getClient(),s=t.map(t=>({analysis_id:e,user_id:n,file_name:t.name,file_size:t.size,file_type:t.type,status:t.status,product_count:t.productCount,error_message:t.error||null,uploaded_at:t.uploadedAt.toISOString(),storage_path:""}));console.log("💾 Zapisywanie plików do bazy:",s.length);const{error:a}=await r.from("analysis_files").insert(s);if(a)throw console.error("❌ Error adding files to analysis:",a),new Error(`Failed to add files to analysis: ${a.message}`);console.log("✅ Pliki zapisane do bazy danych")}async removeFileFromAnalysis(e,t,n){const r=await this.getClient(),{error:s}=await r.from("analyses").select("id").eq("id",e).eq("user_id",n).single();if(s)throw new Error("Analysis not found or access denied");const{error:a}=await r.from("analysis_files").delete().eq("id",t).eq("analysis_id",e);if(a)throw console.error("Error removing file from analysis:",a),new Error(`Failed to remove file from analysis: ${a.message}`)}async updateFileStatus(e,t,n,r,s){const a=await this.getClient();if(s){const{error:t}=await a.from("analyses").select("id").eq("id",e).eq("user_id",s).single();if(t)throw new Error("Analysis not found or access denied")}const{error:i}=await a.from("analysis_files").update({status:n,error_message:r||null,updated_at:(new Date).toISOString()}).eq("id",t).eq("analysis_id",e);if(i)throw console.error("Error updating file status:",i),new Error(`Failed to update file status: ${i.message}`)}mapRowsToAnalyses(e){return e.map(e=>this.mapRowToAnalysis(e))}mapRowToAnalysis(e){return{id:e.id,name:e.name,description:e.description||void 0,type:e.type,status:e.status,createdAt:new Date(e.created_at||new Date),updatedAt:new Date(e.updated_at||new Date),completedAt:e.completed_at?new Date(e.completed_at):void 0,files:(e.analysis_files||[]).map(e=>this.mapFileRowToAnalysisFile(e)),products:[],totalProducts:e.total_products||0,validProducts:e.valid_products||0,invalidProducts:e.invalid_products||0,evaluations:[],averageScore:e.average_score||0,stats:e.stats,metadata:e.metadata}}mapFileRowToAnalysisFile(e){return{id:e.id,name:e.file_name,size:e.file_size,type:e.file_type,status:e.status,productCount:e.product_count||0,error:e.error_message||void 0,uploadedAt:new Date(e.uploaded_at||new Date)}}},Fee=cX((e,t)=>({analyses:[],currentAnalysis:null,dashboardStats:{totalAnalyses:0,completedAnalyses:0,failedAnalyses:0,pendingAnalyses:0,totalProducts:0,averageProductsPerAnalysis:0,totalRules:0,activeRules:0,averageProcessingTime:0,analysesTrend:{last7Days:0,last30Days:0,growth:0},topCategories:[],topRules:[]},loading:!1,error:null,filters:{},sorting:{field:"createdAt",direction:"desc"},loadAnalyses:async n=>{e({loading:!0,error:null});try{const r=await Lee.getAnalyses(n);e({analyses:r,loading:!1}),t().updateDashboardStats()}catch(r){const t=r instanceof Error?r.message:"Failed to load analyses";e({error:t,loading:!1}),console.error("Error loading analyses:",r)}},loadAnalysis:async(t,n)=>{e({loading:!0,error:null});try{const r=await Lee.getAnalysis(t,n);e({currentAnalysis:r,loading:!1})}catch(r){const t=r instanceof Error?r.message:"Failed to load analysis";e({error:t,loading:!1}),console.error("Error loading analysis:",r)}},createAnalysis:async(n,r,s="file_upload",a,i=[])=>{e({loading:!0,error:null});try{const o={name:n,description:r,type:s,status:"pending",files:i,products:[],totalProducts:0,validProducts:0,invalidProducts:0,evaluations:[],averageScore:0,stats:{totalProducts:0,validProducts:0,invalidProducts:0,averageScore:0,blockedProducts:0,warningProducts:0,okProducts:0,categoryStats:{},priceStats:{min:0,max:0,average:0,median:0,total:0},rulesStats:{totalRules:0,activeRules:0,appliedRules:0},processingTime:0,filesProcessed:0},metadata:{version:"1.0.0",rulesVersion:"1.0.0",parserVersion:"1.0.0",tags:[],notes:""}};console.log("🔧 Tworzenie analizy w Supabase:",{name:n,userId:a,filesCount:i.length});const l=await Lee.createAnalysis(o,a);return console.log("✅ Analiza utworzona w Supabase:",l.id),e(e=>({analyses:[l,...e.analyses],loading:!1})),t().updateDashboardStats(),l}catch(o){const t=o instanceof Error?o.message:"Failed to create analysis";throw e({error:t,loading:!1}),console.error("Error creating analysis:",o),o}},updateAnalysis:async(n,r,s)=>{e({loading:!0,error:null});try{await Lee.updateAnalysis(n,r,s),e(e=>{var t;return{analyses:e.analyses.map(e=>e.id===n?{...e,...r,updatedAt:new Date}:e),currentAnalysis:(null==(t=e.currentAnalysis)?void 0:t.id)===n?{...e.currentAnalysis,...r,updatedAt:new Date}:e.currentAnalysis,loading:!1}}),t().updateDashboardStats()}catch(a){const t=a instanceof Error?a.message:"Failed to update analysis";throw e({error:t,loading:!1}),console.error("Error updating analysis:",a),a}},deleteAnalysis:async(n,r)=>{e({loading:!0,error:null});try{await Lee.deleteAnalysis(n,r),e(e=>{var t;return{analyses:e.analyses.filter(e=>e.id!==n),currentAnalysis:(null==(t=e.currentAnalysis)?void 0:t.id)===n?null:e.currentAnalysis,loading:!1}}),t().updateDashboardStats()}catch(s){const t=s instanceof Error?s.message:"Failed to delete analysis";throw e({error:t,loading:!1}),console.error("Error deleting analysis:",s),s}},duplicateAnalysis:async(n,r)=>{e({loading:!0,error:null});try{const s=t().analyses.find(e=>e.id===n);if(!s)throw new Error("Analysis not found");const a=await t().createAnalysis(`${s.name} (kopia)`,s.description,s.type,r);return await t().updateAnalysis(a.id,{files:s.files,products:s.products,evaluations:s.evaluations,metadata:{...s.metadata,tags:[...s.metadata.tags,"kopia"]}},r),e({loading:!1}),a}catch(s){const t=s instanceof Error?s.message:"Failed to duplicate analysis";throw e({error:t,loading:!1}),console.error("Error duplicating analysis:",s),s}},addFileToAnalysis:async(t,n,r)=>{e({loading:!0,error:null});try{await Lee.addFilesToAnalysis(t,[n],r),e(e=>({analyses:e.analyses.map(e=>e.id===t?{...e,files:[...e.files,n],updatedAt:new Date}:e),loading:!1}))}catch(s){const t=s instanceof Error?s.message:"Failed to add file to analysis";throw e({error:t,loading:!1}),console.error("Error adding file to analysis:",s),s}},removeFileFromAnalysis:async(t,n,r)=>{e({loading:!0,error:null});try{await Lee.removeFileFromAnalysis(t,n,r),e(e=>({analyses:e.analyses.map(e=>e.id===t?{...e,files:e.files.filter(e=>e.id!==n),updatedAt:new Date}:e),loading:!1}))}catch(s){const t=s instanceof Error?s.message:"Failed to remove file from analysis";throw e({error:t,loading:!1}),console.error("Error removing file from analysis:",s),s}},updateFileStatus:async(t,n,r,s,a)=>{e({loading:!0,error:null});try{await Lee.updateFileStatus(t,n,r,a,s),e(e=>({analyses:e.analyses.map(e=>e.id===t?{...e,files:e.files.map(e=>e.id===n?{...e,status:r,error:a}:e),updatedAt:new Date}:e),loading:!1}))}catch(i){const t=i instanceof Error?i.message:"Failed to update file status";throw e({error:t,loading:!1}),console.error("Error updating file status:",i),i}},addProductsToAnalysis:async(n,r)=>{e(e=>({analyses:e.analyses.map(e=>e.id===n?{...e,products:[...e.products,...r],totalProducts:e.totalProducts+r.length,validProducts:e.validProducts+r.length,invalidProducts:e.invalidProducts,updatedAt:new Date}:e)})),t().updateAnalysisStats(n)},addEvaluationsToAnalysis:async(n,r)=>{e(e=>({analyses:e.analyses.map(e=>e.id===n?{...e,evaluations:[...e.evaluations,...r],averageScore:r.length>0?r.reduce((e,t)=>e+t.score,0)/r.length:0,updatedAt:new Date}:e)})),t().updateAnalysisStats(n)},updateAnalysisStats:async e=>{const n=t().analyses.find(t=>t.id===e);n&&console.log("Stats update for analysis:",e,"- Currently disabled")},updateDashboardStats:async()=>{const n=t().analyses,r=new Date,s=new Date(r.getTime()-6048e5),a=new Date(r.getTime()-2592e6),i={totalAnalyses:n.length,completedAnalyses:n.filter(e=>"completed"===e.status).length,failedAnalyses:n.filter(e=>"failed"===e.status).length,pendingAnalyses:n.filter(e=>"pending"===e.status||"in_progress"===e.status).length,totalProducts:n.reduce((e,t)=>e+t.totalProducts,0),averageProductsPerAnalysis:n.length>0?n.reduce((e,t)=>e+t.totalProducts,0)/n.length:0,totalRules:0,activeRules:0,averageProcessingTime:n.length>0?n.reduce((e,t)=>e+t.stats.processingTime,0)/n.length:0,lastAnalysisAt:n.length>0?n[0].createdAt:void 0,analysesTrend:{last7Days:n.filter(e=>e.createdAt>=s).length,last30Days:n.filter(e=>e.createdAt>=a).length,growth:0},topCategories:(()=>{const e=n.reduce((e,t)=>(Object.entries(t.stats.categoryStats).forEach(([t,n])=>{e[t]=(e[t]||0)+n}),e),{});return Object.entries(e).map(([e,t])=>({name:e,count:t,percentage:0})).sort((e,t)=>t.count-e.count).slice(0,5)})(),topRules:[]};e({dashboardStats:i})},setFilters:t=>{e(e=>({filters:{...e.filters,...t}}))},setSorting:t=>{e({sorting:t})},getFilteredAnalyses:()=>{const{analyses:e,filters:n,sorting:r}=t();let s=[...e];if(n.status&&n.status.length>0&&(s=s.filter(e=>n.status.includes(e.status))),n.type&&n.type.length>0&&(s=s.filter(e=>n.type.includes(e.type))),n.dateRange&&(s=s.filter(e=>e.createdAt>=n.dateRange.from&&e.createdAt<=n.dateRange.to)),n.tags&&n.tags.length>0&&(s=s.filter(e=>n.tags.some(t=>e.metadata.tags.includes(t)))),n.search){const e=n.search.toLowerCase();s=s.filter(t=>{var n;return t.name.toLowerCase().includes(e)||(null==(n=t.description)?void 0:n.toLowerCase().includes(e))})}return s.sort((e,t)=>{let n,s;switch(r.field){case"name":n=e.name,s=t.name;break;case"createdAt":n=e.createdAt,s=t.createdAt;break;case"updatedAt":n=e.updatedAt,s=t.updatedAt;break;case"totalProducts":n=e.totalProducts,s=t.totalProducts;break;case"averageScore":n=e.averageScore,s=t.averageScore;break;default:return 0}return n<s?"asc"===r.direction?-1:1:n>s?"asc"===r.direction?1:-1:0}),s},exportAnalysis:async(e,n)=>{const r=t().analyses.find(t=>t.id===e);if(!r)return{success:!1,error:"Analiza nie została znaleziona",exportedAt:new Date};try{return{success:!0,fileName:`analysis-${r.name}-${(new Date).toISOString().split("T")[0]}.${n.format}`,fileSize:0,exportedAt:new Date}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Nieznany błąd",exportedAt:new Date}}},exportAllAnalyses:async e=>{try{return{success:!0,fileName:`all-analyses-${(new Date).toISOString().split("T")[0]}.${e.format}`,fileSize:0,exportedAt:new Date}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Nieznany błąd",exportedAt:new Date}}},getAnalysis:e=>t().analyses.find(t=>t.id===e),getAnalysesByStatus:e=>t().analyses.filter(t=>t.status===e),getAnalysesByType:e=>t().analyses.filter(t=>t.type===e),getRecentAnalyses:(e=10)=>t().analyses.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()).slice(0,e),clearAnalyses:()=>{e({analyses:[]}),t().updateDashboardStats()},clearCurrentAnalysis:()=>{e({currentAnalysis:null})},clearError:()=>{e({error:null})}}));class Bee{static async ensureUserInSupabase(e){var t,n,r;try{console.log("🔍 ensureUserInSupabase called for Clerk user:",e.id);const{data:s,error:a}=await PG.from("users").select("id, clerk_user_id, email, full_name, avatar_url").eq("clerk_user_id",e.id).single();if(console.log("🔎 Check existing user result:",{existingUser:s,checkError:a}),a&&"PGRST116"!==a.code)throw a;if(s){if(s.email!==(null==(t=e.emailAddresses[0])?void 0:t.emailAddress)||s.full_name!==`${e.firstName||""} ${e.lastName||""}`.trim()||s.avatar_url!==e.imageUrl){const{error:t}=await PG.from("users").update({email:(null==(n=e.emailAddresses[0])?void 0:n.emailAddress)||"",full_name:`${e.firstName||""} ${e.lastName||""}`.trim(),avatar_url:e.imageUrl,updated_at:(new Date).toISOString()}).eq("id",s.id);if(t)throw console.error("Error updating user:",t),t}return s.id}{console.log("👤 Creating new user in Supabase for Clerk ID:",e.id);const{data:t,error:n}=await PG.from("users").insert({clerk_user_id:e.id,email:(null==(r=e.emailAddresses[0])?void 0:r.emailAddress)||"",full_name:`${e.firstName||""} ${e.lastName||""}`.trim(),avatar_url:e.imageUrl,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).select("id").single();if(n)throw console.error("❌ Error creating user in Supabase:",n),console.error("   Code:",n.code),console.error("   Message:",n.message),console.error("   Details:",n.details),console.error("   Hint:",n.hint),n;return console.log("✅ User created successfully:",t.id),t.id}}catch(s){throw console.error("Error ensuring user in Supabase:",s),s}}static async getUserData(e){try{const{data:t,error:n}=await PG.from("users").select("*").eq("id",e).single();return n?(console.error("Error getting user data:",n),null):t}catch(t){return console.error("Error getting user data:",t),null}}}const Uee=()=>{const{user:e,isLoaded:t,isSignedIn:n}=function(){var e;VC(HC);const t=MC();return null==(e=PC().telemetry)||e.record(WT(HC)),void 0===t?{isLoaded:!1,isSignedIn:void 0,user:void 0}:null===t?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:t}}(),[r,s]=Im.useState(null),[a,i]=Im.useState(!0),[o,l]=Im.useState(null);return Im.useEffect(()=>{(async()=>{if(t){if(!n||!e)return s(null),void i(!1);try{i(!0);const t=await Bee.ensureUserInSupabase(e);s(t),l(null)}catch(r){console.error("Error ensuring user in Supabase:",r),l(r instanceof Error?r:new Error("Unknown error")),s(null)}finally{i(!1)}}})()},[t,n,e]),{user:e,supabaseUserId:r,isLoaded:t,isSignedIn:n,loading:a,error:o}};const Wee=new class{constructor(){Lf(this,"supabase",PG)}mapParsedProductToInsert(e,t,n,r){return{analysis_id:t,user_id:n,name:e.name,category:e.category||null,description:e.description||null,price:e.price||null,quantity:e.quantity||null,unit:e.unit||null,ean:e.ean||null,sku:e.sku||null,brand:e.brand||null,paleta_id:e.paletaId||null,foto:e.foto||null,code1:e.code1||null,code2:e.code2||null,pack_id:e.packId||null,fc_sku:e.fcSku||null,link:e.link||null,currency:e.currency||"PLN",price_gross:e.priceGross||null,price_net:e.priceNet||null,score:(null==r?void 0:r.score)||0,status:(null==r?void 0:r.status)||"pending",evaluation_data:r?{compliance:r.compliance||0,recommendations:r.recommendations,warnings:r.warnings,blocks:r.blocks,reason:r.reason||""}:null,source:e.source||null,row_index:e.rowIndex||null,raw_data:e.rawData?e.rawData:null}}mapRowToProduct(e){return{id:e.id,analysisId:e.analysis_id,userId:e.user_id,name:e.name,category:e.category||void 0,description:e.description||void 0,price:e.price||void 0,quantity:e.quantity||void 0,unit:e.unit||void 0,ean:e.ean||void 0,sku:e.sku||void 0,brand:e.brand||void 0,paletaId:e.paleta_id||void 0,foto:e.foto||void 0,code1:e.code1||void 0,code2:e.code2||void 0,packId:e.pack_id||void 0,fcSku:e.fc_sku||void 0,link:e.link||void 0,currency:e.currency||void 0,priceGross:e.price_gross||void 0,priceNet:e.price_net||void 0,score:e.score||0,status:e.status,evaluationData:e.evaluation_data,source:e.source||void 0,rowIndex:e.row_index||void 0,rawData:e.raw_data,createdAt:new Date(e.created_at||new Date),updatedAt:new Date(e.updated_at||new Date)}}async addProduct(e,t,n,r){const s=this.mapParsedProductToInsert(e,t,n,r),{data:a,error:i}=await this.supabase.from("products").insert(s).select().single();if(i)throw console.error("Error adding product:",i),new Error(`Failed to add product: ${i.message}`);return this.mapRowToProduct(a)}async addProducts(e,t,n,r){console.log(`📦 Dodawanie ${e.length} produktów do bazy...`);const s=e.map(e=>{const s=null==r?void 0:r.find(t=>t.productId===e.id);return this.mapParsedProductToInsert(e,t,n,s)}),a=[];for(let o=0;o<s.length;o+=500)a.push(s.slice(o,o+500));console.log(`📊 Zapisuję w ${a.length} partiach (500 produktów/partia)`);const i=[];for(let o=0;o<a.length;o++){const e=a[o];console.log(`  Partia ${o+1}/${a.length}: ${e.length} produktów...`);const{data:t,error:n}=await this.supabase.from("products").insert(e).select();if(n)throw console.error(`❌ Error in batch ${o+1}:`,n),new Error(`Failed to add products batch ${o+1}: ${n.message}`);const r=t.map(e=>this.mapRowToProduct(e));i.push(...r),console.log(`  ✅ Partia ${o+1} zapisana (${r.length} produktów)`)}return console.log(`✅ Wszystkie produkty zapisane: ${i.length}`),i}async getProductsForAnalysis(e,t){const{data:n,error:r}=await this.supabase.from("products").select("*").eq("analysis_id",e).eq("user_id",t).order("created_at",{ascending:!0});if(r)throw console.error("Error fetching products:",r),new Error(`Failed to fetch products: ${r.message}`);return(n||[]).map(e=>this.mapRowToProduct(e))}async getProduct(e,t){const{data:n,error:r}=await this.supabase.from("products").select("*").eq("id",e).eq("user_id",t).single();if(r){if("PGRST116"===r.code)return null;throw console.error("Error fetching product:",r),new Error(`Failed to fetch product: ${r.message}`)}return this.mapRowToProduct(n)}async updateProduct(e,t,n){const r={name:t.name,category:t.category||null,description:t.description||null,price:t.price||null,quantity:t.quantity||null,score:t.score,status:t.status,evaluation_data:t.evaluationData},s=Object.fromEntries(Object.entries(r).filter(([e,t])=>void 0!==t)),{error:a}=await this.supabase.from("products").update(s).eq("id",e).eq("user_id",n);if(a)throw console.error("Error updating product:",a),new Error(`Failed to update product: ${a.message}`)}async deleteProduct(e,t){const{error:n}=await this.supabase.from("products").delete().eq("id",e).eq("user_id",t);if(n)throw console.error("Error deleting product:",n),new Error(`Failed to delete product: ${n.message}`)}async deleteProductsForAnalysis(e,t){const{error:n}=await this.supabase.from("products").delete().eq("analysis_id",e).eq("user_id",t);if(n)throw console.error("Error deleting products:",n),new Error(`Failed to delete products: ${n.message}`)}async getProductStats(e,t){const n=await this.getProductsForAnalysis(e,t);return{total:n.length,ok:n.filter(e=>"ok"===e.status).length,warning:n.filter(e=>"warning"===e.status).length,blocked:n.filter(e=>"blocked"===e.status).length,pending:n.filter(e=>"pending"===e.status).length,averageScore:n.reduce((e,t)=>e+t.score,0)/n.length||0,categories:[...new Set(n.map(e=>e.category).filter(Boolean))],totalValue:n.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0)}}};class $ee{static normalize(e){if(!e||""===e.trim())return"INNE";let t=e.trim();for(const n of this.PREFIX_PATTERNS)t=t.replace(n,"");return t=t.toUpperCase(),t=t.replace(/[^A-Z0-9]+/g,"_"),t=t.replace(/_+/g,"_"),t=t.replace(/^_|_$/g,""),t||"INNE"}static similarity(e,t){const n=e.toLowerCase(),r=t.toLowerCase();if(n===r)return 1;const s=n.length,a=r.length;if(0===s)return 0===a?1:0;if(0===a)return 0;const i=[];for(let o=0;o<=s;o++)i[o]=[o];for(let o=0;o<=a;o++)i[0][o]=o;for(let o=1;o<=s;o++)for(let e=1;e<=a;e++){const t=n[o-1]===r[e-1]?0:1;i[o][e]=Math.min(i[o-1][e]+1,i[o][e-1]+1,i[o-1][e-1]+t)}return 1-i[s][a]/Math.max(s,a)}static findBestMatch(e,t,n=.7){if(!e||0===t.length)return null;const r=this.normalize(e);let s=null,a=0;for(const i of t){const t=this.normalize(i);if(r===t)return{original:e,normalized:t,confidence:1,method:"exact",similarityScore:1};const o=this.similarity(r,t);o>a&&o>=n&&(a=o,s={original:e,normalized:t,confidence:o,method:"fuzzy",similarityScore:o})}return s}static groupSimilarCategories(e,t=.75){const n=new Map,r=new Set,s=[...e].sort();for(const a of s){if(!a)continue;const e=this.normalize(a),s=Array.from(r),i=this.findBestMatch(a,s,t);i?n.set(a,i.normalized):(n.set(a,e),r.add(e))}return n}static getCategoryStats(e){const t=this.groupSimilarCategories(e),n=new Set(e.filter(Boolean)).size,r=new Map;for(const[a,i]of t)r.has(i)||r.set(i,[]),r.get(i).push(a);const s=Array.from(r.entries()).map(([e,t])=>({normalized:e,originals:t,count:t.length})).sort((e,t)=>t.count-e.count);return{total:e.length,unique:n,normalized:r.size,duplicates:n-r.size,groupings:s}}static previewNormalization(e){const t=this.groupSimilarCategories(e);return Array.from(new Set(e.filter(Boolean))).map(e=>{const n=t.get(e)||this.normalize(e);return{original:e,normalized:n,action:e===n?"keep":this.normalize(e)===n?"rename":"merge"}})}}Lf($ee,"PREFIX_PATTERNS",[/^gl_/i,/^cat_/i,/^kategoria_/i,/^category_/i,/^kat_/i]);const Vee=Object.freeze(Object.defineProperty({__proto__:null,CategoryNormalizer:$ee},Symbol.toStringTag,{value:"Module"}));class Hee{static async getUserMappings(e){const{data:t,error:n}=await PG.from("category_mappings").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw console.error("Failed to load category mappings:",n),n;return t||[]}static async getAnalysisMappings(e){const{data:t,error:n}=await PG.from("category_mappings").select("*").eq("analysis_id",e).order("created_at",{ascending:!1});if(n)throw console.error("Failed to load analysis mappings:",n),n;return t||[]}static async findMapping(e,t){const{data:n,error:r}=await PG.from("category_mappings").select("*").eq("user_id",e).eq("original_category",t).maybeSingle();if(r&&"PGRST116"!==r.code)throw console.error("Failed to find mapping:",r),r;return n}static async upsertMapping(e,t,n,r=!1,s,a){const i={user_id:e,analysis_id:s||null,original_category:t,normalized_category:n,is_manual:r,mapping_algorithm:r?"manual":"auto_fuzzy",confidence_score:r?1:a||.8,similarity_score:a||null,updated_at:(new Date).toISOString()},{data:o,error:l}=await PG.from("category_mappings").upsert(i,{onConflict:"user_id,original_category"}).select().single();if(l)throw console.error("Failed to upsert mapping:",l),l;return o}static async deleteMapping(e){const{error:t}=await PG.from("category_mappings").delete().eq("id",e);if(t)throw console.error("Failed to delete mapping:",t),t}static async autoMapCategories(e,t,n){console.log("🔄 Starting auto-mapping for analysis:",t);const r=await this.getUserMappings(e),s=new Map,a=Array.from(new Set(n.map(e=>e.kategoria).filter(Boolean)));console.log("📊 Found unique categories:",a.length,a);const i=Array.from(new Set(r.map(e=>e.normalized_category)));console.log("📋 Existing normalized categories:",i.length,i);for(const l of a){const n=r.find(e=>e.original_category===l);if(n){console.log(`✓ Using existing mapping: ${l} → ${n.normalized_category}`),s.set(l,n.normalized_category);continue}const a=$ee.normalize(l),c=$ee.findBestMatch(l,i,.75),d=(null==c?void 0:c.normalized)||a,u=null==c?void 0:c.similarityScore;console.log(`🆕 Creating new mapping: ${l} → ${d}`,{method:c?"fuzzy_match":"normalize",similarity:u});try{await this.upsertMapping(e,l,d,!1,t,u)}catch(o){console.error(`Failed to save mapping for ${l}:`,o)}s.set(l,d),i.includes(d)||i.push(d)}return console.log("✅ Auto-mapping completed:",s.size,"mappings created"),s}static async updateProductCategories(e,t){console.log("📝 Updating product categories in database...");let n=0,r=0;for(const[a,i]of t)if(a!==i)try{const{error:t}=await PG.from("products").update({category:i}).eq("analysis_id",e).eq("category",a);t?(console.error(`Failed to update category ${a} → ${i}:`,t),r++):(console.log(`✓ Updated: ${a} → ${i}`),n++)}catch(s){console.error(`Exception updating category ${a}:`,s),r++}return console.log(`✅ Category update completed: ${n} updated, ${r} errors`),{updated:n,errors:r}}static async getMappingStats(e){const t=await this.getUserMappings(e),n=new Set(t.map(e=>e.original_category)).size,r=new Set(t.map(e=>e.normalized_category)).size,s=t.filter(e=>e.is_manual).length,a=t.filter(e=>!e.is_manual).length,i=t.length>0?t.reduce((e,t)=>e+t.confidence_score,0)/t.length:0;return{totalMappings:t.length,uniqueOriginals:n,uniqueNormalized:r,manualMappings:s,autoMappings:a,avgConfidence:i,recentMappings:t.slice(0,10)}}static async batchUpdateMappings(e,t,n){let r=0,s=0;for(const i of t)try{await this.upsertMapping(e,i.original,i.normalized,i.isManual||!1,n),r++}catch(a){console.error(`Failed to update mapping ${i.original}:`,a),s++}return{success:r,errors:s}}static async previewAutoMapping(e,t){const n=await this.getUserMappings(e),r=Array.from(new Set(t.map(e=>e.kategoria).filter(Boolean))),s=Array.from(new Set(n.map(e=>e.normalized_category))),a=[];for(const i of r){const e=t.filter(e=>e.kategoria===i).length,r=n.find(e=>e.original_category===i);if(r)a.push({original:i,normalized:r.normalized_category,action:"existing",confidence:r.confidence_score,productCount:e});else{const t=$ee.normalize(i),n=$ee.findBestMatch(i,s,.75);a.push({original:i,normalized:(null==n?void 0:n.normalized)||t,action:n?"fuzzy_match":"new",confidence:(null==n?void 0:n.confidence)||.8,productCount:e})}}return a.sort((e,t)=>t.productCount-e.productCount)}}const qee=({navigateToDashboard:e=!1,onSuccess:t,className:n="",description:r,showButton:s=!0})=>{const{handleFileDrop:a,isProcessing:i,isEvaluating:o,error:l,isLoaded:c,isSignedIn:d}=(()=>{const e=HE(),t=$E(),{supabaseUserId:n,isLoaded:r,isSignedIn:s}=Uee(),{getAllParsedProducts:a,getAllEvaluations:i,evaluateProducts:o,isEvaluating:l,addFiles:c,setParsing:d,setParseResult:u,setUploading:h}=hX(),{createAnalysis:p}=Fee(),[f,m]=Im.useState(!1),[g,v]=Im.useState(null),y=Im.useCallback(async e=>{if(!n)return v("Brak userId - użytkownik nie jest zalogowany"),console.error("❌ Brak userId - użytkownik nie jest zalogowany"),null;m(!0),v(null),h(!0),d(!0);try{const s=[];for(const t of e){await new Promise(e=>{let t=0;const n=setInterval(()=>{t+=15*Math.random()+5,t=Math.min(t,100),t>=100&&(clearInterval(n),e(void 0))},200)});const e=await Dee.parseFile(t,(e,n)=>{console.log(`Parsowanie ${t.name}: ${e}% - ${n}`)}),n=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;u(n,e),s.push({file:t,result:e,fileId:n})}const l=a();if(0===l.length)throw new Error("Nie znaleziono produktów do analizy");console.log("🎯 Rozpoczynam ocenę produktów..."),await o();const c=1===e.length?e[0].name.replace(/\.[^/.]+$/,""):`${e[0].name.replace(/\.[^/.]+$/,"")} i ${e.length-1} innych`,d=s.map(({file:e,result:t,fileId:n})=>({id:n,name:e.name,size:e.size,type:e.type,uploadedAt:new Date,status:"completed",productCount:t.products.length}));console.log("🚀 Tworzenie analizy z plikami:",d.length),console.log("📁 Pliki:",d.map(e=>({name:e.name,size:e.size})));const h=await p(c,`Analiza utworzona automatycznie z ${e.map(e=>e.name).join(", ")}`,"file_upload",n,d);console.log("✅ Analiza utworzona:",h.id),console.log("🔄 Normalizuję kategorie przed zapisem...");const{CategoryNormalizer:f}=await Gf(()=>Promise.resolve().then(()=>Vee),void 0),m=Array.from(new Set(l.map(e=>e.category).filter(Boolean)));console.log("📊 Znaleziono unikalne kategorie:",m);const{data:g}=await PG.from("products").select("category").eq("user_id",n).not("category","is",null),v=Array.from(new Set((g||[]).map(e=>e.category).filter(Boolean)));console.log("📋 Istniejące kategorie w bazie:",v);const y=new Map;for(const e of m){if(!e)continue;const t=f.normalize(e),n=v.find(e=>e.toUpperCase()===t.toUpperCase());n?(y.set(e,n),console.log(`✓ Mapowanie: "${e}" → "${n}" (istniejąca)`)):(y.set(e,t),v.push(t),console.log(`🆕 Mapowanie: "${e}" → "${t}" (nowa)`))}const x=l.map(e=>({...e,category:e.category?y.get(e.category)||e.category:"INNE"}));console.log("✅ Kategorie znormalizowane, zapisuję produkty...");const b=i();try{const e=await Wee.addProducts(x,h.id,n,b);console.log("✅ Produkty zapisane w bazie:",e.length);try{for(const[e,t]of y)await Hee.upsertMapping(n,e,t,!1,h.id);console.log("✅ Mapowania zapisane w bazie")}catch(t){console.error("⚠️ Błąd zapisu mapowań (kontynuuję):",t)}const r=await Wee.getProductStats(h.id,n);console.log("📈 Statystyki:",r)}catch(r){console.error("❌ Błąd zapisu produktów:",r)}return{analysis:h,processedFiles:s.map(e=>({name:e.file.name,size:e.file.size,type:e.file.type,productsCount:e.result.products.length,fileId:e.fileId}))}}catch(r){return console.error("Błąd przetwarzania plików:",r),v(r instanceof Error?r.message:"Błąd przetwarzania plików"),null}finally{m(!1),h(!1),d(!1)}},[n,a,i,o,c,d,u,h,p]),x=Im.useCallback(async(n,r)=>{if(0===n.length)return;const s=[],a=[];if(n.forEach(e=>{const t=(e=>{const t=10485760;if(e.size>t)return{isValid:!1,error:"Plik jest za duży. Maksymalny rozmiar: 10MB"};const n=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/pdf"].includes(e.type)||[".xlsx",".xls",".csv",".pdf"].includes(n)?{isValid:!0}:{isValid:!1,error:"Nieobsługiwany format pliku. Dozwolone: XLSX, XLS, CSV, PDF"}})(e);t.isValid?s.push(e):a.push(`${e.name}: ${t.error}`)}),a.length>0&&(console.warn("Błędy walidacji plików:",a),v(a.join("\n"))),0===s.length)return;c(s);const i=await y(s);if(i&&((null==r?void 0:r.onSuccess)&&r.onSuccess(i.analysis.id),null==r?void 0:r.navigateToDashboard)){const n=t.pathname.startsWith("/paleta")?"/paleta/dashboard":"/dashboard";e(n,{state:{selectedAnalysisId:i.analysis.id,processedFiles:i.processedFiles}})}},[c,y,e,t]);return{handleFileDrop:x,processFiles:y,isProcessing:f,isEvaluating:l,error:g,isLoaded:r,isSignedIn:s,supabaseUserId:n}})(),{getRootProps:u,getInputProps:h,isDragActive:p,isDragReject:f}=rX({onDrop:n=>a(n,{navigateToDashboard:e,onSuccess:t}),accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"text/csv":[".csv"],"application/pdf":[".pdf"]},maxFiles:5,multiple:!0,disabled:o||i||!c||!d});return c?d?Vm.jsxs("div",{className:n,children:[Vm.jsxs("div",{...u(),className:`\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200\n          ${p&&!f?"border-primary-500 bg-primary-50 text-primary-600":f?"border-danger-500 bg-danger-50 text-danger-600":"border-neutral-300 hover:border-primary-400 hover:bg-neutral-50"}\n          ${o||i?"opacity-50 cursor-not-allowed":""}\n        `,children:[Vm.jsx("input",{...h()}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsx("div",{className:"mx-auto w-16 h-16 text-neutral-400",children:i||o?Vm.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto"}):Vm.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(i||o)&&Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-lg font-medium text-primary-600",children:o?"Ocena produktów...":"Przetwarzanie plików..."}),Vm.jsx("p",{className:"text-sm text-neutral-600 mt-2",children:"To może chwilę potrwać"})]}),!i&&!o&&Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-lg font-medium",children:p?"Upuść pliki tutaj...":"Przeciągnij pliki tutaj lub kliknij aby wybrać"}),r?Vm.jsx("p",{className:"text-sm text-neutral-600 mt-2",children:r}):Vm.jsxs(Vm.Fragment,{children:[Vm.jsx("p",{className:"text-sm text-neutral-600 mt-2",children:"Obsługiwane formaty: XLSX, XLS, CSV, PDF"}),Vm.jsx("p",{className:"text-sm text-neutral-500",children:"Maksymalny rozmiar: 10MB na plik • Automatyczna analiza po wskazaniu"})]})]}),!o&&!i&&s&&Vm.jsx(pX,{variant:"secondary",size:"sm",children:"Wybierz pliki"})]})]}),l&&Vm.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:Vm.jsxs("div",{className:"flex items-start",children:[Vm.jsx("div",{className:"flex-shrink-0",children:Vm.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Vm.jsxs("div",{className:"ml-3",children:[Vm.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Błąd przetwarzania"}),Vm.jsx("div",{className:"mt-2 text-sm text-red-700 whitespace-pre-line",children:l})]})]})})]}):Vm.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center bg-gray-50",children:[Vm.jsx("div",{className:"text-gray-400 mb-4",children:Vm.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),Vm.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Musisz się zalogować"}),Vm.jsx("p",{className:"text-gray-600",children:"Zaloguj się aby dodawać i analizować pliki"})]}):Vm.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Ładowanie..."})]})},Gee=({analyses:e})=>{const t=$E(),{supabaseUserId:n}=Uee(),[r,s]=Im.useState(new Map);return Im.useEffect(()=>{(async()=>{if(!n||0===e.length)return;const t=new Map;let r=[];try{const e=localStorage.getItem("analysis-rules");e&&(r=JSON.parse(e))}catch(a){console.error("Failed to load rules:",a)}for(const s of e)try{const{data:e}=await PG.from("products").select("name, category, quantity, price_gross, price_net, status, evaluation_data").eq("analysis_id",s.id).eq("user_id",n);if(e&&e.length>0){const n=e.map(e=>{const t=e.price_gross||0,n=e.price_net||0,s=e.quantity||1;let a="allowed";if(r.find(t=>"product"===t.type&&t.name.toLowerCase()===(e.name||"").toLowerCase()&&"warning"===t.action))a="warning";else{r.find(t=>"category"===t.type&&t.name.toLowerCase()===(e.category||"").toLowerCase()&&"warning"===t.action)&&(a="warning")}return{pcs:s,cenaRegularnaBrutto:t,cenaSprzedazyNetto:n,marza:t-n,rentownosc:t?(t-n)/t*100:0,status:a}}),a=n.reduce((e,t)=>e+t.pcs,0),i=n.reduce((e,t)=>e+t.cenaRegularnaBrutto*t.pcs,0),o=n.length>0?n.reduce((e,t)=>e+t.rentownosc,0)/n.length:0,l=n.filter(e=>"warning"===e.status).length;t.set(s.id,{avgProfitability:o,totalQuantity:a,totalRevenue:i,issuesCount:l})}}catch(a){console.error(`Failed to fetch stats for analysis ${s.id}:`,a)}s(t)})()},[e,n]),0===e.length?Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx(SM,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),Vm.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak analiz"}),Vm.jsx("p",{className:"text-gray-500",children:"Prześlij pierwszy dokument, aby rozpocząć analizę"})]}):Vm.jsx("div",{className:"space-y-4",children:e.map(e=>{var n,s,a,i,o;const l=r.get(e.id),c=e.totalProducts||0,d=(null==l?void 0:l.avgProfitability)||(null==(n=e.stats)?void 0:n.avgProfitability)||0,u=(null==l?void 0:l.totalQuantity)||(null==(s=e.stats)?void 0:s.totalQuantity)||0,h=(null==l?void 0:l.issuesCount)||((null==(a=e.stats)?void 0:a.warningProducts)||0)+((null==(i=e.stats)?void 0:i.blockedProducts)||0),p=(null==l?void 0:l.totalRevenue)||(null==(o=e.stats)?void 0:o.totalRevenue)||0,f=t.pathname.startsWith("/paleta")?`/paleta/analysis/${e.id}`:`/analysis/${e.id}`;return Vm.jsx(fT,{to:f,className:"block card hover:shadow-md transition-shadow cursor-pointer",children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-4 flex-shrink-0",children:[Vm.jsx(SM,{className:"h-8 w-8 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),Vm.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsxs("div",{className:"flex flex-col items-center px-3 py-2 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200/50",title:`Rentowność: ${d.toFixed(1)}%`,children:[Vm.jsxs("span",{className:"text-sm font-bold text-purple-700",children:[d.toFixed(1),"%"]}),Vm.jsx("span",{className:"text-xs text-purple-600",children:"Rentowność"})]}),Vm.jsxs("div",{className:"flex flex-col items-center px-3 py-2 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200/50",title:`${c} produktów / ${u} sztuk`,children:[Vm.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[c," / ",u]}),Vm.jsx("span",{className:"text-xs text-blue-600",children:"Produkty / Sztuki"})]}),Vm.jsxs("div",{className:"flex flex-col items-center px-3 py-2 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200/50",title:`Wykryte problemy: ${h}`,children:[Vm.jsx("span",{className:"text-sm font-bold text-yellow-700",children:h}),Vm.jsx("span",{className:"text-xs text-yellow-600",children:"Problemy"})]}),Vm.jsxs("div",{className:"flex flex-col items-center px-3 py-2 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border border-green-200/50",title:`Całkowity przychód: ${p.toLocaleString("pl-PL",{minimumFractionDigits:2})} PLN`,children:[Vm.jsxs("span",{className:"text-sm font-bold text-green-700",children:[(p/1e3).toFixed(1),"k"]}),Vm.jsx("span",{className:"text-xs text-green-600",children:"Przychód"})]})]})]})},e.id)})})},Kee=()=>"undefined"!=typeof window?localStorage.getItem("ai-service-url")||"http://localhost:8000":"https://your-ai-service-domain.com",Xee=class e{constructor(){Lf(this,"cache",new Map),Lf(this,"CACHE_TTL",3e5)}static getInstance(){return e.instance||(e.instance=new e),e.instance}isCacheValid(e){return Date.now()-e<this.CACHE_TTL}getCachedData(e){const t=this.cache.get(e);return t&&this.isCacheValid(t.timestamp)?t.data:(t&&this.cache.delete(e),null)}setCachedData(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}async normalizeProduct(e,t=""){const n=`product:${e}:${t}`,r=this.getCachedData(n);if(r)return r;try{const r=Kee(),s=await fetch(`${r}/ai/normalize-product`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t})});if(!s.ok)throw new Error(`AI service error: ${s.statusText}`);const a=await s.json();return this.setCachedData(n,a),a}catch(s){console.error("Error calling AI service:",s);const t={original_name:e,normalized_name:e,brand:"Unknown",model:"Unknown",category:"Unknown",specifications:{},confidence:.5,processed_text:e,profitability_score:50,risk_level:"MEDIUM",recommendation:"CAUTION"};return this.setCachedData(n,t),t}}async analyzePalette(e){const t=`palette:${e.sort().join(",")}`,n=this.getCachedData(t);if(n)return n;try{const n=Kee(),r=await fetch(`${n}/ai/analyze-palette`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:e})});if(!r.ok)throw new Error(`AI service error: ${r.statusText}`);const s=await r.json();return this.setCachedData(t,s),s}catch(r){console.error("Error calling AI service:",r);const n={average_profitability:75,high_risk_count:2,medium_risk_count:5,low_risk_count:8,recommended_categories:["Elektronika","Odzież"],buy_recommendation:"CAUTION",risk_assessment:"MEDIUM",estimated_roi:20,category_distribution:{},total_products:e.length,profitability_distribution:{}};return this.setCachedData(t,n),n}}async getAvailableBrands(){const e="brands",t=this.getCachedData(e);if(t)return t;try{const t=Kee(),n=await fetch(`${t}/ai/brands`);if(!n.ok)throw new Error(`AI service error: ${n.statusText}`);const r=(await n.json()).brands||[];return this.setCachedData(e,r),r}catch(n){return console.error("Error getting brands:",n),[]}}async getAvailableCategories(){const e="categories",t=this.getCachedData(e);if(t)return t;try{const t=Kee(),n=await fetch(`${t}/ai/categories`);if(!n.ok)throw new Error(`AI service error: ${n.statusText}`);const r=(await n.json()).categories||[];return this.setCachedData(e,r),r}catch(n){return console.error("Error getting categories:",n),[]}}async getCacheStats(){try{const e=Kee(),t=await fetch(`${e}/ai/cache/stats`);if(!t.ok)throw new Error(`AI service error: ${t.statusText}`);return await t.json()}catch(e){return console.error("Error getting cache stats:",e),null}}async clearCache(){try{const e=Kee(),t=await fetch(`${e}/ai/cache/clear`,{method:"DELETE"});return this.cache.clear(),t.ok}catch(e){return console.error("Error clearing cache:",e),!1}}async checkHealth(){try{const e=Kee();return(await fetch(`${e}/health`)).ok}catch(e){return console.error("AI service health check failed:",e),!1}}clearLocalCache(){this.cache.clear()}getLocalCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}};Lf(Xee,"instance");let Yee=Xee;const Jee=class e{constructor(){Lf(this,"configs",[]),Lf(this,"currentService","none"),Lf(this,"status",{cloud:"checking",browser:"checking",docker:"checking",active:"none",lastChecked:(new Date).toISOString()}),this.initializeConfigs()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeConfigs(){this.configs.push({type:"cloud",url:"https://api.pallet-analysis.com/v1",priority:1,enabled:!1}),this.configs.push({type:"browser",priority:2,enabled:!0}),this.configs.push({type:"docker",url:"http://localhost:8000",priority:3,enabled:!1}),this.loadUserPreferences()}loadUserPreferences(){const e=localStorage.getItem("ai-service-preferences");if(e)try{const t=JSON.parse(e);this.currentService=t.activeService||"none",this.configs.forEach(e=>{var n;const r=null==(n=t.configs)?void 0:n[e.type];r&&Object.assign(e,r)})}catch(t){console.error("Failed to load AI preferences:",t)}}saveUserPreferences(){const e={activeService:this.currentService,configs:this.configs.reduce((e,t)=>(e[t.type]=t,e),{})};localStorage.setItem("ai-service-preferences",JSON.stringify(e))}async checkAllServices(){const e=await Promise.allSettled([this.checkCloudService(),this.checkBrowserService(),this.checkDockerService()]);return this.status.cloud="fulfilled"===e[0].status?"online":"offline",this.status.browser="fulfilled"===e[1].status?"online":"offline",this.status.docker="fulfilled"===e[2].status?"online":"offline",this.status.lastChecked=(new Date).toISOString(),this.autoSelectService(),{...this.status}}async checkCloudService(){return!1}async checkBrowserService(){try{return"undefined"!=typeof WebAssembly&&null!==localStorage.getItem("browser-ai-model")}catch(e){return!1}}async checkDockerService(){var e;try{const t=(null==(e=this.configs.find(e=>"docker"===e.type))?void 0:e.url)||"http://localhost:8000";return(await fetch(`${t}/health`,{method:"GET"})).ok}catch(t){return!1}}autoSelectService(){const e=this.configs.filter(e=>e.enabled&&"none"!==e.type&&"online"===this.status[e.type]).sort((e,t)=>e.priority-t.priority);e.length>0?this.currentService=e[0].type:this.currentService="none",this.status.active=this.currentService}async normalizeProduct(e,t=""){switch(this.currentService){case"cloud":return this.cloudNormalizeProduct(e,t);case"browser":return this.browserNormalizeProduct(e,t);case"docker":return this.dockerNormalizeProduct(e,t);default:return this.mockNormalizeProduct(e,t)}}async analyzePalette(e){switch(this.currentService){case"cloud":return this.cloudAnalyzePalette(e);case"browser":return this.browserAnalyzePalette(e);case"docker":return this.dockerAnalyzePalette(e);default:return this.mockAnalyzePalette(e)}}async generatePaletteReport(e){switch(this.currentService){case"cloud":return this.cloudGeneratePaletteReport(e);case"browser":return this.browserGeneratePaletteReport(e);case"docker":return this.dockerGeneratePaletteReport(e);default:return this.mockGeneratePaletteReport(e)}}async cloudNormalizeProduct(e,t){const n=this.configs.find(e=>"cloud"===e.type),r=await fetch(`${null==n?void 0:n.url}/ai/normalize-product`,{method:"POST",headers:{"Content-Type":"application/json",...(null==n?void 0:n.apiKey)&&{Authorization:`Bearer ${n.apiKey}`}},body:JSON.stringify({product_name:e,description:t})});if(!r.ok)throw new Error(`Cloud AI error: ${r.statusText}`);return await r.json()}async cloudAnalyzePalette(e){const t=this.configs.find(e=>"cloud"===e.type),n=await fetch(`${null==t?void 0:t.url}/ai/analyze-palette`,{method:"POST",headers:{"Content-Type":"application/json",...(null==t?void 0:t.apiKey)&&{Authorization:`Bearer ${t.apiKey}`}},body:JSON.stringify({products:e})});if(!n.ok)throw new Error(`Cloud AI error: ${n.statusText}`);return await n.json()}async browserNormalizeProduct(e,t){return console.log("Browser AI: Normalizing product",e),this.mockNormalizeProduct(e,t)}async browserAnalyzePalette(e){return console.log("Browser AI: Analyzing palette",e.length,"products"),this.mockAnalyzePalette(e)}async dockerNormalizeProduct(e,t){const n=this.configs.find(e=>"docker"===e.type),r=await fetch(`${null==n?void 0:n.url}/ai/normalize-product`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_name:e,description:t})});if(!r.ok)throw new Error(`Docker AI error: ${r.statusText}`);return await r.json()}async dockerAnalyzePalette(e){const t=this.configs.find(e=>"docker"===e.type),n=await fetch(`${null==t?void 0:t.url}/ai/analyze-palette`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:e})});if(!n.ok)throw new Error(`Docker AI error: ${n.statusText}`);return await n.json()}mockNormalizeProduct(e,t){return{original_name:e,normalized_name:e,brand:"Unknown",model:"Unknown",category:"Unknown",specifications:{},confidence:.5,processed_text:e,profitability_score:50,risk_level:"MEDIUM",recommendation:"CAUTION"}}mockAnalyzePalette(e){return{average_profitability:60,high_risk_count:2,medium_risk_count:3,low_risk_count:5,recommended_categories:["Electronics","Tools"],buy_recommendation:"CAUTION",risk_assessment:"MEDIUM",estimated_roi:15.5,category_distribution:{},total_products:e.length,profitability_distribution:{}}}async cloudGeneratePaletteReport(e){const t=this.configs.find(e=>"cloud"===e.type),n=await fetch(`${null==t?void 0:t.url}/ai/generate-report`,{method:"POST",headers:{"Content-Type":"application/json",...(null==t?void 0:t.apiKey)&&{Authorization:`Bearer ${t.apiKey}`}},body:JSON.stringify({products:e})});return n.ok?await n.json():this.mockGeneratePaletteReport(e)}async browserGeneratePaletteReport(e){return this.mockGeneratePaletteReport(e)}async dockerGeneratePaletteReport(e){const t=this.configs.find(e=>"docker"===e.type),n=await fetch(`${null==t?void 0:t.url}/ai/generate-report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({products:e})});return n.ok?await n.json():this.mockGeneratePaletteReport(e)}mockGeneratePaletteReport(e){const t=e.length,n=e.reduce((e,t)=>e+(t.rentownosc||0),0)/t,r=e.reduce((e,t)=>e+(t.cenaRegularnaBrutto||0),0),s=[...new Set(e.map(e=>e.kategoria))].filter(e=>e&&"Brak kategorii"!==e),a=e.filter(e=>e.rentownosc>=80).length,i=e.filter(e=>e.rentownosc>=60&&e.rentownosc<80).length,o=e.filter(e=>e.rentownosc<60).length;let l="HOLD";l=n>=80?"STRONG_BUY":n>=70?"BUY":n>=60?"HOLD":n>=50?"CAUTION":"AVOID";return{summary:`\nZestawienie zawiera ${t} ${1===t?"produkt":t<5?"produkty":"produktów"} o łącznej wartości ${r.toLocaleString("pl-PL")} PLN. \nŚrednia rentowność zestawienia wynosi ${n.toFixed(1)}%, co wskazuje na ${n>=70?"bardzo dobry":n>=60?"dobry":n>=50?"przeciętny":"słaby"} potencjał zyskowności.\n\nProdukty pochodzą z ${s.length} ${s.length,"kategorii"}: ${s.slice(0,3).join(", ")}${s.length>3?" i inne":""}.\n    `.trim(),productAnalysis:`\n**Analiza produktów według rentowności:**\n\n• **Wysoka rentowność (≥80%):** ${a} ${1===a?"produkt":"produktów"}\n  ${a>0?"Te produkty stanowią mocną podstawę zestawienia i powinny generować stabilne zyski.":"Brak produktów w tej kategorii może ograniczać potencjał zyskowności."}\n\n• **Średnia rentowność (60-79%):** ${i} ${1===i?"produkt":"produktów"}\n  ${i>0?"Produkty o akceptowalnej marży, które mogą wspierać ogólną rentowność palety.":"Brak produktów w tej kategorii."}\n\n• **Niska rentowność (<60%):** ${o} ${1===o?"produkt":"produktów"}\n  ${o>0?"⚠️ Produkty wymagające szczególnej uwagi - mogą obniżać ogólną rentowność zestawienia.":"✅ Bardzo dobry wynik - brak produktów o niskiej rentowności."}\n\n**Główne kategorie produktów:**\n${s.slice(0,5).map((t,n)=>{const r=e.filter(e=>e.kategoria===t),s=r.reduce((e,t)=>e+(t.rentownosc||0),0)/r.length;return`${n+1}. ${t}: ${r.length} ${1===r.length?"produkt":"produktów"} (śr. rentowność: ${s.toFixed(1)}%)`}).join("\n")}\n    `.trim(),recommendations:`\n**Rekomendacja zakupu: ${"STRONG_BUY"===l?"🟢 ZDECYDOWANIE KUP":"BUY"===l?"🟢 KUP":"HOLD"===l?"🟡 ROZWAŻ":"CAUTION"===l?"🟠 OSTROŻNIE":"🔴 UNIKAJ"}**\n\n${"STRONG_BUY"===l?"\n✅ Zestawienie wykazuje doskonałą rentowność powyżej 80%. To bardzo atrakcyjna oferta z wysokim potencjałem zysku.\n\n**Zalecenia:**\n• Priorytetowo rozważ zakup tego zestawienia\n• Rentowność znacznie przewyższa średnie wartości rynkowe\n• Niska ekspozycja na produkty o niskiej marży minimalizuje ryzyko\n":""}${"BUY"===l?"\n✅ Zestawienie oferuje dobrą rentowność w przedziale 70-80%. Atrakcyjna oferta warta zakupu.\n\n**Zalecenia:**\n• Zestawienie powinno generować stabilne zyski\n• Rozważ negocjację ceny dla zwiększenia marży\n• Sprawdź konkurencyjność produktów na rynku\n":""}${"HOLD"===l?"\n⚠️ Zestawienie oferuje przeciętną rentowność 60-70%. Wymaga dokładniejszej analizy.\n\n**Zalecenia:**\n• Dokładnie przeanalizuj produkty o niskiej rentowności\n• Sprawdź możliwość negocjacji ceny zakupu\n• Rozważ sprzedaż wybranych produktów po wyższych cenach\n• Oceń popyt na produkty przed podjęciem decyzji\n":""}${"CAUTION"===l?"\n⚠️ Zestawienie wykazuje rentowność poniżej 60%. Wysoki poziom ryzyka.\n\n**Ostrzeżenia:**\n• Znaczna liczba produktów o niskiej marży\n• Możliwe problemy z osiągnięciem zakładanych zysków\n• Wymagana szczegółowa analiza kosztów dodatkowych\n• Rozważ negocjację znacznie niższej ceny zakupu\n":""}${"AVOID"===l?"\n🔴 Zestawienie wykazuje niską rentowność poniżej 50%. Wysokie ryzyko straty.\n\n**Ostrzeżenia:**\n• Większość produktów ma niską marżę zysku\n• Duże ryzyko generowania strat zamiast zysków\n• NIE ZALECAMY zakupu bez znacznej obniżki ceny\n• Poszukaj alternatywnych zestawień o lepszej rentowności\n":""}\n\n**Dodatkowe wskazówki:**\n• ${0===o?"✅ Brak produktów problematycznych":`⚠️ Szczególną uwagę zwróć na ${o} ${1===o?"produkt":"produktów"} o niskiej rentowności`}\n• ${s.length>3?"✅ Dobra dywersyfikacja kategorii produktowych":"⚠️ Ograniczona dywersyfikacja - wyższe ryzyko"}\n• Przed zakupem zweryfikuj aktualne ceny rynkowe i popyt na kluczowe produkty\n    `.trim(),buyDecision:l,confidenceScore:n>=70?85:n>=60?70:n>=50?55:40}}setActiveService(e){this.currentService=e,this.status.active=e,this.saveUserPreferences()}updateConfig(e,t){const n=this.configs.find(t=>t.type===e);n&&(Object.assign(n,t),this.saveUserPreferences())}getConfig(e){return this.configs.find(t=>t.type===e)}getAllConfigs(){return[...this.configs]}getStatus(){return{...this.status}}getCurrentService(){return this.currentService}async checkHealth(){return"none"!==(await this.checkAllServices()).active}};Lf(Jee,"instance");const Zee=Jee.getInstance(),Qee=()=>{const{supabaseUserId:e}=Uee(),{analyses:t,loadAnalyses:n}=Fee(),[r,s]=Im.useState("checking"),[a,i]=Im.useState({active:"none",cloud:"checking",browser:"checking",docker:"checking"}),o=Yee.getInstance();Im.useEffect(()=>{c(),l()},[]),Im.useEffect(()=>{e&&n(e)},[e,n]);const l=async()=>{try{const e=await Zee.checkAllServices();i(e)}catch(e){console.error("Hybrid AI health check failed:",e)}},c=async()=>{try{const e=await o.checkHealth();s(e?"online":"offline")}catch(e){s("offline")}};return Vm.jsxs("div",{className:"space-y-8",children:[Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Analizator palet"}),Vm.jsx("div",{className:"w-full",children:Vm.jsx("p",{className:"text-base text-gray-600 text-center",children:"Prześlij dokument Excel z zestawami produktów, aby przeprowadzić analizę rentowności i sprawdzić zgodność z ustalonymi regułami."})}),Vm.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[Vm.jsx(iM,{className:"h-5 w-5 text-purple-600"}),Vm.jsx("span",{className:"text-sm text-gray-600",children:"AI Services:"}),Vm.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium "+("none"!==a.active?"bg-green-100 text-green-800":"online"===r?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:["none"!==a.active&&Vm.jsx(oI,{className:"h-3 w-3"}),"none"===a.active&&"online"===r&&Vm.jsx(iM,{className:"h-3 w-3"}),"none"===a.active&&"offline"===r&&Vm.jsx(eI,{className:"h-3 w-3"}),Vm.jsx("span",{children:"none"!==a.active?`HYBRID ${a.active.toUpperCase()}`:r.toUpperCase()})]})]})]}),Vm.jsx("div",{className:"card",children:Vm.jsx("div",{className:"text-center",children:Vm.jsx(qee,{navigateToDashboard:!0,description:"Prześlij dokument Excel (.xlsx, .xls) lub CSV (.csv) z zestawami produktów"})})}),t.length>0&&Vm.jsxs("div",{children:[Vm.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Ostatnie analizy (",t.length,")"]}),Vm.jsx(Gee,{analyses:t})]})]})},ete=()=>{const e=HE(),t=$E(),{supabaseUserId:n,isLoaded:r,isSignedIn:s,loading:a,error:i}=Uee(),{analyses:o}=Fee();return console.log("🔍 Analysis component loaded:",{supabaseUserId:n,isLoaded:r,isSignedIn:s,loading:a,error:i}),!r||a?Vm.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Ładowanie użytkownika..."})]})}):i?Vm.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-red-600 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Vm.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Błąd ładowania użytkownika"}),Vm.jsx("p",{className:"text-gray-600 mb-4",children:i.message}),Vm.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Odśwież stronę"})]})}):Vm.jsxs("div",{children:[Vm.jsxs("div",{className:"mb-8",children:[Vm.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Analizy"}),Vm.jsx("p",{className:"text-neutral-600",children:"Zarządzaj analizami zestawów produktów"})]}),Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Nowa analiza"})}),Vm.jsx(gX,{children:Vm.jsx(qee,{navigateToDashboard:!1,onSuccess:n=>{const r=t.pathname.startsWith("/paleta")?"/paleta":"";e(`${r}/analysis/${n}`)}})})]}),Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Wykonane analizy"})}),Vm.jsx(gX,{children:Vm.jsx(Gee,{analyses:o})})]})]})},tte=({stats:e,className:t=""})=>{return Vm.jsxs("div",{className:t,children:[Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-primary-500 mb-2",children:e.totalAnalyses}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Wszystkich analiz"}),Vm.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[e.analysesTrend.last7Days," w ostatnich 7 dniach"]})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-success-500 mb-2",children:e.completedAnalyses}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Zakończonych"}),Vm.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[e.totalAnalyses>0?Math.round(e.completedAnalyses/e.totalAnalyses*100):0,"% sukcesu"]})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-warning-500 mb-2",children:e.pendingAnalyses}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Oczekujących"}),Vm.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[e.failedAnalyses," nieudanych"]})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-info-500 mb-2",children:e.totalProducts}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Produktów"}),Vm.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Średnio ",Math.round(e.averageProductsPerAnalysis)," na analizę"]})]})})})]}),Vm.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Wydajność systemu"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Średni czas przetwarzania:"}),Vm.jsx("span",{className:"font-semibold",children:(n=e.averageProcessingTime,n<1e3?`${n}ms`:n<6e4?`${(n/1e3).toFixed(1)}s`:`${(n/6e4).toFixed(1)}min`)})]}),Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Aktywne reguły:"}),Vm.jsx("span",{className:"font-semibold",children:e.activeRules})]}),Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Ostatnia analiza:"}),Vm.jsx("span",{className:"font-semibold",children:e.lastAnalysisAt?new Date(e.lastAnalysisAt).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"Brak"})]})]})})]}),Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Trendy analiz"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Ostatnie 7 dni:"}),((e,t)=>{const n=t>0?(e-t)/t*100:0,r=n>0?"↗️":n<0?"↘️":"➡️",s=n>0?"text-success-500":n<0?"text-danger-500":"text-neutral-500";return Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("span",{className:"text-2xl font-bold",children:e}),Vm.jsxs("span",{className:`text-sm ${s}`,children:[r," ",Math.abs(n).toFixed(1),"%"]})]})})(e.analysesTrend.last7Days,e.analysesTrend.last30Days/4)]}),Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Ostatnie 30 dni:"}),Vm.jsx("span",{className:"text-2xl font-bold",children:e.analysesTrend.last30Days})]}),Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Wzrost:"}),Vm.jsxs("span",{className:"text-lg font-semibold "+(e.analysesTrend.growth>0?"text-success-500":e.analysesTrend.growth<0?"text-danger-500":"text-neutral-500"),children:[e.analysesTrend.growth>0?"+":"",e.analysesTrend.growth.toFixed(1),"%"]})]})]})})]})]}),e.topCategories.length>0&&Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Najpopularniejsze kategorie"})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"space-y-3",children:e.topCategories.map((e,t)=>Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsxs("span",{className:"text-lg font-bold text-neutral-400 w-6",children:["#",t+1]}),Vm.jsx("span",{className:"text-neutral-700",children:e.name})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("div",{className:"w-32 bg-neutral-200 rounded-full h-2",children:Vm.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:`${e.percentage}%`}})}),Vm.jsxs("span",{className:"text-sm text-neutral-600 w-16 text-right",children:[e.count," (",e.percentage.toFixed(1),"%)"]})]})]},e.name))})})]}),e.topRules.length>0&&Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Najczęściej naruszane reguły"})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"space-y-3",children:e.topRules.map((e,t)=>Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsxs("span",{className:"text-lg font-bold text-neutral-400 w-6",children:["#",t+1]}),Vm.jsx("span",{className:"text-neutral-700",children:e.name})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("div",{className:"w-32 bg-neutral-200 rounded-full h-2",children:Vm.jsx("div",{className:"bg-warning-500 h-2 rounded-full",style:{width:`${e.percentage}%`}})}),Vm.jsxs("span",{className:"text-sm text-neutral-600 w-16 text-right",children:[e.violations," (",e.percentage.toFixed(1),"%)"]})]})]},e.name))})})]})]});var n};function nte(e,t){const[n,r]=Im.useState([]),[s,a]=Im.useState(!1),[i,o]=Im.useState(null);return Im.useEffect(()=>{if(!e||!t)return void r([]);(async()=>{a(!0),o(null);try{console.log("🔄 Pobieranie produktów dla analizy:",e);const n=await Wee.getProductsForAnalysis(e,t);console.log("✅ Pobrano produkty:",n.length),r(n)}catch(n){console.error("❌ Błąd pobierania produktów:",n),o(n instanceof Error?n:new Error("Unknown error")),r([])}finally{a(!1)}})()},[e,t]),{products:n,loading:s,error:i}}const rte=({analysis:e,onClose:t,className:n="",processedFiles:r=[]})=>{var s;const a=$E(),{exportAnalysis:i}=Fee(),{supabaseUserId:o}=Uee(),[l,c]=Im.useState(!1),[d,u]=Im.useState("json"),[h,p]=Im.useState(null),{products:f,loading:m}=nte(e.id,o),g=r.length>0?r:(null==(s=a.state)?void 0:s.processedFiles)||[];console.log("AnalysisDetails: Otrzymana analiza:",{id:e.id,name:e.name,productsFromAnalysis:e.products.length,productsFromDB:f.length,products:f.slice(0,3),filesCount:e.files.length,processedFiles:r,filesToShow:g,loading:m});const v=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},y=f.map(e=>({id:e.id,name:e.name,category:e.category,price:e.price,quantity:e.quantity,description:e.description,sku:e.sku,unit:e.unit,brand:e.brand,source:e.source,rowIndex:e.rowIndex,rawData:e.rawData,ean:e.ean,paletaId:e.paletaId,foto:e.foto,code1:e.code1,code2:e.code2,packId:e.packId,fcSku:e.fcSku,link:e.link,currency:e.currency,priceGross:e.priceGross,priceNet:e.priceNet})),x=e=>{switch(e){case"completed":return"success";case"in_progress":return"warning";case"failed":return"danger";default:return"info"}},b=e=>{switch(e){case"completed":return"Zakończona";case"in_progress":return"W toku";case"failed":return"Błąd";case"pending":return"Oczekująca";default:return"Nieznany"}};return Vm.jsxs("div",{className:n,children:[Vm.jsx(fX,{className:"mb-6",children:Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("span",{className:"text-3xl",children:(e=>{switch(e){case"file_upload":return"📁";case"manual":return"✏️";case"scheduled":return"⏰";default:return"📋"}})(e.type)}),Vm.jsxs("div",{children:[Vm.jsx("h1",{className:"text-2xl font-bold text-neutral-800",children:e.name}),e.description&&Vm.jsx("p",{className:"text-neutral-600",children:e.description})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(yX,{status:x(e.status),children:b(e.status)}),t&&Vm.jsx(pX,{variant:"secondary",onClick:t,children:"Zamknij"})]})]})})}),Vm.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 justify-center",children:[e.stats.warningProducts>0&&Vm.jsx(fX,{className:"flex-shrink-0",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-yellow-50 to-amber-50 hover:shadow-lg transition-shadow cursor-help",title:`Ostrzeżenia: ${e.stats.warningProducts} ${1===e.stats.warningProducts?"produkt wymaga":"produktów wymaga"} uwagi`,children:[Vm.jsx("span",{className:"text-4xl",children:"⚠️"}),Vm.jsx("span",{className:"text-4xl font-bold text-warning-600",children:e.stats.warningProducts})]})})}),e.stats.blockedProducts>0&&Vm.jsx(fX,{className:"flex-shrink-0",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-red-50 to-rose-50 hover:shadow-lg transition-shadow cursor-help",title:`Zablokowane: ${e.stats.blockedProducts} ${1===e.stats.blockedProducts?"produkt jest zablokowany":"produktów jest zablokowanych"} i nie może być sprzedawany`,children:[Vm.jsx("span",{className:"text-4xl",children:"🚫"}),Vm.jsx("span",{className:"text-4xl font-bold text-danger-600",children:e.stats.blockedProducts})]})})}),Vm.jsx(fX,{className:"flex-shrink-0",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 hover:shadow-lg transition-shadow cursor-help",title:`Liczba produktów: łącznie ${e.totalProducts} ${1===e.totalProducts?"produkt":"produktów"} w analizie`,children:[Vm.jsx("span",{className:"text-4xl",children:"📦"}),Vm.jsx("span",{className:"text-4xl font-bold text-primary-600",children:e.totalProducts})]})})}),Vm.jsx(fX,{className:"flex-shrink-0",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-50 hover:shadow-lg transition-shadow cursor-help",title:`Produkty ważne: ${e.validProducts} ${1===e.validProducts?"produkt spełnia":"produktów spełnia"} wszystkie wymagania`,children:[Vm.jsx("span",{className:"text-4xl",children:"✓"}),Vm.jsx("span",{className:"text-4xl font-bold text-success-600",children:e.validProducts})]})})})]}),Vm.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Informacje podstawowe"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"ID:"}),Vm.jsx("span",{className:"font-mono text-sm",children:e.id})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Typ:"}),Vm.jsx("span",{children:e.type})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Status:"}),Vm.jsx(yX,{status:x(e.status),children:b(e.status)})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Utworzona:"}),Vm.jsx("span",{children:new Date(e.createdAt).toLocaleString("pl-PL")})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Zaktualizowana:"}),Vm.jsx("span",{children:new Date(e.updatedAt).toLocaleString("pl-PL")})]}),e.completedAt&&Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Zakończona:"}),Vm.jsx("span",{children:new Date(e.completedAt).toLocaleString("pl-PL")})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Czas przetwarzania:"}),Vm.jsxs("span",{children:[Math.round(e.stats.processingTime/1e3),"s"]})]})]})})]}),Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Statystyki cenowe"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Minimalna cena:"}),Vm.jsxs("span",{children:[e.stats.priceStats.min.toFixed(2)," PLN"]})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Maksymalna cena:"}),Vm.jsxs("span",{children:[e.stats.priceStats.max.toFixed(2)," PLN"]})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Średnia cena:"}),Vm.jsxs("span",{children:[e.stats.priceStats.average.toFixed(2)," PLN"]})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Mediana:"}),Vm.jsxs("span",{children:[e.stats.priceStats.median.toFixed(2)," PLN"]})]}),Vm.jsxs("div",{className:"flex justify-between",children:[Vm.jsx("span",{className:"text-neutral-600",children:"Suma:"}),Vm.jsxs("span",{children:[e.stats.priceStats.total.toFixed(2)," PLN"]})]})]})})]})]}),g.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:["Sparsowane pliki (",g.length,")"]})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"space-y-3",children:g.map(e=>Vm.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg cursor-pointer transition-colors "+(h===e.fileId?"bg-primary-50 border-2 border-primary-200":"bg-neutral-50 hover:bg-neutral-100"),onClick:()=>p(h===e.fileId?null:e.fileId),children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("span",{className:"text-lg",children:"📄"}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"font-medium",children:e.name}),Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[v(e.size)," • ",e.productsCount," produktów"]})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(yX,{status:"success",children:"Sparsowany"}),Vm.jsx("svg",{className:"w-5 h-5 text-neutral-400 transition-transform "+(h===e.fileId?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]},e.fileId))})})]}),h&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Szczegóły pliku"}),Vm.jsx(pX,{variant:"secondary",size:"sm",onClick:()=>p(null),children:"Zamknij"})]})}),Vm.jsx(gX,{children:(()=>{const e=g.find(e=>e.fileId===h),t=f;return e?Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-neutral-50 rounded-lg",children:[Vm.jsxs("div",{children:[Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Nazwa pliku"}),Vm.jsx("div",{className:"font-medium",children:e.name})]}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Rozmiar"}),Vm.jsx("div",{className:"font-medium",children:v(e.size)})]}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Produktów"}),Vm.jsx("div",{className:"font-medium",children:e.productsCount})]})]}),t.length>0&&Vm.jsxs("div",{children:[Vm.jsxs("h4",{className:"text-md font-semibold text-neutral-800 mb-3",children:["Produkty z pliku (",t.length,")"]}),Vm.jsx(xX,{products:t,showSource:!0,showRawData:!0,maxRows:100})]})]}):null})()})]}),e.files.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:["Pliki analizy (",e.files.length,")"]})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"space-y-3",children:e.files.map(e=>Vm.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("span",{className:"text-lg",children:"📄"}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"font-medium",children:e.name}),Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[(e.size/1024/1024).toFixed(2)," MB • ",e.productCount," produktów"]})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(yX,{status:"completed"===e.status?"success":"processing"===e.status?"warning":"error"===e.status?"danger":"info",children:"completed"===e.status?"Ukończony":"processing"===e.status?"Przetwarzanie":"error"===e.status?"Błąd":"Oczekujący"}),e.error&&Vm.jsx("span",{className:"text-sm text-danger-600",title:e.error,children:"⚠️"})]})]},e.id))})})]}),Object.keys(e.stats.categoryStats).length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Kategorie produktów"})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"space-y-2",children:Object.entries(e.stats.categoryStats).sort(([,e],[,t])=>t-e).map(([t,n])=>Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("span",{className:"text-neutral-700",children:t}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-32 bg-neutral-200 rounded-full h-2",children:Vm.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:n/e.totalProducts*100+"%"}})}),Vm.jsx("span",{className:"text-sm text-neutral-600 w-12 text-right",children:n})]})]},t))})})]}),e.metadata.tags.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Tagi"})}),Vm.jsx(gX,{children:Vm.jsx("div",{className:"flex flex-wrap gap-2",children:e.metadata.tags.map((e,t)=>Vm.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm rounded-full",children:e},t))})})]}),e.metadata.notes&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Notatki"})}),Vm.jsx(gX,{children:Vm.jsx("p",{className:"text-neutral-700 whitespace-pre-wrap",children:e.metadata.notes})})]}),m&&Vm.jsx(fX,{className:"mb-6",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-neutral-600",children:"Ładowanie produktów z bazy danych..."})]})})}),!m&&f.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Podsumowanie produktów"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200/50 shadow-sm hover:shadow-md transition-shadow cursor-help",title:`Łącznie produktów: ${f.length} ${1===f.length?"produkt":"produktów"} w bazie danych`,children:[Vm.jsx("span",{className:"text-3xl",children:"📦"}),Vm.jsx("span",{className:"text-3xl font-bold text-purple-700",children:f.length})]}),Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200/50 shadow-sm hover:shadow-md transition-shadow cursor-help",title:`Produkty z ceną: ${f.filter(e=>e.price&&e.price>0).length} ${1===f.filter(e=>e.price&&e.price>0).length?"produkt ma":"produktów ma"} przypisaną cenę`,children:[Vm.jsx("span",{className:"text-3xl",children:"💰"}),Vm.jsx("span",{className:"text-3xl font-bold text-green-700",children:f.filter(e=>e.price&&e.price>0).length})]}),Vm.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200/50 shadow-sm hover:shadow-md transition-shadow cursor-help",title:`Unikalne kategorie: ${new Set(f.map(e=>e.category).filter(Boolean)).size} ${1===new Set(f.map(e=>e.category).filter(Boolean)).size?"kategoria":"kategorii"} produktów`,children:[Vm.jsx("span",{className:"text-3xl",children:"🏷️"}),Vm.jsx("span",{className:"text-3xl font-bold text-amber-700",children:new Set(f.map(e=>e.category).filter(Boolean)).size})]})]})})]}),!m&&y.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:["Wszystkie produkty (",y.length,")"]})}),Vm.jsx(gX,{children:Vm.jsx(xX,{products:y,showSource:!0,showRawData:!0,maxRows:1e3})})]}),e.evaluations.length>0&&Vm.jsxs(fX,{className:"mb-6",children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Rekomendacje"})}),Vm.jsx(gX,{children:Vm.jsx(bX,{evaluations:e.evaluations})})]}),Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Eksport wyników"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-center space-x-4",children:[Vm.jsxs("select",{value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[Vm.jsx("option",{value:"json",children:"JSON"}),Vm.jsx("option",{value:"csv",children:"CSV"}),Vm.jsx("option",{value:"xlsx",children:"Excel (XLSX)"}),Vm.jsx("option",{value:"pdf",children:"PDF"})]}),Vm.jsx(pX,{variant:"primary",onClick:async()=>{c(!0);try{const t=await i(e.id,{format:d,includeProducts:!0,includeEvaluations:!0,includeStats:!0,includeMetadata:!0});t.success?console.log("Eksport zakończony:",t.fileName):console.error("Błąd eksportu:",t.error)}catch(t){console.error("Błąd eksportu:",t)}finally{c(!1)}},disabled:l,children:l?"Eksportowanie...":"Eksportuj"})]})})]})]})},ste=()=>{const e=$E(),{supabaseUserId:t,loading:n}=Uee(),{analyses:r,dashboardStats:s,updateDashboardStats:a,loadAnalyses:i,loading:o}=Fee(),[l,c]=Im.useState(null),[d,u]=Im.useState([]);Im.useEffect(()=>{t&&!n&&(console.log("Dashboard: Ładowanie analiz dla użytkownika:",t),i(t))},[t,n,i]),Im.useEffect(()=>{a()},[r,a]),Om.useEffect(()=>{var t,n;const s=null==(t=e.state)?void 0:t.selectedAnalysisId,a=null==(n=e.state)?void 0:n.processedFiles;if(s){const e=r.find(e=>e.id===s);e&&(console.log("Dashboard: Otwieranie analizy z przekierowania:",e.id),console.log("Dashboard: Sparsowane pliki:",a),c(e),u(a||[]))}},[e.state,r]);const h=()=>{c(null)};return l?Vm.jsxs("div",{children:[Vm.jsxs("div",{className:"mb-8",children:[Vm.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Szczegóły analizy"}),Vm.jsx("p",{className:"text-neutral-600",children:l.name})]}),Vm.jsx(rte,{analysis:l,onClose:h,processedFiles:d})]}):Vm.jsxs("div",{children:[Vm.jsxs("div",{className:"mb-8",children:[Vm.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Dashboard"}),Vm.jsx("p",{className:"text-neutral-600",children:"Przegląd analiz i statystyk"})]}),(n||o)&&Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),Vm.jsx("p",{className:"mt-2 text-neutral-600",children:"Ładowanie danych..."})]}),!n&&!o&&Vm.jsxs(Vm.Fragment,{children:[Vm.jsx(tte,{stats:s,className:"mb-8"}),Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Dodaj pliki do analizy"})}),Vm.jsx(gX,{children:Vm.jsx(qee,{navigateToDashboard:!1,onSuccess:e=>{t&&i(t);const n=r.find(t=>t.id===e);n&&c(n)},showButton:!0})})]}),Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Ostatnie analizy"})}),Vm.jsx(gX,{children:0===r.length?Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"text-neutral-400 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak analiz"}),Vm.jsx("p",{className:"text-neutral-500 mb-4",children:"Przeciągnij plik powyżej aby rozpocząć pierwszą analizę"})]}):Vm.jsx(Gee,{analyses:r.slice(0,5)})})]})]})]})};var ate=e=>"checkbox"===e.type,ite=e=>e instanceof Date,ote=e=>null==e;const lte=e=>"object"==typeof e;var cte=e=>!ote(e)&&!Array.isArray(e)&&lte(e)&&!ite(e),dte="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function ute(e){let t;const n=Array.isArray(e),r="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(dte&&(e instanceof Blob||r)||!n&&!cte(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return cte(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=ute(e[n]));else t=e}return t}var hte=e=>/^\w*$/.test(e),pte=e=>void 0===e,fte=e=>Array.isArray(e)?e.filter(Boolean):[],mte=e=>fte(e.replace(/["|']|\]/g,"").split(/\.|\[/)),gte=(e,t,n)=>{if(!t||!cte(e))return n;const r=(hte(t)?[t]:mte(t)).reduce((e,t)=>ote(e)?e:e[t],e);return pte(r)||r===e?pte(e[t])?n:e[t]:r},vte=e=>"boolean"==typeof e,yte=(e,t,n)=>{let r=-1;const s=hte(t)?[t]:mte(t),a=s.length,i=a-1;for(;++r<a;){const t=s[r];let a=n;if(r!==i){const n=e[t];a=cte(n)||Array.isArray(n)?n:isNaN(+s[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};const xte="blur",bte="focusout",wte="onBlur",kte="onChange",Ste="onSubmit",jte="onTouched",_te="all",Ate="max",Ete="min",Tte="maxLength",Nte="minLength",Cte="pattern",Pte="required",Rte="validate";Om.createContext(null).displayName="HookFormContext";const Mte="undefined"!=typeof window?Om.useLayoutEffect:Om.useEffect;var Ite=e=>"string"==typeof e,Ote=e=>ote(e)||!lte(e);function zte(e,t,n=new WeakSet){if(Ote(e)||Ote(t))return e===t;if(ite(e)&&ite(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of r){const r=e[a];if(!s.includes(a))return!1;if("ref"!==a){const e=t[a];if(ite(r)&&ite(e)||cte(r)&&cte(e)||Array.isArray(r)&&Array.isArray(e)?!zte(r,e,n):r!==e)return!1}}return!0}var Dte=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Lte=e=>Array.isArray(e)?e:[e],Fte=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function Bte(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],a=t[r];if(s&&cte(s)&&a){const e=Bte(s,a);cte(e)&&(n[r]=e)}else e[r]&&(n[r]=a)}return n}var Ute=e=>cte(e)&&!Object.keys(e).length,Wte=e=>"file"===e.type,$te=e=>"function"==typeof e,Vte=e=>{if(!dte)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Hte=e=>"select-multiple"===e.type,qte=e=>"radio"===e.type,Gte=e=>Vte(e)&&e.isConnected;function Kte(e,t){const n=Array.isArray(t)?t:hte(t)?[t]:mte(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=pte(e)?r++:e[t[r++]];return e}(e,n),s=n.length-1,a=n[s];return r&&delete r[a],0!==s&&(cte(r)&&Ute(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!pte(e[t]))return!1;return!0}(r))&&Kte(e,n.slice(0,-1)),e}function Xte(e){return Array.isArray(e)||cte(e)&&!(e=>{for(const t in e)if($te(e[t]))return!0;return!1})(e)}function Yte(e,t={}){for(const n in e)Xte(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Yte(e[n],t[n])):pte(e[n])||(t[n]=!0);return t}function Jte(e,t,n){n||(n=Yte(t));for(const r in e)Xte(e[r])?pte(t)||Ote(n[r])?n[r]=Yte(e[r],Array.isArray(e[r])?[]:{}):Jte(e[r],ote(t)?{}:t[r],n[r]):n[r]=!zte(e[r],t[r]);return n}const Zte={value:!1,isValid:!1},Qte={value:!0,isValid:!0};var ene=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!pte(e[0].attributes.value)?pte(e[0].value)||""===e[0].value?Qte:{value:e[0].value,isValid:!0}:Qte:Zte}return Zte},tne=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>pte(e)?e:t?""===e?NaN:e?+e:e:n&&Ite(e)?new Date(e):r?r(e):e;const nne={isValid:!1,value:null};var rne=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,nne):nne;function sne(e){const t=e.ref;return Wte(t)?t.files:qte(t)?rne(e.refs).value:Hte(t)?[...t.selectedOptions].map(({value:e})=>e):ate(t)?ene(e.refs).value:tne(pte(t.value)?e.ref.value:t.value,e)}var ane=e=>e instanceof RegExp,ine=e=>pte(e)?e:ane(e)?e.source:cte(e)?ane(e.value)?e.value.source:e.value:e,one=e=>({isOnSubmit:!e||e===Ste,isOnBlur:e===wte,isOnChange:e===kte,isOnAll:e===_te,isOnTouch:e===jte});const lne="AsyncFunction";var cne=e=>!!e&&!!e.validate&&!!($te(e.validate)&&e.validate.constructor.name===lne||cte(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===lne)),dne=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const une=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const n=gte(e,s);if(n){const{_f:e,...a}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(une(a,t))break}else if(cte(a)&&une(a,t))break}}};function hne(e,t,n){const r=gte(e,n);if(r||hte(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const r=s.join("."),a=gte(t,r),i=gte(e,r);if(a&&!Array.isArray(a)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};if(i&&i.root&&i.root.type)return{name:`${r}.root`,error:i.root};s.pop()}return{name:n}}var pne=(e,t,n)=>{const r=Lte(gte(e,n));return yte(r,"root",t[n]),yte(e,n,r),e};function fne(e,t,n="validate"){if(Ite(e)||Array.isArray(e)&&e.every(Ite)||vte(e)&&!e)return{type:n,message:Ite(e)?e:"",ref:t}}var mne=e=>cte(e)&&!ane(e)?e:{value:e,message:""},gne=async(e,t,n,r,s,a)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:p,validate:f,name:m,valueAsNumber:g,mount:v}=e._f,y=gte(n,m);if(!v||t.has(m))return{};const x=o?o[0]:i,b=e=>{s&&x.reportValidity&&(x.setCustomValidity(vte(e)?"":e||""),x.reportValidity())},w={},k=qte(i),S=ate(i),j=k||S,_=(g||Wte(i))&&pte(i.value)&&pte(y)||Vte(i)&&""===i.value||""===y||Array.isArray(y)&&!y.length,A=Dte.bind(null,m,r,w),E=(e,t,n,r=Tte,s=Nte)=>{const a=e?t:n;w[m]={type:e?r:s,message:a,ref:i,...A(e?r:s,a)}};if(a?!Array.isArray(y)||!y.length:l&&(!j&&(_||ote(y))||vte(y)&&!y||S&&!ene(o).isValid||k&&!rne(o).isValid)){const{value:e,message:t}=Ite(l)?{value:!!l,message:l}:mne(l);if(e&&(w[m]={type:Pte,message:t,ref:x,...A(Pte,t)},!r))return b(t),w}if(!(_||ote(u)&&ote(h))){let e,t;const n=mne(h),s=mne(u);if(ote(y)||isNaN(y)){const r=i.valueAsDate||new Date(y),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;Ite(n.value)&&y&&(e=o?a(y)>a(n.value):l?y>n.value:r>new Date(n.value)),Ite(s.value)&&y&&(t=o?a(y)<a(s.value):l?y<s.value:r<new Date(s.value))}else{const r=i.valueAsNumber||(y?+y:y);ote(n.value)||(e=r>n.value),ote(s.value)||(t=r<s.value)}if((e||t)&&(E(!!e,n.message,s.message,Ate,Ete),!r))return b(w[m].message),w}if((c||d)&&!_&&(Ite(y)||a&&Array.isArray(y))){const e=mne(c),t=mne(d),n=!ote(e.value)&&y.length>+e.value,s=!ote(t.value)&&y.length<+t.value;if((n||s)&&(E(n,e.message,t.message),!r))return b(w[m].message),w}if(p&&!_&&Ite(y)){const{value:e,message:t}=mne(p);if(ane(e)&&!y.match(e)&&(w[m]={type:Cte,message:t,ref:i,...A(Cte,t)},!r))return b(t),w}if(f)if($te(f)){const e=fne(await f(y,n),x);if(e&&(w[m]={...e,...A(Rte,e.message)},!r))return b(e.message),w}else if(cte(f)){let e={};for(const t in f){if(!Ute(e)&&!r)break;const s=fne(await f[t](y,n),x,t);s&&(e={...s,...A(t,s.message)},b(s.message),r&&(w[m]=e))}if(!Ute(e)&&(w[m]={ref:x,...e},!r))return w}return b(!0),w};const vne={mode:Ste,reValidateMode:kte,shouldFocusError:!0};function yne(e={}){let t,n={...vne,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:$te(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},a=(cte(n.defaultValues)||cte(n.values))&&ute(n.defaultValues||n.values)||{},i=n.shouldUnregister?{}:ute(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const h={array:Fte(),state:Fte()},p=n.criteriaMode===_te,f=async e=>{if(!n.disabled&&(d.isValid||u.isValid||e)){const e=n.resolver?Ute((await x()).errors):await b(s,!0);e!==r.isValid&&h.state.next({isValid:e})}},m=(e,t)=>{!n.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?yte(r.validatingFields,e,t):Kte(r.validatingFields,e))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Ute(r.validatingFields)}))},g=(e,t,n,r)=>{const l=gte(s,e);if(l){const s=gte(i,e,pte(n)?gte(a,e):n);pte(s)||r&&r.defaultChecked||t?yte(i,e,t?s:sne(l._f)):S(e,s),o.mount&&f()}},v=(e,t,s,i,o)=>{let l=!1,c=!1;const p={name:e};if(!n.disabled){if(!s||i){(d.isDirty||u.isDirty)&&(c=r.isDirty,r.isDirty=p.isDirty=w(),l=c!==p.isDirty);const n=zte(gte(a,e),t);c=!!gte(r.dirtyFields,e),n?Kte(r.dirtyFields,e):yte(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!n}if(s){const t=gte(r.touchedFields,e);t||(yte(r.touchedFields,e,s),p.touchedFields=r.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==s)}l&&o&&h.state.next(p)}return l?p:{}},y=(e,s,a,i)=>{const o=gte(r.errors,e),l=(d.isValid||u.isValid)&&vte(s)&&r.isValid!==s;var p;if(n.delayError&&a?(p=()=>((e,t)=>{yte(r.errors,e,t),h.state.next({errors:r.errors})})(e,a),t=e=>{clearTimeout(c),c=setTimeout(p,e)},t(n.delayError)):(clearTimeout(c),t=null,a?yte(r.errors,e,a):Kte(r.errors,e)),(a?!zte(o,a):o)||!Ute(i)||l){const t={...i,...l&&vte(s)?{isValid:s}:{},errors:r.errors,name:e};r={...r,...t},h.state.next(t)}},x=async e=>{m(e,!0);const t=await n.resolver(i,n.context,((e,t,n,r)=>{const s={};for(const a of e){const e=gte(t,a);e&&yte(s,a,e._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}})(e||l.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return m(e),t},b=async(e,t,s={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...a}=o;if(e){const a=l.array.has(e.name),c=o._f&&cne(o._f);c&&d.validatingFields&&m([e.name],!0);const u=await gne(o,l.disabled,i,p,n.shouldUseNativeValidation&&!t,a);if(c&&d.validatingFields&&m([e.name]),u[e.name]&&(s.valid=!1,t))break;!t&&(gte(u,e.name)?a?pne(r.errors,u,e.name):yte(r.errors,e.name,u[e.name]):Kte(r.errors,e.name))}!Ute(a)&&await b(a,t,s)}}return s.valid},w=(e,t)=>!n.disabled&&(e&&t&&yte(i,e,t),!zte(N(),a)),k=(e,t,n)=>((e,t,n,r,s)=>Ite(e)?(r&&t.watch.add(e),gte(n,e,s)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),gte(n,e))):(r&&(t.watchAll=!0),n))(e,l,{...o.mount?i:pte(t)?a:Ite(e)?{[e]:t}:t},n,t),S=(e,t,n={})=>{const r=gte(s,e);let a=t;if(r){const n=r._f;n&&(!n.disabled&&yte(i,e,tne(t,n)),a=Vte(n.ref)&&ote(t)?"":t,Hte(n.ref)?[...n.ref.options].forEach(e=>e.selected=a.includes(e.value)):n.refs?ate(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find(t=>t===e.value):e.checked=a===e.value||!!a)}):n.refs.forEach(e=>e.checked=e.value===a):Wte(n.ref)?n.ref.value="":(n.ref.value=a,n.ref.type||h.state.next({name:e,values:ute(i)})))}(n.shouldDirty||n.shouldTouch)&&v(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&T(e)},j=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const a=t[r],i=e+"."+r,o=gte(s,i);(l.array.has(e)||cte(a)||o&&!o._f)&&!ite(a)?j(i,a,n):S(i,a,n)}},_=(e,t,n={})=>{const c=gte(s,e),p=l.array.has(e),f=ute(t);yte(i,e,f),p?(h.array.next({name:e,values:ute(i)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:Jte(a,i),isDirty:w(e,f)})):!c||c._f||ote(f)?S(e,f,n):j(e,f,n),dne(e,l)&&h.state.next({...r,name:e}),h.state.next({name:o.mount?e:void 0,values:ute(i)})},A=async e=>{o.mount=!0;const a=e.target;let c=a.name,g=!0;const w=gte(s,c),k=e=>{g=Number.isNaN(e)||ite(e)&&isNaN(e.getTime())||zte(e,gte(i,c,e))},S=one(n.mode),j=one(n.reValidateMode);if(w){let o,_;const A=a.type?sne(w._f):(e=>cte(e)&&e.target?ate(e.target)?e.target.checked:e.target.value:e)(e),E=e.type===xte||e.type===bte,N=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(w._f)&&!n.resolver&&!gte(r.errors,c)&&!w._f.deps||((e,t,n,r,s)=>!s.isOnAll&&(!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:!(n?r.isOnChange:s.isOnChange)||e))(E,gte(r.touchedFields,c),r.isSubmitted,j,S),C=dne(c,l,E);yte(i,c,A),E?a&&a.readOnly||(w._f.onBlur&&w._f.onBlur(e),t&&t(0)):w._f.onChange&&w._f.onChange(e);const P=v(c,A,E),R=!Ute(P)||C;if(!E&&h.state.next({name:c,type:e.type,values:ute(i)}),N)return(d.isValid||u.isValid)&&("onBlur"===n.mode?E&&f():E||f()),R&&h.state.next({name:c,...C?{}:P});if(!E&&C&&h.state.next({...r}),n.resolver){const{errors:e}=await x([c]);if(k(A),g){const t=hne(r.errors,s,c),n=hne(e,s,t.name||c);o=n.error,c=n.name,_=Ute(e)}}else m([c],!0),o=(await gne(w,l.disabled,i,p,n.shouldUseNativeValidation))[c],m([c]),k(A),g&&(o?_=!1:(d.isValid||u.isValid)&&(_=await b(s,!0)));g&&(w._f.deps&&(!Array.isArray(w._f.deps)||w._f.deps.length>0)&&T(w._f.deps),y(c,_,o,P))}},E=(e,t)=>{if(gte(r.errors,t)&&e.focus)return e.focus(),1},T=async(e,t={})=>{let a,i;const o=Lte(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await x(e);if(e)for(const n of e){const e=gte(t,n);e?yte(r.errors,n,e):Kte(r.errors,n)}else r.errors=t;return t})(pte(e)?e:o);a=Ute(t),i=e?!o.some(e=>gte(t,e)):a}else e?(i=(await Promise.all(o.map(async e=>{const t=gte(s,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||r.isValid)&&f()):i=a=await b(s);return h.state.next({...!Ite(e)||(d.isValid||u.isValid)&&a!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:a}:{},errors:r.errors}),t.shouldFocus&&!i&&une(s,E,e?o:l.mount),i},N=(e,t)=>{let n={...o.mount?i:a};return t&&(n=Bte(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),pte(e)?n:Ite(e)?gte(n,e):e.map(e=>gte(n,e))},C=(e,t)=>({invalid:!!gte((t||r).errors,e),isDirty:!!gte((t||r).dirtyFields,e),error:gte((t||r).errors,e),isValidating:!!gte(r.validatingFields,e),isTouched:!!gte((t||r).touchedFields,e)}),P=(e,t,n)=>{const a=(gte(s,e,{_f:{}})._f||{}).ref,i=gte(r.errors,e)||{},{ref:o,message:l,type:c,...d}=i;yte(r.errors,e,{...d,...t,ref:a}),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&a&&a.focus&&a.focus()},R=e=>h.state.subscribe({next:t=>{var n,s,o;n=e.name,s=t.name,o=e.exact,n&&s&&n!==s&&!Lte(n).some(e=>e&&(o?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:s,...a}=e;return Ute(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!r||_te))})(t,e.formState||d,B,e.reRenderRoot)||e.callback({values:{...i},...r,...t,defaultValues:a})}}).unsubscribe,M=(e,t={})=>{for(const o of e?Lte(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Kte(s,o),Kte(i,o)),!t.keepError&&Kte(r.errors,o),!t.keepDirty&&Kte(r.dirtyFields,o),!t.keepTouched&&Kte(r.touchedFields,o),!t.keepIsValidating&&Kte(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Kte(a,o);h.state.next({values:ute(i)}),h.state.next({...r,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&f()},I=({disabled:e,name:t})=>{(vte(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},O=(e,t={})=>{let r=gte(s,e);const i=vte(t.disabled)||vte(n.disabled);return yte(s,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?I({disabled:vte(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),{...i?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:ine(t.min),max:ine(t.max),minLength:ine(t.minLength),maxLength:ine(t.maxLength),pattern:ine(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:i=>{if(i){O(e,t),r=gte(s,e);const n=pte(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>qte(e)||ate(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;yte(s,e,{_f:{...r._f,...o?{refs:[...l.filter(Gte),n,...Array.isArray(gte(a,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),g(e,!1,void 0,n)}else r=gte(s,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(l.array,e)||!o.action)&&l.unMount.add(e)}}},z=()=>n.shouldFocusError&&une(s,E,l.mount),D=(e,t)=>async a=>{let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=ute(i);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await x();r.errors=e,c=ute(t)}else await b(s);if(l.disabled.size)for(const e of l.disabled)Kte(c,e);if(Kte(r.errors,"root"),Ute(r.errors)){h.state.next({errors:{}});try{await e(c,a)}catch(d){o=d}}else t&&await t({...r.errors},a),z(),setTimeout(z);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ute(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},L=(e,t={})=>{const c=e?ute(e):a,u=ute(c),p=Ute(e),f=p?a:u;if(t.keepDefaultValues||(a=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Jte(a,i))]);for(const t of Array.from(e))gte(r.dirtyFields,t)?yte(f,t,gte(i,t)):_(t,gte(f,t))}else{if(dte&&pte(e))for(const e of l.mount){const t=gte(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Vte(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)_(e,gte(f,e));else s={}}i=n.shouldUnregister?t.keepDefaultValues?ute(a):{}:ute(f),h.array.next({values:{...f}}),h.state.next({values:{...f}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!n.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||zte(e,a))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&i?Jte(a,i):r.dirtyFields:t.keepDefaultValues&&e?Jte(a,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:a})},F=(e,t)=>L($te(e)?e(i):e,t),B=e=>{r={...r,...e}},U={control:{register:O,unregister:M,getFieldState:C,handleSubmit:D,setError:P,_subscribe:R,_runSchema:x,_focusError:z,_getWatch:k,_getDirty:w,_setValid:f,_setFieldArray:(e,t=[],l,c,p=!0,f=!0)=>{if(c&&l&&!n.disabled){if(o.action=!0,f&&Array.isArray(gte(s,e))){const t=l(gte(s,e),c.argA,c.argB);p&&yte(s,e,t)}if(f&&Array.isArray(gte(r.errors,e))){const t=l(gte(r.errors,e),c.argA,c.argB);p&&yte(r.errors,e,t),((e,t)=>{!fte(gte(e,t)).length&&Kte(e,t)})(r.errors,e)}if((d.touchedFields||u.touchedFields)&&f&&Array.isArray(gte(r.touchedFields,e))){const t=l(gte(r.touchedFields,e),c.argA,c.argB);p&&yte(r.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(r.dirtyFields=Jte(a,i)),h.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else yte(i,e,t)},_setDisabledField:I,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>fte(gte(o.mount?i:a,e,n.shouldUnregister?gte(a,e,[]):[])),_reset:L,_resetDefaultValues:()=>$te(n.defaultValues)&&n.defaultValues().then(e=>{F(e,n.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=gte(s,e);t&&(t._f.refs?t._f.refs.every(e=>!Gte(e)):!Gte(t._f.ref))&&M(e)}l.unMount=new Set},_disableForm:e=>{vte(e)&&(h.state.next({disabled:e}),une(s,(t,n)=>{const r=gte(s,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:d,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n={...n,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},R({...e,formState:u})),trigger:T,register:O,handleSubmit:D,watch:(e,t)=>$te(e)?h.state.subscribe({next:n=>"values"in n&&e(k(void 0,t),n)}):k(e,t,!0),setValue:_,getValues:N,reset:F,resetField:(e,t={})=>{gte(s,e)&&(pte(t.defaultValue)?_(e,ute(gte(a,e))):(_(e,t.defaultValue),yte(a,e,ute(t.defaultValue))),t.keepTouched||Kte(r.touchedFields,e),t.keepDirty||(Kte(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,ute(gte(a,e))):w()),t.keepError||(Kte(r.errors,e),d.isValid&&f()),h.state.next({...r}))},clearErrors:e=>{e&&Lte(e).forEach(e=>Kte(r.errors,e)),h.state.next({errors:e?r.errors:{}})},unregister:M,setError:P,setFocus:(e,t={})=>{const n=gte(s,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&$te(e.select)&&e.select())}},getFieldState:C};return{...U,formControl:U}}function xne(e={}){const t=Om.useRef(void 0),n=Om.useRef(void 0),[r,s]=Om.useState({isDirty:!1,isValidating:!1,isLoading:$te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$te(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!$te(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...s}=yne(e);t.current={...s,formState:r}}const a=t.current.control;return a._options=e,Mte(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(e=>({...e,isReady:!0})),a._formState.isReady=!0,e},[a]),Om.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Om.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Om.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Om.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Om.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}},[a,r.isDirty]),Om.useEffect(()=>{e.values&&!zte(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=e.values,s(e=>({...e}))):a._resetDefaultValues()},[a,e.values]),Om.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=((e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const s=a;return t._proxyFormState[s]!==_te&&(t._proxyFormState[s]=!r||_te),n&&(n[s]=!0),e[s]}});return s})(r,a),t.current}const bne=new class{async getClient(){return PG}async getRules(e){const t=await this.getClient(),{data:n,error:r}=await t.from("rules").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching rules:",r),new Error(`Failed to fetch rules: ${r.message}`);return(n||[]).map(e=>this.mapRowToRule(e))}async getRule(e,t){const n=await this.getClient(),{data:r,error:s}=await n.from("rules").select("*").eq("id",e).eq("user_id",t).single();if(s){if("PGRST116"===s.code)return null;throw console.error("Error fetching rule:",s),new Error(`Failed to fetch rule: ${s.message}`)}return this.mapRowToRule(r)}async createRule(e,t){const n=await this.getClient(),r={user_id:t,name:e.name,description:e.description||null,type:e.type,action:e.action,weight:e.weight,status:e.status,conditions:e.conditions},{data:s,error:a}=await n.from("rules").insert(r).select().single();if(a)throw console.error("Error creating rule:",a),new Error(`Failed to create rule: ${a.message}`);return this.mapRowToRule(s)}async updateRule(e,t,n){const r=await this.getClient(),s={name:t.name,description:t.description||null,type:t.type,action:t.action,weight:t.weight,status:t.status,conditions:t.conditions,updated_at:(new Date).toISOString()},a=Object.fromEntries(Object.entries(s).filter(([e,t])=>null!=t)),{error:i}=await r.from("rules").update(a).eq("id",e).eq("user_id",n);if(i)throw console.error("Error updating rule:",i),new Error(`Failed to update rule: ${i.message}`)}async deleteRule(e,t){const n=await this.getClient(),{error:r}=await n.from("rules").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting rule:",r),new Error(`Failed to delete rule: ${r.message}`)}async getRuleTemplates(){const e=await this.getClient(),{data:t,error:n}=await e.from("rule_templates").select("*").order("name",{ascending:!0});if(n)throw console.error("Error fetching rule templates:",n),new Error(`Failed to fetch rule templates: ${n.message}`);return(t||[]).map(e=>this.mapRowToRuleTemplate(e))}async createRuleFromTemplate(e,t){const n=await this.getClient(),{data:r,error:s}=await n.from("rule_templates").select("*").eq("id",e).single();if(s||!r)throw new Error("Template not found");const a={user_id:t,name:r.name,description:r.description,type:r.type,action:r.action,weight:r.weight,status:"active",conditions:r.conditions},{data:i,error:o}=await n.from("rules").insert(a).select().single();if(o)throw console.error("Error creating rule from template:",o),new Error(`Failed to create rule from template: ${o.message}`);return this.mapRowToRule(i)}mapRowToRule(e){return{id:e.id,name:e.name,description:e.description||void 0,type:e.type,action:e.action,weight:e.weight,status:e.status,conditions:e.conditions,createdAt:new Date(e.created_at||new Date),updatedAt:new Date(e.updated_at||new Date)}}mapRowToRuleTemplate(e){return{id:e.id,name:e.name,description:e.description||"",type:e.type,action:e.action,weight:e.weight,conditions:e.conditions,category:e.category||"",tags:e.tags||[]}}},wne=cX((e,t)=>({rules:[],templates:[],evaluations:[],stats:{totalRules:0,activeRules:0,inactiveRules:0,rulesByType:{budget:0,category:0,quality:0},rulesByAction:{block:0,warn:0,prefer:0},averageWeight:0},loading:!1,error:null,loadRules:async n=>{e({loading:!0,error:null});try{const r=await bne.getRules(n);e({rules:r,loading:!1}),t().updateStats()}catch(r){const t=r instanceof Error?r.message:"Failed to load rules";e({error:t,loading:!1}),console.error("Error loading rules:",r)}},loadTemplates:async()=>{e({loading:!0,error:null});try{const t=await bne.getRuleTemplates();e({templates:t,loading:!1})}catch(t){const n=t instanceof Error?t.message:"Failed to load templates";e({error:n,loading:!1}),console.error("Error loading templates:",t)}},loadRule:async(t,n)=>{e({loading:!0,error:null});try{await bne.getRule(t,n),e({loading:!1})}catch(r){const t=r instanceof Error?r.message:"Failed to load rule";e({error:t,loading:!1}),console.error("Error loading rule:",r)}},addRule:async(n,r)=>{e({loading:!0,error:null});try{const s=await bne.createRule(n,r);return e(e=>({rules:[s,...e.rules],loading:!1})),t().updateStats(),s}catch(s){const t=s instanceof Error?s.message:"Failed to add rule";throw e({error:t,loading:!1}),console.error("Error adding rule:",s),s}},updateRule:async(n,r,s)=>{e({loading:!0,error:null});try{await bne.updateRule(n,r,s),e(e=>({rules:e.rules.map(e=>e.id===n?{...e,...r,updatedAt:new Date}:e),loading:!1})),t().updateStats()}catch(a){const t=a instanceof Error?a.message:"Failed to update rule";throw e({error:t,loading:!1}),console.error("Error updating rule:",a),a}},deleteRule:async(n,r)=>{e({loading:!0,error:null});try{await bne.deleteRule(n,r),e(e=>({rules:e.rules.filter(e=>e.id!==n),loading:!1})),t().updateStats()}catch(s){const t=s instanceof Error?s.message:"Failed to delete rule";throw e({error:t,loading:!1}),console.error("Error deleting rule:",s),s}},toggleRuleStatus:async(e,n)=>{const r=t().rules.find(t=>t.id===e);r&&await t().updateRule(e,{status:"active"===r.status?"inactive":"active"},n)},duplicateRule:async(e,n)=>{const r=t().rules.find(t=>t.id===e);if(!r)throw new Error("Rule not found");return await t().addRule({...r,name:`${r.name} (kopia)`,status:"inactive"},n)},createRuleFromTemplate:async(n,r)=>{e({loading:!0,error:null});try{const s=await bne.createRuleFromTemplate(n,r);return e(e=>({rules:[s,...e.rules],loading:!1})),t().updateStats(),s}catch(s){const t=s instanceof Error?s.message:"Failed to create rule from template";throw e({error:t,loading:!1}),console.error("Error creating rule from template:",s),s}},getTemplatesByType:e=>t().templates.filter(t=>t.type===e),evaluateProducts:n=>{const r=[];for(const e of n){const n=t().evaluateProduct(e);r.push(n)}return e({evaluations:r}),t().updateStats(),r},evaluateProduct:e=>{const n=t().getActiveRules(),r=[],s=[],a=[],i=[];let o=0,l="ok";for(const u of n)try{const n=t().applyRule(u,e);null!==n&&(r.push({ruleId:u.id,ruleName:u.name,action:u.action,weight:u.weight,score:u.weight,reason:n.reason||"Reguła zastosowana",matched:!0}),"block"===u.action?(l="blocked",i.push(n.reason||"Produkt zablokowany"),o+=-2*u.weight):"warn"===u.action?("blocked"!==l&&(l="warning"),a.push(n.reason||"Ostrzeżenie"),o+=-1*u.weight):"prefer"===u.action&&(s.push(n.reason||"Rekomendacja"),o+=1*u.weight))}catch(d){console.warn(`Error applying rule ${u.id}:`,d)}const c=Math.max(0,Math.min(100,50+o));return{productId:e.id,score:c,status:l,appliedRules:r,recommendations:s,warnings:a,blocks:i}},updateStats:async()=>{const n=t().rules,r=t().evaluations,s={budget:0,category:0,quality:0},a={block:0,warn:0,prefer:0};n.forEach(e=>{s[e.type]=(s[e.type]||0)+1,a[e.action]=(a[e.action]||0)+1});const i=n.filter(e=>"active"===e.status),o=n.filter(e=>"inactive"===e.status),l=n.length>0?n.reduce((e,t)=>e+t.weight,0)/n.length:0,c={totalRules:n.length,activeRules:i.length,inactiveRules:o.length,rulesByType:s,rulesByAction:a,averageWeight:l,lastUsed:r.length>0?new Date:void 0};e({stats:c})},getStats:()=>t().stats,validateRule:e=>{const t={isValid:!0,errors:[],warnings:[],conflicts:[]};return e.name&&0!==e.name.trim().length||(t.isValid=!1,t.errors.push("Nazwa reguły jest wymagana")),e.type||(t.isValid=!1,t.errors.push("Typ reguły jest wymagany")),e.action||(t.isValid=!1,t.errors.push("Akcja reguły jest wymagana")),(void 0===e.weight||e.weight<1||e.weight>10)&&(t.isValid=!1,t.errors.push("Waga reguły musi być między 1 a 10")),e.conditions&&0!==Object.keys(e.conditions).length||(t.isValid=!1,t.errors.push("Warunki reguły są wymagane")),t},testRule:(e,n)=>{const r=t().rules.find(t=>t.id===e);if(!r)return{ruleId:e,testData:n,results:{passed:0,failed:0,total:0,details:[]}};const s=n.map(e=>{try{const n=t().applyRule(r,e);return{data:e,result:null!==n,reason:n?n.reason:"Reguła nie zastosowana"}}catch(n){return{data:e,result:!1,reason:n instanceof Error?n.message:"Unknown error"}}}),a=s.filter(e=>e.result).length,i=s.filter(e=>!e.result).length;return{ruleId:e,testData:n,results:{passed:a,failed:i,total:s.length,details:s}}},applyRule:(e,t)=>{switch(e.type){case"budget":const n=e.conditions;if(n.maxPrice&&t.price&&t.price>n.maxPrice)return{matched:!0,reason:`Cena ${t.price} przekracza limit ${n.maxPrice}`,action:e.action};break;case"category":const r=e.conditions;if(r.blacklist&&t.category&&r.blacklist.includes(t.category))return{matched:!0,reason:`Kategoria ${t.category} jest na czarnej liście`,action:e.action};if(r.whitelist&&t.category&&!r.whitelist.includes(t.category))return{matched:!0,reason:`Kategoria ${t.category} nie jest na białej liście`,action:e.action};break;case"quality":const s=e.conditions;if(s.keywords){const n=t.name.toLowerCase(),r=s.keywords.filter(e=>n.includes(e.toLowerCase()));if(r.length>0)return{matched:!0,reason:`Nazwa zawiera słowa kluczowe: ${r.join(", ")}`,action:e.action}}}return null},getRulesByType:e=>t().rules.filter(t=>t.type===e),getRulesByAction:e=>t().rules.filter(t=>t.action===e),getActiveRules:()=>t().rules.filter(e=>"active"===e.status),getInactiveRules:()=>t().rules.filter(e=>"inactive"===e.status),clearAllRules:()=>{e({rules:[]}),t().updateStats()},clearEvaluations:()=>{e({evaluations:[]}),t().updateStats()},clearError:()=>{e({error:null})}})),kne=({rule:e,onSave:t,onCancel:n,className:r=""})=>{var s,a;const{supabaseUserId:i}=Uee(),{addRule:o,updateRule:l,validateRule:c}=wne(),[d,u]=Im.useState(null),[h,p]=Im.useState(!1),{register:f,handleSubmit:m,watch:g,formState:{errors:v,isValid:y}}=xne({mode:"onChange",defaultValues:{name:(null==e?void 0:e.name)||"",description:(null==e?void 0:e.description)||"",type:(null==e?void 0:e.type)||"budget",action:(null==e?void 0:e.action)||"warn",weight:(null==e?void 0:e.weight)||5,status:(null==e?void 0:e.status)||"inactive",conditions:(null==e?void 0:e.conditions)||{}}}),x=g("type"),b=g("name");console.log("Form values:",{name:b,nameType:typeof b,nameLength:null==b?void 0:b.length,isValid:y,errors:null==(s=v.name)?void 0:s.message,validation:null==d?void 0:d.isValid}),Im.useEffect(()=>{const e=g(e=>{console.log("Watch value:",e);try{const t=c(e);console.log("Validation result:",t),u(t)}catch(t){console.error("Validation error:",t),u({isValid:!1,errors:["Błąd walidacji"],warnings:[],conflicts:[]})}});return()=>e.unsubscribe()},[g,c]);const w=(e,t)=>{switch(e){case"budget":return{maxPrice:t.maxPrice||void 0,maxPricePerUnit:t.maxPricePerUnit||void 0,maxTotalBudget:t.maxTotalBudget||void 0,currency:t.currency||"PLN"};case"category":return{blacklist:t.blacklist||[],whitelist:t.whitelist||[],warningList:t.warningList||[],caseSensitive:t.caseSensitive||!1};case"quality":return{minRating:t.minRating||void 0,minReviews:t.minReviews||void 0,requiredCertifications:t.requiredCertifications||[],requiredBrands:t.requiredBrands||[]};default:return{}}};return Vm.jsxs(fX,{className:r,children:[Vm.jsx(mX,{children:Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:e?"Edytuj regułę":"Nowa reguła"})}),Vm.jsx(gX,{children:Vm.jsxs("form",{onSubmit:m(async n=>{console.log("onSubmit called with:",n),p(!0);try{const r={...n,conditions:w(n.type,n.conditions)};console.log("ruleData prepared:",r),i&&(e?(console.log("Updating rule:",e.id),l(e.id,r,i)):(console.log("Adding new rule"),o(r,i))),console.log("Calling onSave with:",r),null==t||t(r)}catch(r){console.error("Błąd zapisywania reguły:",r)}finally{p(!1)}}),className:"space-y-6",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Nazwa reguły *"}),Vm.jsx(vX,{placeholder:"np. Budżet do 1000 PLN",...f("name",{required:"Nazwa reguły jest wymagana",minLength:{value:1,message:"Nazwa reguły jest wymagana"}}),error:null==(a=v.name)?void 0:a.message})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Opis reguły"}),Vm.jsx("textarea",{className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,placeholder:"Opis działania reguły...",...f("description")})]})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Typ reguły *"}),Vm.jsxs("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",...f("type",{required:"Typ reguły jest wymagany"}),children:[Vm.jsx("option",{value:"budget",children:"💰 Budżetowa"}),Vm.jsx("option",{value:"category",children:"🏷️ Kategorii"}),Vm.jsx("option",{value:"quality",children:"⭐ Jakościowa"})]})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Akcja reguły *"}),Vm.jsxs("select",{className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",...f("action",{required:"Akcja reguły jest wymagana"}),children:[Vm.jsx("option",{value:"warn",children:"⚠️ Ostrzeżenie"}),Vm.jsx("option",{value:"block",children:"❌ Blokada"}),Vm.jsx("option",{value:"prefer",children:"✅ Preferencja"})]})]})]}),Vm.jsxs("div",{children:[Vm.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Waga reguły (1-10): ",g("weight")]}),Vm.jsx("input",{type:"range",min:"1",max:"10",className:"w-full",...f("weight",{valueAsNumber:!0})}),Vm.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[Vm.jsx("span",{children:"1 - Niska"}),Vm.jsx("span",{children:"10 - Wysoka"})]})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Warunki reguły"}),(()=>{switch(x){case"budget":return Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Maksymalna cena (PLN)"}),Vm.jsx(vX,{type:"number",placeholder:"np. 1000",...f("conditions.maxPrice",{valueAsNumber:!0})})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Maksymalna cena za sztukę (PLN)"}),Vm.jsx(vX,{type:"number",placeholder:"np. 100",...f("conditions.maxPricePerUnit",{valueAsNumber:!0})})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Maksymalny budżet zestawu (PLN)"}),Vm.jsx(vX,{type:"number",placeholder:"np. 5000",...f("conditions.maxTotalBudget",{valueAsNumber:!0})})]})]});case"category":return Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Lista zakazanych kategorii (oddzielone przecinkami)"}),Vm.jsx(vX,{placeholder:"np. elektronika, komputery, telefony",...f("conditions.blacklist")})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Lista preferowanych kategorii (oddzielone przecinkami)"}),Vm.jsx(vX,{placeholder:"np. książki, ubrania, sport",...f("conditions.whitelist")})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Lista ostrzegających kategorii (oddzielone przecinkami)"}),Vm.jsx(vX,{placeholder:"np. kosmetyki, żywność",...f("conditions.warningList")})]}),Vm.jsxs("div",{className:"flex items-center",children:[Vm.jsx("input",{type:"checkbox",id:"caseSensitive",...f("conditions.caseSensitive"),className:"mr-2"}),Vm.jsx("label",{htmlFor:"caseSensitive",className:"text-sm text-neutral-700",children:"Uwzględniaj wielkość liter"})]})]});case"quality":return Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Minimalna ocena (1-5)"}),Vm.jsx(vX,{type:"number",min:"1",max:"5",step:"0.1",placeholder:"np. 4.0",...f("conditions.minRating",{valueAsNumber:!0})})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Minimalna liczba opinii"}),Vm.jsx(vX,{type:"number",min:"0",placeholder:"np. 10",...f("conditions.minReviews",{valueAsNumber:!0})})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Wymagane certyfikaty (oddzielone przecinkami)"}),Vm.jsx(vX,{placeholder:"np. CE, ISO, FSC",...f("conditions.requiredCertifications")})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Preferowane marki (oddzielone przecinkami)"}),Vm.jsx(vX,{placeholder:"np. Apple, Samsung, Nike",...f("conditions.requiredBrands")})]})]});default:return null}})()]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Status reguły"}),Vm.jsxs("div",{className:"flex space-x-4",children:[Vm.jsxs("label",{className:"flex items-center",children:[Vm.jsx("input",{type:"radio",value:"active",...f("status"),className:"mr-2"}),Vm.jsx("span",{className:"text-sm",children:"Aktywna"})]}),Vm.jsxs("label",{className:"flex items-center",children:[Vm.jsx("input",{type:"radio",value:"inactive",...f("status"),className:"mr-2"}),Vm.jsx("span",{className:"text-sm",children:"Nieaktywna"})]})]})]}),d&&Vm.jsxs("div",{className:"space-y-2",children:[d.errors.length>0&&Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-sm font-medium text-danger-600 mb-1",children:"Błędy:"}),d.errors.map((e,t)=>Vm.jsxs("div",{className:"text-sm text-danger-600",children:["• ",e]},t))]}),d.warnings.length>0&&Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-sm font-medium text-warning-600 mb-1",children:"Ostrzeżenia:"}),d.warnings.map((e,t)=>Vm.jsxs("div",{className:"text-sm text-warning-600",children:["• ",e]},t))]})]}),Vm.jsxs("div",{className:"flex justify-end space-x-3",children:[n&&Vm.jsx(pX,{type:"button",variant:"secondary",onClick:n,children:"Anuluj"}),Vm.jsx(pX,{type:"submit",variant:"primary",disabled:(()=>{const e=!y||h||!d||!d.isValid;return console.log("Button disabled state:",{isValid:y,isSubmitting:h,validationIsValid:null==d?void 0:d.isValid,disabled:e}),e})(),children:h?"Zapisywanie...":e?"Zaktualizuj":"Utwórz regułę"})]})]})})]})},Sne=({rules:e,onEdit:t,onDelete:n,className:r=""})=>{const{supabaseUserId:s}=Uee(),{toggleRuleStatus:a,duplicateRule:i}=wne(),[o,l]=Im.useState("all"),[c,d]=Im.useState("all"),[u,h]=Im.useState("all"),p=e.filter(e=>("all"===o||e.type===o)&&(("all"===c||e.action===c)&&("all"===u||e.status===u))),f=e=>{switch(e){case"budget":return"💰";case"category":return"🏷️";case"quality":return"⭐";default:return"📋"}},m=e=>{switch(e){case"block":return"danger";case"warn":return"warning";case"prefer":return"success";default:return"info"}},g=e=>{switch(e){case"block":return"Blokada";case"warn":return"Ostrzeżenie";case"prefer":return"Preferencja";default:return"Nieznana"}},v=e=>{const t=e.conditions;switch(e.type){case"budget":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.maxPrice&&Vm.jsxs("div",{children:["Max cena: ",t.maxPrice," PLN"]}),t.maxPricePerUnit&&Vm.jsxs("div",{children:["Max cena/szt: ",t.maxPricePerUnit," PLN"]}),t.maxTotalBudget&&Vm.jsxs("div",{children:["Max budżet: ",t.maxTotalBudget," PLN"]})]});case"category":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.blacklist&&t.blacklist.length>0&&Vm.jsxs("div",{children:["Zakazane: ",t.blacklist.join(", ")]}),t.whitelist&&t.whitelist.length>0&&Vm.jsxs("div",{children:["Preferowane: ",t.whitelist.join(", ")]}),t.warningList&&t.warningList.length>0&&Vm.jsxs("div",{children:["Ostrzeżenia: ",t.warningList.join(", ")]})]});case"quality":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.minRating&&Vm.jsxs("div",{children:["Min ocena: ",t.minRating]}),t.minReviews&&Vm.jsxs("div",{children:["Min opinie: ",t.minReviews]}),t.requiredCertifications&&t.requiredCertifications.length>0&&Vm.jsxs("div",{children:["Certyfikaty: ",t.requiredCertifications.join(", ")]})]});default:return null}};return 0===e.length?Vm.jsx(fX,{className:r,children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"text-neutral-400 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak reguł"}),Vm.jsx("p",{className:"text-neutral-500",children:"Dodaj reguły aby automatycznie analizować produkty"})]})})}):Vm.jsxs("div",{className:r,children:[Vm.jsx(fX,{className:"mb-6",children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Typ reguły"}),Vm.jsxs("select",{value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[Vm.jsx("option",{value:"all",children:"Wszystkie typy"}),Vm.jsx("option",{value:"budget",children:"💰 Budżetowe"}),Vm.jsx("option",{value:"category",children:"🏷️ Kategorii"}),Vm.jsx("option",{value:"quality",children:"⭐ Jakościowe"})]})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Akcja"}),Vm.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[Vm.jsx("option",{value:"all",children:"Wszystkie akcje"}),Vm.jsx("option",{value:"block",children:"❌ Blokada"}),Vm.jsx("option",{value:"warn",children:"⚠️ Ostrzeżenie"}),Vm.jsx("option",{value:"prefer",children:"✅ Preferencja"})]})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Status"}),Vm.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[Vm.jsx("option",{value:"all",children:"Wszystkie statusy"}),Vm.jsx("option",{value:"active",children:"Aktywne"}),Vm.jsx("option",{value:"inactive",children:"Nieaktywne"})]})]})]})})}),Vm.jsx("div",{className:"space-y-4",children:p.map(e=>Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex items-start justify-between",children:[Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[Vm.jsx("span",{className:"text-2xl",children:f(e.type)}),Vm.jsxs("div",{children:[Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:e.name}),e.description&&Vm.jsx("p",{className:"text-sm text-neutral-600",children:e.description})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[Vm.jsx(yX,{status:"active"===e.status?"success":"info",children:"active"===e.status?"Aktywna":"Nieaktywna"}),Vm.jsx(yX,{status:m(e.action),children:g(e.action)}),Vm.jsxs("span",{className:"text-sm text-neutral-500",children:["Waga: ",e.weight,"/10"]})]}),v(e),Vm.jsxs("div",{className:"text-xs text-neutral-400 mt-2",children:["Utworzona: ",new Date(e.createdAt).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),e.updatedAt!==e.createdAt&&Vm.jsxs("span",{className:"ml-2",children:["• Zaktualizowana: ",new Date(e.updatedAt).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[Vm.jsx(pX,{variant:"secondary",size:"sm",onClick:()=>s&&a(e.id,s),children:"active"===e.status?"Dezaktywuj":"Aktywuj"}),t&&Vm.jsx(pX,{variant:"secondary",size:"sm",onClick:()=>t(e),children:"Edytuj"}),Vm.jsx(pX,{variant:"secondary",size:"sm",onClick:()=>s&&i(e.id,s),children:"Duplikuj"}),n&&Vm.jsx(pX,{variant:"danger",size:"sm",onClick:()=>n(e),children:"Usuń"})]})]})})},e.id))}),0===p.length&&Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak reguł spełniających kryteria"}),Vm.jsx("p",{className:"text-neutral-500",children:"Zmień filtry aby zobaczyć więcej reguł"})]})})})]})},jne=({templates:e,onSelectTemplate:t,className:n=""})=>{const{supabaseUserId:r}=Uee(),{createRuleFromTemplate:s}=wne(),[a,i]=Im.useState("all"),o=e.filter(e=>"all"===a||e.type===a),l=e=>{switch(e){case"budget":return"💰";case"category":return"🏷️";case"quality":return"⭐";default:return"📋"}},c=e=>{switch(e){case"block":return"danger";case"warn":return"warning";case"prefer":return"success";default:return"info"}},d=e=>{switch(e){case"block":return"Blokada";case"warn":return"Ostrzeżenie";case"prefer":return"Preferencja";default:return"Nieznana"}},u=e=>{const t=e.conditions;switch(e.type){case"budget":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.maxPrice&&Vm.jsxs("div",{children:["• Maksymalna cena: ",t.maxPrice," PLN"]}),t.maxPricePerUnit&&Vm.jsxs("div",{children:["• Maksymalna cena za sztukę: ",t.maxPricePerUnit," PLN"]}),t.maxTotalBudget&&Vm.jsxs("div",{children:["• Maksymalny budżet: ",t.maxTotalBudget," PLN"]})]});case"category":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.blacklist&&t.blacklist.length>0&&Vm.jsxs("div",{children:["• Zakazane kategorie: ",t.blacklist.join(", ")]}),t.whitelist&&t.whitelist.length>0&&Vm.jsxs("div",{children:["• Preferowane kategorie: ",t.whitelist.join(", ")]}),t.warningList&&t.warningList.length>0&&Vm.jsxs("div",{children:["• Ostrzegające kategorie: ",t.warningList.join(", ")]})]});case"quality":return Vm.jsxs("div",{className:"text-sm text-neutral-600",children:[t.minRating&&Vm.jsxs("div",{children:["• Minimalna ocena: ",t.minRating]}),t.minReviews&&Vm.jsxs("div",{children:["• Minimalna liczba opinii: ",t.minReviews]}),t.requiredCertifications&&t.requiredCertifications.length>0&&Vm.jsxs("div",{children:["• Wymagane certyfikaty: ",t.requiredCertifications.join(", ")]})]});default:return null}};return 0===e.length?Vm.jsx(fX,{className:n,children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"text-neutral-400 mb-4",children:Vm.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak szablonów"}),Vm.jsx("p",{className:"text-neutral-500",children:"Nie ma dostępnych szablonów reguł"})]})})}):Vm.jsxs("div",{className:n,children:[Vm.jsx("div",{className:"mb-6",children:Vm.jsxs("div",{className:"flex flex-wrap gap-2",children:[Vm.jsx(pX,{variant:"all"===a?"primary":"secondary",size:"sm",onClick:()=>i("all"),children:"Wszystkie"}),Vm.jsx(pX,{variant:"budget"===a?"primary":"secondary",size:"sm",onClick:()=>i("budget"),children:"💰 Budżetowe"}),Vm.jsx(pX,{variant:"category"===a?"primary":"secondary",size:"sm",onClick:()=>i("category"),children:"🏷️ Kategorii"}),Vm.jsx(pX,{variant:"quality"===a?"primary":"secondary",size:"sm",onClick:()=>i("quality"),children:"⭐ Jakościowe"})]})}),Vm.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>Vm.jsxs(fX,{className:"hover:shadow-lg transition-shadow",children:[Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("span",{className:"text-2xl",children:l(e.type)}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:e.name}),Vm.jsx("p",{className:"text-sm text-neutral-600",children:e.description})]})]})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(yX,{status:c(e.action),children:d(e.action)}),Vm.jsxs("span",{className:"text-sm text-neutral-500",children:["Waga: ",e.weight,"/10"]})]}),Vm.jsxs("div",{children:[Vm.jsx("div",{className:"text-sm font-medium text-neutral-700 mb-1",children:"Warunki:"}),u(e)]}),e.tags&&e.tags.length>0&&Vm.jsxs("div",{children:[Vm.jsx("div",{className:"text-sm font-medium text-neutral-700 mb-1",children:"Tagi:"}),Vm.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((e,t)=>Vm.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-600 text-xs rounded",children:e},t))})]}),Vm.jsx(pX,{variant:"primary",size:"sm",className:"w-full",onClick:()=>(e=>{r&&(s(e.id,r),null==t||t(e))})(e),children:"Użyj szablonu"})]})})]},e.id))}),0===o.length&&Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx("h3",{className:"text-lg font-medium text-neutral-600 mb-2",children:"Brak szablonów dla wybranego typu"}),Vm.jsx("p",{className:"text-neutral-500",children:"Wybierz inny typ aby zobaczyć więcej szablonów"})]})})})]})},_ne=()=>{const{supabaseUserId:e,loading:t}=Uee(),{rules:n,templates:r,stats:s,addRule:a,updateRule:i,deleteRule:o,clearAllRules:l,loadRules:c,loadTemplates:d}=wne(),[u,h]=Im.useState(!1),[p,f]=Im.useState(null),[m,g]=Im.useState(!1);Im.useEffect(()=>{e&&!t&&(console.log("Rules: Ładowanie reguł dla użytkownika:",e),c(e),d())},[e,t,c,d]);return Vm.jsxs("div",{children:[Vm.jsxs("div",{className:"mb-8",children:[Vm.jsx("h1",{className:"text-3xl font-bold text-neutral-800 mb-2",children:"Reguły"}),Vm.jsx("p",{className:"text-neutral-600",children:"Zarządzaj regułami analizy produktów"})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-primary-500 mb-2",children:s.totalRules}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Wszystkie reguły"})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-success-500 mb-2",children:s.activeRules}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Aktywne"})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-warning-500 mb-2",children:s.inactiveRules}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Nieaktywne"})]})})}),Vm.jsx(fX,{children:Vm.jsx(gX,{children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-neutral-500 mb-2",children:s.averageWeight}),Vm.jsx("div",{className:"text-sm text-neutral-600",children:"Średnia waga"})]})})})]}),u&&Vm.jsx("div",{className:"mb-8",children:Vm.jsx(kne,{rule:p||void 0,onSave:t=>{e&&(p?i(p.id,t,e):a(t,e),h(!1),f(null))},onCancel:()=>{h(!1),f(null)}})}),m&&Vm.jsx("div",{className:"mb-8",children:Vm.jsxs(fX,{children:[Vm.jsx(mX,{children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Szablony reguł"}),Vm.jsx(pX,{variant:"secondary",onClick:()=>g(!1),children:"Zamknij"})]})}),Vm.jsx(gX,{children:Vm.jsx(jne,{templates:r,onSelectTemplate:()=>{g(!1),h(!0)}})})]})}),!u&&!m&&Vm.jsxs(fX,{className:"mb-8",children:[Vm.jsx(mX,{children:Vm.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Zarządzanie regułami"})}),Vm.jsx(gX,{children:Vm.jsxs("div",{className:"flex flex-wrap gap-4",children:[Vm.jsx(pX,{variant:"primary",onClick:()=>h(!0),children:"➕ Dodaj nową regułę"}),Vm.jsx(pX,{variant:"secondary",onClick:()=>g(!0),children:"📋 Użyj szablonu"}),n.length>0&&Vm.jsx(pX,{variant:"danger",onClick:()=>{window.confirm("Czy na pewno chcesz usunąć wszystkie reguły?")&&l()},children:"🗑️ Usuń wszystkie"})]})})]}),!u&&!m&&Vm.jsx(Sne,{rules:n,onEdit:e=>{f(e),h(!0)},onDelete:t=>{e&&window.confirm(`Czy na pewno chcesz usunąć regułę "${t.name}"?`)&&o(t.id,e)}})]})},Ane=({onClose:e})=>{const[t,n]=Im.useState({cloud:"checking",browser:"checking",docker:"checking",active:"none",lastChecked:(new Date).toISOString()}),[r,s]=Im.useState(!1),[a,i]=Im.useState("none"),[o,l]=Im.useState(!1);Im.useEffect(()=>{c(),d()},[]);const c=async()=>{const e=Zee.getStatus();n(e),i(e.active)},d=()=>{},u=e=>{i(e),Zee.setActiveService(e),c()},h=e=>{switch(e){case"online":return Vm.jsx(dM,{className:"h-5 w-5 text-green-600"});case"offline":return Vm.jsx(tM,{className:"h-5 w-5 text-red-600"});case"checking":return Vm.jsx($M,{className:"h-5 w-5 text-yellow-600 animate-spin"});default:return Vm.jsx(tM,{className:"h-5 w-5 text-gray-600"})}},p=e=>{switch(e){case"online":return"text-green-600";case"offline":return"text-red-600";case"checking":return"text-yellow-600";default:return"text-gray-600"}},f=e=>{switch(e){case"cloud":return Vm.jsx(mM,{className:"h-6 w-6 text-blue-600"});case"browser":return Vm.jsx(TM,{className:"h-6 w-6 text-green-600"});case"docker":return Vm.jsx(gM,{className:"h-6 w-6 text-purple-600"});default:return Vm.jsx(oI,{className:"h-6 w-6 text-gray-600"})}};return Vm.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Vm.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[Vm.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(HM,{className:"h-8 w-8 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Hybrid AI Configuration"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Wybierz najlepszy serwis AI dla Twoich potrzeb"})]})]}),Vm.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:Vm.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Vm.jsxs("div",{className:"p-6 space-y-6",children:[Vm.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx($M,{className:"h-5 w-5 mr-2"}),"Status Serwisów AI"]}),Vm.jsxs("button",{onClick:async()=>{s(!0);try{const e=await Zee.checkAllServices();n(e),i(e.active)}finally{s(!1)}},disabled:r,className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors disabled:opacity-50",children:[Vm.jsx($M,{className:"h-4 w-4 "+(r?"animate-spin":"")}),Vm.jsx("span",{children:"Sprawdź wszystkie"})]})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[h(t.cloud),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Cloud AI"}),Vm.jsx("p",{className:`font-medium ${p(t.cloud)}`,children:t.cloud.toUpperCase()})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[h(t.browser),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Browser AI"}),Vm.jsx("p",{className:`font-medium ${p(t.browser)}`,children:t.browser.toUpperCase()})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[h(t.docker),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Docker AI"}),Vm.jsx("p",{className:`font-medium ${p(t.docker)}`,children:t.docker.toUpperCase()})]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Wybierz Serwis AI"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Vm.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${"cloud"===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${"offline"===t.cloud?"opacity-50 cursor-not-allowed":""}`,onClick:()=>"online"===t.cloud&&u("cloud"),children:Vm.jsxs("div",{className:"flex items-start space-x-3",children:[f("cloud"),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h4",{className:"font-semibold text-gray-900",children:"Cloud AI Service"}),Vm.jsx("div",{className:"flex items-center space-x-2",children:"cloud"===a&&Vm.jsx(dM,{className:"h-5 w-5 text-blue-600"})})]}),Vm.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Najszybszy i najdokładniejszy. Wymaga internetu."}),Vm.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Vm.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Zalecany"}),Vm.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Szybki"}),Vm.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"Dokładny"})]})]})]})}),Vm.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${"browser"===a?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"} ${"offline"===t.browser?"opacity-50 cursor-not-allowed":""}`,onClick:()=>"online"===t.browser&&u("browser"),children:Vm.jsxs("div",{className:"flex items-start space-x-3",children:[f("browser"),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h4",{className:"font-semibold text-gray-900",children:"Browser AI (Offline)"}),Vm.jsx("div",{className:"flex items-center space-x-2",children:"browser"===a&&Vm.jsx(dM,{className:"h-5 w-5 text-green-600"})})]}),Vm.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Działa offline. Prywatność danych. Wolniejszy."}),Vm.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Vm.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Offline"}),Vm.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Prywatny"}),Vm.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Wolniejszy"})]})]})]})}),Vm.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${"docker"===a?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${"offline"===t.docker?"opacity-50 cursor-not-allowed":""}`,onClick:()=>"online"===t.docker&&u("docker"),children:Vm.jsxs("div",{className:"flex items-start space-x-3",children:[f("docker"),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h4",{className:"font-semibold text-gray-900",children:"Docker AI Service"}),Vm.jsx("div",{className:"flex items-center space-x-2",children:"docker"===a&&Vm.jsx(dM,{className:"h-5 w-5 text-purple-600"})})]}),Vm.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Lokalny serwer AI. Wymaga instalacji Docker."}),Vm.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Vm.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded",children:"Lokalny"}),Vm.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"Zaawansowany"}),Vm.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Wymaga Docker"})]})]})]})}),Vm.jsx("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-all "+("none"===a?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"),onClick:()=>u("none"),children:Vm.jsxs("div",{className:"flex items-start space-x-3",children:[f("none"),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("h4",{className:"font-semibold text-gray-900",children:"Wyłącz AI"}),Vm.jsx("div",{className:"flex items-center space-x-2",children:"none"===a&&Vm.jsx(dM,{className:"h-5 w-5 text-red-600"})})]}),Vm.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Użyj tylko podstawowych funkcji bez AI."}),Vm.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Vm.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:"Podstawowy"}),Vm.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Ograniczony"})]})]})]})})]})]}),Vm.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Aktualny Status"}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[f(a),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"font-medium text-blue-900",children:(e=>{switch(e){case"cloud":return"Cloud AI Service";case"browser":return"Browser AI (Offline)";case"docker":return"Docker AI Service";default:return"No AI Service"}})(a)}),Vm.jsx("p",{className:"text-sm text-blue-700",children:(e=>{switch(e){case"cloud":return"Najszybszy i najdokładniejszy. Wymaga internetu.";case"browser":return"Działa offline. Prywatność danych. Wolniejszy.";case"docker":return"Lokalny serwer AI. Wymaga instalacji Docker.";default:return"Brak aktywnego serwisu AI"}})(a)})]}),h((e=>{switch(e){case"cloud":return t.cloud;case"browser":return t.browser;case"docker":return t.docker;default:return"offline"}})(a))]})]}),Vm.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[Vm.jsxs("button",{onClick:()=>l(!o),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Vm.jsx(HM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Konfiguracja zaawansowana"}),Vm.jsx("svg",{className:"h-4 w-4 transition-transform "+(o?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&Vm.jsx("div",{className:"mt-4 space-y-4",children:Vm.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Dostępne Opcje:"}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Cloud AI API Key"}),Vm.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",children:"Konfiguruj"})]}),Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Docker Service URL"}),Vm.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",children:"Edytuj"})]}),Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Browser AI Model"}),Vm.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",children:"Pobierz"})]})]})]})})]}),Vm.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-2 flex items-center",children:[Vm.jsx(RM,{className:"h-5 w-5 mr-2"}),"Potrzebujesz pomocy?"]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsxs("button",{className:"flex items-center space-x-2 text-green-800 hover:text-green-600",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{className:"text-sm",children:"Instrukcja Cloud AI"})]}),Vm.jsxs("button",{className:"flex items-center space-x-2 text-green-800 hover:text-green-600",children:[Vm.jsx(yM,{className:"h-4 w-4"}),Vm.jsx("span",{className:"text-sm",children:"Pobierz Browser AI"})]})]}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsxs("button",{className:"flex items-center space-x-2 text-green-800 hover:text-green-600",children:[Vm.jsx(gM,{className:"h-4 w-4"}),Vm.jsx("span",{className:"text-sm",children:"Setup Docker AI"})]}),Vm.jsxs("button",{className:"flex items-center space-x-2 text-green-800 hover:text-green-600",children:[Vm.jsx(RM,{className:"h-4 w-4"}),Vm.jsx("span",{className:"text-sm",children:"FAQ i wsparcie"})]})]})]})]})]})]})})},Ene=()=>{const[e,t]=Im.useState(!1),[n,r]=Im.useState({active:"none",cloud:"checking",browser:"checking",docker:"checking"}),[s,a]=Im.useState([]);Im.useEffect(()=>{(async()=>{const e=Zee.getStatus();r(e)})(),i()},[]);const i=()=>{const e=localStorage.getItem("analysis-rules");if(e)try{const t=JSON.parse(e);a(t)}catch(t){console.error("Failed to load rules:",t)}};return Vm.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs(fT,{to:"/",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Vm.jsx(nM,{className:"h-5 w-5"}),Vm.jsx("span",{children:"Powrót"})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(HM,{className:"h-6 w-6 text-blue-600"}),Vm.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ustawienia aplikacji"})]})]}),Vm.jsxs("div",{className:"space-y-6",children:[Vm.jsxs("div",{className:"card",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(oI,{className:"h-6 w-6 text-purple-600"}),Vm.jsxs("div",{children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hybrid AI Service"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Wybierz najlepszy serwis AI: Cloud, Browser lub Docker"})]})]}),Vm.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors",children:[Vm.jsx(HM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Konfiguruj"})]})]}),Vm.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Aktywny serwis"}),Vm.jsxs("p",{className:"font-medium text-gray-900",children:["cloud"===n.active&&"☁️ Cloud AI","browser"===n.active&&"🌐 Browser AI","docker"===n.active&&"🐳 Docker AI","none"===n.active&&"❌ Wyłączony"]})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Cloud AI"}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-2 h-2 rounded-full "+("online"===n.cloud?"bg-green-500":"offline"===n.cloud?"bg-red-500":"bg-yellow-500")}),Vm.jsx("span",{className:"text-sm text-gray-600",children:n.cloud})]})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Browser AI"}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-2 h-2 rounded-full "+("online"===n.browser?"bg-green-500":"offline"===n.browser?"bg-red-500":"bg-yellow-500")}),Vm.jsx("span",{className:"text-sm text-gray-600",children:n.browser})]})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm text-gray-600",children:"Docker AI"}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-2 h-2 rounded-full "+("online"===n.docker?"bg-green-500":"offline"===n.docker?"bg-red-500":"bg-yellow-500")}),Vm.jsx("span",{className:"text-sm text-gray-600",children:n.docker})]})]})]})})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(NM,{className:"h-6 w-6 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pomoc i dokumentacja"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Instrukcje i przewodniki dla użytkowników"})]})]}),Vm.jsxs(fT,{to:"/help",className:"flex items-center space-x-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[Vm.jsx(NM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Otwórz pomoc"})]})]}),Vm.jsx("div",{className:"space-y-4",children:Vm.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[Vm.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Dostępne sekcje pomocy:"}),Vm.jsxs("ul",{className:"space-y-2 text-blue-800",children:[Vm.jsxs("li",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),Vm.jsx("span",{children:"Instrukcja konfiguracji AI Service"})]}),Vm.jsxs("li",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),Vm.jsx("span",{children:"Rozwiązywanie problemów z połączeniem"})]}),Vm.jsxs("li",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),Vm.jsx("span",{children:"Przewodnik użytkownika"})]}),Vm.jsxs("li",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full"}),Vm.jsx("span",{children:"FAQ - Często zadawane pytania"})]})]})]})})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(qM,{className:"h-6 w-6 text-red-600"}),Vm.jsxs("div",{children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reguły analizy"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Zarządzanie regułami blokowania i ostrzeżeń"})]})]}),Vm.jsxs("div",{className:"text-sm text-gray-500",children:["Łącznie: ",s.length," reguł"]})]}),0===s.length?Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx(qM,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),Vm.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Brak zdefiniowanych reguł"}),Vm.jsx("p",{className:"text-sm text-gray-500",children:"Dodaj reguły w szczegółach analizy, aby zarządzać produktami"})]}):Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[Vm.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Vm.jsx(qM,{className:"h-5 w-5 text-red-600"}),Vm.jsx("h4",{className:"font-medium text-red-900",children:"Reguły blokowania"})]}),Vm.jsxs("p",{className:"text-sm text-red-700",children:[s.filter(e=>"block"===e.action).length," reguł"]})]}),Vm.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Vm.jsx(qM,{className:"h-5 w-5 text-yellow-600"}),Vm.jsx("h4",{className:"font-medium text-yellow-900",children:"Reguły ostrzeżeń"})]}),Vm.jsxs("p",{className:"text-sm text-yellow-700",children:[s.filter(e=>"warning"===e.action).length," reguł"]})]})]}),Vm.jsx("div",{className:"space-y-3",children:s.map(e=>Vm.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:["category"===e.type?Vm.jsx(JM,{className:"h-5 w-5 text-blue-600"}):Vm.jsx(FM,{className:"h-5 w-5 text-green-600"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),Vm.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[Vm.jsx("span",{children:"category"===e.type?"Kategoria":"Produkt"}),Vm.jsx("span",{children:"•"}),Vm.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("block"===e.action?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"block"===e.action?"Blokowanie":"Ostrzeżenie"})]}),e.description&&Vm.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.description}),Vm.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Dodano: ",new Date(e.createdAt).toLocaleString("pl-PL")]})]})]}),Vm.jsx("button",{onClick:()=>(e=>{if(window.confirm("Czy na pewno chcesz usunąć tę regułę?")){const t=s.filter(t=>t.id!==e);localStorage.setItem("analysis-rules",JSON.stringify(t)),a(t)}})(e.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Usuń regułę",children:Vm.jsx(QM,{className:"h-5 w-5"})})]})},e.id))})]})]})]}),e&&Vm.jsx(Ane,{onClose:()=>t(!1)})]})},Tne=({products:e,onFilteredProducts:t,onCategorySelect:n,selectedCategory:r})=>{const[s,a]=Im.useState(""),[i,o]=Im.useState("all"),[l,c]=Im.useState("name"),[d,u]=Im.useState("asc"),[h,p]=Im.useState(e),f=Array.from(new Set(e.map(e=>e.kategoria).filter(Boolean)));return Im.useEffect(()=>{p(e)},[e]),Im.useEffect(()=>{let n=[...e];r&&(n=n.filter(e=>e.kategoria===r)),s&&(n=n.filter(e=>e.nazwa.toLowerCase().includes(s.toLowerCase())||e.kategoria.toLowerCase().includes(s.toLowerCase())||e.ean.toLowerCase().includes(s.toLowerCase()))),"all"!==i&&(n=n.filter(e=>e.status===i)),n.sort((e,t)=>{let n,r;switch(l){case"name":default:n=e.nazwa.toLowerCase(),r=t.nazwa.toLowerCase();break;case"category":n=e.kategoria.toLowerCase(),r=t.kategoria.toLowerCase();break;case"price":n=e.cenaRegularnaBrutto,r=t.cenaRegularnaBrutto;break;case"quantity":n=e.pcs,r=t.pcs}return"asc"===d?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}),p(n),t(n)},[e,r,s,i,l,d,t]),Vm.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Vm.jsx(_M,{className:"h-5 w-5 text-blue-600"}),Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtry produktów"}),Vm.jsxs("span",{className:"text-sm text-gray-500",children:["(",e.length," produktów)"]})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[Vm.jsxs("div",{className:"relative",children:[Vm.jsx(VM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),Vm.jsx("input",{type:"text",placeholder:"Szukaj produktów...",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Vm.jsx("div",{children:Vm.jsxs("select",{value:r||"",onChange:e=>n(e.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Vm.jsx("option",{value:"",children:"Wszystkie kategorie"}),f.map(e=>Vm.jsx("option",{value:e,children:e},e))]})}),Vm.jsx("div",{children:Vm.jsxs("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Vm.jsx("option",{value:"all",children:"Wszystkie statusy"}),Vm.jsx("option",{value:"allowed",children:"Dozwolone"}),Vm.jsx("option",{value:"warning",children:"Ostrzeżenia"})]})}),Vm.jsxs("div",{className:"flex space-x-2",children:[Vm.jsxs("select",{value:l,onChange:e=>c(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Vm.jsx("option",{value:"name",children:"Nazwa"}),Vm.jsx("option",{value:"category",children:"Kategoria"}),Vm.jsx("option",{value:"price",children:"Cena"}),Vm.jsx("option",{value:"quantity",children:"Ilość"})]}),Vm.jsx("button",{onClick:()=>u("asc"===d?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:"asc"===d?"↑":"↓"})]})]}),f.length>0&&Vm.jsxs("div",{className:"mb-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[Vm.jsx(JM,{className:"h-4 w-4 text-gray-500"}),Vm.jsx("span",{className:"text-sm text-gray-600",children:"Kategorie:"})]}),Vm.jsxs("div",{className:"flex flex-wrap gap-2",children:[Vm.jsx("button",{onClick:()=>n(null),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors "+(r?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-100 text-blue-800 border border-blue-300"),children:"Wszystkie"}),f.map(e=>Vm.jsx("button",{onClick:()=>n(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors "+(r===e?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))]})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.filter(e=>"allowed"===e.status).length}),Vm.jsx("div",{className:"text-sm text-gray-600",children:"Dozwolone"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:h.filter(e=>"warning"===e.status).length}),Vm.jsx("div",{className:"text-sm text-gray-600",children:"Ostrzeżenia"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.length}),Vm.jsx("div",{className:"text-sm text-gray-600",children:"Wszystkie"})]})]})]})},Nne=({product:e,onAddToRules:t,onAddCategoryToRules:n,onRemoveRule:r,existingRules:s,showStatusInButton:a=!1})=>{const[i,o]=Im.useState(!1),l=e.status||"allowed",c=(a,i)=>{const l=s.find(t=>t.type===a&&t.name.toLowerCase()===("product"===a?e.nazwa.toLowerCase():e.kategoria.toLowerCase())&&t.action===i);l?r(l.id):"product"===a?t(e,i):n(e.kategoria,i),o(!1)},d=(t,n)=>s.find(r=>r.type===t&&r.name.toLowerCase()===("product"===t?e.nazwa.toLowerCase():e.kategoria.toLowerCase())&&r.action===n)?"Usuń ostrzeżenie":"Ostrzeż";return Vm.jsxs("div",{className:"relative inline-block text-left",children:[Vm.jsx("div",{children:Vm.jsx("button",{type:"button",className:a?"warning"===l?"inline-flex justify-center w-full rounded-md border border-yellow-400 shadow-sm px-4 py-2 bg-yellow-50 text-sm font-medium text-yellow-700 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-100 focus:ring-yellow-500":"inline-flex justify-center w-full rounded-md border border-green-400 shadow-sm px-4 py-2 bg-green-50 text-sm font-medium text-green-700 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-100 focus:ring-green-500":"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>o(!i),children:a?Vm.jsxs(Vm.Fragment,{children:["warning"===l?Vm.jsx(tM,{className:"h-4 w-4 mr-2"}):Vm.jsx(dM,{className:"h-4 w-4 mr-2"}),Vm.jsx("span",{className:"truncate max-w-xs",children:"warning"===l?e.appliedRule||"Ostrzeżenie":"Dozwolony"})]}):Vm.jsxs(Vm.Fragment,{children:[Vm.jsx(qM,{className:"h-5 w-5 mr-2"}),"Reguły"]})})}),i&&Vm.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:Vm.jsxs("div",{className:"py-1",role:"none",children:[Vm.jsx("span",{className:"block px-4 py-2 text-xs text-gray-500",children:"Zarządzaj regułami analizy:"}),Vm.jsxs("button",{onClick:()=>c("product","warning"),className:"flex items-center w-full text-left px-4 py-2 text-sm text-yellow-700 hover:bg-yellow-50 hover:text-yellow-900",role:"menuitem",children:[Vm.jsx(FM,{className:"h-4 w-4 mr-2"})," ",d("product","warning")," ten produkt"]}),Vm.jsx("div",{className:"border-t border-gray-100 my-1"}),Vm.jsxs("button",{onClick:()=>c("category","warning"),className:"flex items-center w-full text-left px-4 py-2 text-sm text-yellow-700 hover:bg-yellow-50 hover:text-yellow-900",role:"menuitem",children:[Vm.jsx(JM,{className:"h-4 w-4 mr-2"})," ",d("category","warning"),' kategorię "',e.kategoria,'"']})]})})]})},Cne=({onClose:e,onAddCategoryRule:t,onAddProductRule:n,onRemoveRule:r})=>{const[s,a]=Im.useState([]),[i,o]=Im.useState("categories"),[l,c]=Im.useState(!1),[d,u]=Im.useState("category"),[h,p]=Im.useState(""),[f,m]=Im.useState("warning"),[g,v]=Im.useState("");Im.useEffect(()=>{y()},[]);const y=()=>{const e=localStorage.getItem("analysis-rules");if(e)try{const t=JSON.parse(e).map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));a(t)}catch(t){console.error("Failed to load rules:",t)}},x=e=>"warning"===e?Vm.jsx(tM,{className:"h-4 w-4 text-yellow-500"}):null,b=e=>"warning"===e?"Ostrzeżenie":"Nieznane",w=s.filter(e=>"category"===e.type),k=s.filter(e=>"product"===e.type);return Vm.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Vm.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[Vm.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(qM,{className:"h-8 w-8 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Zarządzanie regułami analizy"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Konfiguracja blokowanych kategorii i produktów"})]})]}),Vm.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:Vm.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Vm.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Vm.jsxs("div",{className:"p-6 space-y-6",children:[Vm.jsx("div",{className:"border-b border-gray-200",children:Vm.jsxs("nav",{className:"-mb-px flex space-x-8",children:[Vm.jsx("button",{onClick:()=>o("categories"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("categories"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(JM,{className:"h-4 w-4"}),Vm.jsxs("span",{children:["Kategorie (",w.length,")"]})]})}),Vm.jsx("button",{onClick:()=>o("products"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("products"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(FM,{className:"h-4 w-4"}),Vm.jsxs("span",{children:["Produkty (",k.length,")"]})]})})]})}),Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"categories"===i?"Reguły kategorii":"Reguły produktów"}),Vm.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[Vm.jsx(UM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Dodaj regułę"})]})]}),Vm.jsxs("div",{className:"space-y-3",children:[("categories"===i?w:k).map(e=>{return Vm.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:["categories"===i?Vm.jsx(JM,{className:"h-5 w-5 text-blue-600"}):Vm.jsx(FM,{className:"h-5 w-5 text-green-600"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),e.description&&Vm.jsx("p",{className:"text-sm text-gray-600",children:e.description}),Vm.jsxs("p",{className:"text-xs text-gray-500",children:["Utworzona: ",e.createdAt.toLocaleString("pl-PL")]})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium border "+(t=e.action,"warning"===t?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[x(e.action),Vm.jsx("span",{children:b(e.action)})]})}),Vm.jsx("button",{onClick:()=>{return t=e.id,void(window.confirm("Czy na pewno chcesz usunąć tę regułę?")&&r&&r(t));var t},className:"text-red-600 hover:text-red-800 transition-colors",children:Vm.jsx(QM,{className:"h-4 w-4"})})]})]})},e.id);var t}),0===("categories"===i?w:k).length&&Vm.jsx("div",{className:"text-center py-8",children:Vm.jsxs("div",{className:"flex flex-col items-center space-y-3",children:["categories"===i?Vm.jsx(JM,{className:"h-12 w-12 text-gray-400"}):Vm.jsx(FM,{className:"h-12 w-12 text-gray-400"}),Vm.jsxs("div",{children:[Vm.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Brak reguł ","categories"===i?"kategorii":"produktów"]}),Vm.jsx("p",{className:"text-gray-500",children:"Dodaj pierwszą regułę, aby rozpocząć konfigurację analizy"})]}),Vm.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[Vm.jsx(UM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Dodaj pierwszą regułę"})]})]})})]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-6 border-t border-gray-200",children:[Vm.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),Vm.jsx("div",{className:"text-sm text-blue-700",children:"Wszystkie reguły"})]}),Vm.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-red-600",children:"0"}),Vm.jsx("div",{className:"text-sm text-red-700",children:"Blokujące"})]}),Vm.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.filter(e=>"warning"===e.action).length}),Vm.jsx("div",{className:"text-sm text-yellow-700",children:"Ostrzeżenia"})]}),Vm.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[Vm.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.length}),Vm.jsx("div",{className:"text-sm text-green-700",children:"Kategorie"})]})]})]}),l&&Vm.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:Vm.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[Vm.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dodaj nową regułę"}),Vm.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:Vm.jsx(iI,{className:"h-5 w-5"})})]}),Vm.jsxs("div",{className:"p-6 space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Typ reguły"}),Vm.jsxs("select",{value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[Vm.jsx("option",{value:"category",children:"Kategoria produktu"}),Vm.jsx("option",{value:"product",children:"Konkretny produkt"})]})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"category"===d?"Nazwa kategorii":"Nazwa produktu"}),Vm.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"category"===d?"np. Elektronika":"np. iPhone 13",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Działanie"}),Vm.jsx("select",{value:f,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Vm.jsx("option",{value:"warning",children:"Ostrzeżenie"})})]}),Vm.jsxs("div",{children:[Vm.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis (opcjonalny)"}),Vm.jsx("textarea",{value:g,onChange:e=>v(e.target.value),placeholder:"Dodatkowe informacje o regule...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),Vm.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[Vm.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Anuluj"}),Vm.jsx("button",{onClick:()=>{h.trim()&&("category"===d&&t?t(h.trim(),f):"product"===d&&n&&n({nazwa:h.trim()},f),p(""),v(""),c(!1))},disabled:!h.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Dodaj regułę"})]})]})]})})]})})},Pne=()=>{const{id:e}=qE(),t=$E(),{supabaseUserId:n}=Uee(),{analyses:r,loadAnalyses:s}=Fee(),{products:a,loading:i}=nte(e||"",n||""),[o,l]=Im.useState(!1),[c,d]=Im.useState([]),[u,h]=Im.useState([]),[p,f]=Im.useState(null),[m,g]=Im.useState(null),[v,y]=Im.useState("asc"),[x,b]=Im.useState([]),[w,k]=Im.useState(null),[S,j]=Im.useState(!1),_=r.find(t=>t.id===e);Im.useEffect(()=>{n&&0===r.length&&s(n)},[n,r.length,s]);const A=Im.useCallback((e,t,n)=>t?[...e].sort((e,r)=>{let s,a;switch(t){case"name":s=e.nazwa.toLowerCase(),a=r.nazwa.toLowerCase();break;case"category":s=(e.kategoria||"").toLowerCase(),a=(r.kategoria||"").toLowerCase();break;case"pcs":s=e.pcs||0,a=r.pcs||0;break;case"cenaBrutto":s=e.cenaRegularnaBrutto||0,a=r.cenaRegularnaBrutto||0;break;case"cenaNetto":s=e.cenaSprzedazyNetto||0,a=r.cenaSprzedazyNetto||0;break;case"marza":s=e.marza||0,a=r.marza||0;break;case"rentownosc":s=e.rentownosc||0,a=r.rentownosc||0;break;default:return 0}return s<a?"asc"===n?-1:1:s>a?"asc"===n?1:-1:0}):e,[]),E=e=>{m===e?y("asc"===v?"desc":"asc"):(g(e),y("asc"))},T=e=>m!==e?Vm.jsx("span",{className:"text-gray-400",children:"↕️"}):"asc"===v?Vm.jsx("span",{className:"text-blue-600",children:"↑"}):Vm.jsx("span",{className:"text-blue-600",children:"↓"}),N=Im.useCallback(()=>{if(0===a.length)return;console.log("🔍 Mapowanie produktów z bazy, przykładowy produkt:",a[0]);const e=a.map(e=>{a.indexOf(e)<3&&console.log("📦 Produkt z bazy:",{name:e.name,priceGross:e.priceGross,priceNet:e.priceNet,quantity:e.quantity,rawData:e.rawData});const t={nazwa:e.name,kategoria:e.category||"Brak kategorii",paleta:e.paletaId||"",foto:e.foto||"",ean:e.ean||"",kod1:e.code1||"",kod2:e.code2||"",packId:e.packId||"",pcs:e.quantity||1,cenaRegularnaBrutto:e.priceGross||0,waluta:e.currency||"PLN",cenaSprzedazyNetto:e.priceNet||0,walutaSprzedazy:e.currency||"PLN",link:e.link||"",fcSku:e.fcSku||"",wartoscSprzedazyNetto:e.priceNet||0,marza:(e.priceGross||0)-(e.priceNet||0),rentownosc:e.priceGross?(e.priceGross-(e.priceNet||0))/e.priceGross*100:0};a.indexOf(e)<3&&console.log("📊 Zmapowany produkt:",{nazwa:t.nazwa,pcs:t.pcs,cenaRegularnaBrutto:t.cenaRegularnaBrutto,cenaSprzedazyNetto:t.cenaSprzedazyNetto,marza:t.marza,rentownosc:t.rentownosc});let n,r="allowed";if(x.find(e=>"product"===e.type&&e.name.toLowerCase()===t.nazwa.toLowerCase()&&"warning"===e.action))r="warning",n="Produkt";else{x.find(e=>"category"===e.type&&e.name.toLowerCase()===t.kategoria.toLowerCase()&&"warning"===e.action)&&(r="warning",n="Kategoria")}const s={...t,status:r,appliedRule:n};return"allowed"!==r&&console.log(`Product ${t.nazwa} - Status: ${r}, Rule: ${n}`),s});d(e)},[a,x]);Im.useEffect(()=>{(()=>{const e=localStorage.getItem("analysis-rules");if(e)try{b(JSON.parse(e))}catch(t){console.error("Failed to load rules:",t)}})()},[]),Im.useEffect(()=>{N()},[N]),Im.useEffect(()=>{c.length>0&&!w&&!S&&C()},[c]);const C=async()=>{if(0!==c.length){j(!0);try{const e=await Zee.generatePaletteReport(c);k(e)}catch(e){console.error("Failed to generate AI report:",e);const t=await Zee.generatePaletteReport(c);k(t)}finally{j(!1)}}},P=(e,t)=>{const n={id:Date.now().toString(),type:"product",name:e.nazwa,action:t,description:`Dodano z analizy ${(null==_?void 0:_.name)||"nieznana"}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},r=[...x,n];localStorage.setItem("analysis-rules",JSON.stringify(r)),b(r)},R=(e,t)=>{const n={id:Date.now().toString(),type:"category",name:e,action:t,description:`Dodano z analizy ${(null==_?void 0:_.name)||"nieznana"}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},r=[...x,n];localStorage.setItem("analysis-rules",JSON.stringify(r)),b(r)},M=e=>{const t=x.filter(t=>t.id!==e);localStorage.setItem("analysis-rules",JSON.stringify(t)),b(t)};if(i||!_)return Vm.jsx("div",{className:"max-w-6xl mx-auto space-y-8",children:Vm.jsxs("div",{className:"text-center py-12",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Ładowanie szczegółów analizy..."})]})});const I=c.reduce((e,t)=>e+t.cenaRegularnaBrutto,0),O=c.reduce((e,t)=>e+t.cenaSprzedazyNetto,0),z=c.length>0?c.reduce((e,t)=>e+t.rentownosc,0)/c.length:0,D=c.filter(e=>"warning"===e.status).length;return Vm.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs(fT,{to:t.pathname.startsWith("/paleta")?"/paleta/analysis":"/analysis",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Vm.jsx(nM,{className:"h-5 w-5"}),Vm.jsx("span",{children:"Powrót do listy analiz"})]}),Vm.jsx("div",{className:"flex items-center justify-between",children:Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(SM,{className:"h-6 w-6 text-blue-600"}),Vm.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Szczegóły analizy - ",_.name]})]})})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Podsumowanie analizy"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[Vm.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Vm.jsx(eI,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),Vm.jsxs("h4",{className:"text-lg font-semibold text-green-800",children:[z.toFixed(1),"%"]}),Vm.jsx("p",{className:"text-green-600 text-sm",children:"Średnia rentowność"})]}),Vm.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[Vm.jsx(FM,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),Vm.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:c.length}),Vm.jsx("p",{className:"text-blue-600 text-sm",children:"Liczba produktów"})]}),Vm.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[Vm.jsx(FM,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),Vm.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:c.reduce((e,t)=>e+t.pcs,0)}),Vm.jsx("p",{className:"text-purple-600 text-sm",children:"Łączna liczba sztuk"})]}),Vm.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[Vm.jsx(tM,{className:"h-6 w-6 text-orange-600 mx-auto mb-2"}),Vm.jsx("h4",{className:"text-lg font-semibold text-orange-800",children:D}),Vm.jsx("p",{className:"text-orange-600 text-sm",children:"Wykryte problemy"})]}),Vm.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[Vm.jsx(eI,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),Vm.jsxs("h4",{className:"text-lg font-semibold text-green-800",children:[(I/1e3).toFixed(0),"k PLN"]}),Vm.jsx("p",{className:"text-green-600 text-sm",children:"Całkowity przychód"})]}),Vm.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[Vm.jsx(tM,{className:"h-6 w-6 text-red-600 mx-auto mb-2"}),Vm.jsxs("h4",{className:"text-lg font-semibold text-red-800",children:[(O/1e3).toFixed(0),"k PLN"]}),Vm.jsx("p",{className:"text-red-600 text-sm",children:"Całkowity koszt"})]})]})]}),(()=>{if(S)return Vm.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[Vm.jsx(IM,{className:"h-12 w-12 text-blue-600 animate-spin mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"AI analizuje zestawienie..."})]});if(!w)return Vm.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[Vm.jsx(iM,{className:"h-12 w-12 text-gray-400 mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Brak dostępnej analizy AI"}),Vm.jsx("button",{onClick:C,className:"mt-4 btn-primary",children:"Wygeneruj analizę"})]});return Vm.jsxs("div",{className:"space-y-6",children:[Vm.jsxs("div",{className:"card bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200",children:[Vm.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(iM,{className:"h-8 w-8 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Analiza AI"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Inteligentna ocena zestawienia produktów"})]})]}),Vm.jsxs("div",{className:`px-4 py-2 rounded-lg border-2 ${(e=>{switch(e){case"STRONG_BUY":return"bg-green-100 text-green-800 border-green-300";case"BUY":return"bg-green-50 text-green-700 border-green-200";case"HOLD":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"CAUTION":return"bg-orange-100 text-orange-800 border-orange-300";case"AVOID":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(w.buyDecision)}`,children:[Vm.jsx("div",{className:"text-xs font-medium mb-1",children:"Rekomendacja"}),Vm.jsx("div",{className:"text-lg font-bold",children:w.buyDecision.replace("_"," ")})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:Vm.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${w.confidenceScore}%`}})}),Vm.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Pewność: ",w.confidenceScore,"%"]})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Vm.jsx(SM,{className:"h-5 w-5 mr-2 text-blue-600"}),"Podsumowanie zestawienia"]}),Vm.jsx("div",{className:"prose max-w-none",children:Vm.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:w.summary})})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Vm.jsx(rM,{className:"h-5 w-5 mr-2 text-purple-600"}),"Analiza produktów"]}),Vm.jsx("div",{className:"prose max-w-none",children:Vm.jsx("div",{className:"text-gray-700 whitespace-pre-line space-y-2",children:w.productAnalysis.split("\n").map((e,t)=>e.startsWith("**")?Vm.jsx("div",{className:"font-semibold text-gray-900 mt-3",children:e.replace(/\*\*/g,"")},t):e.startsWith("•")||e.match(/^\d+\./)?Vm.jsx("div",{className:"ml-4 text-gray-700",children:e},t):""===e.trim()?Vm.jsx("div",{className:"h-2"},t):Vm.jsx("div",{className:"ml-6 text-gray-600 text-sm",children:e},t))})})]}),Vm.jsxs("div",{className:"card border-2 border-blue-200 bg-blue-50",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Vm.jsx(eI,{className:"h-5 w-5 mr-2 text-blue-600"}),"Rekomendacje zakupu"]}),Vm.jsx("div",{className:"prose max-w-none",children:Vm.jsx("div",{className:"text-gray-700 whitespace-pre-line space-y-2",children:w.recommendations.split("\n").map((e,t)=>e.startsWith("**Rekomendacja")?Vm.jsx("div",{className:"text-xl font-bold text-gray-900 mb-4",children:e.replace(/\*\*/g,"")},t):e.startsWith("**")?Vm.jsx("div",{className:"font-semibold text-gray-900 mt-3",children:e.replace(/\*\*/g,"")},t):e.startsWith("✅")||e.startsWith("⚠️")||e.startsWith("🔴")?Vm.jsx("div",{className:"text-base font-medium text-gray-800 mt-2",children:e},t):e.startsWith("•")?Vm.jsx("div",{className:"ml-4 text-gray-700",children:e},t):""===e.trim()?Vm.jsx("div",{className:"h-2"},t):Vm.jsx("div",{className:"text-gray-600",children:e},t))})})]}),Vm.jsx("div",{className:"flex justify-center",children:Vm.jsxs("button",{onClick:C,className:"btn-secondary flex items-center space-x-2",children:[Vm.jsx(iM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Wygeneruj ponownie analizę AI"})]})})]})})(),(()=>{let e=u.length>0?u:c;e=A(e,m,v);const t=e.filter(e=>!e.cenaRegularnaBrutto||0===e.cenaRegularnaBrutto).length;return Vm.jsxs("div",{className:"space-y-6",children:[t>0&&Vm.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:Vm.jsxs("div",{className:"flex items-start",children:[Vm.jsx(tM,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"text-sm font-semibold text-yellow-800",children:"Uwaga"}),Vm.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[t," produktów nie ma pełnych danych cenowych. Jeśli to nowa analiza z zaktualizowanym parserem, ceny powinny być widoczne. Jeśli to stara analiza, prześlij plik ponownie aby zaktualizować dane."]})]})]})}),c.length>0&&Vm.jsx(Tne,{products:c,onFilteredProducts:h,onCategorySelect:f,selectedCategory:p}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Wszystkie produkty z analizy (",e.length,")"]}),Vm.jsx("div",{className:"overflow-x-auto",children:Vm.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Vm.jsx("thead",{className:"bg-gray-50",children:Vm.jsxs("tr",{children:[Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zdjęcie"}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("name"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Nazwa produktu / Kategoria"}),T("name")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("pcs"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Liczba sztuk"}),T("pcs")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("cenaBrutto"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Cena brutto"}),T("cenaBrutto")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("cenaNetto"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Cena netto"}),T("cenaNetto")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("marza"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Marża"}),T("marza")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>E("rentownosc"),children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx("span",{children:"Rentowność"}),T("rentownosc")]})}),Vm.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status / Akcje"})]})}),Vm.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,t)=>{const n=e.status||"allowed";return Vm.jsxs("tr",{className:("warning"===n?"bg-yellow-50":"")+" hover:bg-gray-50 transition-colors",children:[Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Vm.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-100 rounded-lg overflow-hidden",children:Vm.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-dashed border-blue-200",children:Vm.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"📷"})})})}),Vm.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 max-w-xs",children:Vm.jsxs("div",{className:"space-y-1",children:[Vm.jsx("div",{className:"truncate font-medium",title:e.nazwa,children:Vm.jsx("span",{children:e.nazwa})}),Vm.jsx("div",{className:"text-xs text-gray-500",children:e.kategoria})]})}),Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vm.jsxs("div",{className:"flex items-center space-x-1",children:[Vm.jsx(FM,{className:"h-4 w-4 text-purple-600"}),Vm.jsx("span",{className:"font-bold text-purple-700",children:e.pcs})]})}),Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vm.jsxs("div",{className:"font-semibold text-green-700",children:[e.cenaRegularnaBrutto.toLocaleString("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2})," zł"]})}),Vm.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[e.cenaSprzedazyNetto.toLocaleString("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2})," zł"]}),Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Vm.jsxs("div",{className:"font-semibold text-blue-700",children:[e.marza.toLocaleString("pl-PL",{minimumFractionDigits:2,maximumFractionDigits:2})," zł"]})}),Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Vm.jsxs("div",{className:"font-bold "+(e.rentownosc>=80?"text-green-700":e.rentownosc>=60?"text-yellow-700":"text-red-700"),children:[e.rentownosc.toFixed(1),"%"]})}),Vm.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Vm.jsx("div",{onClick:e=>e.stopPropagation(),children:Vm.jsx(Nne,{product:e,onAddToRules:P,onAddCategoryToRules:R,onRemoveRule:M,existingRules:x,showStatusInButton:!0})})})]},t)})})]})})]})]})})(),Vm.jsx("div",{className:"card",children:Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-4",children:[Vm.jsx(SM,{className:"h-12 w-12 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:_.name}),_.description&&Vm.jsx("p",{className:"text-gray-600",children:_.description}),Vm.jsxs("p",{className:"text-gray-500 text-sm",children:["Utworzona: ",new Date(_.createdAt).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(dM,{className:"h-5 w-5 text-green-500"}),Vm.jsx("span",{className:"text-green-600 font-medium",children:"completed"===_.status?"Analiza zakończona":"W toku"})]})]})}),o&&Vm.jsx(Cne,{onClose:()=>l(!1),onAddCategoryRule:R,onAddProductRule:(e,t)=>P(e,t),onRemoveRule:M})]})},Rne=class e{constructor(){Lf(this,"cache",new Map)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async searchProductImages(e){const t=e.toLowerCase().trim(),n=this.cache.get(t);if(n)return n;try{const n=await this.fetchFromMultipleSources(e);return this.cache.set(t,n),n}catch(r){return console.error("Error fetching product images:",r),this.getFallbackImages(e)}}async fetchFromMultipleSources(e){const t=[];try{const n=await this.fetchFromUnsplash(e);t.push(...n)}catch(n){console.log("Unsplash API failed:",n)}try{const n=await this.fetchFromPixabay(e);t.push(...n)}catch(n){console.log("Pixabay API failed:",n)}try{const n=await this.fetchFromLoremPicsum(e);t.push(...n)}catch(n){console.log("Lorem Picsum failed:",n)}return 0===t.length?this.getFallbackImages(e):t.slice(0,5)}async fetchFromLoremPicsum(e){const t=[];return[{width:400,height:300},{width:500,height:400},{width:600,height:400}].forEach((n,r)=>{t.push({url:`https://picsum.photos/${n.width}/${n.height}?random=${Date.now()+r}`,title:e,source:"Lorem Picsum"})}),t}async fetchFromUnsplash(e){const t={}.REACT_APP_UNSPLASH_ACCESS_KEY||"demo";if("demo"===t)return[{url:`https://via.placeholder.com/400x300/4F46E5/FFFFFF?text=${encodeURIComponent(e.substring(0,15))}`,title:e,source:"Demo"},{url:"https://via.placeholder.com/400x300/059669/FFFFFF?text=Product+Image",title:"Product Image",source:"Demo"}];const n=await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(e)}&per_page=5&client_id=${t}`);if(!n.ok)throw new Error("Unsplash API error");return(await n.json()).results.map(t=>({url:t.urls.regular,title:t.alt_description||e,source:"Unsplash"}))}async fetchFromPixabay(e){const t={}.REACT_APP_PIXABAY_API_KEY||"demo";if("demo"===t)return[];const n=await fetch(`https://pixabay.com/api/?key=${t}&q=${encodeURIComponent(e)}&image_type=photo&per_page=5`);if(!n.ok)throw new Error("Pixabay API error");return(await n.json()).hits.map(t=>({url:t.webformatURL,title:t.tags||e,source:"Pixabay"}))}getFallbackImages(e){return[{url:`https://via.placeholder.com/400x300/4F46E5/FFFFFF?text=${encodeURIComponent(e.substring(0,15))}`,title:e,source:"Placeholder"},{url:"https://via.placeholder.com/400x300/059669/FFFFFF?text=Product+Image",title:"Product Image",source:"Placeholder"},{url:"https://via.placeholder.com/400x300/DC2626/FFFFFF?text=Sample+Photo",title:"Sample Photo",source:"Placeholder"}]}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}};Lf(Rne,"instance");const Mne=Rne.getInstance(),Ine=({foto:e,nazwa:t,className:n=""})=>{const[r,s]=Im.useState(!1),[a,i]=Im.useState(!1),[o,l]=Im.useState([]),[c,d]=Im.useState(!1),[u,h]=Im.useState(0);console.log("ProductImage render:",{foto:e,nazwa:t,className:n});const p=e&&e.includes("google.com/search"),f=e&&"FOTO"!==e&&e.startsWith("http")&&!p;console.log("isGoogleSearchLink:",p),console.log("isImageLink:",f),Im.useEffect(()=>{const e=e=>{if(r)switch(e.key){case"Escape":s(!1);break;case"ArrowLeft":o.length>1&&x();break;case"ArrowRight":o.length>1&&y()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,o.length]),Im.useEffect(()=>{t&&""!==t.trim()&&m(t)},[t]);const m=async e=>{try{const t=await Mne.searchProductImages(e);l(t),console.log(`Found ${t.length} images for product: ${e}`)}catch(t){console.error("Error fetching product images:",t),l([])}finally{d(!1)}},g=()=>{(f||o.length>0)&&s(!0)},v=()=>{i(!0)},y=()=>{h(e=>(e+1)%o.length)},x=()=>{h(e=>(e-1+o.length)%o.length)};return o.length>0?Vm.jsxs(Vm.Fragment,{children:[Vm.jsxs("div",{className:`relative cursor-pointer group ${n}`,onClick:g,children:[Vm.jsx("img",{src:o[0].url,alt:o[0].title,className:"w-full h-full object-cover rounded-lg",onError:v}),Vm.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:Vm.jsx(bM,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})}),Vm.jsx("div",{className:"absolute top-1 right-1 bg-blue-600 text-white text-xs px-1 py-0.5 rounded",children:o.length})]}),r&&Vm.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>s(!1),children:Vm.jsxs("div",{className:"relative max-w-6xl max-h-[90vh] w-full",onClick:e=>e.stopPropagation(),children:[Vm.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:Vm.jsx(iI,{className:"h-6 w-6"})}),Vm.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[Vm.jsxs("div",{className:"relative",children:[Vm.jsx("img",{src:o[u].url,alt:o[u].title,className:"w-full h-[70vh] object-contain bg-gray-100"}),o.length>1&&Vm.jsxs(Vm.Fragment,{children:[Vm.jsx("button",{onClick:x,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-70 transition-all",children:"←"}),Vm.jsx("button",{onClick:y,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-70 transition-all",children:"→"})]})]}),Vm.jsx("div",{className:"p-4 bg-white border-t",children:Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t}),Vm.jsxs("p",{className:"text-sm text-gray-500",children:["Źródło: ",o[u].source]}),o.length>1&&Vm.jsxs("p",{className:"text-sm text-gray-500",children:[u+1," z ",o.length]})]}),Vm.jsxs("div",{className:"flex space-x-2",children:[e&&e.includes("google.com/search")&&Vm.jsxs("button",{onClick:()=>window.open(e,"_blank"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Otwórz w Google"})]}),Vm.jsxs("button",{onClick:()=>window.open(o[u].url,"_blank"),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Otwórz zdjęcie"})]})]})]})})]})]})})]}):f&&!a?Vm.jsxs(Vm.Fragment,{children:[Vm.jsxs("div",{className:`relative cursor-pointer group ${n}`,onClick:g,children:[Vm.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover rounded-lg",onError:v}),Vm.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:Vm.jsx(bM,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]}),r&&Vm.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>s(!1),children:Vm.jsxs("div",{className:"relative max-w-6xl max-h-[90vh] w-full",onClick:e=>e.stopPropagation(),children:[Vm.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10 bg-black bg-opacity-50 rounded-full p-2",children:Vm.jsx(iI,{className:"h-6 w-6"})}),Vm.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[Vm.jsx("div",{className:"relative",children:Vm.jsx("img",{src:e,alt:t,className:"w-full h-[70vh] object-contain bg-gray-100"})}),Vm.jsx("div",{className:"p-4 bg-white border-t",children:Vm.jsxs("div",{className:"flex justify-between items-center",children:[Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t}),Vm.jsx("p",{className:"text-sm text-gray-500",children:"Źródło: Oryginalny link"})]}),Vm.jsxs("button",{onClick:()=>window.open(e,"_blank"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Otwórz w nowej karcie"})]})]})})]})]})})]}):Vm.jsx("div",{className:`flex items-center justify-center bg-gray-100 rounded-lg ${n}`,children:Vm.jsxs("div",{className:"text-center p-4",children:[c?Vm.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}):Vm.jsx(PM,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),Vm.jsx("p",{className:"text-xs text-gray-500 mb-2",children:c?"Ładowanie zdjęć...":"Brak zdjęcia"}),e&&"FOTO"!==e&&""!==e.trim()&&Vm.jsx("button",{onClick:()=>{console.log("Opening link:",e),window.open(e,"_blank")},className:"text-xs text-blue-600 hover:text-blue-800 underline cursor-pointer transition-colors bg-white px-2 py-1 rounded border",title:"Kliknij aby otworzyć link w nowym oknie",children:"Otwórz link"}),(!e||"FOTO"===e||""===e.trim())&&Vm.jsx("p",{className:"text-xs text-gray-400",children:"Brak linku do otwarcia"})]})})},One=()=>{const{analysisId:e,productIndex:t}=qE(),n=$E(),[r,s]=Im.useState(null),[a,i]=Im.useState(null),[o,l]=Im.useState([]),[c,d]=Im.useState(!1);Im.useEffect(()=>{console.log("📄 ProductDetailPage loaded:",{analysisId:e,productIndex:t}),e&&void 0!==t&&u()},[e,t]);const u=()=>{if(e&&void 0!==t)try{const n=localStorage.getItem("analysis-results");if(n){const r=JSON.parse(n).find(t=>t.id===e);r&&r.products[parseInt(t)]&&(i(r),s(r.products[parseInt(t)]),r.products[parseInt(t)].nazwa&&h(r.products[parseInt(t)].nazwa))}}catch(n){console.error("Błąd ładowania szczegółów produktu:",n)}},h=async e=>{d(!0);try{const t=await Mne.searchProductImages(e);l(t)}catch(t){console.error("Błąd ładowania dodatkowych zdjęć:",t),l([])}finally{d(!1)}},p=e=>e>=70?"text-green-600":e>=40?"text-yellow-600":"text-red-600";return r&&a?Vm.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs(fT,{to:n.pathname.startsWith("/paleta")?`/paleta/analysis/${e}`:`/analysis/${e}`,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Vm.jsx(nM,{className:"h-5 w-5"}),Vm.jsx("span",{children:"Powrót do analizy"})]}),Vm.jsxs("div",{className:"flex items-center justify-between",children:[Vm.jsxs("div",{className:"flex items-center space-x-3",children:[Vm.jsx(FM,{className:"h-8 w-8 text-blue-600"}),Vm.jsxs("div",{children:[Vm.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Szczegóły produktu"}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:["Z analizy: ",a.fileName]})]})]}),Vm.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${(e=>{switch(e){case"warning":return"text-yellow-600 bg-yellow-100";case"blocked":return"text-red-600 bg-red-100";case"allowed":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}})(r.status||"allowed")}`,children:[(e=>{switch(e){case"warning":case"blocked":return Vm.jsx(tM,{className:"h-4 w-4"});case"allowed":return Vm.jsx(dM,{className:"h-4 w-4"});default:return Vm.jsx(FM,{className:"h-4 w-4"})}})(r.status||"allowed"),Vm.jsx("span",{className:"text-sm font-medium",children:"warning"===r.status?"Ostrzeżenie":"blocked"===r.status?"Zablokowany":"Dozwolony"})]})]})]}),Vm.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Vm.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Vm.jsx("div",{className:"card",children:Vm.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[Vm.jsx("div",{className:"flex-shrink-0",children:Vm.jsx(Ine,{foto:r.foto,nazwa:r.nazwa,className:"w-48 h-48 mx-auto"})}),Vm.jsxs("div",{className:"flex-1 space-y-4",children:[Vm.jsxs("div",{children:[Vm.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r.nazwa}),Vm.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[Vm.jsx(JM,{className:"h-4 w-4"}),Vm.jsx("span",{children:r.kategoria})]})]}),Vm.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Vm.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Vm.jsx(vM,{className:"h-4 w-4 text-blue-600"}),Vm.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Cena sprzedaży"})]}),Vm.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[r.cenaRegularnaBrutto.toLocaleString("pl-PL")," zł"]}),Vm.jsxs("div",{className:"text-xs text-blue-600",children:["netto: ",r.cenaSprzedazyNetto.toLocaleString("pl-PL")," zł"]})]}),Vm.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Vm.jsx(eI,{className:"h-4 w-4 text-green-600"}),Vm.jsx("span",{className:"text-sm font-medium text-green-600",children:"Marża"})]}),Vm.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[r.marza.toLocaleString("pl-PL")," zł"]}),Vm.jsxs("div",{className:`text-xs font-medium ${p(r.rentownosc)}`,children:[r.rentownosc.toFixed(1),"% rentowność"]})]})]})]})]})}),o.length>0&&Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[Vm.jsx(PM,{className:"h-5 w-5 mr-2 text-blue-600"}),"Dodatkowe zdjęcia produktu"]}),c?Vm.jsx("div",{className:"flex items-center justify-center py-8",children:Vm.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Vm.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.slice(0,8).map((e,t)=>Vm.jsxs("div",{className:"relative group",children:[Vm.jsx("img",{src:e.url,alt:`${r.nazwa} - zdjęcie ${t+1}`,className:"w-full h-32 object-cover rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.open(e.url,"_blank")}),Vm.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all rounded-lg flex items-center justify-center",children:Vm.jsx(xM,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]},t))})]})]}),Vm.jsxs("div",{className:"space-y-6",children:[Vm.jsxs("div",{className:"card",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacje techniczne"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"EAN"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.ean})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Kod 1"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.kod1})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Kod 2"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.kod2})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Pack ID"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.packId})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"FC SKU"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.fcSku})]}),Vm.jsxs("div",{className:"flex justify-between py-2",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Sztuk"}),Vm.jsx("span",{className:"text-sm font-medium",children:r.pcs})]})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Szczegóły finansowe"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Cena brutto"}),Vm.jsxs("span",{className:"text-sm font-medium",children:[r.cenaRegularnaBrutto.toLocaleString("pl-PL")," ",r.waluta]})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Cena netto"}),Vm.jsxs("span",{className:"text-sm font-medium",children:[r.cenaSprzedazyNetto.toLocaleString("pl-PL")," ",r.walutaSprzedazy]})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Wartość sprzedaży"}),Vm.jsxs("span",{className:"text-sm font-medium",children:[r.wartoscSprzedazyNetto.toLocaleString("pl-PL")," ",r.walutaSprzedazy]})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Marża"}),Vm.jsxs("span",{className:"text-sm font-medium text-green-600",children:[r.marza.toLocaleString("pl-PL")," zł"]})]}),Vm.jsxs("div",{className:"flex justify-between py-2",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Rentowność"}),Vm.jsxs("span",{className:`text-sm font-medium ${p(r.rentownosc)}`,children:[r.rentownosc.toFixed(1),"%"]})]})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacje o analizie"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Plik źródłowy"}),Vm.jsx("span",{className:"text-sm font-medium",children:a.fileName})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Data uploadu"}),Vm.jsx("span",{className:"text-sm font-medium",children:a.uploadDate})]}),Vm.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Status analizy"}),Vm.jsx("span",{className:"text-sm font-medium capitalize",children:a.status})]}),Vm.jsxs("div",{className:"flex justify-between py-2",children:[Vm.jsx("span",{className:"text-sm text-gray-600",children:"Pozycja w pliku"}),Vm.jsxs("span",{className:"text-sm font-medium",children:["#",parseInt(t||"0")+1]})]})]})]}),r.link&&Vm.jsxs("div",{className:"card",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Linki"}),Vm.jsx("div",{className:"space-y-2",children:Vm.jsxs("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 transition-colors",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{className:"text-sm",children:"Zobacz w sklepie"})]})})]})]})]})]}):Vm.jsx("div",{className:"max-w-4xl mx-auto p-6",children:Vm.jsx("div",{className:"flex items-center justify-center min-h-96",children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Ładowanie szczegółów produktu..."})]})})})},zne=()=>Vm.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs(fT,{to:"/settings",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Vm.jsx(nM,{className:"h-5 w-5"}),Vm.jsx("span",{children:"Powrót do ustawień"})]}),Vm.jsxs("div",{className:"flex items-center space-x-2",children:[Vm.jsx(aM,{className:"h-6 w-6 text-blue-600"}),Vm.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pomoc i dokumentacja"})]})]}),Vm.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[Vm.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Szybka nawigacja"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Vm.jsxs("a",{href:"#installation",className:"flex items-center space-x-2 p-3 bg-white rounded-md hover:bg-blue-100 transition-colors",children:[Vm.jsx(yM,{className:"h-5 w-5 text-blue-600"}),Vm.jsx("span",{className:"text-blue-800 font-medium",children:"Instalacja AI Service"})]}),Vm.jsxs("a",{href:"#configuration",className:"flex items-center space-x-2 p-3 bg-white rounded-md hover:bg-blue-100 transition-colors",children:[Vm.jsx(HM,{className:"h-5 w-5 text-blue-600"}),Vm.jsx("span",{className:"text-blue-800 font-medium",children:"Konfiguracja"})]}),Vm.jsxs("a",{href:"#troubleshooting",className:"flex items-center space-x-2 p-3 bg-white rounded-md hover:bg-blue-100 transition-colors",children:[Vm.jsx(tM,{className:"h-5 w-5 text-blue-600"}),Vm.jsx("span",{className:"text-blue-800 font-medium",children:"Rozwiązywanie problemów"})]})]})]}),Vm.jsxs("section",{id:"installation",className:"space-y-6",children:[Vm.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[Vm.jsx(yM,{className:"h-6 w-6 mr-2 text-green-600"}),"1. Instalacja AI Service"]}),Vm.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Wymagania systemowe"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Vm.jsxs("div",{className:"bg-white rounded-md p-4",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"System operacyjny"}),Vm.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Vm.jsx("li",{children:"• Windows 10/11"}),Vm.jsx("li",{children:"• macOS 10.15+"}),Vm.jsx("li",{children:"• Linux Ubuntu 18.04+"})]})]}),Vm.jsxs("div",{className:"bg-white rounded-md p-4",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Oprogramowanie"}),Vm.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Vm.jsx("li",{children:"• Python 3.9 lub nowszy"}),Vm.jsx("li",{children:"• pip (menedżer pakietów Python)"}),Vm.jsx("li",{children:"• Dostęp do internetu"})]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Krok po kroku"}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:"1"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Pobierz i zainstaluj Python"}),Vm.jsx("p",{className:"text-sm text-gray-600 mb-3",children:'Pobierz najnowszą wersję Python z oficjalnej strony i zainstaluj z opcją "Add to PATH"'}),Vm.jsxs("div",{className:"bg-gray-900 text-green-400 p-3 rounded-md text-sm font-mono",children:[Vm.jsx("div",{children:"# Sprawdź wersję Python"}),Vm.jsx("div",{children:"python --version"}),Vm.jsx("div",{className:"text-gray-400",children:"# Powinno pokazać: Python 3.9.x lub nowszy"})]})]})]})}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:"2"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Przejdź do katalogu AI services"}),Vm.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Otwórz terminal/wiersz poleceń i przejdź do katalogu z aplikacją"}),Vm.jsxs("div",{className:"bg-gray-900 text-green-400 p-3 rounded-md text-sm font-mono",children:[Vm.jsx("div",{children:"cd ai-services"}),Vm.jsx("div",{className:"text-gray-400",children:"# Sprawdź czy katalog istnieje"}),Vm.jsx("div",{children:"ls"}),Vm.jsx("div",{className:"text-gray-400",children:"# Powinieneś zobaczyć: main.py, requirements.txt"})]})]})]})}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:"3"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Zainstaluj zależności"}),Vm.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Zainstaluj wszystkie wymagane biblioteki Python"}),Vm.jsxs("div",{className:"bg-gray-900 text-green-400 p-3 rounded-md text-sm font-mono",children:[Vm.jsx("div",{children:"pip install -r requirements.txt"}),Vm.jsx("div",{className:"text-gray-400",children:"# To może potrwać kilka minut"})]})]})]})}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:"4"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Zainstaluj model językowy"}),Vm.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Pobierz polski model językowy dla spaCy"}),Vm.jsxs("div",{className:"bg-gray-900 text-green-400 p-3 rounded-md text-sm font-mono",children:[Vm.jsx("div",{children:"python -m spacy download pl_core_news_sm"}),Vm.jsx("div",{className:"text-gray-400",children:"# Pobiera model ~40MB"})]})]})]})}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-semibold",children:"5"}),Vm.jsxs("div",{className:"flex-1",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Uruchom AI Service"}),Vm.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Uruchom serwis AI i sprawdź czy działa poprawnie"}),Vm.jsxs("div",{className:"bg-gray-900 text-green-400 p-3 rounded-md text-sm font-mono",children:[Vm.jsx("div",{children:"python main.py"}),Vm.jsx("div",{className:"text-gray-400",children:"# Powinieneś zobaczyć:"}),Vm.jsx("div",{className:"text-yellow-400",children:"INFO: Uvicorn running on http://0.0.0.0:8000"})]})]})]})})]})]}),Vm.jsxs("section",{id:"configuration",className:"space-y-6",children:[Vm.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[Vm.jsx(HM,{className:"h-6 w-6 mr-2 text-blue-600"}),"2. Konfiguracja połączenia"]}),Vm.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Domyślne ustawienia"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Vm.jsxs("div",{className:"bg-white rounded-md p-4",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Adres URL"}),Vm.jsx("code",{className:"text-sm bg-gray-100 p-2 rounded block",children:"http://localhost:8000"})]}),Vm.jsxs("div",{className:"bg-white rounded-md p-4",children:[Vm.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Port"}),Vm.jsx("code",{className:"text-sm bg-gray-100 p-2 rounded block",children:"8000"})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Konfiguracja w aplikacji"}),Vm.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx(dM,{className:"h-5 w-5 text-green-600 mt-0.5"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:"Otwórz ustawienia aplikacji"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:'Przejdź do strony "Ustawienia" w aplikacji'})]})]}),Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx(dM,{className:"h-5 w-5 text-green-600 mt-0.5"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:'Kliknij "Konfiguruj" przy AI Service'}),Vm.jsx("p",{className:"text-sm text-gray-600",children:"Otworzy się okno konfiguracji AI Service"})]})]}),Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx(dM,{className:"h-5 w-5 text-green-600 mt-0.5"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:"Testuj połączenie"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:'Kliknij "Testuj połączenie" aby sprawdzić czy AI service działa'})]})]}),Vm.jsxs("div",{className:"flex items-start space-x-4",children:[Vm.jsx(dM,{className:"h-5 w-5 text-green-600 mt-0.5"}),Vm.jsxs("div",{children:[Vm.jsx("h4",{className:"font-medium text-gray-900",children:"Zapisz konfigurację"}),Vm.jsx("p",{className:"text-sm text-gray-600",children:'Jeśli test się powiedzie, kliknij "Zapisz konfigurację"'})]})]})]})})]})]}),Vm.jsxs("section",{id:"troubleshooting",className:"space-y-6",children:[Vm.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[Vm.jsx(tM,{className:"h-6 w-6 mr-2 text-red-600"}),"3. Rozwiązywanie problemów"]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"bg-red-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"Najczęstsze problemy"}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("div",{className:"bg-white rounded-md p-4 border border-red-200",children:[Vm.jsx("h4",{className:"font-medium text-red-900 mb-2",children:'❌ Błąd: "Connection refused"'}),Vm.jsx("p",{className:"text-sm text-red-800 mb-3",children:"Aplikacja nie może połączyć się z AI service"}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rozwiązania:"}),Vm.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4",children:[Vm.jsx("li",{children:"• Sprawdź czy AI service jest uruchomiony (python main.py)"}),Vm.jsx("li",{children:"• Sprawdź czy port 8000 jest wolny"}),Vm.jsx("li",{children:"• Sprawdź poprawność adresu URL w ustawieniach"}),Vm.jsx("li",{children:"• Sprawdź czy firewall nie blokuje połączenia"})]})]})]}),Vm.jsxs("div",{className:"bg-white rounded-md p-4 border border-red-200",children:[Vm.jsx("h4",{className:"font-medium text-red-900 mb-2",children:'❌ Błąd: "Module not found"'}),Vm.jsx("p",{className:"text-sm text-red-800 mb-3",children:"Brakuje wymaganych bibliotek Python"}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rozwiązania:"}),Vm.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4",children:[Vm.jsx("li",{children:"• Uruchom: pip install -r requirements.txt"}),Vm.jsx("li",{children:"• Sprawdź czy jesteś w katalogu ai-services"}),Vm.jsx("li",{children:"• Sprawdź czy Python jest zainstalowany"}),Vm.jsx("li",{children:"• Sprawdź czy pip jest zainstalowany"})]})]})]}),Vm.jsxs("div",{className:"bg-white rounded-md p-4 border border-red-200",children:[Vm.jsx("h4",{className:"font-medium text-red-900 mb-2",children:'❌ Błąd: "spaCy model not found"'}),Vm.jsx("p",{className:"text-sm text-red-800 mb-3",children:"Brakuje modelu językowego spaCy"}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rozwiązania:"}),Vm.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4",children:[Vm.jsx("li",{children:"• Uruchom: python -m spacy download pl_core_news_sm"}),Vm.jsx("li",{children:"• Sprawdź połączenie z internetem"}),Vm.jsx("li",{children:"• Sprawdź uprawnienia do instalacji pakietów"}),Vm.jsx("li",{children:"• Spróbuj: pip install spacy"})]})]})]}),Vm.jsxs("div",{className:"bg-white rounded-md p-4 border border-red-200",children:[Vm.jsx("h4",{className:"font-medium text-red-900 mb-2",children:'❌ Błąd: "Port 8000 already in use"'}),Vm.jsx("p",{className:"text-sm text-red-800 mb-3",children:"Port 8000 jest już zajęty przez inny proces"}),Vm.jsxs("div",{className:"space-y-2",children:[Vm.jsx("p",{className:"text-sm font-medium text-red-900",children:"Rozwiązania:"}),Vm.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4",children:[Vm.jsx("li",{children:"• Zamknij inne aplikacje używające portu 8000"}),Vm.jsx("li",{children:"• Uruchom AI service na innym porcie"}),Vm.jsx("li",{children:"• Zrestartuj komputer"}),Vm.jsx("li",{children:"• Sprawdź czy nie masz już uruchomionego AI service"})]})]})]})]})]}),Vm.jsxs("div",{className:"bg-yellow-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Komendy diagnostyczne"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Sprawdź wersję Python:"}),Vm.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded text-sm font-mono",children:"python --version"})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Sprawdź zainstalowane pakiety:"}),Vm.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded text-sm font-mono",children:'pip list | grep -E "(fastapi|spacy|pandas)"'})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Sprawdź czy port 8000 jest wolny:"}),Vm.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded text-sm font-mono",children:"netstat -an | grep 8000"})]}),Vm.jsxs("div",{children:[Vm.jsx("p",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Test połączenia z AI service:"}),Vm.jsx("div",{className:"bg-gray-900 text-green-400 p-2 rounded text-sm font-mono",children:"curl http://localhost:8000/health"})]})]})]})]})]}),Vm.jsxs("section",{className:"space-y-6",children:[Vm.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[Vm.jsx(xM,{className:"h-6 w-6 mr-2 text-purple-600"}),"4. Dodatkowe zasoby"]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Vm.jsxs("div",{className:"bg-purple-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Dokumentacja techniczna"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("a",{href:"#",className:"flex items-center space-x-2 text-purple-800 hover:text-purple-600",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"API Documentation"})]}),Vm.jsxs("a",{href:"#",className:"flex items-center space-x-2 text-purple-800 hover:text-purple-600",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Architecture Overview"})]}),Vm.jsxs("a",{href:"#",className:"flex items-center space-x-2 text-purple-800 hover:text-purple-600",children:[Vm.jsx(xM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Performance Metrics"})]})]})]}),Vm.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Wsparcie"}),Vm.jsxs("div",{className:"space-y-3",children:[Vm.jsxs("div",{className:"flex items-center space-x-2 text-green-800",children:[Vm.jsx(dM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"Email: support@pallet-analysis.com"})]}),Vm.jsxs("div",{className:"flex items-center space-x-2 text-green-800",children:[Vm.jsx(dM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"GitHub Issues"})]}),Vm.jsxs("div",{className:"flex items-center space-x-2 text-green-800",children:[Vm.jsx(dM,{className:"h-4 w-4"}),Vm.jsx("span",{children:"FAQ - Często zadawane pytania"})]})]})]})]})]})]}),Dne=()=>Vm.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[Vm.jsxs("div",{className:"text-center py-8",children:[Vm.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"O aplikacji Paleta"}),Vm.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Inteligentny system analizy zestawień produktowych z wykorzystaniem sztucznej inteligencji"})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[Vm.jsx(SM,{className:"h-8 w-8 text-blue-600 mr-3"}),"Czym jest aplikacja Paleta?"]}),Vm.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-4",children:[Vm.jsxs("p",{children:[Vm.jsx("strong",{children:"Aplikacja Paleta"})," to nowoczesne narzędzie biznesowe przeznaczone do analizy zestawień produktowych w formacie Excel. System został stworzony z myślą o przedsiębiorcach, handlowcach i analitykach, którzy regularnie oceniają rentowność i opłacalność zakupów dużych zestawów produktów."]}),Vm.jsxs("p",{children:["Głównym celem aplikacji jest ",Vm.jsx("strong",{children:"automatyzacja procesu oceny zestawień produktowych"}),"poprzez inteligentną analizę danych, która pozwala na szybkie podejmowanie decyzji biznesowych opartych na konkretnych danych finansowych i trendach rynkowych."]}),Vm.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 my-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Dla kogo jest ta aplikacja?"}),Vm.jsxs("ul",{className:"list-disc list-inside text-blue-800 space-y-1",children:[Vm.jsx("li",{children:"Handlowcy i dystrybutorzy oceniający zestawienia od dostawców"}),Vm.jsx("li",{children:"Menedżerowie zakupów analizujący opłacalność inwestycji"}),Vm.jsx("li",{children:"Analitycy biznesowi oceniający rentowność produktów"}),Vm.jsx("li",{children:"Właściciele firm handlowych planujący strategie zakupowe"})]})]}),Vm.jsx("p",{children:"Aplikacja wykorzystuje zaawansowane technologie sztucznej inteligencji do automatycznej analizy danych produktowych, generowania rekomendacji zakupu i identyfikowania potencjalnych ryzyk biznesowych. Dzięki temu użytkownicy mogą podejmować świadome decyzje w oparciu o obiektywne dane, a nie intuicję."})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[Vm.jsx(dM,{className:"h-8 w-8 text-green-600 mr-3"}),"Funkcjonalności już dostępne w aplikacji"]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(SM,{className:"h-5 w-5 text-blue-600 mr-2"}),"Przesyłanie i analiza dokumentów"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Upload plików Excel"})," - Intuicyjne przesyłanie dokumentów przez przeciągnięcie lub wybór pliku"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Automatyczne parsowanie"})," - System automatycznie odczytuje i interpretuje dane z plików Excel"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Obliczanie rentowności"})," - Automatyczne kalkulacje marży i rentowności dla każdego produktu"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(rM,{className:"h-5 w-5 text-purple-600 mr-2"}),"Raporty i analizy"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Szczegółowe raporty"})," - Kompleksowe podsumowania z podziałem na kategorie rentowności"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Analiza AI zestawienia"})," - Inteligentne podsumowanie z rekomendacjami zakupu"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Historia analiz"})," - Dostęp do wszystkich wcześniej przeanalizowanych dokumentów"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(tM,{className:"h-5 w-5 text-yellow-600 mr-2"}),"System ostrzeżeń i reguł"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Reguły produktów"})," - Możliwość ustawiania ostrzeżeń dla konkretnych produktów"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Reguły kategorii"})," - Ostrzeżenia na poziomie całych kategorii produktów"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Wizualne oznaczenia"})," - Kolorowe oznaczenia ostrzeżeń w interfejsie"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(iM,{className:"h-5 w-5 text-blue-600 mr-2"}),"Sztuczna inteligencja"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Hybrid AI Service"})," - System wykorzystujący różne źródła AI (chmura, przeglądarka, Docker)"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Automatyczny wybór serwisu"})," - System sam wybiera najlepszy dostępny serwis AI"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(dM,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Rekomendacje zakupu"})," - AI generuje oceny: ZDECYDOWANIE KUP, KUP, ROZWAŻ, OSTROŻNIE, UNIKAJ"]})]})]})]})]}),Vm.jsxs("div",{className:"mt-8 bg-green-50 rounded-lg p-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Postęp prac"}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-green-600",children:"12"}),Vm.jsx("div",{className:"text-sm text-green-700",children:"Zaimplementowane funkcje"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-green-600",children:"85%"}),Vm.jsx("div",{className:"text-sm text-green-700",children:"Podstawowej funkcjonalności"})]}),Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"text-3xl font-bold text-green-600",children:"100%"}),Vm.jsx("div",{className:"text-sm text-green-700",children:"Dostępności aplikacji"})]})]})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[Vm.jsx(fM,{className:"h-8 w-8 text-orange-600 mr-3"}),"Funkcjonalności w planach rozwoju"]}),Vm.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(iM,{className:"h-5 w-5 text-blue-600 mr-2"}),"Zaawansowana AI i automatyzacja"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Rozpoznawanie produktów"})," - Automatyczne dopasowywanie nazw do baz rynkowych (Allegro, Amazon)"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Wycena rynkowa"})," - Real-time scraping cen z serwisów e-commerce"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Ocena ryzyka"})," - ML model oceny ryzyka z predykcją trendów"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Personalizacja"})," - Rekomendacje dopasowane do stylu zakupowego użytkownika"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(FM,{className:"h-5 w-5 text-purple-600 mr-2"}),"Integracje i eksport danych"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Eksport do PDF/Excel"})," - Generowanie profesjonalnych raportów do wydruku"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"API integracje"})," - Połączenie z systemami ERP i systemami zarządzania magazynem"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Automatyczne powiadomienia"})," - Email/SMS alerty o nowych analizach"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Wielojęzyczność"})," - Obsługa dokumentów w różnych językach"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(HM,{className:"h-5 w-5 text-gray-600 mr-2"}),"Zaawansowane funkcje analityczne"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Analiza trendów"})," - Porównywanie zestawień w czasie i identyfikacja trendów"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Benchmarking"})," - Porównanie z podobnymi zestawieniami w branży"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Symulacje cenowe"}),' - "Co jeśli" analizy przy różnych cenach zakupu']})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Współpraca zespołowa"})," - Udostępnianie analiz i komentarze zespołowe"]})]})]})]}),Vm.jsxs("div",{className:"space-y-4",children:[Vm.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[Vm.jsx(qM,{className:"h-5 w-5 text-red-600 mr-2"}),"Bezpieczeństwo i skalowalność"]}),Vm.jsxs("ul",{className:"space-y-2 text-gray-700",children:[Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Autentykacja użytkowników"})," - System logowania i zarządzania kontami"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Szyfrowanie danych"})," - Ochrona wrażliwych informacji biznesowych"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Skalowalność"})," - Obsługa dużych zestawów danych i wielu użytkowników"]})]}),Vm.jsxs("li",{className:"flex items-start",children:[Vm.jsx(ZM,{className:"h-4 w-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0"}),Vm.jsxs("span",{children:[Vm.jsx("strong",{children:"Backup i odzyskiwanie"})," - Automatyczne kopie zapasowe danych"]})]})]})]})]})]}),Vm.jsxs("div",{className:"card",children:[Vm.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[Vm.jsx(eI,{className:"h-8 w-8 text-blue-600 mr-3"}),"Plan rozwoju aplikacji"]}),Vm.jsxs("div",{className:"space-y-6",children:[Vm.jsxs("div",{className:"border-l-4 border-blue-500 pl-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Faza 1: Podstawowa funkcjonalność (ZAKOŃCZONA)"}),Vm.jsx("p",{className:"text-gray-700 mb-2",children:"✅ Upload dokumentów Excel, podstawowa analiza rentowności, system ostrzeżeń"}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",Vm.jsx("span",{className:"font-semibold text-green-600",children:"ZREALIZOWANE"})]})]}),Vm.jsxs("div",{className:"border-l-4 border-orange-500 pl-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-2",children:"Faza 2: AI i automatyzacja (W TRAKCIE)"}),Vm.jsx("p",{className:"text-gray-700 mb-2",children:"🔄 Rozpoznawanie produktów, wycena rynkowa, zaawansowane rekomendacje AI"}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",Vm.jsx("span",{className:"font-semibold text-orange-600",children:"W REALIZACJI"})," (60% ukończone)"]})]}),Vm.jsxs("div",{className:"border-l-4 border-gray-300 pl-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Faza 3: Integracje i eksport (PLANOWANE)"}),Vm.jsx("p",{className:"text-gray-700 mb-2",children:"📋 Eksport raportów, integracje API, automatyzacja workflow"}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",Vm.jsx("span",{className:"font-semibold text-gray-600",children:"PLANOWANE"})," (Q2 2025)"]})]}),Vm.jsxs("div",{className:"border-l-4 border-gray-300 pl-6",children:[Vm.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Faza 4: Zaawansowane funkcje (PLANOWANE)"}),Vm.jsx("p",{className:"text-gray-700 mb-2",children:"📊 Analiza trendów, benchmarking, współpraca zespołowa"}),Vm.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",Vm.jsx("span",{className:"font-semibold text-gray-600",children:"PLANOWANE"})," (Q3 2025)"]})]})]})]})]}),Lne=()=>Vm.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Vm.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[Vm.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Zaloguj się do Paleta"}),Vm.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Analiza produktów z wykorzystaniem AI"})]}),Vm.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:Vm.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Vm.jsx(UP,{routing:"hash",signUpUrl:"/#/sign-up",afterSignInUrl:"/#/dashboard"})})})]}),Fne=()=>Vm.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Vm.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[Vm.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Utwórz konto w Paleta"}),Vm.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Zacznij analizować produkty z AI już dziś"})]}),Vm.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:Vm.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Vm.jsx(WP,{routing:"hash",signInUrl:"/#/sign-in",afterSignUpUrl:"/#/dashboard"})})})]}),Bne=({children:e})=>{const{isLoaded:t,isSignedIn:n}=lP();return console.log("🔒 ProtectedRoute:",{isLoaded:t,isSignedIn:n}),t?n?Vm.jsx(Vm.Fragment,{children:e}):(console.log("🔒 ProtectedRoute: Redirecting to /about (not signed in)"),Vm.jsx(rT,{to:"/about",replace:!0})):Vm.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Vm.jsxs("div",{className:"text-center",children:[Vm.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),Vm.jsx("p",{className:"text-gray-600",children:"Ładowanie..."})]})})};function Une(){const{isSignedIn:e}=lP();return Vm.jsxs(iT,{children:[Vm.jsx(sT,{path:"/",element:e?Vm.jsx(rT,{to:"/dashboard",replace:!0}):Vm.jsx(RW,{})}),Vm.jsx(sT,{path:"/paleta",element:e?Vm.jsx(rT,{to:"/paleta/dashboard",replace:!0}):Vm.jsx(RW,{})}),Vm.jsx(sT,{path:"/sign-in",element:Vm.jsx(Lne,{})}),Vm.jsx(sT,{path:"/sign-up",element:Vm.jsx(Fne,{})}),Vm.jsx(sT,{path:"/pre-launch",element:Vm.jsx(rK,{})}),Vm.jsx(sT,{path:"/paleta/pre-launch",element:Vm.jsx(rK,{})}),Vm.jsx(sT,{path:"/*",element:Vm.jsx(lI,{children:Vm.jsxs(iT,{children:[Vm.jsx(sT,{path:"/home",element:Vm.jsx(Bne,{children:Vm.jsx(Qee,{})})}),Vm.jsx(sT,{path:"/analysis",element:Vm.jsx(Bne,{children:Vm.jsx(ete,{})})}),Vm.jsx(sT,{path:"/paleta/analysis",element:Vm.jsx(Bne,{children:Vm.jsx(ete,{})})}),Vm.jsx(sT,{path:"/dashboard",element:Vm.jsx(Bne,{children:Vm.jsx(ste,{})})}),Vm.jsx(sT,{path:"/paleta/dashboard",element:Vm.jsx(Bne,{children:Vm.jsx(ste,{})})}),Vm.jsx(sT,{path:"/rules",element:Vm.jsx(Bne,{children:Vm.jsx(_ne,{})})}),Vm.jsx(sT,{path:"/paleta/rules",element:Vm.jsx(Bne,{children:Vm.jsx(_ne,{})})}),Vm.jsx(sT,{path:"/settings",element:Vm.jsx(Bne,{children:Vm.jsx(Ene,{})})}),Vm.jsx(sT,{path:"/paleta/settings",element:Vm.jsx(Bne,{children:Vm.jsx(Ene,{})})}),Vm.jsx(sT,{path:"/analysis/:analysisId/product/:productIndex",element:Vm.jsx(Bne,{children:Vm.jsx(One,{})})}),Vm.jsx(sT,{path:"/paleta/analysis/:analysisId/product/:productIndex",element:Vm.jsx(Bne,{children:Vm.jsx(One,{})})}),Vm.jsx(sT,{path:"/analysis/:id",element:Vm.jsx(Bne,{children:Vm.jsx(Pne,{})})}),Vm.jsx(sT,{path:"/paleta/analysis/:id",element:Vm.jsx(Bne,{children:Vm.jsx(Pne,{})})}),Vm.jsx(sT,{path:"/help",element:Vm.jsx(zne,{})}),Vm.jsx(sT,{path:"/about",element:Vm.jsx(Dne,{})})]})})})]})}const Wne={}.VITE_CLERK_PUBLISHABLE_KEY,$ne=Wne&&"YOUR_PUBLISHABLE_KEY_HERE"!==Wne;Hm.createRoot(document.getElementById("root")).render(Vm.jsx(Om.StrictMode,{children:$ne?Vm.jsx(JR,{publishableKey:Wne,afterSignOutUrl:"/",children:Vm.jsx(uT,{children:Vm.jsx(Une,{})})}):Vm.jsx(uT,{children:Vm.jsx(Une,{})})}));export{cX as c,bne as s};
